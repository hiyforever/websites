!function(e){function t(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n=window.webpackJsonp;window.webpackJsonp=function(i,r){for(var a,s,c=0,l=[];c<i.length;c++)s=i[c],o[s]&&l.push.apply(l,o[s]),o[s]=0;for(a in r)e[a]=r[a];for(n&&n(i,r);l.length;)l.shift().call(null,t)};var i={},o={0:0};return t.e=function(e,n){if(0===o[e])return n.call(null,t);if(void 0!==o[e])o[e].push(n);else{o[e]=[n];var i=document.getElementsByTagName("head")[0],r=document.createElement("script");r.type="text/javascript",r.charset="utf-8",r.async=!0,r.src=t.p+""+e+".view-fde9bb8.min.js",i.appendChild(r)}},t.m=e,t.c=i,t.p="//as.eqh5.com/h5_view_2/",t.p=(/http/.test(location.protocol)?null:"http://as.eqh5.com/h5_view_2/")||t.p,t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function i(e){if(E(),v()&&!b())return window.location.href=x();a(e),h.setUp(e),ie=Date.now();var t=Promise.resolve(null);return!T()&&!J()||P()||(t=function(){var t=location.href.split("#")[0];if(e.property.wxAuth&&"miniprogram"!==window.__wxjs_environment&&!J()||e.property.wxAuth&&z()||U.getUrlParam("beancode")){var n=window.localStorage,i=n.getItem("wxCacheInfo")?JSON.parse(n.getItem("wxCacheInfo")):null,o=Date.now();return v(location.host)&&i&&o<i.time?(O.setWeChatUser(i.wx),O.initWeChat({obj:e},t),Promise.resolve(i.wx)):_(e.userId,e,e.id,e.code).then(function(i){if(i.obj){if(v(location.host)){var o={time:Date.now()+1296e6,wx:i.obj};n.setItem("wxCacheInfo",JSON.stringify(o))}return e.property.hdc&&e.property.hdc.length&&!i.obj.hdencodeid?/\.eqxiu\.cn/.test(A(window.location.href))?C(e.userId).then(function(t){return O.hrefToWxAuth(t,e.userId,e)}):O.hrefToWxAuth(null,null,e):(O.setWeChatUser(i.obj),O.initWeChat({obj:e},t),i.obj)}return/\.eqxiu\.cn/.test(A(window.location.href))?C(e.userId).then(function(t){return O.hrefToWxAuth(t,e.userId,e)}):O.hrefToWxAuth(null,null,e)})["catch"](function(e){console.error(e)})}return J()?(O.setWeChatUser(W()),Promise.resolve(O.initWeChat({obj:e},t)).then(function(){return W()})):Promise.resolve(O.initWeChat({obj:e},t))}()),t.then(function(t){return u().then(function(){return k(e).then(function(n){return n.list.length?(n.map.wxComponent&&O.setWxCompData(n.map.wxComponent),new j(n).addPageFn(B).addEleFn(F(n,t)).addEleFn(D).start(),l().then(function(t){return r(n,e)})):void s()})})})}function o(e){var t=0,n=3e3;if(e.property.logoProp&&e.property.logoProp.properties||e.loadingLogo){var i=Date.now();i-ie<n&&(t=n-(i-ie))}return t}function r(e,t){return new Promise(function(n,i){var r=window.location.href,a=U.getUrlParam("toPage");r.indexOf("toPage")>-1&&U.replaceLocationHref(U.removeUrlParam("toPage"));var s={param:r.split("?")[1],selector:"#nr",mode:"view",toPageIndex:c(e,a),autoRecordScreen:U.getUrlParam("autoRecordScreen")||!1},l=new q(te(e),s);window.app=l,Z(l,t);var u=U.getUrlParam("requestId");if(u){l.renderScene(),R();var p=l.eqxPageList[0].$section;p.siblings(".eqx-progress-bar").hide(),re(u).then(function(e){p.html(e.obj);var t=Array.from(p.find('li[ctype = "501"], li[ctype="502"], li[ctype="503"], li[ctype="504"]').find("textarea"));t.forEach(function(e){$(e).attr("val")&&$(e).val($(e).attr("val"))});var i=Array.from(p.find('li[ctype = "r"]').find(".comp_radio .options"));i.forEach(function(e){$(e).attr("val")&&$(e).find($("input:radio[value='"+$(e).attr("val")+"']")).attr("checked",!0)});var o=Array.from(p.find('li[ctype = "c"]').find(".comp_radio .options"));o.forEach(function(e){if($(e).attr("val")){var t=$(e).attr("val").split("&$");t.forEach(function(t){$(e).find($("input:checkbox[value='"+t+"']")).attr("checked",!0)})}});var r=Array.from(p.find('li[ctype = "z"]').find("select"));r.forEach(function(e){$(e).attr("val")&&$(e).val($(e).attr("val"))});var a=Array.from(p.find('li[ctype = "12"]').find(".comp_sms"));a.forEach(function(e){if($(e).attr("val")){var t=$(e).attr("val").split("&$");t.forEach(function(t){var n=JSON.parse(t);$(e).find($("input[type='"+n.name+"']")).val(""+n.value)})}});var s=Array.from(p.find('li[ctype = "25"]').find(".word-art"));return s.forEach(function(e){var t=e.id,n=$(e).css("font-family"),i=e.innerText;I({fontFamily:n,textContent:i,compId:t})}),n()})}else setTimeout(function(){l.renderScene(),Y(window.app),R(),ne(),n()},o(t))})}function a(e){v(location.host)?f.FILE=f.VIP_USER_FILE:y(location.host)||(f.SOURCE=f.BIND_USER_SOURCE,f.FILE=f.BIND_USER_FILE)}function s(){alert("此场景不存在!")}function c(e,t){var n=0;return t?(e.list.forEach(function(e,i){e.id==t&&(n=i)}),n):n}function l(){return new Promise(function(e,t){ae.delayLoadJSAndCSS(f.ASYNC_COMPS,"js").then(function(e){window.AsyncEditorTools=new window.AsyncEditorTools}).then(function(n){window.AsyncEditorTools.use(ce.map(function(e){return e.name})).then(function(n){"complete"!==n||se?t("组件安装失败"):(ce.forEach(function(e){M[e.type]=M[e.name]=window.AsyncEditorTools.comps[e.name](L,e.fn)}),se=!0),e()})["catch"](function(e){t(e)})})})}function u(){return K(window.scene)}n(2),n(3),n(15),n(16),n(17),n(18);var p=n(20);n(21).disableScreenElasticity(),n(22).disableWxFontSize(),n(41),n(42),window._DEBUG_=p.DEBUG,n(43);var d=n(44),h=n(45),f=n(24),g=n(138).sceneLoadEndHook,m=n(34),v=m.isEqxAdSceneHost,y=m.isEqxHost,b=m.checkoutEndContainRandom,x=m.createRandomHref,w=n(62).$getSceneMetaData,k=n(149).getPerfectSceneData,S=n(165),I=S.getFontFamilyByContent;d.setUp();var T=n(27).isWeixin,E=n(27).checkParams,P=n(27).isPc,_=n(80).$getUserWxInfo,C=n(80).$getWxAppId,A=n(26).getUrlHost,O=n(69),q=n(167),L=n(101),M=n(196),R=n(45).stopLoading,j=n(154),F=n(822).wxAdaptor,B=n(157).perfectPage,D=n(116).perfectComp,J=n(28).isEqxWxMini,N=n(28),z=N.isMiniWebViewLoad,W=n(28).getInfos,H=n(823),Y=H.renderMarketComp,U=n(26),X=n(55).customLoadPage,G=n(824).beforeStartHook,Q=n(825).addLoadingLogo,V=n(138),K=V.renderAd,Z=V.initAdEventListener,ee=n(66),te=ee.getSafeJson,ne=n(25).$loadAppeal,ie=void 0,oe=n(352),re=oe.$getDom,ae=n(31),se=!1,ce=n(827);$(function(){w().then(function(e){return U.getUrlParam("autoPlay")&&U.getUrlParam("autoPlayTime")&&!e.property.autoFlip&&(e.property.autoFlip=!0,e.property.autoFlipTime=Number(U.getUrlParam("autoPlayTime"))),window.scene=e,X(e).then(function(){var t=U.getUrlParam("requestId");return t||Q(e),e})}).then(function(e){G().then(function(){i(e).then(function(){g(window.app)})})})["catch"](function(e){console.log(e)})})},function(e,t){},function(e,t,n){"use strict";n(4),n(11),n(14)},function(e,t,n){n(5),n(6),n(7),n(8),n(9),n(10)},function(e,t){!function(e){e.forEach(function(e){e.hasOwnProperty("replaceWith")||Object.defineProperty(e,"replaceWith",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=Array.prototype.slice.call(arguments),t=document.createDocumentFragment();e.forEach(function(e){var n=e instanceof Node;t.appendChild(n?e:document.createTextNode(String(e)))}),this.parentNode.replaceChild(t,this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype])},function(e,t){!function(){Math.hypot=Math.hypot||function(){for(var e=0,t=arguments.length,n=0;n<t;n++){if(arguments[n]===1/0||arguments[n]===-(1/0))return 1/0;e+=arguments[n]*arguments[n]}return Math.sqrt(e)}}()},function(e,t){!function(){"function"!=typeof Object.values&&!function(){Object.values=function(e){"use strict";if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t}}(),"function"!=typeof Object.assign&&!function(){Object.assign=function(e){"use strict";if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(void 0!==i&&null!==i)for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])}return t}}()}()},function(e,t){!function(){Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},Number.isNaN=Number.isNaN||function(e){return"number"==typeof e&&isNaN(e)},Number.parseInt=parseInt,Number.parseFloat=parseFloat}()},function(e,t){!function(){String.prototype.includes||(String.prototype.includes=function(e,t){"use strict";return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&this.indexOf(e,t)!==-1}),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var n=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>n.length)&&(t=n.length),t-=e.length;var i=n.indexOf(e,t);return i!==-1&&i===t})}()},function(e,t){!function(){Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.includes||(Array.prototype.includes=function(e){"use strict";var t=Object(this),n=parseInt(t.length)||0;if(0===n)return!1;var i,o=parseInt(arguments[1])||0;o>=0?i=o:(i=n+o,i<0&&(i=0));for(var r;i<n;){if(r=t[i],e===r||e!==e&&r!==r)return!0;i++}return!1}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){"use strict";if(null==this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),i=n.length>>>0,o=arguments[1],r=0;r<i;r++)if(t=n[r],e.call(o,t,r,n))return r;return-1},enumerable:!1,configurable:!1,writable:!1}),Array.prototype.find||(Array.prototype.find=function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),i=n.length>>>0,o=arguments[1],r=0;r<i;r++)if(t=n[r],e.call(o,t,r,n))return t}),Array.from||(Array.from=function(){var e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},n=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},i=Math.pow(2,53)-1,o=function(e){var t=n(e);return Math.min(Math.max(t,0),i)};return function(e){var n=this,i=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var r,a=arguments.length>1?arguments[1]:void 0;if("undefined"!=typeof a){if(!t(a))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(r=arguments[2])}for(var s,c=o(i.length),l=t(n)?Object(new n(c)):new Array(c),u=0;u<c;)s=i[u],a?l[u]="undefined"==typeof r?a(s,u):a.call(r,s,u):l[u]=s,u+=1;return l.length=c,l}}())}()},function(e,t,n){(function(e){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(n){function i(e,t){return function(){e.apply(t,arguments)}}function o(e){if("object"!==t(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(e,this)}function r(e,t){for(;3===e._state;)e=e._value;return 0===e._state?void e._deferreds.push(t):(e._handled=!0,void d(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._state?a:s)(t.promise,e._value);var i;try{i=n(e._value)}catch(o){return void s(t.promise,o)}a(t.promise,i)}))}function a(e,n){try{if(n===e)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"===("undefined"==typeof n?"undefined":t(n))||"function"==typeof n)){var r=n.then;if(n instanceof o)return e._state=3,e._value=n,void c(e);if("function"==typeof r)return void u(i(r,n),e)}e._state=1,e._value=n,c(e)}catch(a){s(e,a)}}function s(e,t){e._state=2,e._value=t,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&setTimeout(function(){e._handled||h(e._value)},1);for(var t=0,n=e._deferreds.length;t<n;t++)r(e,e._deferreds[t]);e._deferreds=null}function l(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function u(e,t){var n=!1;try{e(function(e){n||(n=!0,a(t,e))},function(e){n||(n=!0,s(t,e))})}catch(i){if(n)return;n=!0,s(t,i)}}var p=setTimeout,d="function"==typeof e&&e||function(e){p(e,1)},h=function(e){console.warn("Possible Unhandled Promise Rejection:",e)},f=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};o.prototype["catch"]=function(e){return this.then(null,e)},o.prototype.then=function(e,t){var n=new o(noop);return r(this,new l(e,t,n)),n},o.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&f(arguments[0])?arguments[0]:arguments);return new o(function(n,i){function o(a,s){try{if(s&&("object"===("undefined"==typeof s?"undefined":t(s))||"function"==typeof s)){var c=s.then;if("function"==typeof c)return void c.call(s,function(e){o(a,e)},i)}e[a]=s,0===--r&&n(e)}catch(l){i(l)}}if(0===e.length)return n([]);for(var r=e.length,a=0;a<e.length;a++)o(a,e[a])})},o.resolve=function(e){return e&&"object"===("undefined"==typeof e?"undefined":t(e))&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(e){return new o(function(t,n){n(e)})},o.race=function(e){return new o(function(t,n){for(var i=0,o=e.length;i<o;i++)e[i].then(t,n)})},o._setImmediateFn=function(e){d=e},o._setUnhandledRejectionFn=function(e){h=e},window.Promise?o=window.Promise:window.Promise=o,o.prototype["finally"]=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){throw n})})}}(void 0)}).call(t,n(12).setImmediate)},function(e,t,n){(function(e,i){function o(e,t){this._id=e,this._clearFn=t}var r=n(13).nextTick,a=Function.prototype.apply,s=Array.prototype.slice,c={},l=0;t.setTimeout=function(){return new o(a.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new o(a.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},t.setImmediate="function"==typeof e?e:function(e){var n=l++,i=!(arguments.length<2)&&s.call(arguments,1);return c[n]=!0,r(function(){c[n]&&(i?e.apply(null,i):e.call(null),t.clearImmediate(n))}),n},t.clearImmediate="function"==typeof i?i:function(e){delete c[e]}}).call(t,n(12).setImmediate,n(12).clearImmediate)},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(u===setTimeout)return setTimeout(e,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function r(e){if(p===clearTimeout)return clearTimeout(e);if((p===i||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(e);try{return p(e)}catch(t){try{return p.call(null,e)}catch(t){return p.call(this,e)}}}function a(){g&&h&&(g=!1,h.length?f=h.concat(f):m=-1,f.length&&s())}function s(){if(!g){var e=o(a);g=!0;for(var t=f.length;t;){for(h=f,f=[];++m<t;)h&&h[m].run();m=-1,t=f.length}h=null,g=!1,r(e)}}function c(e,t){this.fun=e,this.array=t}function l(){}var u,p,d=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(e){u=n}try{p="function"==typeof clearTimeout?clearTimeout:i}catch(e){p=i}}();var h,f=[],g=!1,m=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new c(e,t)),1!==f.length||g||o(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.prependListener=l,d.prependOnceListener=l,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t){!function(e){"use strict";function t(e){var t="",n=!0;return e.forEach(function(e){var i=encodeURIComponent(e.name),o=encodeURIComponent(e.value);n||(t+="&"),t+=i+"="+o,n=!1}),t.replace(/%20/g,"+")}function n(e,t){var n=e.split("&");t&&n[0].indexOf("=")===-1&&(n[0]="="+n[0]);var i=[];n.forEach(function(e){if(0!==e.length){var t=e.indexOf("=");if(t!==-1)var n=e.substring(0,t),o=e.substring(t+1);else n=e,o="";n=n.replace(/\+/g," "),o=o.replace(/\+/g," "),i.push({name:n,value:o})}});var o=[];return i.forEach(function(e){o.push({name:decodeURIComponent(e.name),value:decodeURIComponent(e.value)})}),o}function i(e){if(a)return new s(e);var t=document.createElement("a");return t.href=e,t}function o(e){var i=this;this._list=[],void 0!==e&&null!==e||(e=""),Object(e)===e&&e instanceof o||(e=String(e)),"string"==typeof e&&"?"===e.substring(0,1)&&(e=e.substring(1)),"string"==typeof e?this._list=n(e):this._list=e._list.slice(),this._url_object=null,this._setList=function(e){r||(i._list=e)};var r=!1;this._update_steps=function(){r||(r=!0,i._url_object&&("about:"===i._url_object.protocol&&i._url_object.pathname.indexOf("?")!==-1&&(i._url_object.pathname=i._url_object.pathname.split("?")[0]),i._url_object.search=t(i._list),r=!1))}}function r(t,r){function c(){var e=u.href.replace(/#$|\?$|\?(?=#)/g,"");u.href!==e&&(u.href=e)}function l(){h._setList(u.search?n(u.search.substring(1)):[]),h._update_steps()}if(!(this instanceof e.URL))throw new TypeError("Failed to construct 'URL': Please use the 'new' operator.");r&&(t=function(){if(a)return new s(t,r).href;var e;if(document.implementation&&document.implementation.createHTMLDocument?e=document.implementation.createHTMLDocument(""):document.implementation&&document.implementation.createDocument?(e=document.implementation.createElement("http://www.w3.org/1999/xhtml","html",null),e.documentElement.appendChild(e.createElement("head")),e.documentElement.appendChild(e.createElement("body"))):window.ActiveXObject&&(e=new window.ActiveXObject("htmlfile"),e.write("<head></head><body></body>"),e.close()),!e)throw Error("base not supported");var n=e.createElement("base");n.href=r,e.getElementsByTagName("head")[0].appendChild(n);var i=e.createElement("a");return i.href=t,i.href}());var u=i(t||""),p=function(){if(!("defineProperties"in Object))return!1;try{var e={};return Object.defineProperties(e,{prop:{get:function(){return!0}}}),e.prop}catch(t){return!1}}(),d=p?this:document.createElement("a"),h=new o(u.search?u.search.substring(1):null);return h._url_object=d,Object.defineProperties(d,{href:{get:function(){return u.href},set:function(e){u.href=e,c(),l()},enumerable:!0,configurable:!0},origin:{get:function(){return"origin"in u?u.origin:this.protocol+"//"+this.host},enumerable:!0,configurable:!0},protocol:{get:function(){return u.protocol},set:function(e){u.protocol=e},enumerable:!0,configurable:!0},username:{get:function(){return u.username},set:function(e){u.username=e},enumerable:!0,configurable:!0},password:{get:function(){return u.password},set:function(e){u.password=e},enumerable:!0,configurable:!0},host:{get:function(){var e={"http:":/:80$/,"https:":/:443$/,"ftp:":/:21$/}[u.protocol];return e?u.host.replace(e,""):u.host},set:function(e){u.host=e},enumerable:!0,configurable:!0},hostname:{get:function(){return u.hostname},set:function(e){u.hostname=e},enumerable:!0,configurable:!0},port:{get:function(){return u.port},set:function(e){u.port=e},enumerable:!0,configurable:!0},pathname:{get:function(){return"/"!==u.pathname.charAt(0)?"/"+u.pathname:u.pathname},set:function(e){u.pathname=e},enumerable:!0,configurable:!0},search:{get:function(){return u.search},set:function(e){u.search!==e&&(u.search=e,c(),l())},enumerable:!0,configurable:!0},searchParams:{get:function(){return h},enumerable:!0,configurable:!0},hash:{get:function(){return u.hash},set:function(e){u.hash=e,c()},enumerable:!0,configurable:!0},toString:{value:function(){return u.toString()},enumerable:!1,configurable:!0},valueOf:{value:function(){return u.valueOf()},enumerable:!1,configurable:!0}}),d}var a,s=e.URL;try{if(s){if(a=new e.URL("http://example.com"),"searchParams"in a)return;"href"in a||(a=void 0)}}catch(c){}if(Object.defineProperties(o.prototype,{append:{value:function(e,t){this._list.push({name:e,value:t}),this._update_steps()},writable:!0,enumerable:!0,configurable:!0},"delete":{value:function(e){for(var t=0;t<this._list.length;)this._list[t].name===e?this._list.splice(t,1):++t;this._update_steps()},writable:!0,enumerable:!0,configurable:!0},get:{value:function(e){for(var t=0;t<this._list.length;++t)if(this._list[t].name===e)return this._list[t].value;return null},writable:!0,enumerable:!0,configurable:!0},getAll:{value:function(e){for(var t=[],n=0;n<this._list.length;++n)this._list[n].name===e&&t.push(this._list[n].value);return t},writable:!0,enumerable:!0,configurable:!0},has:{value:function(e){for(var t=0;t<this._list.length;++t)if(this._list[t].name===e)return!0;return!1},writable:!0,enumerable:!0,configurable:!0},set:{value:function(e,t){for(var n=!1,i=0;i<this._list.length;)this._list[i].name===e?n?this._list.splice(i,1):(this._list[i].value=t,n=!0,++i):++i;n||this._list.push({name:e,value:t}),this._update_steps()},writable:!0,enumerable:!0,configurable:!0},entries:{value:function(){var e=this,t=0;return{next:function(){if(t>=e._list.length)return{done:!0,value:void 0};var n=e._list[t++];return{done:!1,value:[n.name,n.value]}}}},writable:!0,enumerable:!0,configurable:!0},keys:{value:function(){var e=this,t=0;return{next:function(){if(t>=e._list.length)return{done:!0,value:void 0};var n=e._list[t++];return{done:!1,value:n.name}}}},writable:!0,enumerable:!0,configurable:!0},values:{value:function(){var e=this,t=0;return{next:function(){if(t>=e._list.length)return{done:!0,value:void 0};var n=e._list[t++];return{done:!1,value:n.value}}}},writable:!0,enumerable:!0,configurable:!0},forEach:{value:function(e){var t=arguments.length>1?arguments[1]:void 0;this._list.forEach(function(n,i){e.call(t,n.name,n.value)})},writable:!0,enumerable:!0,configurable:!0},toString:{value:function(){return t(this._list)},writable:!0,enumerable:!1,configurable:!0}}),"Symbol"in e&&"iterator"in e.Symbol&&Object.defineProperty(o.prototype,e.Symbol.iterator,{value:o.prototype.entries,writable:!0,enumerable:!0,configurable:!0}),s)for(var l in s)s.hasOwnProperty(l)&&"function"==typeof s[l]&&(r[l]=s[l]);e.URL=r,e.URLSearchParams=o}(window)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n(19),0===location.hostname.indexOf("wap")&&$(document.body).addClass("wap-scene")},function(e,t){},function(e,t){"use strict";e.exports={env:"product",publicHost:"//as.eqh5.com/",HOST:"//www.eqxiu.com/",AD_HOST:"//ad.eqxiu.com/",EQX:"//www.eqxiu.com/",WAP_HOST:"//wap.eqxiu.com/",VIEW_HOST:"//h5.eqxiu.com/",VIEW_HOST_EBDAN:"//h5.ebdan.net/",SERVER_0:"//h5s-api.eqxiu.com/",SERVER_3:"//service.eqxiu.com/",SERVER_MEMBER:"//member.eqxiu.com/",INFO_SERVER:"//passport.eqxiu.com/",SERVER_1:"//s1.eqxiu.com/",SERVER_4:"//h5view-api.eqxiu.com/",SERVER_2:"//s2.eqxiu.com/",SERVER_S3:"//s3.eqxiu.com/",FLOW_SERVER:"//s8-api-cdn.eqxiu.com/",FLOW_BEANJS:"//yqxiuapp.com/",FLOW_ADJS:"//lib.eqh5.com/",SERVER_1_CDN:"//s1-cdn.eqxiu.com/",SERVER_MAX:"//max.eqxiu.com/",QUERY_SERVER:"//search.eqxiu.com/",WAP_SERVER:"//ie.eqxiu.com/",PAY_SERVER:"//xiupay.eqxiu.com/",MOBILE_SERVER_1:"//m1.eqxiu.com/",WX_API:"//s1.eqxiu.com/",H5WX_API:"//h5wx-api.eqxiu.com/",WX_thirdOpenId:"//wx-callback.eqxiu.com/",MATERIAL_API:"//material-api.eqxiu.com/",DOWN_VIDEO:"//h5s-api.eqxiu.com/",H5_CONFIG:"//h5config-api.eqxiu.com/",AUTH_FILE_PATH:{js:"//lib.eqh5.com/auth-modal/auth-modal.min.js",css:"//lib.eqh5.com/auth-modal/auth-modal.min.css"},EQX_HD_PLUGIN:{js:"//lib.eqh5.com/@eqxiu/eqx-hd-plugin/0.0.1/js/hdPlugin.js",css:"//lib.eqh5.com/@eqxiu/eqx-hd-plugin/0.0.1/css/hdPlugin.css"},ASYNC_COMPS:"https://lib.eqh5.com/@eqxiu/editor-plugin/2.9.9/js/eqx-editor-comps-2.9.9.js",BIG_DATA:"//datalog.eqxiu.com/",TRACK:"//da.eqxiu.com/",WX_WORK:"//wxwork.eqxiu.com/",PAY_HOST:"//www.eqxiu.com/",MALL_HOST:"//store.eqxiu.com/",MSEARCH_HOST:"//msearch-api.eqxiu.com/",STORE:"//store.eqxiu.com/",YQC:"//as.eqh5.cn/",PAY_XD_HOST:"//pay.eqxiu.com/",MP1_HOST:"//mp1-api.eqxiu.com/",MALL_MATERIAL:"//emw-api.eqxiu.com/",MALL_BUY_ID:"10002",MALL_PIC_ID:"889874",MALL_MUSIC_ID:"889875",MALL_SOUND_ID:"889877",MALL_FONT_ID:"889873",MATERIAL_FRONT_CATEGORY_ID:"667",MATERIAL_PIC_CATEGORY_ID:"897978",MALL_PIC_ID_NEW:"890729",MALL_MUSIC_ID_NEW:"890727",MALL_SOUND_ID_NEW:"890728",MALL_FONT_ID_NEW:"890726",MALL_PAGE_ID_NEW:"890731",MALL_PAGE_ID_NEW_LANDSCAPE:"894842",MALL_PAGE_ID_SCENE:"893616",MALL_FUNCTION_ID_NEW:"890730",MALL_FUNCTION_ID_NEW_DEFAULT:"890845",MALL_PIC_ID_DEFAULT:"890930",MALL_BG_ID_DEFAULT:"890810",MALL_MUSIC_ID_DEFAULT:"890935",MALL_SOUND_ID_DEFAULT:"890933",MALL_FONT_ID_DEFAULT:"890934",MALL_TEXT_TEMPLATE:"892707",MALL_IMAGE_TEMPLATE:"892708",MALL_GRAPHIC_TEMPLATE:"893196",MALL_LONG_PAGE_TEMPLATE:"892646",MALL_FORM_TEMPLATE:"892245",MALL_BUTTON_TEMPLATE:"892246",MALL_VOTE_TEMPLATE:"892247",MALL_INTERACTIVE_TEMPLATE:"892248",MALL_CHART_TEMPLATE:"892249",SOURCE:"//as.eqh5.com/c/",BIND_USER_SOURCE:"//as.eqxiu.com/c/",WX_APP_ID:"wxd9d2e6c45617efd1",WX_APP_ID_WAP:"wxd9d2e6c45617efd1",DOMAIN:"eqxiu",EQX_TPL_DOMAIN:"h5.eqxiu.com",EQX_FAN_DOMAIN:"scene.eqxiu.com",EQX_AD_DOMAIN:"scene.eqh5.cn",EQX_VIP_DOMAIN:"vip.eqxiu.cn",EQX_COMPANY_DOMAIN:"scene.eqxiu.cn",EQX_TG:"tg.eqxiu.com",EQX_APP_DOMAIN:"m.eqxiu.com",EQX_NO_BUSINESS_DOMAIN:"eqxiu.com",EQX_BATCH_SCENES_DOMAIN:"eqxiu.tv",XUTTUI:"//xt.eqxiu.com/",WORK_DOMAIN:"//work-api.eqxiu.com/",LWORK:"//lwork-api.eqxiu.com/",FILE:"//asset.eqh5.com/",BIND_USER_FILE:"//asset.eqh5.com/",FREE_USER_FILE:"//asset.eqh5.com/",VIP_USER_FILE:"//asset.eqh5.com/",FONT:"//font.eqh5.com/",VIDEO:"//asset-v.eqh5.com/",WAP_TPL_CENTER:"http://wap.eqxiu.com/wpmall/cats",TENCENTVIDEO:"//video-1251586368.file.myqcloud.com",TENCENTIMAGE:"//video-1251586368.image.myqcloud.com",ToH2:"//p1.eqxiu.com/",LongPage:"//lpservice.eqxiu.com/",LongPage_PREVIEW:"//lp.eqxiu.com/",Audit:"//check.eqxiu.com/",Storemarket:"//storemarketing-api.eqxiu.com/",fontDialog:{css:"//www.eqxiu.com/eqx-market/0.3.3/eqx-font-dialog.css",js:"//www.eqxiu.com/eqx-market/0.3.3/eqx-font-dialog.umd.min.js"},memberBenefits:{css:"//www.eqxiu.com/eqx-market/0.3.3/eqx-member-benefits.css",js:"//www.eqxiu.com/eqx-market/0.3.3/eqx-member-benefits.umd.min.js"},materialFontExpired:{css:"//www.eqxiu.com/eqx-material/2.0.0/css/eqx-material.min.css",js:"//www.eqxiu.com/eqx-material/2.0.0/js/eqx-material.min.js"},browserRecommends:{css:"//www.eqxiu.com/eqx-market/0.3.3/eqx-browser-recommend.css",js:"//www.eqxiu.com/eqx-market/0.3.3/eqx-browser-recommend.umd.min.js"},eqxFeedback:"//lib.eqh5.com/eqx.sdk.feedback/1.0.2/index.js"}},function(e,t){"use strict";function n(){var e=$(window);e.on("scroll.elasticity",function(e){e.preventDefault()}).on("touchmove.elasticity",function(e){e.preventDefault()}),e.delegate("img","mousemove",function(e){e.preventDefault()})}function i(){function e(e){e.addEventListener("touchmove",function(e){e._isScroller=!0})}return document.body.addEventListener("touchmove",function(e){e._isScroller?e.stopPropagation():e.preventDefault()}),{overScroll:e}}e.exports={disableScreenElasticity:n,canScreenElasticity:i}},function(e,t,n){"use strict";function i(e,t,n){window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+e+"&redirect_uri="+encodeURIComponent(t+"eqs/rel-account/wechat-mp?appId="+e)+"&response_type=code&scope=snsapi_userinfo&state="+encodeURIComponent(n)+"#wechat_redirect"}function o(e){var t=null,n=/^([\w\W]*\.scene\.)/g;return n.test(e)&&(t=e.replace(n,"")),t}function r(e){if(document.title=e,/ip(hone|od|ad)/i.test(navigator.userAgent)){var t=document.createElement("iframe");t.src="http://lib.eqh5.com/favicon.ico",t.style.display="none",t.onload=function(){setTimeout(function(){t.remove()},9)},document.body.appendChild(t)}}function a(){function e(){WeixinJSBridge.invoke("setFontSizeCallback",{fontSize:0}),WeixinJSBridge.on("menu:setfont",function(){WeixinJSBridge.invoke("setFontSizeCallback",{fontSize:0})})}I()&&T()&&("object"==("undefined"==typeof WeixinJSBridge?"undefined":m(WeixinJSBridge))&&"function"==typeof WeixinJSBridge.invoke?e():document.addEventListener?document.addEventListener("WeixinJSBridgeReady",e,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",e),document.attachEvent("onWeixinJSBridgeReady",e)))}function s(){var e=k(window.location.href),t="eqs/s/wx/ticket/get?time="+Date.now(),n=o(e);return L()&&!n?t+="&domain=eqxiu.cn":R.some(function(t){return t.test(e)})||(/\.eqxiu\.cn/.test(e)?(t+="&domain=eqxiu.cn",t+="&userId="+window.scene.userId):t+=/\.iqeqxiu\.cn/.test(e)?"&domain=iqeqxiu.cn":n?"&domain="+n:"&domain="+e),v({type:"GET",url:y.WX_API+t})}function c(){var e="api/wx/get-jsticket?time="+Date.now()+"&appId="+M.APP_ID_WAP;return console.log("getWxTicket2",e),v({type:"GET",url:y.WAP_SERVER+e}).then(function(e){return e&&e.obj?{obj:{appId:M.APP_ID_WAP,ticket:e.obj}}:Promise.reject("无微信 ticket: "+M.APP_ID_WAP)})}function l(e){return new Promise(function(t,n){wx.chooseWXPay({timestamp:e.timeStamp,nonceStr:e.nonceStr,"package":e.packageName,signType:e.signType,paySign:e.paySign,success:function(e){t(e)},cancel:function(e){n(e)}})})}function u(e){return new Promise(function(t,n){console.log("微信jssdk init"),d({},"wxd9d2e6c45617efd1").then(function(){console.log("微信jssdk chooseWXPay");var i=e["package"];i.startsWith("prepay_id=")||(i="prepay_id="+i),wx.chooseWXPay({timestamp:e.timeStamp,nonceStr:e.nonceStr,"package":i,signType:e.signType,paySign:e.paySign,success:function(e){console.log("微信jssdk chooseWXPay success "),alert("充值成功"),t()},cancel:function(e){console.log("充值失败"),alert("充值失败"),console.log(e),n("充值失败")}})})})}function p(e,t,n){return new Promise(function(t,n){console.log("微信jssdk init"),h({},"wxd9d2e6c45617efd1",!0).then(function(){console.log("微信jssdk chooseWXPay");var i=e["package"];i.startsWith("prepay_id=")||(i="prepay_id="+i),wx.chooseWXPay({timestamp:e.timeStamp,nonceStr:e.nonceStr,"package":i,signType:e.signType,paySign:e.paySign,success:function(e){console.log("微信jssdk chooseWXPay success "),t()},cancel:function(e){console.log("充值失败"),console.log(e),n(e)}})})})}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=2===e.ticket?c:s;return j&&!t?j:j=Promise.all([x(),n(),w()]).then(function(e){var n=e[1].obj,i=n.appId,o=n.ticket;return new Promise(function(e,n){if(i&&o&&o!==-1){var r=location.href.split("#")[0],a="jsapi_ticket="+o+"&noncestr="+_+"&timestamp="+C+"&url="+r,s=new jsSHA("SHA-1","TEXT");s.update(a);var c=s.getHash("HEX");console.log("wx config appId "+i+", sign "+a+", hash "+c),console.log(C),console.log(_),wx.config({debug:!1,appId:t||i,timestamp:C,nonceStr:_,signature:c,jsApiList:["chooseWXPay","checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","chooseImage","previewImage","getLocalImgData","uploadImage","downloadImage","startRecord","addCard","stopRecord","onVoiceRecordEnd","playVoice","pauseVoice","stopVoice","onVoicePlayEnd","uploadVoice","downloadVoice","openLocation","getLocation"]}),wx.ready(function(){e()})}else n()})})}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=arguments[2],i=2===e.ticket?c:s;
return j&&!n?j:j=Promise.all([x(),i(),w()]).then(function(e){var n=e[1].obj,i=n.appId,o=n.ticket;return new Promise(function(e,n){if(i&&o&&o!==-1){var r=location.href.split("#")[0],a="jsapi_ticket="+o+"&noncestr="+_+"&timestamp="+C+"&url="+r,s=new jsSHA("SHA-1","TEXT");s.update(a);var c=s.getHash("HEX");console.log("wx config appId "+i+", sign "+a+", hash "+c),console.log(C),console.log(_),wx.config({debug:!1,appId:t||i,timestamp:C,nonceStr:_,signature:c,jsApiList:["chooseWXPay","checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","chooseImage","previewImage","getLocalImgData","uploadImage","downloadImage","startRecord","addCard","stopRecord","onVoiceRecordEnd","playVoice","pauseVoice","stopVoice","onVoicePlayEnd","uploadVoice","downloadVoice","openLocation","getLocation"]}),wx.ready(function(){e()})}else n()})})}function f(){return j?j:j=Promise.all([x(),c(),w()]).then(function(e){var t=e[1].obj,n=t.appId,i=t.ticket;return new Promise(function(e,t){if(n&&i&&i!==-1){var o=location.href.split("#")[0],r="eqxiuview",a=Date.now(),s="jsapi_ticket="+i+"&noncestr="+r+"&timestamp="+a+"&url="+o,c=new jsSHA("SHA-1","TEXT");c.update(s);var l=c.getHash("HEX");console.log("wx config appId "+n+", sign "+s+", hash "+l),wx.config({debug:!1,appId:n,timestamp:a,nonceStr:r,signature:l,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","chooseImage","previewImage","getLocalImgData","uploadImage","downloadImage","startRecord","stopRecord","onVoiceRecordEnd","playVoice","pauseVoice","stopVoice","onVoicePlayEnd","uploadVoice","downloadVoice"]}),wx.ready(function(){e()})}else t()})})}function g(e){var t=e.title,n=e.desc,i=e.link,o=e.imgUrl,r=e.success,a=e.cancel,s=e.opts,c=i;return O()&&(c=c.replace(/\/[\d]{5,}/gi,"/"+Date.now())),d(s).then(function(){wx.onMenuShareTimeline({title:t,link:c,imgUrl:o,success:function(){E(r)&&r()},cancel:function(){E(a)&&a()}}),wx.onMenuShareAppMessage({title:t,desc:n,link:c,imgUrl:o,success:function(){E(r)&&r()},cancel:function(){E(a)&&a()}}),wx.onMenuShareQQ({title:t,desc:n,link:c,imgUrl:o,success:function(){E(r)&&r()},cancel:function(){E(a)&&a()}}),wx.onMenuShareWeibo({title:t,desc:n,link:c,imgUrl:o,success:function(){E(r)&&r()},cancel:function(){E(a)&&a()}}),wx.onMenuShareQZone({title:t,desc:n,link:c,imgUrl:o,success:function(){E(r)&&r()},cancel:function(){E(a)&&a()}})})}var m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v=n(23).ajax,y=n(24),b=n(25),x=b.$loadJWeixin,w=b.$loadSHA,k=n(26).getUrlHost,S=n(27),I=S.isWeixin,T=S.isAndroid,$=n(32),E=$.isFunction,P=n(33),_=P.wxNonceStr,C=P.wxTimestamp,A=n(34),O=A.isEqxAdSceneHost,q=n(40),L=q.hasMarketComp,M=n(33),R=[/eqxiu\.com/,/eqxiu\.cc/,/eqshow\.cn/,/yqxiu\.cn/],j=null;e.exports={register:i,disableWxFontSize:a,setDocumentTitle:r,initWx:d,initWx2:f,setWxShareInfo:g,wxPay:l,wxPay2:u,wxPay3:p}},function(e,t){"use strict";function n(e){return Promise.resolve(e)}function i(e){return new Promise(function(t,n){$.ajax($.extend({},e,{success:function(e){e&&e.success===!1?n(e):t(e)},error:function(){for(var t,i=arguments.length,o=Array(i),r=0;r<i;r++)o[r]=arguments[r];(t=console).error.apply(t,[e].concat(o)),n.apply(void 0,o)}}))})}function o(e){return new Promise(function(t,n){$.ajax($.extend({xhrFields:{withCredentials:!0},crossDomain:!0},e,{success:function(e){e&&e.success===!1?n(e):t(e)},error:function(){for(var t,i=arguments.length,o=Array(i),r=0;r<i;r++)o[r]=arguments[r];(t=console).error.apply(t,[e].concat(o)),n.apply(void 0,o)}}))})}e.exports={ajax:o,$ajax:i,fajax:n}},function(e,t,n){"use strict";function i(e){var t=window.location.protocol;return"file:"===t&&(t="http:"),e&&e.startsWith("//")?t+e:e}var o=n(20),r={publicHost:o.publicHost,SERVER_0:o.SERVER_0,SERVER_3:o.SERVER_3,SERVER_MEMBER:o.SERVER_MEMBER,INFO_SERVER:o.INFO_SERVER,SERVER_1:o.SERVER_1,SERVER_4:o.SERVER_4,SERVER_2:o.SERVER_2,SERVER_S3:o.SERVER_S3,SERVER_1_CDN:o.SERVER_1_CDN,FLOW_SERVER:o.FLOW_SERVER,FLOW_BEANJS:o.FLOW_BEANJS,FLOW_ADJS:o.FLOW_ADJS,WAP_SERVER:o.WAP_SERVER,SERVER_MAX:o.SERVER_MAX,QUERY_SERVER:o.QUERY_SERVER,PAY_SERVER:o.PAY_SERVER,FONT:o.FONT,HOST:o.HOST,AD_HOST:o.AD_HOST,EQX:o.EQX,WAP_HOST:o.WAP_HOST,VIEW_HOST:o.VIEW_HOST,VIEW_HOST_EBDAN:o.VIEW_HOST_EBDAN,MATERIAL_API:o.MATERIAL_API,PAY_HOST:o.PAY_HOST,MALL_HOST:o.MALL_HOST,MSEARCH_HOST:o.MSEARCH_HOST,MOBILE_SERVER_1:o.MOBILE_SERVER_1,WX_API:o.WX_API,H5WX_API:o.H5WX_API,WX_thirdOpenId:o.WX_thirdOpenId,DOWN_VIDEO:o.DOWN_VIDEO,ASYNC_COMPS:o.ASYNC_COMPS,SOURCE:o.SOURCE,BIND_USER_SOURCE:o.BIND_USER_SOURCE,TRACK:o.TRACK,STORE:o.STORE,YQC:o.YQC,PAY_XD_HOST:o.PAY_XD_HOST,XUTTUI:o.XUTTUI,WORK_DOMAIN:o.WORK_DOMAIN,LWORK:o.LWORK,WX_WORK:o.WX_WORK,BIND_USER_FILE:o.BIND_USER_FILE,FREE_USER_FILE:o.FREE_USER_FILE,VIP_USER_FILE:o.VIP_USER_FILE,FILE:o.FILE,DOMAIN:o.DOMAIN,EQX_FAN_DOMAIN:o.EQX_FAN_DOMAIN,EQX_AD_DOMAIN:o.EQX_AD_DOMAIN,EQX_VIP_DOMAIN:o.EQX_VIP_DOMAIN,EQX_COMPANY_DOMAIN:o.EQX_COMPANY_DOMAIN,EQX_TG:o.EQX_TG,EQX_APP_DOMAIN:o.EQX_APP_DOMAIN,EQX_NO_BUSINESS_DOMAIN:o.EQX_NO_BUSINESS_DOMAIN,EQX_BATCH_SCENES_DOMAIN:o.EQX_BATCH_SCENES_DOMAIN,MALL_BUY_ID:o.MALL_BUY_ID,MALL_PIC_ID:o.MALL_PIC_ID,MALL_MUSIC_ID:o.MALL_MUSIC_ID,MALL_SOUND_ID:o.MALL_SOUND_ID,MALL_FONT_ID:o.MALL_FONT_ID,MATERIAL_FRONT_CATEGORY_ID:o.MATERIAL_FRONT_CATEGORY_ID,MATERIAL_PIC_CATEGORY_ID:o.MATERIAL_PIC_CATEGORY_ID,MALL_PIC_ID_NEW:o.MALL_PIC_ID_NEW,MALL_MUSIC_ID_NEW:o.MALL_MUSIC_ID_NEW,MALL_SOUND_ID_NEW:o.MALL_SOUND_ID_NEW,MALL_FONT_ID_NEW:o.MALL_FONT_ID_NEW,MALL_PAGE_ID_NEW:o.MALL_PAGE_ID_NEW,MALL_PAGE_ID_NEW_LANDSCAPE:o.MALL_PAGE_ID_NEW_LANDSCAPE,MALL_PAGE_ID_SCENE:o.MALL_PAGE_ID_SCENE,MALL_FUNCTION_ID_NEW:o.MALL_FUNCTION_ID_NEW,MALL_FUNCTION_ID_NEW_DEFAULT:o.MALL_FUNCTION_ID_NEW_DEFAULT,MALL_MATERIAL:o.MALL_MATERIAL,MALL_PIC_ID_DEFAULT:o.MALL_PIC_ID_DEFAULT,MALL_BG_ID_DEFAULT:o.MALL_BG_ID_DEFAULT,MALL_MUSIC_ID_DEFAULT:o.MALL_MUSIC_ID_DEFAULT,MALL_SOUND_ID_DEFAULT:o.MALL_SOUND_ID_DEFAULT,MALL_FONT_ID_DEFAULT:o.MALL_FONT_ID_DEFAULT,MALL_TEXT_TEMPLATE:o.MALL_TEXT_TEMPLATE,MALL_IMAGE_TEMPLATE:o.MALL_IMAGE_TEMPLATE,MALL_GRAPHIC_TEMPLATE:o.MALL_GRAPHIC_TEMPLATE,MALL_FORM_TEMPLATE:o.MALL_FORM_TEMPLATE,MALL_BUTTON_TEMPLATE:o.MALL_BUTTON_TEMPLATE,MALL_VOTE_TEMPLATE:o.MALL_VOTE_TEMPLATE,MALL_INTERACTIVE_TEMPLATE:o.MALL_INTERACTIVE_TEMPLATE,MALL_CHART_TEMPLATE:o.MALL_CHART_TEMPLATE,MALL_LONG_PAGE_TEMPLATE:o.MALL_LONG_PAGE_TEMPLATE,VIDEO:o.VIDEO,WAP_TPL_CENTER:o.WAP_TPL_CENTER,TENCENTVIDEO:o.TENCENTVIDEO,TENCENTIMAGE:o.TENCENTIMAGE,ToH2:o.ToH2,LongPage:o.LongPage,LongPage_PREVIEW:o.LongPage_PREVIEW,H5_CONFIG:o.H5_CONFIG,MP1_HOST:o.MP1_HOST,Audit:o.Audit,Storemarket:o.Storemarket,fontDialogCss:o.fontDialog.css,fontDialogJs:o.fontDialog.js,memberBenefitsCss:o.memberBenefits.css,memberBenefitsJs:o.memberBenefits.js,MATERIAL_JS:o.materialFontExpired.js,MATERIAL_CSS:o.materialFontExpired.css,browserRecommendCss:o.browserRecommends.css,browserRecommendJs:o.browserRecommends.js,eqxFeedback:o.eqxFeedback};Object.keys(r).forEach(function(e){var t=r[e];Array.isArray(t)?t.forEach(function(e,n){"string"==typeof e&&(t[n]=i(e))}):r[e]=i(t)}),e.exports=r},function(e,t,n){"use strict";function i(){return a({name:"qiniu",src:q.qiniu})}function o(){return a({name:"tencent",src:q.tencentJdk})}function r(){return a({name:"plupload",src:q.plupload})}function a(e){var t=e.name,n=e.src,i=M[t];if(i)return Promise.resolve(i);var o=L({url:O(n),dataType:"script"}).then(function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return M[t]=n,n});return M[t]=o,o}function s(){return a({name:"qrcode",src:q.QRCode})}function c(){return a({name:"sha",src:q.SHA})}function l(){return F?F:F=new Promise(function(e,t){window.qqMapCallback=function(){e()},a({name:"qqmap",src:q.QQMap})["catch"](t)})}function u(){return B?B:B=new Promise(function(e,t){a({name:"amap",src:q.AMap}).then(function(){e()})["catch"](function(){t()})})}function p(){return a({name:"chart",src:q.Chart})}function d(){return a({name:"threecanvas",src:q.threecanvas})}function h(){return a({name:"flux",src:q.Flux})}function f(){return a({name:"",src:q.sliders})}function g(){return a({name:"jweixin",src:q.JWeixin})}function m(){return a({name:"typed",src:q.Typed})}function v(){return a({name:"mlink",src:q.MLink})}function y(){return a({name:"parallax",src:q.Parallax})}function b(){return a({name:"canvg",src:q.canvg})}function x(){return a({name:"tbsJS",src:q.tbsJS})}function w(){return a({name:"CryptoJS",src:q.CryptoJS})}function k(){return a({name:"html2canvas",src:q.html2canvas}).then(function(){return a({name:"canvg",src:q.canvg})})}function S(){return j(q.wapCropperCss,"css").then(function(){return a({name:"wapCropperJs",src:q.wapCropperJs})})}function I(e){var t=R.FLOW_ADJS+"eqx.ad.render/eqx.ad.render.js",n=R.FLOW_ADJS+"eqx.ad.render/eqx.ad.render.css";return e&&(t="//lib.eqh5.com/eqx.ad.render/"+e+"/eqx.ad.render.min.js",n="//lib.eqh5.com/eqx.ad.render/"+e+"/eqx.ad.render.min.css"),j(n,"css").then(function(){return a({name:"eqxAdJS",src:t})})}function T(){var e=R.publicHost+"funbean/eqx_content.js?t=1";return a({name:"eqxAdBeanJS",src:e})}function $(){return a({name:"handsontableJs",src:q.handsontableJs})}function E(){var e=R.HOST.includes("eqxiu")?q.pro_marketCompCss:q.marketCompCss,t=R.HOST.includes("eqxiu")?q.pro_marketCompJs:q.marketCompJs;return j(e,"css").then(function(){return a({name:"marketCompJs",src:t})})}function P(){return a({name:"layDate",src:q.laydate})}function _(){return a({name:"appeal",src:q.appeal})}function C(){return a({name:"lottie",src:q.lottie})}function A(){return a({name:"tweenjs",src:q.tweenjs})}var O=n(26).addProtocol,q=n(30),L=n(23).$ajax,M={},R=n(24),j=n(31).delayLoadJSAndCSS,F=null,B=null;e.exports={$loader:a,$loadQRCode:s,$loadSHA:c,$loadQQMap:l,$loadChart:p,$loadFlux:h,$loadJWeixin:g,$loadTyped:m,$loadThreeCanvas:d,$loadSliders:f,$loadParallax:y,$canvas:b,$loadMLink:v,$loadQiniu:i,$loadPlupload:r,$loadTbsJs:x,$loadCryptoJS:w,$loadHtml2Canvas:k,$loadCropperJs:S,$loadAMap:u,$loadEqxAd:I,$loadBeanJs:T,$loaderHandsontableJs:$,$loadMarketComp:E,$loaderLayDate:P,$loadAppeal:_,$loadTencent:o,$loadLottie:C,$loadTweenjs:A}},function(e,t,n){"use strict";function i(e){return e.startsWith("//")&&(e=location.protocol+e),new window.URL(e)}function o(e){var t=location.href,n=s("toPage",t);n?n!==""+e&&(t=t.replace(n,e)):t=u("toPage",e),window.history.replaceState({title:$("title").html(),url:t},$("title").html(),t)}function r(){var e=window.scene||{};return!!(e.ext&&e.ext.yqc&&e.ext.yqc.upd&&e.publishTime<T(2019,8,9,12))}function a(e,t,n){if(n||!r()){e=decodeURIComponent(e);try{window._tracker_api_&&window._tracker_api_.report({s_link:e,e_linx:e,scene_id:window.scene.id,b_t:"extlink",b_v:"1.0",e_t:"element_click",product:"h5"})}catch(i){console.log(i)}I()?(o(t),location.href=e):window.open(e,"_blank")}}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;return i(t).searchParams.get(e)}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href,n=i(t);return n.searchParams["delete"](e),n.href}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href,n=i(t);return e.forEach(function(e){n.searchParams["delete"](e)}),n.href}function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.location.href,o=i(n);return o.searchParams.set(e,t),o.href}function p(e){var t=window.location.href;history.replaceState({},t,e)}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href;return i(e).host}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href,t=i(e);return t.pathname}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href,t=i(e);return t.search}function g(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.length;if(0===i)throw new Error("resolveUrl requires at least one argument; got none.");var o=document.createElement("base");if(o.href=t[0],1===i)return o.href;var r=document.getElementsByTagName("head")[0];r.insertBefore(o,r.firstChild);for(var a,s=document.createElement("a"),c=1;c<i;c++)s.href=t[c],a=s.href,o.href=a;return r.removeChild(o),a}function m(e){var t=location.protocol;return"https:"!=t&&(t="http:"),/^\w{2,}:\/\//.test(e)||(e="//"+e),e.replace(/^\/\//,t+"//")}function v(e){var t=location.protocol;return"https:"!=t&&(t="http:"),/^\w{2,}:\/\//.test(e)||(e="//"+e),e.replace(/^\/\//,t+"")}function y(e){return m(e).replace(/^https:/,"http:")}function b(e){return m(e).replace(/^http:/,"https:")}function x(){var e=y(k.EQX);return e=I()?"http://topic.eqxiu.com/topic/1596.html":"http://store.eqxiu.com"}function w(e){return e=e.toString(),e.startsWith("http")||(e=location.protocol+e),new window.URL(e)}var k=n(24),S=n(27),I=S.mobilecheck,T=n(29).getTimeOf;e.exports={parseUrl:i,getUrlParam:s,removeUrlParam:c,removeUrlParams:l,addUrlParam:u,replaceLocationHref:p,getUrlHost:d,resolveUrl:g,setUrlHistory:o,openUrl:a,getPathName:h,getSearch:f,addProtocol:m,addProtocolNoLine:v,url2http:y,url2https:b,redirectUrl:x,extYqcLimit:r,addHttp:w}},function(e,t,n){"use strict";function i(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobi/i.test(navigator.userAgent)||window.screen.width<500}function o(){return window.top===window&&/MicroMessenger/i.test(window.navigator.userAgent)}function r(){var e=n(28).isEqxWxMini;return"miniprogram"==window.__wxjs_environment||e()}function a(){return i()&&s()}function s(){return/Android/i.test(navigator.userAgent)||/Linux/i.test(navigator.appVersion)}function c(){return/ipad|android|android 3.0|xoom|sch-i800|playbook|tablet|kindle/i.test(navigator.userAgent)}function l(){return/iPhone/i.test(navigator.userAgent)}function u(){return!(i()||c()&&window===window.top)}function p(){var e=n(26).getUrlParam;return!!e("appclient")||!!window.viewData}function d(){return/ipad|iphone/i.test(navigator.userAgent)}function h(){return/msie|applewebkit.+safari/i.test(navigator.userAgent)}function f(){var e=window.navigator.userAgent;return parseFloat(e.substr(e.indexOf("Android")+8,3))}function g(){var e=navigator.userAgent.toUpperCase();return!/CHROME|ANDROID/.test(e)&&/((MAC|IPHONE|IPAD|IPOD|IOS)[\s\S]*APPLE)|SAFARI/.test(e)}function m(){if(!o())return"0.0.0.0";var e=navigator.userAgent.match(/MicroMessenger\/([\d\.]+)/i);return e[1]}function v(){var e=n(26).getUrlParam;return/Lark/i.test(navigator.userAgent)||e("feishuView")}function y(){var e=n(26).getUrlParam;return!!e("feishuView")}function b(){return/wxwork/i.test(navigator.userAgent)&&/MicroMessenger/i.test(navigator.userAgent)}function x(e){return 8==e.bizType}function w(e){return x(e)&&e.property.accreditSetting}function k(){return!window.scene||!window.scene.code}function S(){var e={},t=navigator.userAgent.toLowerCase(),n=/(msie|firefox|chrome|opera|version).*?([\d.]+)/,i=t.match(n);return e.browser=i[1].replace(/version/,"safari"),e.version=i[2],{browser:e.browser,version:e.version,os:T()}}function I(){var e=n(26).getUrlParam;if(r()&&e("appclient")){var t=window.location.href.replace(/&?appclient=true/,"");window.location.href=t}}function T(){var e="Win32"==navigator.platform||"Windows"==navigator.platform,t="Mac68K"==navigator.platform||"MacPPC"==navigator.platform||"Macintosh"==navigator.platform||"MacIntel"==navigator.platform;if(t)return"Mac";var n="X11"==navigator.platform&&!e&&!t;if(n)return"Unix";var i=String(navigator.platform).indexOf("Linux")>-1;return i?"Linux":e?"Windows":"other"}var $=function(){return/macintosh|mac os x/i.test(navigator.userAgent)},E=function(){return/windows|win32/i.test(navigator.userAgent)};e.exports={mobilecheck:i,isMobile:i,isWeixin:o,isAndroidPhone:a,isAndroid:s,tabletCheck:c,iphoneCheck:l,isPc:u,isApp:p,isIOS:d,isSafari:h,checkParams:I,isWeChatMiniProgram:r,getAndroidVersion:f,shouldBeSafari:g,getWxVersion:m,isFeiShu:v,isFeiShuView:y,isMac:$,isWindows:E,isWxwork:b,isOpenPlatformScene:x,isOpenPlatformWXAccreditScene:w,isEditorView:k,getBrowserInfo:S}},function(e,t,n){"use strict";function i(){return r()&&1==y.view_mode}function o(){return y&&"xt"==y.from}function r(){return y&&"eqx_wx_min"==y.from}function a(){return o()||r()}function s(){if(y&&y.prop)return y.prop.nk}function c(){if(y&&y.prop)return y.prop.od}function l(){if(y&&y.post)return y.post}function u(){if(y&&y.prop)return y.prop.img}function p(){var e={};return y&&y.prop&&(y.prop.nk&&(e.nickname=y.prop.nk),y.prop.od&&(e.openid=y.prop.od),y.prop.img&&(e.headimgurl=y.prop.img)),e}function d(){if(y&&y.prop)return y.prop.staffId}function h(){if(y&&y.prop)return y.prop.customerId}function f(){if(y&&y.prop)return y.prop.type}function g(e,t){var n=l(),i=b.XUTTUI+"tui/mini/form/save",o={staffId:d(),customerId:h(),sceneId:e,formId:t,type:f()};return n&&!$.isEmptyObject(n)&&n.need&&(i=n.url,o=n.param,o.sceneId=e,o.formId=t),x({type:"POST",url:i,data:o})}function m(e){var t=b.WORK_DOMAIN+"m/form/h5SaveForm";return x({type:"POST",url:t,data:e})}var v=n(26).getUrlParam,y=JSON.parse(decodeURIComponent(v("env"))),b=n(24),x=n(23).ajax;e.exports={isXiuTui:o,getNickname:s,getOpenId:c,getCoverImg:u,getInfos:p,xtPostForm:g,isEqxWxMini:a,workPostForm:m,isMiniWebViewLoad:i}},function(e,t){"use strict";function n(){var e=new Date;return e.setHours(23,59,59,999),e}function i(){var e=new Date;return e.setHours(0,0,0,0),e}function o(){return n().getTime()}function r(){return i().getTime()}function a(){return(new Date).getTime()}function s(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=new Date(e,Number(t)-1,n,i,o,r);return a&&a.getTime()}function c(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"00:00:00",t=e.split(":"),n=0,i=t.pop(),o=0;i;)o=0===o?1:60*o,n+=i*o,i=t.pop();return n}function l(e){if(!e)return"00:00";var t=parseInt(e/60);t=t<10?"0"+t:t;var n=parseInt(e%60);return n=n<10?"0"+n:n,t+":"+n}e.exports={nowTime:a,endDateOfToday:n,startDateOfToday:i,endTimeOfToday:o,startTimeOfToday:r,getTimeOf:s,getSecondsOfDateStr:c,getMinuSecBySec:l}},function(e,t){"use strict";e.exports={Parallax:"//lib.eqh5.com/parallax/1.0.2/parallax.min.js",JWeixin:"//res.wx.qq.com/open/js/jweixin-1.3.2.js",QQMap:"//map.qq.com/api/js?v=2.exp&callback=qqMapCallback&key=IN3BZ-DYZKV-VHJPZ-U3MJ2-HX3T2-LRFEF",AMap:"//webapi.amap.com/maps?v=1.4.12&key=4fe3ab0a5b87e5bf8f222f780322f82a&plugin=AMap.Autocomplete,AMap.PlaceSearch,AMap.Geolocation,AMap.Geocoder",SHA:"//lib.eqh5.com/jsSHA/2.0.2/sha1.js",Chart:"//lib.eqh5.com/Chart.js/1.0.2/Chart.min.js",sliders:"//lib.eqh5.com/slidesjs/3.0.3/jquery.slides.min.js",QRCode:"//lib.eqh5.com/lrsjng.jquery-qrcode/0.14.0/jquery-qrcode.min.js",Flux:"//lib.eqh5.com/@eqxiu/flux/1.0.2/flux.min.js",Typed:"//lib.eqh5.com/@eqxiu/typed/1.1.4/typed.min.js",threecanvas:"//lib.eqh5.com/@eqxiu/threecanvas/1.1.0/threecanvas.js",canvg:"//lib.eqh5.com/canvg/0.0.1/canvg.min.js",MLink:"https://static.mlinks.cc/scripts/dist/mlink.min.js",aduit:"//lib.eqh5.com/@eqxiu/realName/2.7/eqx-max-realName.min.js",datePicker:"//lib.eqh5.com/bootstrap-daterangepicker/2.1.25/daterangepicker.js",datePickerCss:"//lib.eqh5.com/bootstrap-daterangepicker/2.1.25/daterangepicker.css",moment:"//lib.eqh5.com/moment.js/2.15.2/moment.min.js",imgJcropJs:"//lib.eqh5.com/jquery-jcrop/0.9.12/jquery.Jcrop.min.js",imgJcropCss:"//lib.eqh5.com/jquery-jcrop/0.9.12/jquery.Jcrop.min.css",wapCropperCss:"//lib.eqh5.com/jquery-cropper/4.0.0/cropper.css",wapCropperJs:"//lib.eqh5.com/jquery-cropper/4.0.0/cropper-eqx.min.js",plupload:"//lib.eqh5.com/plupload/2.1.8/plupload.full.min.js",qiniu:"//lib.eqh5.com/qiniu-js-sdk/1.0.14-beta/qiniu.min.js",qiniu2:"//lib.eqh5.com/qiniu-js/2.4.0/qiniu.min.js",qiniu3:"//lib.eqh5.com/qiniu-js/3.0.2/qiniu.min.js",html2canvas:"//lib.eqh5.com/html2canvas/0.0.8/html2canvas.min.js",tbsJS:"//res.imtt.qq.com/tbs/tbs.js",CryptoJS:"//lib.eqh5.com/CryptoJS/1.0.1/cryptoJs.js",iSroll:"//lib.eqh5.com/iScroll/5.2.1/iscroll.min.js",handsontableJs:"//lib.eqh5.com/handsontable/6.0.1/handsontable.min.js",pro_marketCompCss:"//lib.eqh5.com/@eqxiu/marketComp/pro/1.0.0/marketCss_v1.css",pro_marketCompJs:"//lib.eqh5.com/@eqxiu/marketComp/pro/1.0.0/marketComp_v1.js",marketCompCss:"//lib.eqh5.com/@eqxiu/marketComp/v0.0.3/marketComp.css",marketCompJs:"//lib.eqh5.com/@eqxiu/marketComp/v0.0.3/marketComp.js",laydate:"//lib.eqh5.com/date-select-pc/1.0.2/laydate.js",laydateCss:"//lib.eqh5.com/date-select-pc/1.0.2/theme/default/laydate.css",appeal:"//lib.eqh5.com/appeal4ebd/1.0.1/appeal.product.js ",pdf:"//lib.eqh5.com/pdf/2.5.207/pdf.js",pdfWorker:"//lib.eqh5.com/pdf/2.5.207/pdf.worker.js",reportJs:"//lib.eqh5.com/iap-report/1.0.19/report.min.js",tencentJdk:"//lib.eqh5.com/tencent-jdk/1.2.14/cos-js-sdk-v5.min.js",lottie:"//lib.eqh5.com/lottie-web/5.7.13/lottie.min.js",tweenjs:"//lib.eqh5.com/tweenjs/18.6.1/tween.min.js"}},function(e,t){"use strict";function n(e,t,n,i){return new Promise(function(o){var r=null,a=null,s=null,c=0;if(t||(t=e.substr(e.lastIndexOf(".")+1)),"js"===t){var l=document.getElementsByTagName("script");for(c=0;c<l.length;c++)(l[c].src&&l[c].src.indexOf(e)!=-1||l[c].title==n)&&(a=l[c],o(l[c]));a||(r=document.createElement("script"),r.type="text/javascript",r.src=e,i&&i(r),n&&(r.title=n))}else if("css"===t){var u=document.getElementsByTagName("link");for(c=0;c<u.length;c++)(u[c].href&&u[c].href.indexOf(e)!=-1||u[c].title==n)&&(s=u[c],o(u[c]));s||(r=document.createElement("link"),r.rel="stylesheet",r.type="text/css",r.href=e,n&&(r.title=n),r.disabled=!1)}else o(!1);if(r){var p=document.getElementsByTagName("head")[0];p.appendChild(r),r.onload=function(){o(r)}}})}e.exports={delayLoadJSAndCSS:n}},function(e,t){"use strict";function n(e){return e&&"function"==typeof e}function i(){}function o(e,t){clearTimeout(e.tId),e.tId=setTimeout(function(){e()},t)}function r(e,t,n){var i,o=null;return function(){var r=this,a=arguments,s=+new Date;clearTimeout(o),i||(i=s),s-i>=n?(e.apply(r,a),i=s):o=setTimeout(function(){e.apply(r,a)},t)}}e.exports={isFunction:n,noop:i,throttle:r,throttleSimple:o}},function(e,t,n){"use strict";var i=n(20);e.exports={APP_ID:i.WX_APP_ID,APP_ID_SCENE:i.WX_APP_ID_WAP,APP_ID_WAP:i.WX_APP_ID_WAP||i.WX_APP_ID,wxNonceStr:"eqxiuview",wxTimestamp:Date.now()}},function(e,t,n){"use strict";function i(e){var t=e.code,n=window.location.href,i=window.location.host,r=v.EQX_VIP_DOMAIN;try{return o(i)?(console.info("第三方域名"),n):a(i)?(console.info("MAX 域名"),n):s(e)?(console.info("流量域名"),n):p(e)?(console.info("CDN 加速"),w(r+"/s/"+t)):d(e)?(console.info("企业账号"),n):(console.info("普通泛域名"),n)}catch(c){return console.error(c),n}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:location.host;return!r(e)}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:location.host;return k.some(function(t){return e.endsWith("."+t)})||/localhost/.test(e)}function a(e){return r(e)&&/^max\./.test(e)}function s(e){var t=e.ext||{};return t.yqc&&t.yqc.upd}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:location.host,t=/^([\w\W]*\.scene\.)/g;return t.test(e)||/localhost/.test(e)||/hlbeixiu/.test(e)}function l(){return/\/[\d]{5,}$/.test(window.location.pathname)}function u(){var e=window.Date.now(),t=window.location.origin,n=window.location.pathname;/\/$/.test(n)||(e="/"+e);var i=window.location.search||"";return t+n+e+i}function p(e){var t=v.EQX_VIP_DOMAIN;return 1==e.staticStatus&&location.host.includes(t)}function d(e){var t=e.userType,n=e.memberType,i=e.expiryTime;return(t==x["企业账号"]||t==x["企业子账号"])&&n&&i&&y(i)}function h(){return location.host.includes(v.EQX_TG)}function f(e,t){var n=e.code,i=e.userId||e.createUser;if(!i)throw new Error("No User Id");var o=b(i);return w(o+"."+t+"/s/"+n)}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:location.host,t=/^([\w\W]*\.eqxiu\.com)/g;return t.test(e)}function m(){var e=window.location.pathname,t=/^\/stage\/s\/.+/;return t.test(e)}var v=n(24),y=n(35).isNotExpired,b=n(36).hashCode,x=n(37).USER_ROLE,w=n(26).addProtocol,k=n(39).eqxDomains;e.exports={getShareUrl:i,isEqxAdScene:s,isVipScene:p,isEqxHost:r,isThirdPartyHost:o,isTgScene:h,isEqxAdSceneHost:c,getExtensiveDomain:f,isRedEnvelopesSupportHost:g,isNoPublishScene:m,createRandomHref:u,checkoutEndContainRandom:l}},function(e,t){"use strict";function n(e,t){var n={M:e.getMonth()+1,d:e.getDate(),h:e.getHours(),m:e.getMinutes(),s:e.getSeconds()};return t=t.replace(/(M+|d+|h+|m+|s+)/g,function(e){return((e.length>1?"0":"")+n[e.slice(-1)]).slice(-2)}),t.replace(/(y+)/g,function(t){return e.getFullYear().toString().slice(-t.length)})}function i(e){return new Date(e).getTime()>Date.now()}function o(e){return new Date(e).getTime()<Date.now()}e.exports={dateFormat:n,isExpired:o,isNotExpired:i}},function(e,t){"use strict";function n(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++){var i=e.charCodeAt(n);t=(t<<5)-t+i,t&=t}return Math.abs(t)}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;/\$\{([^}]*)}/.test(e)&&console.error("DO NOT USE ${}",e);for(var i=e;n&&/#\{([^}]*)}/.test(i);)i=i.replace(/#\{([^}]*)}/g,function(e,n){var i=t[n];return void 0!==i?i:e}),n--;return i}e.exports={hashCode:n,parse:i}},function(e,t,n){"use strict";var i=n(38).make,o=i({1:"普通账号",2:"企业账号",21:"企业子账号",5:"公共账号",51:"公共子账号",3:"高级用户",4:"秀客",99:"运营人员"});e.exports={USER_ROLE:o}},function(e,t){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];t[t[n]=i]=n}return t}e.exports={make:n}},function(e,t){"use strict";var n=["yqh5.cn","yqh5.com","eqh5.cn","scene.eqxiu.tv","scene.eqxiu.mobi","divh5.com","divh5.cn","divh5.com.cn","divh5.net","meih5.com","meih5.cn","meih5.net","yiqixiua.com","myyqxiu.com","bestyqxiu.com","yqxiutech.com","yqxiugroup.com","yqxiuweb.com","yqxiulive.com","yqxiuapp.com","yqxiulife.com","eprezi.cn","eprezi.com","eqxiu.link","eqxiu.pub","msxiu.cn","ebdan.com.cn","eivh5.com","eivh5.cn","eih5.com","yeh5.cn","yqxiuh5.com","yqxiuh5.cn","yqxiuh5.net","yqxiulook.com","yqxiulook.cn","yqxiutop.com","yqxiutop.cn","yqxiu5.com","xiuh5.cn","eqxiug.com","eqxiuzhan.cn","eqxiutui.cn","eqxiuzhan.com.cn","bestyqxiu.com","eeqxiu.cn","leqxiu.cn","deqxiu.cn","meqxiu.cn","aeqxiu.cn","iqeqxiu.cn"],i=["eqshow.cn","yqxiu.cn","eqxiu.cc","eqxiu.com","eqxiu.cn","eqh5.cn","yqh5.cn","yqh5.com","eqxiu.tv","eqxiu.mobi","divh5.com","divh5.cn","divh5.com.cn","divh5.net","meih5.com","meih5.cn","meih5.net","yiqixiua.com","myyqxiu.com","bestyqxiu.com","yqxiutech.com","yqxiugroup.com","yqxiuweb.com","yqxiulive.com","yqxiuapp.com","yqxiulife.com","eprezi.cn","eprezi.com","eqxiu.link","eqxiu.pub","msxiu.cn","ebdan.com.cn","eivh5.com","eivh5.cn","eih5.com","yeh5.cn","yqxiuh5.com","yqxiuh5.cn","yqxiuh5.net","yqxiulook.com","yqxiulook.cn","yqxiutop.com","yqxiutop.cn","yqxiu5.com","xiuh5.cn","eqxiug.com","eqxiuzhan.cn","eqxiutui.cn","eqxiuzhan.com.cn","bestyqxiu.com","eeqxiu.cn","leqxiu.cn","deqxiu.cn","meqxiu.cn","aeqxiu.cn","iqeqxiu.cn"];e.exports={etcDomains:n,eqxDomains:i}},function(e,t,n){"use strict";function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href,t=a("interactive",e);return t||o()}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href,t=a("headImg",e);return!!t}var r=n(26),a=r.getUrlParam;e.exports={hasMarketUserComp:o,hasMarketComp:i}},function(e,t){"use strict";var n=document.querySelector("#content_load_check"),i=document.createElement("div");n.appendChild(i)},function(e,t){},function(e,t){},function(e,t){"use strict";function n(){$.ajaxSetup({cache:!0}),$.support.cors=!0}e.exports={setUp:function(){n()}}},function(e,t,n){"use strict";function i(e,t){e.prepend(m.pcDiv()),g.adaptViewMode(t),e.addClass("pc"),$("title").text(t.name+" | H5微场景制作-易企秀(www.eqxiu.com)"),l(t)}function o(e){var t=$(document.body),n=$("html");try{var o=f("feishuView");if(window.feishu=!!o,o&&1==Number(o)){window.feishu=!0;var r=h();return r?(t.prepend(m.sidebarDiv()),t.addClass("pc"),$("title").text(e.name+" | H5微场景制作-易企秀(www.eqxiu.com)"),u(e)):i(t,e),void $(".main").show()}}catch(a){console.error(a)}d()?(window.top===window?(t.prepend(g.div(e.property.pcAdSwitch)),e.property.pcAdSwitch?$("#recomment_container").hide():($("#recomment_container").css({opacity:1}),$("#view_panel").css("margin","-310px 0 0 -204px")),e.property.pcAdSwitch&&(document.body.style.background="rgba(241,237,229,1)"),e.isTemplate&&"1"===e.isTemplate.toString()&&g.addSample(e.id),g.addAdvertisement(),g.adaptViewMode(e),t.addClass("pc"),$("title").text(e.name+"-易企秀"),c(e),e.property.pcAdSwitch&&g.adaptPhoneBox()):($("#recomment_container").hide(),location.href.indexOf("exemplarReview")>=0?(t.prepend(v.phoneDiv()),location.href.indexOf("prelistmode")>=0?t.append(v.makeprelistdom(e)):t.append(v.ctrlBtnDiv(e))):location.href.indexOf("control")>=0?(t.prepend(v.phoneDiv()),t.append(v.ctrlBtnDiv2())):(n.addClass("iframe-html"),t.prepend(v.phoneDiv()),t.addClass("pc"),$(".scene_title").text(e.name),$("title").text(e.name+"-易企秀"))),$(".main").show()):($("#recomment_container").hide(),t.prepend(y.div()),$("title").text(e.name),$(".main").show(),window.VIEW_SCENE_NR_HEIGHT=t.find("#nr").find("#loading").height())}function r(){$(".loading").show()}function a(){$(".loading").hide()}n(46),n(47),n(48),n(49);var s=n(50),c=s.addElementsToPc,l=s.addElementsToFeishuAppCenter,u=s.addElementsToFeishuSidebar,p=n(27),d=p.isPc,h=p.mobilecheck,f=n(26).getUrlParam,g=n(60),m=n(135),v=n(136),y=n(137);e.exports={setUp:o,stopLoading:a,startLoading:r}},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";function i(e){$(".scene_title").text(e.name),a()}function o(e){$(".scene_title").text(e.name),a(),d().then(function(){var t=l(h(e));t.searchParams.set("eqrcode",1),console.info("qrCodeUrl:",t.href),$("#downApp").click(function(){$("#downAppView").css("display","block")}),$("#close").click(function(){$("#downAppView").css("display","none")}),$("#downCode").qrcode({render:"canvas",size:192,text:"http://topic.eqxiu.com/editor/topic.html?channelCode=yhyy-pc-yulan#/y20t31dAmj?fn=openInstall"}),t.searchParams["delete"]("feishuView"),$("#codeImg").qrcode({render:"canvas",size:192,text:t.href})})}function r(e){var t=e.name,n=e.description,i=e.cover;$(".scene_title").text(e.name),c({name:t,description:n,cover:i}),!e.property.pcAdSwitch&&a(),s(e)}function a(){var e=f(window.location.host);p(e)["catch"](function(){return n(59)}).then(function(e){$("body").css("backgroundImage","url("+e+")")})}function s(e){var t=document.createElement("img");document.body.appendChild(t),t.src=u.FILE+e.cover,t.id="coverImg",$("#coverImg").css({display:"none"}),d().then(function(){var n=l(h(e));n.searchParams.set("eqrcode",1),console.info("qrCodeUrl:",n.href),$("#downApp").click(function(){$("#downAppView").css("display","block")}),$("#close").click(function(){$("#downAppView").css("display","none")}),$("#downCode").qrcode({render:"canvas",size:192,text:"http://topic.eqxiu.com/editor/topic.html?channelCode=yhyy-pc-yulan#/y20t31dAmj?fn=openInstall"}),$("#codeImg").qrcode({render:"canvas",size:192,text:n.href}),$("#codeImgNoAd").qrcode({render:"canvas",size:156,text:n.href,image:$("#coverImg")[0],mSize:.2,mPosX:.5,mPosY:.5,mode:4,ecLevel:"H"}),t.remove()})}function c(e){var t=e.name,n=e.description,i=e.cover;n=n||"";var o=window.location.href.split("?")[0];$("#view_share .share-qq").attr("href","\n            http://connect.qq.com/widget/shareqq/index.html?url=\n            "+encodeURIComponent(o)+"?from=sqq&title="+t+"\n            &site=易企秀http://eqxiu.com&summary="+n+"\n            &pics="+(u.FILE+i)+"&desc="+n+"&appkey=3508809852\n        "),
$("#view_share .share-qqZone").attr("href","\n            http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=\n            "+encodeURIComponent(o)+"?from=qzone&title="+t+"\n            &site=易企秀http://eqxiu.com&summary="+n+"\n            &pics="+(u.FILE+i)+"&desc="+n+"&appkey=3508809852\n        "),$("#view_share .share-weibo").attr("href","\n            http://service.weibo.com/share/share.php?url=\n            "+encodeURIComponent(o)+"?from=sina_weibo\n            &title="+encodeURIComponent("#易企秀分享# 这是我用@易企秀 做的【"+t+"】，赶紧打开看看吧！")+"\n            &pic="+(u.FILE+i)+"&appkey=3508809852\n        "),$("#view_share .share-link").click(function(){var e=document.createElement("input");e.id="shareLinkInput",e.type="text",e.value=window.location.href,document.body.appendChild(e),document.getElementById("shareLinkInput").select(),document.execCommand("Copy"),document.getElementById("shareLinkInput").remove();var t=$('<div class="view-toast-box"><span>复制成功</span></div>');$("body").append(t),setTimeout(function(){t.remove()},3e3)})}n(51),n(52),n(53);var l=n(26).parseUrl,u=n(24),p=n(54).$getPcBgImg,d=n(25).$loadQRCode,h=n(34).getShareUrl,f=n(55).getDomainType;e.exports={addElementsToPc:r,addElementsToFeishuSidebar:i,addElementsToFeishuAppCenter:o}},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";function i(e){var t=Object.assign({prefix:"/"+(window.scene.userId||window.devScene.meta.createUser)+"/*",bucket:"eqxiu"},e),n=void 0;return n=r(t),Promise.all([n,g.$loadTencent()]).then(function(e){var n=e[0].obj;Object.assign(t,{token:n.sessionToken,credentials:n});var i=new COS({getAuthorization:function(e,t){return n?void t({TmpSecretId:n.tmpSecretId,TmpSecretKey:n.tmpSecretKey,SecurityToken:n.sessionToken,ExpiredTime:n.expiredTime}):console.error("credentials invalid")}});return i.eqxOptions=t,i})}function o(e){return f({type:"POST",url:m.LongPage_PREVIEW+("lp/material/uptoken?uri=/tencent/"+e+"/upload"),headers:{"Content-Type":"image/jpeg"}})}function r(e){return f({type:"GET",url:m.MALL_MATERIAL+"cos/batch/token-upload",data:e})}function a(e){return Promise.all([c("image"),g.$loadQiniu(),g.$loadPlupload()]).then(function(t){return Object.assign(e,{token:t[0].map.token}),Qiniu.uploader({runtimes:"html5,flash,html4",browse_button:e.uploadButton,uptoken_url:m.SERVER_1+"eqs/s/material/uptokens?type=image",uptoken:e.token,unique_names:!0,domain:"http://qiniu-plupload.qiniudn.com/",max_file_size:"10mb",max_retries:3,chunk_size:"4mb",auto_start:!0,init:{FilesAdded:function(e,t){window.plupload.each(t,function(e){})},BeforeUpload:function(t,n){e.beforeUpload(t,n)},UploadProgress:function(e,t){},FileUploaded:function(t,n,i){e.finishUpload(t,n,i)},Error:function(t,n,i){e.Error(t,n,i)},UploadComplete:function(){},Key:function(e,t){var n="";return n}},multi_selection:e.multiSelection})})}function s(e){return function(t){return t.includes("http")||(t=m.FILE+t),f({type:"GET",url:t,dataType:e})}}function c(e){return f({type:"POST",url:m.SERVER_1+"eqs/s/material/uptokens?type="+e,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})}function l(e){return new Promise(function(t){g.$loadTencent().then(function(n){var i=e,o=new COS({getAuthorization:function(e,t){return i?void t({TmpSecretId:i.tmpSecretId,TmpSecretKey:i.tmpSecretKey,SecurityToken:i.sessionToken,ExpiredTime:i.expiredTime}):console.error("credentials invalid")}});t(o)})})}function u(e){return new Promise(function(t){g.$loadTencent().then(function(n){var i=e,o=new COS({getAuthorization:function(e,t){return i?void t({TmpSecretId:i.tmpSecretId,TmpSecretKey:i.tmpSecretKey,SecurityToken:i.sessionToken,ExpiredTime:i.expiredTime}):console.error("credentials invalid")}});t(o)})})}function p(e,t){return f({type:"POST",url:m.SERVER_1+"eqs/s/board/drawing/save?compKey="+e,data:{data:JSON.stringify(t)}})}function d(e){return f({type:"GET",url:m.SERVER_1+"eqs/s/image/scene/preview?domain="+e}).then(function(e){return e?(e=e.startsWith("http:")||e.startsWith("https:")?e:m.FILE+e,e+="?imageMogr2/auto-orient/thumbnail/2100x1200>"):Promise.reject("No Background Image")})}function h(e){return f({type:"POST",url:m.SERVER_1+"eqs/s/api/upload/fetch",data:{remoteURL:e}})}var f=n(23).$ajax,g=n(25),m=n(24),v=s("xml");e.exports={$getSvg:v,$getPcBgImg:d,$getUploadToken:c,$getTencentUptoken:r,$getTencentUptokenPreview:o,$uploadBase64:l,uploadBase64:u,$saveCompInfoByCompKey:p,$initTencentUpload:i,$initQiniuUpload:a,getImgFromOrigin:h}},function(e,t,n){"use strict";function i(e,t){!x()&&window.scene&&0!==window.scene.property.eqAdType&&1!==t&&2!==t&&window.location.href.indexOf("scene.eqxiu.com")===-1&&window.location.href.indexOf("eqxiu.cn")===-1&&(P={shareCover:e.shareCover,coverLink:e.coverLink,stationAd:e.stationAd})}function o(e){var t=void 0,n=e.isTemplate,o=e.bizType;n&&3!==n&&4!==n?1===n?t=12:2===n&&(t=22):t=o?40==o?31:30==o?21:41:11;var r=window.location.host,s=a(r),c="b";c=y()?"d":v()?"b":b()?"c":"a";var l=T(),u=[];return u=l?[g(t,s,c),m(e,c,[884])]:[g(t,s,c),m(e,c,[884,1048])],new Promise(function(t){Promise.all(u).then(function(e){var t=e[0].map.logo;if(C=t,!l&&e[1]&&e[1].obj&&e[1].obj[1]){var n=e[1]&&e[1].obj&&e[1].obj[1].picSrc.split(/\.com\/|\.cn\//),i=n[n.length-1];E={brandLink:e[1]&&e[1].obj&&e[1].obj[1].linkUrl,trailerLogoLink:e[1]&&e[1].obj&&e[1].obj[1].linkUrl,brandSrc:i,stationAd:e[1]&&e[1].obj&&e[1].obj[1].mediaId}}else E=e[0].map.tail;return window._lastLogo=e[1]&&e[1].obj&&e[1].obj[0],e}).then(function(t){return l?(t[0].map.share&&(_={link:t[0].map.share.backLink,domains:t[0].map.share.domains}),Promise.resolve(t)):m(e,c,[1062,1063]).then(function(e){if(e&&e.obj&&e.obj.length){var o=e.obj.find(function(e){return 1062==e.mediaId});o?_={link:o.linkUrl,domains:!0}:t[0].map.share&&(_={link:t[0].map.share.backLink,domains:t[0].map.share.domains});var r=e.obj.find(function(e){return 1063==e.mediaId});r&&i({coverLink:r.linkUrl,shareCover:r.picSrc,stationAd:r.mediaId},n)}else t[0].map.share&&(_={link:t[0].map.share.backLink,domains:t[0].map.share.domains});return t})}).then(function(e){if(_&&_.domains&&_.link&&!x()&&window.scene&&0!==window.scene.property.eqAdType&&!window.scene.property.loadingLogo&&1!==n&&2!==n&&window.location.href.indexOf("scene.eqxiu.com")===-1&&window.location.href.indexOf("eqxiu.cn")===-1&&!S()){var i=I(),o=i.yqc;if(o&&o.adType&&o.adType.includes("pop"))return window.addEventListener("popstate",function(e){d()}),void t();p()}t()})["catch"](function(e){console.log(e),t()})})}function r(){if(C){var e=$(".loading");if(C.backgroundSrc&&e.css({backgroundImage:"url('"+(h.FILE+C.backgroundSrc)+"')",backgroundColor:"none",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"}),C.logoSrc){var t=e.find(".loadbg");t.css({backgroundImage:"url('"+(h.FILE+C.logoSrc)+"')",backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"center",width:"70px",height:"70px"}),C.logoLink&&t.click(function(){window.location.href=C.logoLink})}if(C.brandSrc){var n=$('<div class="loading-brand"></div>').appendTo(e);n.css({backgroundImage:"url('"+(h.FILE+C.brandSrc)+"')",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center",width:"100%",height:"40px",position:"absolute",left:"0",bottom:"0",zIndex:"9999"}),C.brandLink&&n.click(function(){window.location.href=C.logoLink})}}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.host,t=void 0;return t=window.scene&&window.scene.ext&&window.scene.ext.yqc&&window.scene.ext.yqc.upd?1:e.indexOf(h.EQX_TG)!==-1?2:e.indexOf(h.EQX_VIP_DOMAIN)!==-1?4:e.indexOf(h.EQX_APP_DOMAIN)!==-1?5:e.indexOf(h.EQX_COMPANY_DOMAIN)!==-1?3:e.indexOf(h.EQX_NO_BUSINESS_DOMAIN)!==-1?7:e.indexOf(h.EQX_BATCH_SCENES_DOMAIN)!==-1?8:e.indexOf("divh5.com.cn")!==-1?-100:6}function s(){return new Promise(function(e){return e(E)})}function c(){return P}function l(){return _}function u(){return C}function p(){function e(){var e=_.link;/http/.exec(_.link)&&(e=w(_.link)+k(_.link));var t={title:"聚合页",page:"eqxScenes",url:window.location.origin+e},n=window.location.href;window.history.replaceState(t,null,t.url),window.history.pushState({page:"detail"},null,n)}e(),window.addEventListener("popstate",function(e){d();var t=e.state;if(t&&"eqxScenes"===t.page){try{var n={scene_id:window.scene&&window.scene.id,product:"h5",e_t:"element_click",b_t:"h5_last_page",cat:"尾页组件",act:"浏览器地址改变"};window._tracker_api_&&window._tracker_api_.report(n)}catch(i){console.log(i)}location.reload()}})}function d(){if(window.scene.property.hdc&&window.scene.property.hdc.length){var e=setInterval(function(){$(".flow-pop-inner-box").length&&$(".flow-pop-inner-box")[0].style.top&&($(".flow-pop-inner-box").css({transform:"scale(1)",top:""}),clearInterval(e))},50);setTimeout(function(){clearInterval(e)},3e3)}}var h=n(24),f=n(56),g=f.$getLoadPageConfig,m=f.$getLogoSrcAndLink,v=n(27).isWeixin,y=n(27).isWeChatMiniProgram,b=n(27).mobilecheck,x=n(27).isApp,w=n(26).getPathName,k=n(26).getSearch,S=n(28).isEqxWxMini,I=n(58).getExtIns,T=n(58).isAdScene,E=null,P=null,_=null,C=null;e.exports={customLoadPage:o,getLastPageConfig:s,getSharePopConfig:c,getButtonConfig:l,getDomainType:a,customLoadingPage:r,getLogoLoadingConfig:u}},function(e,t,n){"use strict";function i(e,t,n){return n=n||"b",t==-100?Promise.resolve({map:null}):window._configure&&window._configure[n]?Promise.resolve({map:window._configure[n]}):s({type:"GET",url:c.SERVER_1+"eqs/s/scene/skin/get/page",data:{type:e,domain:t,platform:n}})}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[884],i={a:1,b:2,c:3},o={mediaIds:JSON.stringify(n),channel:"d"===t?1:0,platform:i[t]||2,userId:e.createUser,domainType:window.scene&&window.scene.ext&&window.scene.ext.yqc&&window.scene.ext.yqc.upd?1:0};return l(o)}function r(e){return s({type:"GET",url:c.SERVER_1+"eqs/s/trailer/"+e})}function a(e){return e?r(e).then(function(e){return e.obj?(e.obj.isActivity=!0,e.obj):Promise.reject("活动尾页数据错误")}):Promise.reject("没有活动尾页 ID")}var s=n(23).$ajax,c=n(24),l=n(57).$getAd;e.exports={$getPageInfo:r,$getActivityPage:a,$getLoadPageConfig:i,$getLogoSrcAndLink:o}},function(e,t,n){"use strict";function i(e){var t=r.SERVER_1+"eqs/s/get/ad/info";return a({type:"POST",url:t,data:e})}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return a({type:"GET",url:r.SERVER_1+"eqs/s/wx/get/auth/config?productType="+e})}var r=n(24),a=n(23).ajax;e.exports={$getAd:i,$getAdAppIdAndDomain:o}},function(e,t,n){"use strict";var i=n(27).mobilecheck,o=n(27).isWeixin,r=n(27),a=r.isWeChatMiniProgram,s=function(){if(window.scene&&window.scene.ext)if("string"==typeof window.scene.ext){var e=null;try{return e=JSON.parse(window.scene.ext)}catch(t){return null}}else if("[object Object]"===Object.prototype.toString.call(window.scene.ext))return window.scene.ext;return null},c=function(){if(window.scene&&window.scene.ext)if("string"==typeof window.scene.ext){var e=null;try{if(e=JSON.parse(window.scene.ext),e&&e.yqc&&e.yqc.upd)return!0}catch(t){return!1}}else if(window.scene.ext.yqc&&window.scene.ext.yqc.upd)return!0;return!1},l=function(){var e="b";return e=a()?"d":o()?"b":i()?"c":"a"};e.exports={isAdScene:c,getPlatform:l,getExtIns:s}},function(e,t,n){e.exports=n.p+"images/spring-5632ca.jpg"},function(e,t,n){"use strict";function i(e){var t=g.ppitest(),n=e?"":c(),i=o(e),r=e?"":'<div id="support">\n                                            <a target="_blank" href="http://www.eqxiu.com">\n                                                <i class="new_logo_text"></i>\n                                            </a>\n                                        </div>';return!e&&p(),"\n            "+t+'\n            <div id="view_panel">\n            '+n+"\n            "+i+"\n            "+r+"\n            </div>"}function o(e){var t=e?r():"",n=g.nr(),i=a(),o=e?"margin-right:123px":"";return'\n    <div class="phone_panel" style="'+o+'">\n                <div class="p-index main phoneBox" id="con" style="display: none;">         \n                    <div class="scene_title_baner">\n                        <h1 class="scene_title"></h1>\n                    </div>\n                    '+n+"\n                </div>\n                "+i+"\n                "+t+"\n            </div>"}function r(){var e=n(95),t=n(87),i=n(86),o=n(89);return'<div class = "noAd_qrcode">\n                <div class="qrcode_box">\n                    <span class="eqf-QRcode"></span>\n                    <svg class="qrcode-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24" viewBox="0 0 24 24"><defs><style>.a{clip-path:url(#b);}</style><clipPath id="b"><rect width="24" height="24"/></clipPath></defs><g id="a" class="a"><path d="M-271,116a1,1,0,0,1-1-1,1,1,0,0,1,1-1h1v-4a1,1,0,0,1,1-1,1,1,0,0,1,1,1v5a1,1,0,0,1-1,1Zm-8-1v-2a1,1,0,0,1,1-1h4v-2a1,1,0,0,1,1-1,1,1,0,0,1,1,1v3a1,1,0,0,1-1,1h-4v1a1,1,0,0,1-1,1A1,1,0,0,1-279,115Zm-8,1a1,1,0,0,1-1-1v-5a1,1,0,0,1,1-1h5a1,1,0,0,1,1,1v5a1,1,0,0,1-1,1Zm1-4.749v2.5a.251.251,0,0,0,.25.25h2.5a.251.251,0,0,0,.25-.25v-2.5a.251.251,0,0,0-.25-.25h-2.5A.251.251,0,0,0-286,111.25Zm8-1.25a1,1,0,0,1-1-1v-2h-4a1,1,0,0,1-1-1,1,1,0,0,1,1-1h5a1,1,0,0,1,1,1v2h1a1,1,0,0,1,1,1,1,1,0,0,1-1,1Zm6-2a1,1,0,0,1,1-1,1,1,0,0,1,1,1,1,1,0,0,1-1,1A1,1,0,0,1-272,108Zm2-2a1,1,0,0,1,1-1,1,1,0,0,1,1,1,1,1,0,0,1-1,1A1,1,0,0,1-270,106Zm-4,1a1,1,0,0,1-1-1,1,1,0,0,1,1-1h1a1,1,0,0,1,1,1,1,1,0,0,1-1,1Zm-13,0a1,1,0,0,1-1-1,1,1,0,0,1,1-1h1a1,1,0,0,1,1,1,1,1,0,0,1-1,1Zm13-4a1,1,0,0,1-1-1V97a1,1,0,0,1,1-1h5a1,1,0,0,1,1,1v5a1,1,0,0,1-1,1Zm1-4.749v2.5a.251.251,0,0,0,.25.25h2.5a.25.25,0,0,0,.25-.25v-2.5a.25.25,0,0,0-.25-.25h-2.5A.25.25,0,0,0-273,98.25ZM-279,102V99a1,1,0,0,1,1-1,1,1,0,0,1,1,1v3a1,1,0,0,1-1,1A1,1,0,0,1-279,102Zm-8,1a1,1,0,0,1-1-1V97a1,1,0,0,1,1-1h5a1,1,0,0,1,1,1v5a1,1,0,0,1-1,1Zm1-4.749v2.5a.251.251,0,0,0,.25.25h2.5a.251.251,0,0,0,.25-.25v-2.5a.25.25,0,0,0-.25-.25h-2.5A.25.25,0,0,0-286,98.25Z" fill="rgb(218, 31, 116);" transform="translate(290 -94)"/></g></svg>\n                    <div class="share_box">\n                        <p>扫一扫，用手机浏览</p>\n                        <div id="codeImgNoAd"/>\n                        <div class="icon_row">\n\n                        </div>\n                        <div id="view_share" class="share_row">\n                            <a class="share-weibo" href="" target="_blank"><img class="share_row_icon" src='+e+'></></span></a>\n                            <a class="share-qq" href="" target="_blank"><img class="share_row_icon" src='+i+'></></span></a>\n                            <a class="share-qqZone" href="" target="_blank"><img class="share_row_icon" src='+t+'></></span></a>\n                            <div class="share-link share_row_icon" style="cursor:pointer;background: url('+o+');background-size: cover"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>'}function a(){return'<div class = "ctrl_panel">\n                <a id = "pre_page" type = "button" class = "pre_btn btn_scroll">上一页</a>\n                <a id = "next_page" type = "button" class = "next_btn btn_scroll">下一页</a>\n            </div>'}function s(){return'<div class = "ctrl_panel ctrl_panel__landscape">\n                <a id="pre_page" type="button" class="pre_btn btn_scroll btn_scroll__landscape">上一页</a>\n                <a id="next_page" type="button" class="next_btn btn_scroll btn_scroll__landscape">下一页</a>\n            </div>'}function c(){return'\n            <div id="code">\n                <div class="code_panel">\n                    <div class="code_panel_top">\n                        <div class="app">\n                            <a id="downApp" style="font-size:12px;">下载APP</a>\n                            <div id="downAppView" class="zoomIn-change">\n                                <h3><a id="close" style="cursor:pointer">X</a>易企秀APP</h3>\n                                <div id="downCode"></div>\n                                <p style="padding-bottom:20px;padding-top:10px;">一键生成H5，随时随地查数据</p>\n                            </div>\n                        </div>\n                        扫一扫，分享给朋友！\n                    </div>\n                    <div id="codeImg"/>\n                    <div id="view_share" class="bdsharebuttonbox">\n                        <a class="share-qq" href="" target="_blank"><span class="eqf-QQ share-icon"></span></a>\n                        <a class="share-qqZone" href="" target="_blank"><span class="eqf-QQzone share-icon"></span></a>\n                        <a class="share-weibo" href="" target="_blank"><span class="eqf-weibo share-icon"></span></a>\n                    </div>\n                </div>\n   \n                <a class="btn_panel" target="_blank" href="'+v+'">\n                    <div rdt="3" btn loc="PC预览" cat="作品预览页" act="跳转商城" id="view_reg">这么漂亮的场景&nbsp;→\n                        <span>我也来制作</span>\n                    </div>\n                </a>\n            </div>\n            '}function l(e){$("#view_reg").after('<div id="sample_btn">使用该模板</div>'),$("#view_reg").addClass("view_reg"),$("body").on("click","#sample_btn",function(){window.open(v+"redirect-"+e+".html")})}function u(){eqxAdSDK&&eqxAdSDK.banner({el:document.querySelectorAll("#code .btn_panel")[0],mediaId:1120})}function p(){var e=0,t=$(document.body),n=$('<div id="lampHide-btn"><em class="eqf-left"></em></div>');t.append(n),n.click(function(){0===e?($("#recomment_container").hide(),$("#view_panel").addClass("onlyPhone"),$("#lampHide-btn").css("transform","rotate(180deg)"),$("#code").hide(),e=1):($("#recomment_container").show(),$("#view_panel").removeClass("onlyPhone"),$("#lampHide-btn").css("transform","rotate(360deg)"),$("#code").show(),e=0)})}function d(){var e=0,t=$(document.body),n=$('<div id="recomment_container"></div>'),i=$('<span id="recommend_btn">热点推荐</span>'),o=$('<div id="recommend_content"></div>'),r=$("<ul></ul>");n.append(o).append(i),t.append(n),i.click(function(){0===e?(o.hide(),$("#view_panel").css("margin","-300px 0 0 -326px"),e=1):(o.show(),$("#view_panel").css("margin","-300px 0 0 -198px"),e=0)});var a=x(window.location.host);b(a).then(function(e){e.list.length?($("#view_panel").css("margin","-310px 0 0 -204px"),o.append(r),e.list.forEach(function(e){if(e.cover.indexOf("imageMogr2")>-1)var t=e.cover.slice(0,e.cover.indexOf("imageMogr2")-1);else t=e.cover;r.append('<li><a href="'+y+"s/"+e.code+'" target="_blank"><img src="'+m.FILE+t+'?imageMogr2/auto-orient/thumbnail/240x240>"> <span>'+(e.name||"我用易企秀做了一个超酷炫的H5，快来看看吧。")+"</span></a></li>")})):$("#recomment_container").remove()})["catch"](function(e){$("#recomment_container").remove()})}function h(e){if(e.property.orientation&&"landscape"===e.property.orientation.curr){var t=$("#view_panel").find(".phone_panel").find(".main.phoneBox");$("#view_panel").find(".phone_panel").css("position","relative"),t.css("transform","rotate(-90deg)"),$("#view_panel").css("margin","-300px 0px 0px -258px"),$("#code").css("margin-left","186px"),$("#view_panel").find(".ctrl_panel").css({position:"absolute",width:"600px",height:"60px",top:"473px",left:"-136px",display:"block",textAlign:"center"});var n={width:"80px",height:"30px",lineHeight:"30px",padding:"0",display:"inline-block",color:"#fff",background:"#1261FF",borderRadius:"0px 0px 3px 3px"};$("#pre_page").css(Object.assign({marginRight:"20px"},n)),$("#next_page").css(n)}}function f(e){var t=n(134),i=$("#view_panel").find(".phone_panel").find(".main.phoneBox");i.css({backgroundImage:"url("+t+")",boxShadow:"none"})}var g=n(61),m=n(24),v=m.STORE;v=m.STORE.replace("https://","http://");var y=m.VIEW_HOST,b=n(62).$getRecommendScenes,x=(n(62).$getPCAdvertisement,n(55).getDomainType);e.exports={div:i,pcCtrlBtn:a,pcCtrlBtnLandscape:s,addSample:l,addRecommend:d,addAdvertisement:u,adaptViewMode:h,phonePanel:o,changeStyle:p,adaptPhoneBox:f}},function(e,t,n){"use strict";function i(){return'<div id="ppitest" style="width:1in;visible:hidden;padding:0px"></div>'}function o(){var e=$(".loading").remove().show()[0].outerHTML;return'\n<div class="nr preview-content" id="nr">\n    '+e+"\n</div>\n"}function r(e,t){e=e||"场景名称";var n=t.startsWith("http")?t:a.FILE+t;return'\n<div id="verifyCode" class="verifyCode">\n    <div class="container">\n        <div class="scene-cover">\n            <!-- 3、场景封面 -->\n            <img class="cover-img" src="'+n+'">\n        </div>\n        <!-- 4、场景名称 -->\n        <div class="scene-name">'+e+'</div>\n        <div class="confirm-password">\n            <div class="verify-label">请输入访问密码</div>\n            <div class="verify-tips" id="verifyTip">\n                <ul class="password-indicator">\n                    <li></li>\n                    <li></li>\n                    <li></li>\n                    <li></li>\n                </ul>\n            </div>\n            <div class="password-numbers">\n                <span>1</span>\n                <span>2</span>\n                <span>3</span>\n                <span>4</span>\n                <span>5</span>\n                <span>6</span>\n                <span>7</span>\n                <span>8</span>\n                <span>9</span>\n                <span>0</span>\n            </div>\n            <div class="password-operation">\n                <span class="btn-clear" id="btnClear">清空</span>\n                <span class="btn-cancel" id="btnCancel">取消</span>\n            </div>\n        </div>\n    </div>\n</div>'}var a=n(24);e.exports={nr:o,ppitest:i,pwd:r}},function(e,t,n){"use strict";function i(){return/max\.(eqshow\.cn|yqxiu\.cn|eqxiu\.com|eqxiu\.cc)/.test(window.location.host)}function o(){return(/\/(\w+)$/.exec(window.location.pathname)||[])[1]}function r(){function e(e){if(k(e),e){if(S())return e;0!=e.property.eqAdType||e.property.adBagSwitch?(e.property.adBagSwitch||0==e.property.eqAdType||e.property.pcAdSwitch)&&Object.assign(e.property,{eqAdType:0,pcAdSwitch:!0,ad:0,hideEqAd:!0,adBagSwitch:!0}):Object.assign(e.property,{eqAdType:0,pcAdSwitch:!0,ad:0,hideEqAd:!0,adBagSwitch:!1})}return e}var t=new Promise(function(t,n){var r=window.scene;if(r)t(e(r));else if(window.__isServerRendered&&!window.scene&&n(new Error("场景数据异常")),i()){var a=o();window.__isMax=!0,v({type:"GET",url:f.SERVER_MAX+"m/element/check/model/code?objectId="+a+"&JSESSIONID=ff4ff6599aa04597861955583c300a5d"}).then(function(i){if(i&&i.data){var o=i.data,r=window.scene=o.scene,a=o.pages.map(function(e,t){return{elements:e,id:t+2345}});window.viewData={list:a},t(e(r))}else n(new Error("无审核场景数据"))})["catch"](function(){n(new Error("无审核场景数据"))})}else m({type:"GET",url:f.SERVER_1+"eqs/s/sc?code="+l()}).then(function(i){if(i){i.name&&i.name.indexOf('"')!=-1&&(i.name=i.name.replace(/"/g," ")),i.cover&&i.cover.includes("/crop/")&&(i.cover=i.cover.replace(/\/crop\//i,"/cut/")+"/strip");var o=e(i),r=window.scene=o;t(r)}else n(new Error("无场景数据"))})["catch"](function(){n(new Error("无场景数据"))})});return t.then(function(t){return!t||!t.property.isHidden||y.getUrlParam("qz_gdt")||y.getUrlParam("wx_traceid")||y.getUrlParam("gdt_vid")?Promise.resolve(t):m({type:"GET",url:f.SERVER_1+"eqs/s/geterrorpage"}).then(function(t){return t.obj?e(t.obj):"无场景数据"})["catch"](function(){return"无场景数据"})})}function a(e){if(window.viewData)return Promise.resolve(window.viewData);var t=b("userKey"),n=b("compKey"),i={type:"GET",url:c()},o={type:"GET",url:s()};e&&(i.data={password:e});var r=null,a=Promise.resolve(null);return(t||n)&&(a=v(o).then(function(e){r=e.map})["catch"](function(){r=null})),a.then(function(){return v(i)}).then(function(e){return r&&(e.map=r),h(e)})}function s(){var e=window.scene||{},t=e.id,n=e.code;if(!t)throw new Error("Not Valid Scene! No Id!");if(!n)throw new Error("Not Valid Scene! No Code!");var i=b("userKey"),o=b("compKey"),r=f.SERVER_1+"eqs/s/scene/component/data?id="+t+"&code="+n;return i&&(r=x("userKey",i,r)),o&&(r=x("compKey",o,r)),r}function c(){var e=window.scene||{},t=e.id,n=e.code,i=e.publishTime;if(!t)throw new Error("Not Valid Scene! No Id!");if(!n)throw new Error("Not Valid Scene! No Code!");if($())return f.SERVER_1+"eqs/s/stage/page/"+t+"?code="+n;var o=b("backVersion"),r=void 0;return r=o?f.SERVER_1+"eqs/s/back/page/"+t+"?code="+n+"&backVersion="+o:f.SERVER_1_CDN+"eqs/s/page/"+t+"?code="+n,x("time",i,r)}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href;if(window.scene)return window.scene.code;e=w(e);var t=e.pathname,n=t.lastIndexOf("/");if(n>-1)var i=t.substr(n+1);if(i.indexOf("index.html")>-1&&(i=b("codeTestMobile")),!i)throw new Error("No Valid Scene Code!");return i.length>10&&console.error("URL Code 大于 10 位, 请检查 Code"),i}function u(e){return v({type:"GET",url:f.SERVER_1+"eqs/s/recommend/scene/preview?domain="+e})}function p(){return v({type:"GET",url:f.SERVER_2+"eqs/banners?pageCode=pc_view_bottom_ad"})}function d(){return Math.ceil(1e10*Math.random())}function h(e){return"string"==typeof e.obj&&e.obj.length>100?I.$loadCryptoJS().then(function(){var t=window.CryptoJS,n=null,i=null,o=null;try{var r=e.obj.substring(P,E),a=e.obj.substring(E+_);i=e.obj.substring(E,E+_),o=i,n=r+a,i=t.enc.Utf8.parse(i),o=t.enc.Utf8.parse(o);var s=t.AES.decrypt(n,i,{iv:o,mode:t.mode.CFB,padding:t.pad.NoPadding});return e.list=JSON.parse(t.enc.Utf8.stringify(s)),e}catch(c){n=e.obj.substring(P,e.obj.length-_),i=e.obj.substring(e.obj.length-_),o=i,i=t.enc.Utf8.parse(i),o=t.enc.Utf8.parse(o);var l=t.AES.decrypt(n,i,{iv:o,mode:t.mode.CFB,padding:t.pad.NoPadding});return e.list=JSON.parse(t.enc.Utf8.stringify(l)),e}}):Promise.resolve(e)}var f=n(24),g=n(23),m=g.ajax,v=g.$ajax,y=n(26),b=y.getUrlParam,x=y.addUrlParam,w=y.parseUrl,k=n(63).perfectMeta,S=n(58).isAdScene,I=n(25),T=n(34),$=T.isNoPublishScene,E=19,P=0,_=16;e.exports={$getSceneMetaData:r,$getSceneData:a,$getRecommendScenes:u,$getPCAdvertisement:p,getSceneCode:l,randomId:d}},function(e,t,n){"use strict";function i(e){if(e.ext||(e.ext={}),e.property||(e.property={}),"string"==typeof e.property&&(e.property=JSON.parse(e.property)||{}),"string"==typeof e.bgAudio&&e.bgAudio.length>1)try{e.bgAudio=JSON.parse(e.bgAudio)||{}}catch(t){e.bgAudio={}}null===e.accessCode&&(e.accessCode="");var n=v();return e.name=e.name?e.name.replace(/&quot;/g,'"'):"",n.length>0&&e.name&&n.forEach(function(t){var n=new RegExp(t);e.name=e.name.replace(n,"")}),n.length>0&&e.description&&n.forEach(function(t){var n=new RegExp(t);e.description=e.description.replace(n,"")}),r(e),c(e),a(e),s(e),e}function o(e){e.name=e.name||"未命名场景",e.name=e.name.replace(/&quot;/g,'"');var t=v();t.length>0&&e.name&&t.forEach(function(t){var n=new RegExp(t);e.name=e.name.replace(n,"")})}function r(e){e.description?e=d(e.description):e.description="我用易企秀做了一个超酷炫的H5，快来看看吧。";var t=v();t.length>0&&e.description&&t.forEach(function(t){var n=new RegExp(t);e.description=e.description.replace(n,"")})}function a(e){switch(e.pageMode+""){case"2":e.pageMode=l["上下翻页"]}void 0===l[e.pageMode]&&(_DEBUG_,e.pageMode=l["上下翻页"]),e.property||(e.property={});var t=e.property;return"triggerLoop"in t||(t.triggerLoop=!0),"autoFlip"in t||(t.autoFlip=!1),t.autoFlipTime||(t.autoFlipTime=3),"forbidHandFlip"in t||(t.forbidHandFlip=!1),void 0!==t.slideNumber&&null!==t.slideNumber||(t.slideNumber=!0),e}function s(e){var t=e.property,n=e.createTime,i=e.hideEqAd,o=e.eqAdType,r=e.isAdvancedUser,a=e.bottomLabel;switch(n<14165028e5|i|99===o&&(t.eqAdType=u["无尾页无底标"],delete t.createTime,delete t.hideEqAd),r&&(t.ad=2,a&&a.id?t.eqAdType=u["品牌联合底标"]:t.eqAdType=u["技术支持底标"],delete t.isAdvancedUser),""+t.eqAdType){case u["无尾页无底标"]:t.ad=0;break;case u["技术支持尾页"]:t.ad=1;break;case u["技术支持底标"]:case u["品牌联合底标"]:t.ad=2;break;case u["deepshare尾页"]:t.ad=4;break;default:t.eqAdType=u["技术支持尾页"],t.eqAdType=parseInt(t.eqAdType),t.ad=1}}function c(e){var t=e.property;if(t.shareDes&&"string"==typeof t.shareDes)try{t.shareDes=JSON.parse(t.shareDes)}catch(n){t.shareDes={description:{type:"position",description:t.shareDes}}}var i=!1;if(e.property.hdc&&e.property.hdc.length&&(i=!0),t.wxCount>0||f()||t.hasRedActivity||t.hasSubmit||t.normalExceptionNum||(e.property.hdc&&e.property.hdc.length)>0)m()||(i=!0);else if((1==t.clickFarmerStatus||2==t.clickFarmerStatus)&&t.wxClickFarmerCount>0)i=!0;else if(t.openWxAuth&&t.openWxAuth===!0)i=!0;else{var o=t.shareDes,r="#分享者#",a=/#分享者#/;o&&((o.description&&["myself","selfAndPosition"].includes(o.description.type)||o.title&&["myself","selfAndPosition"].includes(o.title.type)||o.avatar||o.description&&o.description.description&&o.description.description.search(r)>-1||o.title&&o.title.description&&o.title.description.search(r)>-1)&&(i=!0),(a.test(o.description)||a.test(o.title))&&(i=!0))}t.wxAuth=i}var l=n(64).PAGE_MODE,u=n(65).AD_TYPE,p=n(66),d=p.filterTags,h=n(40),f=h.hasMarketComp,g=n(27),m=g.isWxwork,v=n(67).getForbiddenTexts;e.exports={perfectMeta:i,perfectPageMode:a,perfectAdType:s,perfectName:o,perfectDescription:r}},function(e,t){"use strict";function n(e){return c.includes(e)}function i(e){return l.includes(e)}var o={up:1,right:2,down:3,left:4},r=[{name:"上下翻页",type:0,dir:o.down},{name:"上下惯性翻页",type:1,dir:o.down},{name:"左右惯性翻页",type:3,dir:o.right},{name:"左右翻页",type:4,dir:o.right},{name:"左右连续翻页",type:5,dir:o.right},{name:"立体翻页",type:6,dir:o.down},{name:"卡片翻页",type:7,dir:o.down},{name:"放大翻页",type:8,dir:o.down},{name:"交换翻页",type:9,dir:o.right},{name:"翻书翻页",type:10,dir:o.right},{name:"上下连续翻页",type:11,dir:o.down},{name:"掉落翻页",type:12,dir:o.down},{name:"淡入翻页",type:13,dir:o.down},{name:"上下推出翻页",type:14,dir:o.down},{name:"左右推出翻页",type:15,dir:o.right},{name:"折叠翻页",type:16,dir:o.down},{name:"画面分割翻页",type:17,dir:o.down},{name:"竖百叶窗翻页",type:18,dir:o.down},{name:"折叠屏风翻页",type:19,dir:o.down},{name:"螺旋进入翻页",type:20,dir:o.down},{name:"飞驰翻页",type:21,dir:o.down},{name:"翻转翻页",type:22,dir:o.down},{name:"螺旋中心翻页",type:23,dir:o.down}],a={},s=["13"];r.forEach(function(e){a[e.type]=e.name,a[e.name]=e.type});var c=r.filter(function(e){return e.dir==o.down}).map(function(e){return e.type}),l=r.filter(function(e){return e.dir==o.right}).map(function(e){return e.type});e.exports={isBottomArrow:n,isRightArrow:i,BOTTOM_ARROWS:c,RIGHT_ARROWS:l,PAGE_MODE:a,SPECIAL_MODE:s}},function(e,t,n){"use strict";var i=n(38).make,o=i({0:"无尾页无底标",1:"技术支持尾页",2:"技术支持底标",3:"品牌联合底标",4:"deepshare尾页"});e.exports={AD_TYPE:o}},function(e,t){"use strict";function n(e){return e?e.replace(/<\s*(img|input)[^>]*\/?>/gi,"").replace(/<\s*(script|textarea|svg|iframe|embed)[^>]*>.*?<\s*\/\1\s*>/gi,""):e}function i(e){return!!e&&(e=e.replace(/[↵\n\t\s]/g,""),/<\s*(img|input)[^>]*\/?>/gi.test(e)||/<\s*(script|textarea|svg|iframe|embed)[^>]*>.*?<\s*\/\1\s*>/gi.test(e))}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e;return t&&t.length>0&&(t=t.replace(/(^\s*)|(\s*$)/g,""),i(t)&&(console.error("xss text"),e=n(t))),e}function r(e){return e?e.replace(/<\/?[^>]*>/gi,""):""}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=JSON.stringify(e);return t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;"),JSON.parse(t)}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.replace(/&lt;/g,"<").replace(/&gt;/g,">");return t}function l(){return window.CryptoJS}e.exports={toGoodStr:n,isBadStr:i,setJsCrypto:l,perfectStr:o,getSafeJson:a,filterTags:r,getSafeStr:s,getDangerousStr:c}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){return f.getUrlParam("beancode")?h():Promise.resolve()}function r(){return y()?(document.referrer.indexOf("//mp.weixinbridge.com/mp/wapredirect")>-1&&f.addUrlParam("eqxiusource","wxmp"),k().then(function(e){e.success&&(x=e.list,w=e.obj)})):Promise.resolve()}function a(){return x}function s(){return w}function c(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e.split(".").map(function(e){
return Number(e)}),i=t.split(".").map(function(e){return Number(e)}),o=!1,r=0;r<i.length;r++){if(void 0!==n[r]){if(n[r]>i[r])return!0;if(n[r]===i[r])continue;return!1}if(n.length<i.length)return!1}return n.length>i.length&&!o&&(o=!0),o}function l(){return window.renderAd=window.renderAd||new I,window.renderAd}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=n(68).$getAdInfo,d=n(25).$loadEqxAd,h=n(25).$loadBeanJs,f=n(26),g=n(27),m=n(69).getWeChatUser,v=n(58),y=v.isAdScene,b=void 0,x=[],w=[],k=n(68).$getForbiddenImage,S=n(100),I=function(){function e(t){i(this,e),this.tailPage=null,this.buoyPage=null,this.eqxAdData=null,this.tailFlag=null,this.warnPageFlag=null,this.buoyFlag=null,this.olBuoyFlag=null,this.popSubmit=null,this.bannerSubmit=null,this.popShare=null,this.Scene=t,this.addBuoyPages=[],this.buoyJson={css:{top:0,left:5,width:310,height:38},properties:{initType:1,anim:[]},title:null,type:"28"}}return u(e,[{key:"getPageLength",value:function(){this.pageLength=this.Scene.eqxPageList.length-1,!this.Scene.meta.property||void 0!=this.Scene.meta.property.eqAdType&&1!=this.Scene.meta.property.eqAdType||(this.pageLength=this.Scene.eqxPageList.length-2)}},{key:"reportEqxBean",value:function(e){var t=new EqxContent({mediaId:1});t.loadEqxBean().then(function(t){t.report(e)})}},{key:"reportEqxAd",value:function(e){b.report(e)}},{key:"addEventListener",value:function(e){var t=this;e&&e.eventManager&&e.eventManager.subscribe("activePageEnd",{update:function(e){var n={type:"pageFlip",pageInfo:e.data.pageInfo};window.EqxContent&&t.reportEqxBean(n),b&&"report"in b&&t.reportEqxAd(n)}})}},{key:"initRenderAd",value:function(e,t){var n=this;this.addPropParam();var i=null;return f.getUrlParam("beancode")&&(i=4),p(e,t,i).then(function(i){var o=i.map;if(n.tailPage=o.adPosMap.tail-1,n.buoyPage=o.adPosMap.buoy-1,o.existAd&&o.adType.length>0)return o.adType.forEach(function(e){"warn-page"===e&&(n.warnPageFlag=!0),"tail"===e&&(n.tailFlag=!0),"buoy"===e&&(n.buoyFlag=!0),"mt-ol-buoy"===e&&(n.olBuoyFlag=!0),"pop-submit"===e&&(n.popSubmit=!0),"banner-submit"===e&&(n.bannerSubmit=!0),"pop-share"===e&&(n.popShare=!0)}),o.adType.includes("pop")?n.newADRender(e,t,o.adJsv,"true"):n.newADRender(e,t,o.adJsv)})["catch"](function(e){console.log(e)})}},{key:"newADRender",value:function(e,t,n,i){var o=m();if(this.eqxAdData)return this.eqxAdData;var r=this;return d(n).then(function(){return new Promise(function(t){var n={id:e,media:"scene",wx:o,init:function(e){r.eqxAdData=e,t(e)}};i&&(n.backBtnPcode="pop"),b=new EqxAdRender(n)})})["catch"](function(e){console.log(e)})}},{key:"renderAllAds",value:function(e){this.Scene=e,this.getPageLength(),this.renderTail(),this.renderBuoy(),this.renderOlBuoy()}},{key:"renderTail",value:function(){if((this.warnPageFlag||this.tailFlag)&&this.eqxAdData.obj){var e=this.eqxAdData.obj.adPageTpl;if(e){var t=this.pageLength;this.pageLength>this.tailPage&&(t=this.tailPage),this.Scene.insertPage(t,e),this.Scene.renderPage(t+1),this.Scene.updateProgressBar(),this.getPageLength()}}console.log(this.Scene.currentPage,888),this.Scene.currentPage.id?this.Scene.currentPage.eqxCompList.forEach(function(e){S.prototype.isPrototypeOf(e)&&e.eleShow2()}):this.Scene.currentPage.eqxCompList.forEach(function(e){S.prototype.isPrototypeOf(e)&&e.eleShow()})}},{key:"renderTailDom",value:function(e){var t=new this.eqxAdData.Render.tail(e,{pCode:"tail"});t.exposure()}},{key:"renderTailDom2",value:function(e){var t=new this.eqxAdData.Render.tail(e,{pCode:"warn-page"});t.exposure()}},{key:"renderPopShareDom",value:function(e){var t=new this.eqxAdData.Render.tail(e,{pCode:"pop-share"});t.exposure()}},{key:"renderFormDom",value:function(e){var t=new this.eqxAdData.Render.tail(e,{pCode:"pop-submit"});t.exposure()}},{key:"renderFormSubMitDom",value:function(e){var t=new this.eqxAdData.Render.tail(e,{pCode:"banner-submit"});t.exposure()}},{key:"renderBuoy",value:function(e){if(this.buoyFlag&&this.eqxAdData&&this.eqxAdData.obj&&this.eqxAdData.obj.buoyStyle){var t=this.eqxAdData.obj.buoyStyle;if(Object.assign(this.buoyJson.css,t),e){if(!this.addBuoyPages.includes(e.pageJson.id)){var n=0;if(this.Scene.eqxPageList.forEach(function(t,i){t.pageJson.id===e.pageJson.id&&(n=i)}),this.pageLength>this.buoyPage&&n<=this.pageLength)this.addBuoyComp(e);else{var i=this.Scene.eqxPageList[this.pageLength];i.pageJson.properties.xb&&(i=this.Scene.eqxPageList[this.pageLength-1]),e.pageJson.id===i.pageJson.id&&this.addBuoyComp(e)}}}else if(this.pageLength>this.buoyPage)for(var o=this.buoyPage;o<=this.pageLength;o++){var r=this.Scene.eqxPageList[o];this.addBuoyComp(r)}else{var a=!1,s=this.Scene.eqxPageList[this.pageLength];s.pageJson.properties.xb&&(a=!0,s=this.Scene.eqxPageList[this.pageLength-1]),this.addBuoyComp(s,!0,a)}}}},{key:"addBuoyComp",value:function(e,t,n){var i=e.pageJson.properties.xb;if(e.currentLayer&&!i){this.addBuoyPages.push(e.pageJson.id);var o=e.initEqxCompByJson(this.buoyJson,null,!0);o&&(e.renderEqxComp(o),t?0==this.pageLength?o.eleShow():n&&1==this.pageLength&&o.eleShow():o.eleShow())}}},{key:"renderBuoyDom",value:function(e){new this.eqxAdData.Render.buoy({pCode:"buoy",port:e})}},{key:"renderOlBuoy",value:function(){if(this.olBuoyFlag&&this.eqxAdData.obj&&this.eqxAdData.obj.buoyStyleList&&this.eqxAdData.obj.buoyStyleList["mt-ol-buoy"]){var e=this.eqxAdData.obj.buoyStyleList["mt-ol-buoy"],t=$('<div class="gift-info-wrapper" id="ad-ol-buoy"></div>'),n=void 0;n=g.mobilecheck()?this.Scene.$ele.parent()[0]:this.Scene.$ele[0],t.appendTo(n),t.css(e);new this.eqxAdData.Render.buoy({pCode:"mt-ol-buoy",port:"#ad-ol-buoy"})}}},{key:"addPropParam",value:function(){var e=g.getWxVersion();if(g.isAndroidPhone()&&(e.indexOf("7.0.4")>-1||c(e,"7.0.4"))){var t=f.getUrlParam("adpop")?f.removeUrlParam("adpop"):f.addUrlParam("adpop",1);window.history.replaceState({title:"title"},"title",t)}}}]),e}();e.exports={AdBeforeOption:r,RenderAd:I,getAd:l,getForbiddenImages:a,getForbiddenTexts:s,renderBeanDou:o}},function(e,t,n){"use strict";function i(){return r({type:"GET",url:a.FLOW_SERVER+"adview/adp/image/forbid"})}function o(e,t,n){var i={mediaId:1,worksId:e,worksCode:t};return n&&(i.parentMediaId=n),r({type:"GET",url:a.FLOW_SERVER+"adview/adp/common/ad/info/get",data:i})}var r=n(23).$ajax,a=n(24);e.exports={$getForbiddenImage:i,$getAdInfo:o}},function(e,t,n){"use strict";function i(e,t){if(Y()){var i=n(67).getAd,o=i();o.reportEqxAd({type:e,method:t})}}function o(){return O()?R():M()}function r(e){return new Promise(function(t,n){var i=!1;e&&e.shareDes&&("string"==typeof e.shareDes.title&&/#分享人位置#/.test(e.shareDes.title)&&(i=!0),"string"==typeof e.shareDes.description&&/#分享人位置#/.test(e.shareDes.description)&&(i=!0)),i?o().then(function(e){t(),window.INIT_ADDRESS_COMPONENTS=e})["catch"](function(e){t()}):t()})}function a(e,t){if(k="",$=e.obj.property,S=$.shareDes&&$.shareDes.title&&$.shareDes.title.description?$.shareDes.title.description:e.obj.name,I=D(e.obj.cover),Q=$.shareDes&&$.shareDes.description&&$.shareDes.description.description?$.shareDes.description.description||Z:e.obj.description||Z,T=t,$.shareDes&&"string"==typeof $.shareDes){var n=$.shareDes;$.shareDes={description:{type:"position",description:n}}}if(S=w(S),Q=w(Q),!$.shareDes)return h();$.shareDes.avatar&&(I=V.headimgurl);var i=e.obj.id;r($).then(function(){"{}"==JSON.stringify($.shareDes.title)&&($.shareDes.title=S),"{}"==JSON.stringify($.shareDes.description)&&($.shareDes.description=Q),s($.shareDes,i).then(function(){return h()})["catch"](function(e){return console.error(e)})})}function s(e,t){var n=function(){return Promise.resolve(null)},i=function(){return Promise.resolve(null)};return e.title&&(n=function(){return u(e.title,t).then(function(t){S=e.nickname?c(t):t,S=w(S)})}),e.description&&(i=function(){return l(e.description,t).then(function(t){Q=e.nickname?c(t):t,Q=w(Q)})}),n().then(function(){i().then(function(e){console.log(S,Q)})})}function c(e){var t=/#分享者#/g;return e.replace(t,V.nickname)}function l(e,t){var n="";return new Promise(function(i,o){if("object"===("undefined"==typeof e?"undefined":E(e)))switch(e.type){case"myself":n+="我是"+V.nickname+","+e.description,i(n);break;case"position":W(t).then(function(t){n+="我是第"+t+"位"+e.description,i(n)});break;case"selfAndPosition":W(t).then(function(t){n+="我是"+V.nickname+", 我是第"+t+"位 "+e.description,i(n)});break;default:n=e.description,i(n)}else/#分享次数#/.test(e)?W(t).then(function(t){n=e.replace(/#分享次数#/,t).replace(/#分享者#/,V.nickname).replace(/#分享人位置#/,(window.INIT_ADDRESS_COMPONENTS?window.INIT_ADDRESS_COMPONENTS.city:"北京市")||"北京市"),i(n)}):(n=e.replace(/#分享者#/,V.nickname).replace(/#分享人位置#/,(window.INIT_ADDRESS_COMPONENTS?window.INIT_ADDRESS_COMPONENTS.city:"北京市")||"北京市"),i(n))})}function u(e,t){var n="";return new Promise(function(i,o){if("object"===("undefined"==typeof e?"undefined":E(e)))switch(e.type){case"myself":n+="我是"+V.nickname+","+e.description,i(n);break;case"position":W(t).then(function(t){n+="我是第"+t+"位"+e.description,i(n)});break;case"selfAndPosition":W(t).then(function(t){n+="我是"+V.nickname+", 我是第"+t+"位 "+e.description,i(n)});break;default:n=e.description,i(n)}else/#分享次数#/.test(e)?W(t).then(function(t){n=e.replace(/#分享次数#/,t).replace(/#分享者#/,V.nickname).replace(/#分享人位置#/,(window.INIT_ADDRESS_COMPONENTS?window.INIT_ADDRESS_COMPONENTS.city:"北京市")||"北京市"),i(n)}):(n=e.replace(/#分享者#/,V.nickname).replace(/#分享人位置#/,(window.INIT_ADDRESS_COMPONENTS?window.INIT_ADDRESS_COMPONENTS.city:"北京市")||"北京市"),i(n))})}function p(){k=Date.now()+""+Math.floor(1e5*Math.random()),T=j("userKey",k,T),h()}function d(e,t){T=e,T=j("compKey",t,T),h()}function h(){function e(){window.scene&&0!==window.scene.property.eqAdType&&1!==window.scene.isTemplate&&2!==window.scene.isTemplate&&X()}b().then(function(){var t=F("toPage",T),n=t;if(window._tracker_api_)try{n=window._tracker_api_.getShareUrl(n)}catch(o){}wx.onMenuShareTimeline({title:S,link:n,desc:Q,imgUrl:I,success:function(){try{window._tracker_api_.share("timeline")}catch(t){}f(),e(),i("wxShare","onMenuShareTimeline")},cancel:function(){}}),wx.onMenuShareAppMessage({title:S,desc:Q,link:n,imgUrl:I,success:function(){try{window._tracker_api_.share("message")}catch(n){}f(t),e(),i("wxShare","onMenuShareAppMessage")},cancel:function(){}}),wx.onMenuShareQQ({title:S,desc:Q,link:n,imgUrl:I,success:function(){try{window._tracker_api_.share("qq")}catch(t){}e(),i("wxShare","onMenuShareQQ")},cancel:function(){}}),wx.onMenuShareWeibo({title:S,desc:Q,link:n,imgUrl:I,success:function(){try{window._tracker_api_.share("weibo")}catch(t){}e(),i("wxShare","onMenuShareWeibo")},cancel:function(){}}),wx.onMenuShareQZone({title:S,desc:Q,link:n,imgUrl:I,success:function(){try{window._tracker_api_.share("qzone"),i("wxShare","onMenuShareQZone")}catch(e){}},cancel:function(){}})})}function f(e){if(k)if(K.needWait){var t=K.needWait,n=setInterval(function(){if(K[t]){clearInterval(n),n=null;var e={userKey:k};V&&V.headimgurl&&(K.shareUserHeader=V.headimgurl),V&&V.nickname&&(K.shareUserName=V.nickname),delete K.needWait,e.data=JSON.stringify(K),z(e)["catch"](function(e){U(JSON.stringify(e))})}},200);setTimeout(function(){n&&(clearInterval(n),n=null)},5e3)}else{var i={userKey:k};V&&V.headimgurl&&(K.shareUserHeader=V.headimgurl),V&&V.nickname&&(K.shareUserName=V.nickname),i.data=JSON.stringify(K),z(i)["catch"](function(e){U(JSON.stringify(e))})}}function g(e){window._tracker_&&(window._tracker_.push(["wx_user_info",{openid:e.openid,nickname:e.nickname,sex:e.sex,province:e.province,city:e.city,country:e.country,headimgurl:e.headimgurl,privilege:e.privilege,unionid:e.unionid}]),console.log(window.__data=["wx_user_info",{openid:e.openid,nickname:e.nickname,sex:e.sex,province:e.province,city:e.city,country:e.country,headimgurl:e.headimgurl,privilege:e.privilege,unionid:e.unionid}])),Object.assign(V,e),window.sessionStorage.setItem("wx_appid",V.thirdAppId||""),window.sessionStorage.setItem("wx_openid",V.thirdOpenid||V.openid||""),window.sessionStorage.setItem("wx_unionid",V.unionid||""),window.eqxH5WxInfo=V}function m(){return V}function v(e){K=e}function y(e,t){K[e]=t}function b(){return G.initWx()}function x(e,t,n){console.log("----------");var i=window.location.href,o=e||C,r=P.WX_API+"eqs/s/wx/user/info/get";return q(n)?(o=n.property.accreditSetting.appId,r=P.WX_thirdOpenId+"h5/third-party/authorize",r=j("state",i,r),r=j("appid",o,r),r=j("hdc",n.property.hdc&&0!=n.property.hdc.length?"1":"0",r),void(window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+o+"&redirect_uri="+encodeURIComponent(r)+"&response_type=code&scope=snsapi_userinfo&component_appid="+n.property.accreditSetting.thirdAppId+"#wechat_redirect")):N(location.host)?void H().then(function(a){console.log("pppppppppp");var s=a.map||{};o=s.appId;var c=n&&n.code;r=s.domain+"/eqs/s/wx/ad/user/info/get/"+c,console.log(r),e&&(r=j("userId",t,r)),r=j("state",i,r),r=j("productType",1,r),r=j("hdc",n.property.hdc&&0!=n.property.hdc.length?"1":"0",r),window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+o+"&redirect_uri="+encodeURIComponent(r)+"&response_type=code&scope=snsapi_userinfo#wechat_redirect"}):(e&&(r=j("userId",t,r)),r=j("state",i,r),r=j("productType",1,r),r=j("hdc",n.property.hdc&&0!=n.property.hdc.length?"1":"0",r),void(window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+o+"&redirect_uri="+encodeURIComponent(r)+"&response_type=code&scope=snsapi_userinfo#wechat_redirect"))}function w(e){var t=e;if(!ee){var i=n(67).getForbiddenTexts;ee=i()}return ee&&ee.length>0&&t&&ee.forEach(function(e){var n=new RegExp(e);t=t.replace(n,"")}),t}var k,S,I,T,$,E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P=n(24),_=n(33),C=_.APP_ID,A=n(27),O=A.isWeixin,q=A.isOpenPlatformWXAccreditScene,L=n(70),M=L.getAddressByAMap,R=L.getLocationByQQMap,j=n(26).addUrlParam,F=n(26).removeUrlParam,B=n(71),D=B.addPrefix,J=n(34),N=J.isEqxAdSceneHost,z=n(80).$postWxComp,W=n(81).$getPvCount,H=n(57).$getAdAppIdAndDomain,Y=n(58).isAdScene,U=n(82).popUpModal,X=n(82).popShareModal,G=n(22),Q="",V={},K={},Z="我用易企秀做了一个超酷炫的H5，快来看看吧。",ee=null;e.exports={initWeChat:a,shareWidthSDK:h,setWeChatUser:g,getWeChatUser:m,setWxCompData:v,saveWxCompData:y,generateUserKey:p,getWxJSSDK:b,hrefToWxAuth:x,addCompKey:d,setTitleAndDes:s}},function(e,t,n){"use strict";function i(e){var t={country:"中国"},n=Object.assign(t,e);return n.city||(n.city=n.province),n}function o(){return new Promise(function(e,t){u().then(function(){var n=new AMap.Map("iCenter");n.plugin("AMap.Geolocation",function(){function o(t){e(i(t.addressComponent))}function r(e){t(e)}var a=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,maximumAge:0});n.addControl(a),a.getCurrentPosition(),AMap.event.addListener(a,"complete",o),AMap.event.addListener(a,"error",r)})})})}function r(e){var t=e.lat,n=e.lng;return new Promise(function(e,o){l().then(function(){var r=new qq.maps.Geocoder;r.setComplete(function(t){console.log(t);var n=t.detail.addressComponents;e(i(n))}),r.setError(function(e){o(e)});var a=new qq.maps.LatLng(t,n);r.getAddress(a)})})}function a(){return new Promise(function(e,t){l().then(function(){var t=new qq.maps.CityService({complete:function(t){r({lat:t.detail.latLng.lat,lng:t.detail.latLng.lng}).then(function(t){e(t)})}});t.searchLocalCity()})})}function s(){return new Promise(function(e,t){d().then(function(){wx.getLocation({type:"wgs84",success:function(t){r({lat:t.latitude,lng:t.longitude}).then(function(t){e(t)})}})},function(e){console.log(e)})})}var c=n(25),l=c.$loadQQMap,u=c.$loadAMap,p=n(69),d=p.getWxJSSDK;e.exports={getLocationByQQMap:a,getAddressByAMap:o,getAddressByQQMap:r,getWXAddress:s}},function(e,t,n){"use strict";function i(e,t){return new Promise(function(n,i){var o=new Image;t&&(o.crossOrigin="Anonymous"),o.onload=function(){n(this)},o.onerror=o.onabort=function(){i(new Error("download image fail"))},o.src=e})}function o(e){var t=s(e);return t=t.replace(/\?.*$/,""),t+="?imageInfo",S({method:"GET",url:t})}function r(e,t,n,i){if(!e)return"";var o=i||e.includes("nowebp=true");if("string"!=typeof e)throw new Error("Typeof src is not string");var r=s(e);if(/^blob:/.test(e))return e;if(e.startsWith("data:image/"))return e;if(/\.(ico|svg)$/i.test(e.split("?")[0]))return encodeURI(r);if(!t)return encodeURI(/\?imageMogr2/.test(e)?r:r+"?imageMogr2/auto-orient");var a=c(e,t,n);t=a.width,n=a.height;var l="imageMogr2/auto-orient/thumbnail/"+Math.round(t)+"x"+Math.round(n)+">";if(r+=/\?imageMogr2/.test(e)?"|"+l:"?"+l,window.app&&window.app.meta.ext&&window.app.meta.ext.yqc)m()&&(r+=/\?imageMogr2/.test(r)?"/format/webp/quality/80!/strip":"?imageMogr2/format/webp/quality/80!/strip");else if(m()&&!/.(gif)$/.test(e)&&!/.(gif\?)/.test(e)){if(i)return r+=/\?imageMogr2/.test(r)?"/strip":"?imageMogr2/strip",encodeURI(r);if(o)return encodeURI(r);r+=/\?imageMogr2/.test(r)?"/format/webp/quality/80!/strip":"?imageMogr2/format/webp/quality/80!/strip"}return encodeURI(r)}function a(e){if(e.indexOf("//")<0){var t=e.indexOf("/");if(t>-1){var n=e.slice(0,t),i=/.*\..*?\..*/g;if(i.test(n))return!0}}return!1}function s(e){if(!e)return void console.error("add prefix invalid src");if(/^blob:/.test(e))return e;if(e=e.replace(/\/crop\//i,"/cut/"),e.startsWith("data:image/"))return e;var t=window.location.protocol;if(e.startsWith("//")&&"file:"!==t&&(e=t+e),!e.startsWith("/")&&!e.startsWith("file://")){if(a(e))return t+"//"+e;if(/^https?:\/\//.test(e)){for(var n,i=[w.BIND_USER_FILE,w.FREE_USER_FILE,w.VIP_USER_FILE],o=0;o<i.length;o++)if(n=i[o],e.startsWith(n)){e=e.replace(n,w.FILE);break}}else e=w.FILE+e}return(e.startsWith("/tencent/")||e.startsWith("/material/")||e.startsWith("/store/"))&&(e=w.FILE+e),e}function c(e,t,n){/gif/.test(e)&&window.scene&&window.scene.ext&&window.scene.ext.yqc&&window.scene.ext.yqc.upd&&(t=.75*t,n=.75*n);var i=window.devicePixelRatio||1;t=k(t),n=k(n),t&&n?(t*=i,n*=i):(t*=i,n=t);var o=9999;return t>n?t>o&&(n*=1-(t-o)/t,t=o):t<n?n>o&&(t*=1-(n-o)/n,n=o):t>o&&(t=n=o),{width:t,height:n}}function l(e){var t=window.location.protocol;if(e){if(/^http.*/.test(e)){var n=e.match(/http/g).length;if(n>1){var i=e.substring(e.indexOf("http",n-1));return i}return e}if(/^blob:/.test(e)||e.startsWith("data:image/"))return e;if(e.startsWith("//")&&"file:"==t)return"http:"+e;if(e.startsWith("//"))return e;if("file:"==t&&e.startsWith("file://"))return e;var o=e.replace(/\/crop\//i,"/cut/");return w.FILE+o}return e}function u(e){var t=window.URL||window.webkitURL;try{var n=t.createObjectURL(e)}catch(i){return Promise.reject(new TypeError("不支持URL.createObjectURL"))}return p(n)}function p(e){return i(e).then(function(e){return{width:e.width,height:e.height,ratio:e.width/e.height}})}function d(e,t){if(e.shape)return Promise.resolve(e.shape);var n=r(e.path,t||115),o=w.FILE+e.path,a=0;return i(o).then(function(e){return a=e.width/e.height,i(n)}).then(function(e){var t=window.devicePixelRatio||1,n=e.height/t;return{width:n*a,height:n,ratio:a}})}function h(e){var t=s(e);return t=t.replace(/\?.*$/,""),t+="?imageInfo",S({method:"GET",url:t})}function f(e){var t;return new Promise(function(n){I.parseMetaData(e,function(i){if(i&&i.exif&&1!==i.exif.get("Orientation")){var o={orientation:!0,canvas:!1};I(e,function(e){t=e.toDataURL(),n(t)},o)}else t=I.createObjectURL(e),n(t)},{maxMetaDataSize:262144,disableImageHead:!1})})}function g(){var e=-1;if(window.navigator&&window.navigator.userAgent){var t=navigator.userAgent.toLocaleLowerCase();if(/ipad|iphone/i.test(navigator.userAgent)){var n=t.match(/cpu iphone os (.*?) like mac os/)||"";n&&n.length&&(e=k(n[1].replace(/_/g,".")))}}return e}function m(){var e=!![].map&&0==document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp");return e||g()-14>=0}function v(e,t,n){return new Promise(function(i){var o=new Image;o.setAttribute("crossOrigin","anonymous"),T(e.src).then(function(r){o.src=w.FILE+r.obj;var a=document.createElement("canvas");a.width=t||e.width,a.height=n||e.height;var s=a.getContext("2d");o.onload=function(){s.drawImage(o,0,0,a.width,a.height);var e=a.toDataURL("image/png",1);i(e)}})})}function y(e,t){return new Promise(function(n){var i=new Image;i.setAttribute("crossOrigin","anonymous");var o=document.createElement("canvas"),r=o.getContext("2d");i.onload=function(){o.width=i.width,o.height=i.height,90===t?(o.width=i.height,o.height=i.width,r.rotate(t/180*Math.PI),r.drawImage(i,0,-o.width)):r.drawImage(i,0,0,o.width,o.height);var e=o.toDataURL("image/png",1);n(e)},i.src=e})}function b(e){var t=document.createElement("img");t.style.backgroundColor=e.style.backgroundColor,t.width=e.width,t.height=e.height;var n=e.toDataURL("image/png",1);return t.src=n,t}function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{var t=void 0,n="";t=e.split(",")[0].indexOf("base64")>=0?window.atob(e.split(",")[1]):unescape(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0];for(var i=new Uint8Array(t.length),o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return new window.Blob([i],{type:n})}catch(r){console.log(r)}}var w=n(24),k=Number.parseInt,S=n(23).$ajax,I=n(72),T=n(54).getImgFromOrigin;e.exports={loadImg:i,qiniuZoom:r,addPrefix:s,initEffectImgPath:l,getImgShapeByNativeFile:u,getImgShape:d,getImgShapeBySrc:p,getQiniuImgInfo:h,uploadImg:f,getBase64Image:v,getBase64ImageBySrc:y,canvasToImage:b,isSupportWebp:m,isTotalUrlWithoutDoubleSlash:a,dataURItoBlob:x,getImgInfo:o}},function(e,t,n){"use strict";e.exports=n(73),n(74),n(75),n(76),n(77),n(78),n(79)},function(e,t,n){var i;"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(o){"use strict";function r(e,t,n){var i,o=document.createElement("img");return o.onerror=function(i){return r.onerror(o,i,e,t,n)},o.onload=function(i){return r.onload(o,i,e,t,n)},"string"==typeof e?(r.fetchBlob(e,function(t){t?(e=t,i=r.createObjectURL(e)):(i=e,n&&n.crossOrigin&&(o.crossOrigin=n.crossOrigin)),o.src=i},n),o):r.isInstanceOf("Blob",e)||r.isInstanceOf("File",e)?(i=o._objectURL=r.createObjectURL(e),i?(o.src=i,o):r.readFile(e,function(e){var n=e.target;n&&n.result?o.src=n.result:t&&t(e)})):void 0}function a(e,t){!e._objectURL||t&&t.noRevoke||(r.revokeObjectURL(e._objectURL),delete e._objectURL)}var s=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;r.fetchBlob=function(e,t,n){t()},r.isInstanceOf=function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},r.transform=function(e,t,n,i,o){n(e,o)},r.onerror=function(e,t,n,i,o){a(e,o),i&&i.call(e,t)},r.onload=function(e,t,n,i,o){a(e,o),i&&r.transform(e,o,i,n,{})},r.createObjectURL=function(e){return!!s&&s.createObjectURL(e)},r.revokeObjectURL=function(e){return!!s&&s.revokeObjectURL(e)},r.readFile=function(e,t,n){if(window.FileReader){var i=new FileReader;if(i.onload=i.onerror=t,n=n||"readAsDataURL",i[n])return i[n](e),i}return!1},i=function(){return r}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))}(window)},function(e,t,n){var i,o,r;"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(a){"use strict";o=[n(73)],i=a,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(function(e){"use strict";var t=e.transform;e.transform=function(n,i,o,r,a){t.call(e,e.scale(n,i,a),i,o,r,a)},e.transformCoordinates=function(){},e.getTransformedOptions=function(e,t){var n,i,o,r,a=t.aspectRatio;if(!a)return t;n={};for(i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n.crop=!0,o=e.naturalWidth||e.width,r=e.naturalHeight||e.height,o/r>a?(n.maxWidth=r*a,n.maxHeight=r):(n.maxWidth=o,n.maxHeight=o/a),n},e.renderImageToCanvas=function(e,t,n,i,o,r,a,s,c,l){return e.getContext("2d").drawImage(t,n,i,o,r,a,s,c,l),e},e.hasCanvasOption=function(e){return e.canvas||e.crop||!!e.aspectRatio},e.scale=function(t,n,i){function o(){var e=Math.max((c||w)/w,(l||k)/k);e>1&&(w*=e,k*=e)}function r(){var e=Math.min((a||w)/w,(s||k)/k);e<1&&(w*=e,k*=e)}n=n||{};var a,s,c,l,u,p,d,h,f,g,m,v=document.createElement("canvas"),y=t.getContext||e.hasCanvasOption(n)&&v.getContext,b=t.naturalWidth||t.width,x=t.naturalHeight||t.height,w=b,k=x;if(y&&(n=e.getTransformedOptions(t,n,i),d=n.left||0,h=n.top||0,n.sourceWidth?(u=n.sourceWidth,void 0!==n.right&&void 0===n.left&&(d=b-u-n.right)):u=b-d-(n.right||0),n.sourceHeight?(p=n.sourceHeight,void 0!==n.bottom&&void 0===n.top&&(h=x-p-n.bottom)):p=x-h-(n.bottom||0),w=u,k=p),a=n.maxWidth,s=n.maxHeight,c=n.minWidth,l=n.minHeight,y&&a&&s&&n.crop?(w=a,k=s,m=u/p-a/s,m<0?(p=s*u/a,void 0===n.top&&void 0===n.bottom&&(h=(x-p)/2)):m>0&&(u=a*p/s,void 0===n.left&&void 0===n.right&&(d=(b-u)/2))):((n.contain||n.cover)&&(c=a=a||c,l=s=s||l),n.cover?(r(),o()):(o(),r())),y){if(f=n.pixelRatio,f>1&&(v.style.width=w+"px",v.style.height=k+"px",w*=f,k*=f,v.getContext("2d").scale(f,f)),g=n.downsamplingRatio,g>0&&g<1&&w<u&&k<p)for(;u*g>w;)v.width=u*g,v.height=p*g,e.renderImageToCanvas(v,t,d,h,u,p,0,0,v.width,v.height),d=0,h=0,u=v.width,p=v.height,t=document.createElement("canvas"),t.width=u,t.height=p,e.renderImageToCanvas(t,v,0,0,u,p,0,0,u,p);return v.width=w,v.height=k,e.transformCoordinates(v,n),e.renderImageToCanvas(v,t,d,h,u,p,0,0,w,k)}return t.width=w,t.height=k,t}})},function(e,t,n){var i,o,r;"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(a){"use strict";o=[n(73)],i=a,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(function(e){"use strict";var t=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);e.blobSlice=t&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},e.metaDataParsers={jpeg:{65505:[]}},e.parseMetaData=function(t,n,i,o){i=i||{},o=o||{};var r=this,a=i.maxMetaDataSize||262144,s=!(window.DataView&&t&&t.size>=12&&"image/jpeg"===t.type&&e.blobSlice);!s&&e.readFile(e.blobSlice.call(t,0,a),function(t){if(t.target.error)return console.log(t.target.error),void n(o);var a,s,c,l,u=t.target.result,p=new DataView(u),d=2,h=p.byteLength-4,f=d;if(65496===p.getUint16(0)){for(;d<h&&(a=p.getUint16(d),a>=65504&&a<=65519||65534===a);){if(s=p.getUint16(d+2)+2,d+s>p.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(c=e.metaDataParsers.jpeg[a])for(l=0;l<c.length;l+=1)c[l].call(r,p,d,s,o,i);d+=s,f=d}!i.disableImageHead&&f>6&&(u.slice?o.imageHead=u.slice(0,f):o.imageHead=new Uint8Array(u).subarray(0,f))}else console.log("Invalid JPEG file: Missing JPEG marker.");n(o)},"readAsArrayBuffer")||n(o)},e.hasMetaOption=function(e){return e&&e.meta};var n=e.transform;e.transform=function(t,i,o,r,a){e.hasMetaOption(i)?e.parseMetaData(r,function(a){n.call(e,t,i,o,r,a)},i,a):n.apply(e,arguments)}})},function(e,t,n){var i,o,r;"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(a){"use strict";o=[n(73),n(75)],i=a,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(function(e){"use strict";"fetch"in window&&"Request"in window&&(e.fetchBlob=function(t,n,i){return e.hasMetaOption(i)?fetch(new Request(t,i)).then(function(e){return e.blob()}).then(n)["catch"](function(e){console.log(e),n()}):void n()})})},function(e,t,n){var i,o,r;"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(a){"use strict";o=[n(73),n(75)],i=a,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(function(e){"use strict";e.ExifMap=function(){return this},e.ExifMap.prototype.map={Orientation:274},e.ExifMap.prototype.get=function(e){return this[e]||this[this.map[e]]},e.getExifThumbnail=function(e,t,n){var i,o,r;if(!n||t+n>e.byteLength)return void console.log("Invalid Exif data: Invalid thumbnail data.");for(i=[],o=0;o<n;o+=1)r=e.getUint8(t+o),i.push((r<16?"0":"")+r.toString(16));return"data:image/jpeg,%"+i.join("%")},e.exifTagTypes={1:{getValue:function(e,t){return e.getUint8(t)},size:1},2:{getValue:function(e,t){return String.fromCharCode(e.getUint8(t))},size:1,ascii:!0},3:{getValue:function(e,t,n){return e.getUint16(t,n)},size:2},4:{getValue:function(e,t,n){return e.getUint32(t,n)},size:4},5:{getValue:function(e,t,n){return e.getUint32(t,n)/e.getUint32(t+4,n)},size:8},9:{getValue:function(e,t,n){return e.getInt32(t,n)},size:4},10:{getValue:function(e,t,n){return e.getInt32(t,n)/e.getInt32(t+4,n)},size:8}},e.exifTagTypes[7]=e.exifTagTypes[1],e.getExifValue=function(t,n,i,o,r,a){var s,c,l,u,p,d,h=e.exifTagTypes[o];if(!h)return void console.log("Invalid Exif data: Invalid tag type.");if(s=h.size*r,c=s>4?n+t.getUint32(i+8,a):i+8,c+s>t.byteLength)return void console.log("Invalid Exif data: Invalid data offset.");if(1===r)return h.getValue(t,c,a);for(l=[],u=0;u<r;u+=1)l[u]=h.getValue(t,c+u*h.size,a);if(h.ascii){for(p="",u=0;u<l.length&&(d=l[u],"\0"!==d);u+=1)p+=d;return p}return l},e.parseExifTag=function(t,n,i,o,r){var a=t.getUint16(i,o);r.exif[a]=e.getExifValue(t,n,i,t.getUint16(i+2,o),t.getUint32(i+4,o),o)},e.parseExifTags=function(e,t,n,i,o){var r,a,s;if(n+6>e.byteLength)return void console.log("Invalid Exif data: Invalid directory offset.");if(r=e.getUint16(n,i),a=n+2+12*r,a+4>e.byteLength)return void console.log("Invalid Exif data: Invalid directory size.");for(s=0;s<r;s+=1)this.parseExifTag(e,t,n+2+12*s,i,o);return e.getUint32(a,i)},e.parseExifData=function(t,n,i,o,r){if(!r.disableExif){var a,s,c,l=n+10;if(1165519206===t.getUint32(n+4)){if(l+8>t.byteLength)return void console.log("Invalid Exif data: Invalid segment size.");if(0!==t.getUint16(n+8))return void console.log("Invalid Exif data: Missing byte alignment offset.");switch(t.getUint16(l)){case 18761:a=!0;break;case 19789:a=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}if(42!==t.getUint16(l+2,a))return void console.log("Invalid Exif data: Missing TIFF marker.");s=t.getUint32(l+4,a),o.exif=new e.ExifMap,s=e.parseExifTags(t,l,l+s,a,o),s&&!r.disableExifThumbnail&&(c={exif:{}},s=e.parseExifTags(t,l,l+s,a,c),c.exif[513]&&(o.exif.Thumbnail=e.getExifThumbnail(t,l+c.exif[513],c.exif[514]))),o.exif[34665]&&!r.disableExifSub&&e.parseExifTags(t,l,l+o.exif[34665],a,o),o.exif[34853]&&!r.disableExifGps&&e.parseExifTags(t,l,l+o.exif[34853],a,o)}}},e.metaDataParsers.jpeg[65505].push(e.parseExifData)})},function(e,t,n){var i,o,r;"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(a){"use strict";o=[n(73),n(77)],i=a,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(function(e){"use strict";e.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",
318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},e.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},e.ExifMap.prototype.getText=function(e){var t=this.get(e);switch(e){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[e][t];case"ExifVersion":case"FlashpixVersion":if(!t)return;return String.fromCharCode(t[0],t[1],t[2],t[3]);case"ComponentsConfiguration":if(!t)return;return this.stringValues[e][t[0]]+this.stringValues[e][t[1]]+this.stringValues[e][t[2]]+this.stringValues[e][t[3]];case"GPSVersionID":if(!t)return;return t[0]+"."+t[1]+"."+t[2]+"."+t[3]}return String(t)},function(e){var t,n=e.tags,i=e.map;for(t in n)n.hasOwnProperty(t)&&(i[n[t]]=t)}(e.ExifMap.prototype),e.ExifMap.prototype.getAll=function(){var e,t,n={};for(e in this)this.hasOwnProperty(e)&&(t=this.tags[e],t&&(n[t]=this.getText(t)));return n}})},function(e,t,n){var i,o,r;"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(a){"use strict";o=[n(73),n(74),n(75)],i=a,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(function(e){"use strict";var t=e.hasCanvasOption,n=e.hasMetaOption,i=e.transformCoordinates,o=e.getTransformedOptions;e.hasCanvasOption=function(n){return!!n.orientation||t.call(e,n)},e.hasMetaOption=function(t){return t&&t.orientation===!0||n.call(e,t)},e.transformCoordinates=function(t,n){i.call(e,t,n);var o=t.getContext("2d"),r=t.width,a=t.height,s=t.style.width,c=t.style.height,l=n.orientation;if(l&&!(l>8))switch(l>4&&(t.width=a,t.height=r,t.style.width=c,t.style.height=s),l){case 2:o.translate(r,0),o.scale(-1,1);break;case 3:o.translate(r,a),o.rotate(Math.PI);break;case 4:o.translate(0,a),o.scale(1,-1);break;case 5:o.rotate(.5*Math.PI),o.scale(1,-1);break;case 6:o.rotate(.5*Math.PI),o.translate(0,-a);break;case 7:o.rotate(.5*Math.PI),o.translate(r,-a),o.scale(-1,1);break;case 8:o.rotate(-.5*Math.PI),o.translate(-r,0)}},e.getTransformedOptions=function(t,n,i){var r,a,s=o.call(e,t,n),c=s.orientation;if(c===!0&&i&&i.exif&&(c=i.exif.get("Orientation")),!c||c>8||1===c)return s;r={};for(a in s)s.hasOwnProperty(a)&&(r[a]=s[a]);switch(r.orientation=c,c){case 2:r.left=s.right,r.right=s.left;break;case 3:r.left=s.right,r.top=s.bottom,r.right=s.left,r.bottom=s.top;break;case 4:r.top=s.bottom,r.bottom=s.top;break;case 5:r.left=s.top,r.top=s.left,r.right=s.bottom,r.bottom=s.right;break;case 6:r.left=s.top,r.top=s.right,r.right=s.bottom,r.bottom=s.left;break;case 7:r.left=s.bottom,r.top=s.right,r.right=s.top,r.bottom=s.left;break;case 8:r.left=s.bottom,r.top=s.left,r.right=s.top,r.bottom=s.right}return r.orientation>4&&(r.maxWidth=s.maxHeight,r.maxHeight=s.maxWidth,r.minWidth=s.minHeight,r.minHeight=s.minWidth,r.sourceWidth=s.sourceHeight,r.sourceHeight=s.sourceWidth),r}})},function(e,t,n){"use strict";function i(e){return c({type:"POST",url:l.WX_API+"eqs/s/wx/component",data:e})}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=[];p("openid")&&(localStorage.setItem("wxUserResForH5",p("openid")),o.push("openid")),p("thirdOpenId")&&g(t)&&(localStorage.setItem("wxAccreditForH5"+t.property.accreditSetting.appId,p("thirdOpenId")),o.push("thirdOpenId")),o.length&&(location.href=h(o));var r=g(t)?localStorage.getItem("wxAccreditForH5"+t.property.accreditSetting.appId):localStorage.getItem("wxUserResForH5"),a={};return/\.eqxiu\.cn/.test(u(window.location.href))&&(a.userId=e),r&&(a.openid=r),n&&(a.sceneId=n),i&&(a.sceneCode=i),c({type:"GET",url:l.WX_API+"eqs/s/wx/user/cache",data:a})}function r(){var e=u(window.location.href),t="eqs/s/wx/ticket?time="+Date.now(),n=[/eqxiu\.com/,/eqh5\.cn/,/eqxiu\.cc/,/eqshow\.cn/,/yqxiu\.cn/];return n.some(function(t){return t.test(e)})||(t+=/\.eqxiu\.cn/.test(e)?"&domain=eqxiu.cn":/\.iqeqxiu\.cn/.test(e)?"&domain=iqeqxiu.cn":"&domain="+e),console.log("getWxTicket",t),c({type:"GET",url:l.WX_API+t})}function a(e){return c({type:"GET",url:l.WX_API+"eqs/s/wx/wechat/appid/get",data:{userId:e}}).then(function(e){return e.obj})}function s(){if(m)return m=!1,c({type:"GET",url:l.WX_API+"eqs/s/wx/syncWx"})}var c=n(23).ajax,l=n(24),u=n(26).getUrlHost,p=n(26).getUrlParam,d=n(26),h=d.removeUrlParams,f=n(27),g=f.isOpenPlatformWXAccreditScene,m=!0;e.exports={$postWxComp:i,$getUserWxInfo:o,$getWxTicket:r,$getWxAppId:a,$setWxCookie:s}},function(e,t,n){"use strict";function i(e){return void 0!==s?Promise.resolve(s):o(e).then(function(e){return s=e||""})["catch"](function(){return s=""})}function o(e){return r({type:"GET",url:a.SERVER_1+"eqs/s/scene/pv?sceneId="+e})}var r=n(23).ajax,a=n(24),s=void 0;e.exports={$getPvCount:i}},function(e,t,n){"use strict";function i(e){var t=$('<div class="pop-up-box">\n                        <div class="pop-up-form">\n                            <div class="pop-up-content">\n                                <span class="pop-up-msg">'+d(e)+'</span>\n                            </div>\n                            <div class="pop-up-btn"><a class="pop-up-btn-close">关闭</a></div>\n                        </div>\n                    </div>');$(".main-page.z-current").not(".editor-section").prepend(t);var n=p();if(!n&&u()){var i=t.find(".pop-up-form").height();t.find(".pop-up-form").css({transform:"rotate(90deg) translate3d(0px, 0px, 0px)",marginTop:"0px",top:"calc(50% - "+i/2+"px)"})}var o=$(".pop-up-btn");o.on("click",function(){t.animate({opacity:0},{duration:300,complete:function(e){return t.remove()}})})}function o(){var e=a(),t=void 0;if(h()){if(!window.devScene.renderAd||!window.devScene.renderAd.popShare)return;t=$('<div class="pop-up-box">\n                        <div class="pop-share-ad-form">\n                            <div class="pop-share-ad-content" id="pop-share-ad-ct">\n                            </div>\n                            <div rdt="3" cat="pc_editor" act="卡片_分享_点我制作" class="pop-share-btn"><span class="eqf-no-l"></span></div>\n                        </div>\n                    </div>'),$(".main-page.z-current").not(".editor-section").prepend(t),setTimeout(function(){window.devScene.renderAd.renderPopShareDom("#pop-share-ad-ct")},100)}else{if(!e||!e.shareCover)return;var n=c(e.coverLink),i=void 0;i=/http/.test(e.shareCover)?e.shareCover:s.FILE+e.shareCover;var o=e.stationAd,r='bd_attr= "cat=尾页广告&act='+o+'"';t=$('<div class="pop-up-box">\n                            <div class="pop-share-form">\n                                <div class="pop-share-content">\n                                    <a rdt="3" cat="pc_editor" act="卡片_分享_图片连接" href="'+n+'">\n                                        <img class="bdc" bigdata_view="0" '+r+' style="width:277px;height:420px;" src="'+i+'">\n                                    </a>\n                                </div>\n                            <div rdt="3" cat="pc_editor" act="卡片_分享_点我制作" class="pop-share-btn"><span class="eqf-no-l"></span></div>\n                        </div>\n                    </div>'),$(".main-page.z-current").not(".editor-section").prepend(t)}var l=window.devScene.bgm;l&&l.lrcCtr&&l.lrcCtr.hide();var u=$(".pop-share-btn");u.on("click",function(){t.animate({opacity:0},{duration:300,complete:function(e){t.remove(),l&&l.lrcCtr&&l.lrcCtr.show()}})})}function r(e,t){var i=n(85)("./"+e+".png"),o="";switch(e){case"yaoyiyao":o="当前作品包含摇一摇动作，需要您在接下来的弹窗中允许获取授权才可使用";break;case"yaoyiyao2":o="由于您拒绝获取相关授权，将为您直接展示摇一摇结果";break;case"zhongli":o="当前作品包含重力感应，需要您在接下来的弹窗中允许获取授权才可使用";break;case"zhongli2":o="由于您拒绝获取相关授权，将无法体验重力感应效果";break;default:o="当前作品包含摇一摇动作，需要您在接下来的弹窗中允许获取授权才可使用"}var r=$('<div class="pop-up-box">\n                        <div class="pop-yaoyiyao-form">\n                            <div class="pop-yaoyiyao-content">\n                                 <img style="width:270px;height:180px;" src="'+i+"\">\n                                <div class='pop-info'>\n                                    "+o+'\n                                </div> \n                                <div  class="pop-yaoyiyao-btn">知道了</div>\n                            </div>  \n                        </div>\n                    </div>');$(".main-page.z-current").not(".editor-section").prepend(r);var a=window.scene||{};a.property&&a.property.orientation&&"landscape"===a.property.orientation.curr&&r.find(".pop-share-form").css({transform:"rotate(90deg) translate3d(0px, 0px, 0px)"});var s=$(".pop-yaoyiyao-btn");s.on("click",function(){"function"==typeof t&&t&&t(),r.animate({opacity:0},{duration:300,complete:function(e){r.remove()}})})}n(83);var a=n(55).getSharePopConfig,s=n(24),c=n(26).addProtocol,l=n(84),u=l.isLandScape,p=l.hasInputMaskPage,d=n(66).perfectStr,h=n(58).isAdScene;e.exports={popUpModal:i,popShareModal:o,popYaoModal:r}},function(e,t){},function(e,t){"use strict";function n(e){var t=new Date(2024,7,9,12).getTime();return!(e.createTime<t)}function i(){var e=window.scene||{},t=window.eqxPage;return e.property&&e.property.orientation&&"landscape"===e.property.orientation.curr||t&&t.orientation&&t.orientation.isLandScape()}function o(){var e=$(".main-page.z-current").find(".input-mask-page"),t=!1;return e&&e.length&&!e.is(":hidden")&&(t=!0),t}e.exports={isNewScene:n,isLandScape:i,hasInputMaskPage:o}},function(e,t,n){function i(e){return n(o(e))}function o(e){return r[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var r={"./QQIcon@2x.png":86,"./QQZoneIcon@2x.png":87,"./landscape-bg.png":88,"./linkIcon@2x.png":89,"./lock.png":90,"./pc/img/H5-phone-new-logo.png":91,"./pc/img/bg_small.png":92,"./pc/img/btn1_bg.png":93,"./pc/img/new_logo_text.png":94,"./weiboIcon@2x.png":95,"./yaoyiyao.png":96,"./yaoyiyao2.png":97,"./zhongli.png":98,"./zhongli2.png":99};i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=85},function(e,t,n){e.exports=n.p+"images/QQIcon@2x-e97cdc.png"},function(e,t,n){e.exports=n.p+"images/QQZoneIcon@2x-ae004b.png"},function(e,t,n){e.exports=n.p+"images/landscape-bg-af5bc4.png"},function(e,t,n){e.exports=n.p+"images/linkIcon@2x-b64813.png"},function(e,t,n){e.exports=n.p+"images/lock-3acd73.png"},function(e,t,n){e.exports=n.p+"images/H5-phone-new-logo-b013b2.png"},function(e,t,n){e.exports=n.p+"images/bg_small-8b8bf0.png"},function(e,t,n){e.exports=n.p+"images/btn1_bg-16e4aa.png"},function(e,t,n){e.exports=n.p+"images/new_logo_text-df0ca9.png"},function(e,t,n){e.exports=n.p+"images/weiboIcon@2x-585b42.png"},function(e,t,n){e.exports=n.p+"images/yaoyiyao-f4f518.png"},function(e,t,n){e.exports=n.p+"images/yaoyiyao2-4e4068.png"},function(e,t,n){e.exports=n.p+"images/zhongli-b2a007.png"},function(e,t,n){e.exports=n.p+"images/zhongli2-61da5d.png"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function p(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)},c=n(101),l=n(133),u=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{self:!0},advanceStyle:{border:!1,shadow:!1,paddingTop:!1,borderWidth:!1,borderRadius:!1,borderStyle:!1,borderColor:!1,boxShadowSize:!1,boxShadowBlur:!1,boxShadowColor:!1,boxShadowDirection:!1}},trigger:{self:!1},sound:!1,link:!1}),r}return r(t,e),a(t,[{key:"getFtEditableProps",value:function(){var e=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtEditableProps",this).call(this),n=this.FtEditableProps;return e.concat([n.code.code])}},{key:"getFtValue",value:function(e){var n=this.FtEditableProps;return e===n.code.code?this.compJson.content:s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtValue",this).call(this,e)}},{key:"eleShow",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleShow",this).call(this);var e=this.compJson.id;console.log(this.eqxPage.eqxScene,window.scene,999,this.eqxPage),this.eqxPage.eqxScene.renderAd&&(["cDt7rE","U8CeJDxZ","zlS6uJ0z","CcVpu3ar","10KzcF"].includes(window.scene.code)&&1===this.eqxPage.pageJson.num?this.eleShow2():this.eqxPage.eqxScene.renderAd.renderTailDom("#ad"+e))}},{key:"eleShow2",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleShow",this).call(this);var e=this.compJson.id;this.eqxPage.eqxScene.renderAd&&this.eqxPage.eqxScene.renderAd.renderTailDom2("#ad"+e)}},{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=$(l.compDiv({id:t,type:n}));return i}}]),t}(c);e.exports=u},function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function I(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:I(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)};n(102);var l=n(24),u=n(103),p=n(36).parse,d=n(71).qiniuZoom,h=n(104),f=n(105),g=n(107),m=n(108),v=n(109),y=n(116),b=y.perfectComp,x=n(124),w=n(125),k=n(84).isNewScene,S=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.$ability={style:{self:!0,compFont:{self:!1,fontFamily:!1,fontSize:!1,fontColor:!1,baseStyle:!1,lineHeight:!1,letterSpacing:!1},compStyle:{self:!0},functionStyle:{self:!0},advanceStyle:{self:!0,"function":!1,border:!0,shadow:!0,sizePos:!0,paddingTop:!0,borderWidth:!0,borderRadius:!0,borderStyle:!0,borderColor:!0,boxShadowSize:!0,boxShadowBlur:!0,boxShadowColor:!0,boxShadowDirection:!0,variable:!1,size:!0,position:!0,rotate:!0,opacity:!0,align:!0},lock:!0},anim:!0,trigger:{self:!0,click:!0,shake:!0,taphold:!0,slide:!0,mediaCanplay:!0,mediaEnded:!0,mediaPlaying:!0,animStart:!0,animIteration:!0,animEnd:!0,exceptionSuc:!1},removeComp:!0,copyComp:!0,sound:!0,link:!1,flexLine:"n,ne,e,se,s,sw,w,nw,r"},i.compJson=e,i.id=i.compJson.id,i.type=i.compJson.type,i.displayed=!1,"string"==typeof i.compJson.properties&&(i.compJson.properties={}),i.compJson.properties.initType=i.compJson.properties.initType||0,i.anim=i.compJson.properties.anim||[],i.eqxLayer=n,i.eqxPage=i.eqxLayer.eqxPage,i.eqxScene=i.eqxPage.eqxScene,i.parent=i.eqxPage,i}return a(t,e),s(t,[{key:"getZIndex",value:function(){return this.css.zIndex}},{key:"setZIndex",value:function(e){this.css.zIndex=e}},{key:"isGroupItem",value:function(){return!1}},{key:"getFtEditableProps",value:function(){var e=this.FtEditableProps,n=c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtEditableProps",this).call(this);return n.concat([e.color.backgroundColor,e.color.borderColor,e.color.boxShadowColor])}},{key:"updateAbility",value:function(e,t){this.$ability[e]=t}},{key:"isCanDelete",value:function(){return this.$ability.removeComp}},{key:"isCanCopy",value:function(){return this.$ability.copyComp}},{key:"isPropCanEdit",value:function(e){var t=this.FtEditableProps,n=this.compJson.css;switch(e){case t.color.backgroundColor:return n.backgroundColor;case t.color.borderColor:return n.borderWidth;case t.color.boxShadowColor:return n.boxShadowSize;case t.link.url:return this.hasTrigger("link");case t.internalLink.internalLink:return this.hasTrigger("page");case t.sound.soundSrc:return this.hasTrigger("sound");case t.telephone.number:return this.hasTrigger("tel")}return!0}},{key:"getFtValue",value:function(e){var t=this.FtEditableProps,n=this.compJson.css;switch(e){case t.content.content:return this.compJson.content;case t.color.color:return n.color;case t.color.backgroundColor:return n.backgroundColor;case t.color.borderColor:return n.borderColor;case t.color.boxShadowColor:return x.parseBoxShadow(n.boxShadow).color;case t.link.url:var i=this.hasTrigger("link");return i?this.getRawLinkUrl():"http://";case t.internalLink.internalLink:return i=this.hasTrigger("page"),i?i.targetContent:this.eqxPage.pageJson.id;case t.sound.soundSrc:return this.compJson.sound;case t.telephone.number:return i=this.hasTrigger("tel"),i?i.targetContent:0}}},{key:"hasTrigger",value:function(e){var t=this.triggerManager;switch(e){case"link":return t.findEqxItemTriggerItem(this,"click","link");case"internalLink":case"page":return t.findEqxItemTriggerItem(this,"click","page");case"sound":case"video":return t.findEqxItemTriggerItem(this,"click","play");case"tel":return t.findEqxItemTriggerItem(this,"click","phone")}}},{key:"updateJson",value:function(e){return e=JSON.parse(JSON.stringify(e)),b(e,this.eqxScene.sceneJson,this.eqxPage.pageJson),delete e.id,delete e.num,delete e.pageId,delete e.sceneId,delete e.type,Object.assign(this.compJson,e),this}},{key:"getAbsolutePos",value:function(){var e=this.css,t=e.width,n=e.height,i=e.top,o=e.left,r=e.transform;return{width:parseFloat(t),height:parseFloat(n),top:parseFloat(i),left:parseFloat(o),transform:r}}},{key:"isFunTemplate",value:function(){var e=this.findTopGroup();return e!==this&&e.isFunTemplate()}},{key:"toJson",value:function(){return JSON.parse(JSON.stringify(this.compJson))}},{key:"isEditLock",value:function(){return this.getProp("editLock")}},{key:"updateDisplayStatus",value:function(){}},{key:"getImgSrc",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2],i=this.eqxScene.config.disableQiniuZoom,o=t.width,r=t.height;return i?d(e,null,null,n):d(e,o,r,n)}},{key:"getName",value:function(){return this.compJson.name||"组件"}},{key:"getCss",value:function(e){var t=this.compJson.css;return e?t[e]:t}},{key:"toString",value:function(){var e=this.compJson,t=e.pageId,n=e.id,i=e.num;return"page-"+t+"-comp-"+n+"-num-"+i}},{key:"getProp",value:function(e){return this.compJson.properties[e]}},{key:"setProps",value:function(e){var t=this,n=this.compJson.properties;Object.keys(e).forEach(function(i){var o=e[i];"sound"===i?t.compJson.sound=o:null===o||void 0===o||""===o?delete n[i]:n[i]=o})}},{key:"setProp",value:function(e,t){this.setProps(i({},e,t))}},{key:"update$li",value:function(e){e&&(this.updateCss(e),this.$li&&this.$li.css(e))}},{key:"update$boxDiv",value:function(e){var t=this;this.updateCss(e),this.$boxDiv.css(e),Object.keys(e).forEach(function(n){"fontSize"===n&&t.$boxDiv.css({"font-size":e[n]+"px"}).find("#"+t.compJson.id).css({"font-size":e[n]+"px"})})}},{key:"onResize",value:function(e,t,n){}},{key:"rotate",value:function(e){this.onRotate("rotateZ("+e+"deg)")}},{key:"getTransform",value:function(){return this.compJson.css.transform||"rotateZ(0)"}},{key:"updateTransform",value:function(e){this.compJson.css.transform=e,this.$item.css({transform:e})}},{key:"updateCss",value:function(e){if(e){var t=this.compJson.css;Object.keys(e).forEach(function(n){t[n]=e[n]})}}},{key:"updateProp",value:function(e,t){var n=this.compJson.properties;n[e]=t}},{key:"updateTranslated3dZ",value:function(e){this.$li&&this.$li.css(e)}},{key:"updatePos2",value:function(e,t){throw new Error("updatePos2 deprecated")}},{key:"updateSize",value:function(e,t){this.updateCss(t),this.autoSize()}},{key:"resetStyle",value:function(){var e={opacity:1,transform:"rotateZ(0deg)"};this.update$li(e);var t={fontSize:"24px",color:"#676767",backgroundColor:"",fontWeight:"normal",fontStyle:"normal",textAlign:"left",textDecoration:"none",letterSpacing:0,borderWidth:0,borderStyle:"solid",borderColor:"rgba(0,0,0,1)",borderRadius:0,borderRadiusPerc:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,borderTopRightRadius:0,borderTopLeftRadius:0,paddingBottom:0,paddingTop:0,paddingLeft:0,paddingRight:0,boxShadow:"0px 0px 0px rgba(0,0,0,0.5)",boxShadowDirection:0,boxShadowSize:0,transform:"none",opacity:1};this.update$boxDiv(t)}},{key:"render",value:function(){if(this.rendered)return this.$li;this.$li&&(this.$li.remove(),this.$li=null);var e=this.$li=this.create$li(),t=this.eqxScene.config,n=t.disableCompEvent,i=t.disableTrigger;return n||this.addEventListeners(),i||this.addSoundEvent(),this.addAnimationClass(),this.rendered=!0,e}},{key:"create$li",value:function(){function e(){var e=l.GSensor,t=void 0===e?{}:e;if(t&&t.isUsed&&"edit"!==y.mode){var i="positive"===t.direction?t.distance:-t.distance;w.addClass("layer"),w.attr("data-depth",i),console.log("初始化组件重力感应",n)}}function t(e,t){if(t&&t.length)return"";var n="",i=/rotateZ\((-?\d*\.?\d*)(deg|)\)/.exec(t),o=/translate3d\((.*?)\)/.exec(t);i&&i.length&&(n+=i[0]+" ");var r=e.eqxPage.pageJson,a=r.properties.oneShot,s=void 0===a?{}:a,c=e.eqxScene.config,l=e.compJson.properties.translate3dZ;if(s.isOpen&&"view"===c.mode)if(o&&o.length)var u=/translate3d\((-?\d*(?:px)?),\s?(-?\d*(?:px)?),/,p=l?u.exec(o[0])[0]+l+"px)":o[0];else p="translate3d(0px, 0px, "+-(l||0)+"px)";return n+=p||""}var n=this,i=n.eqxScene,o=n.compJson,r=o.id,a=o.num,s=o.type,c=o.css,l=o.properties,d=o.sound,h=c.zIndex,f=c.transform,g=c.display,m=c.opacity,v="string"!=typeof f?"":f,y=i.config,b=t(n,v),x=n.getAbsolutePos(),w=n.$li=$(p(u,{id:r,num:a,type:s}));"edit"===this.eqxScene.config.mode&&(w.addClass("item-comp-hover"),l.isReplace&&w.addClass("comp-replace-icon"));var S=n.$boxDiv=w.find(".element-box"),I=n.$boxContentDiv=S.find(".element-box-contents"),T={};l.lock&&w.addClass("alock"),l.isLogo&&window.location.pathname.includes(i.meta.id)&&w.css({display:"none",opacity:"0"}),w.css({zIndex:h,transform:b,display:g,opacity:m}).attr("abs-pos","l-"+x.left+"-t-"+x.top+"-w-"+x.width+"-h-"+x.height).attr("eqx-id",r),n._updateSize(),n.addClassToLi(w),S.css(Object.assign({},c,{width:"100%",height:"100%",transform:"none",fontFamily:"",opacity:"",marginTop:"0px",marginBottom:"0px"}));var E=v.indexOf("rotateX(180deg)")>-1,P=v.indexOf("rotateY(180deg)")>-1;c.turnOver||(E&&(c.turnOver="rotateX(180deg)"),P&&(c.turnOver=(c.turnOver||"")+" rotateY(180deg)")),T.transform=c.turnOver,I.css(T),d&&d.id&&"edit"===y.mode&&n.addSoundIcon(),this.$contentsDiv=I,!k(i.meta)||"Microsoft YaHei, Helvetica Neue, Helvetica, Arial, sans-serif"!==c.fontFamily&&c.fontFamily||(c.fontFamily="HT"),66==n.compJson.type||65==n.compJson.type?this.create$context(I,n.compJson.properties.activityId,y.mode):(this.$context=this.create$context(),I.append(this.$context));var _=i.variableComps,C=_.texts,A=_.inputs,O=_.images,q=_.uploads;if(["501","502","503","504"].indexOf(s.toString())!==-1)A.push(n);else if("7"===s.toString()){var L=l["var"];L&&L.isUsed&&C.push(n)}else if("upload"===s)q.push(n);else if("4"===s.toString()){var M=l["var"];M&&M.isUsed&&O.push(n)}return e(),w}},{key:"removeSoundIcon",value:function(){this.$soundIcon&&(this.$soundIcon.remove(),this.$soundIcon=null)}},{key:"addSoundIcon",value:function(){this.removeSoundIcon(),this.$soundIcon=$('<div class="comp-icon eqf-bell-f"></div>'),this.$boxDiv.after(this.$soundIcon)}},{key:"destroy",value:function(){this.eleHide(),this.$li.remove(),this.$li=null,this.rendered=!1}},{key:"create$context",value:function(){return $()}},{key:"addClassToLi",value:function(e){}},{key:"addEventListeners",value:function(){this.bindAfterRenderEvent(this.$li,this.compJson),this.addAnimSoundEvent(),this.addInteractiveVideoEvent()}},{key:"eleHide",value:function(){this.$li&&!this.canAddHideIcon()&&this.$li.css({display:"none"}),this.$li&&this.canAddHideIcon()&&this.addHideIcon(),this.soundAgent&&this.soundAgent.update(new h("hide")),this.anim&&this.anim.length&&this.anim.forEach(function(e){e.sound&&e.soundAgent&&e.soundAgent.update(new h("stop"))}),this.stopAnimation(),this.flux&&this.flux.playing&&this.flux.stop()}},{key:"canAddHideIcon",value:function(){return"edit"===this.eqxScene.config.mode&&this.eqxPage.trigger.compHasTrigger(this.eqxPage.pageJson.properties.triggerGroup,this.compJson.id)}},{key:"addHideIcon",value:function(){this.$hideIcon=$('<div class="comp-icon" style="z-index: 999;"><em style="font-size: 14px" class="eqf-hidden-f"></em></div>'),this.$li.append(this.$hideIcon)}},{key:"removeHideIcon",value:function(){this.$hideIcon&&(this.$hideIcon.remove(),delete this.$hideIcon)}},{key:"addAnimationClass",value:function(){this.eqxCompAnim=new w(this,{}),this.eqxCompAnim.addAnimClassify()}},{key:"stopAnimation",value:function(){this.eqxCompAnim.stopAnimation()}},{key:"startAnimation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.index,n=e.maxCount;if(e.reset)var i=this,o=function(){i.stopAnimation()};this.eqxCompAnim.startAnimation({animIndex:t,maxCount:n,callback:o})}},{key:"previewAnimation",value:function(e){e&&this.eqxCompAnim.previewAnimation(e)}},{key:"eleShow",value:function(){if(this.eqxScene.config.disableCompAnim){var e=this.compJson.properties.anim||[];e[0]&&"typer"===e[0].type&&this.$context.css({opacity:1})}else this.startAnimation();this.$li&&this.$li.css({display:"block"}),this.$li&&this.canAddHideIcon()&&this.removeHideIcon(),
this.flux&&this.compJson.properties.autoPlay&&(this.flux.stop(),this.flux.start())}},{key:"addInteractiveVideoEvent",value:function(){"o"===this.compJson.type&&this.compJson.src&&(this.interactiveVideoAgent=new m(this,this.eqxScene.soundManager))}},{key:"getLinkUrl",value:function(e){return/eqs\/link\?id=\d+&url=/.test(e)?e:(/^http:|^https:|^ftp:/.test(e)||(e="http://"+e),l.SERVER_1+"eqs/link?id="+this.eqxScene.meta.id+"&url="+encodeURIComponent(e))}},{key:"getRawLinkUrl",value:function(){var e=this.hasTrigger("link");if(e){var t=e.targetContent,n=/eqs\/link\?id=\d+&url=/.exec(t);if(n){var i=t.substr(n[0].length+n.index);return decodeURIComponent(i)}}}},{key:"addSoundEvent",value:function(){this.compJson.sound&&(this.soundAgent=new f(this,this.eqxScene.soundManager))}},{key:"addAnimSoundEvent",value:function(){var e=this,t=this.anim;t&&t.length&&t.forEach(function(t){t.sound&&(t.soundAgent=new g(e,t,e.eqxScene.soundManager))})}},{key:"autoAdjustSize",value:function(){return{}}},{key:"bindAfterRenderEvent",value:function(e,t){}},{key:"$item",get:function(){return this.$li}},{key:"css",get:function(){return this.compJson.css}},{key:"zIndex",get:function(){return this.css.zIndex},set:function(e){return this.css.zIndex=e,e}},{key:"isEditLocked",get:function(){var e=this.compJson||{},t=e.properties;return t.editLock},set:function(e){var t=this.compJson||{},n=t.properties;n.editLock=e}},{key:"initType",get:function(){var e=this.compJson||{},t=e.properties;return t.initType},set:function(e){var t=this.compJson||{},n=t.properties;n.initType=e}}]),t}(v);e.exports=S},function(e,t){},function(e,t){e.exports='<li id="inside_#{id}" num="#{num}" ctype="#{type}" class="item item-comp" style="position: absolute"><div class="element-box" style="width: 100%; height: 100%"><div class="element-box-contents" style="width: 100%; height: 100%"></div></div></li>'},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,o),this.type=e,this.data=t};e.exports=i},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(26).resolveUrl,c=n(24),l=n(106),u=n(27).mobilecheck,p=n(27).isWeixin,d=n(69).getWxJSSDK,h=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.manager=n,r.soundJson=r.master.compJson.sound,r.type=1,r.init(),r.register(),p()&&(r.wxJssdk=d()),r}return r(t,e),a(t,[{key:"init",value:function(){this.audio=new window.Audio,this.audio.src=s(c.FILE,this.soundJson.src)}},{key:"update",value:function(e){switch(e.type){case"stop":case"hide":this.stopPlay();break;case"down":this.audio.volume=.1;break;case"restore":this.audio.volume=1;break;case"reset":this.audio.currentTime=0}}},{key:"addEventListeners",value:function(){var e=this,t=u()?"touchend":"click";this.master.$li.on(t,function(){return e.audio.paused?e.startPlay():e.stopPlay()}),$(this.audio).on("ended",function(){return e.manager.onEnd(e)})}},{key:"startPlay",value:function(){if(this.audio.paused){var e=this;p()?this.wxJssdk.then(function(){wx.checkJsApi({jsApiList:["checkJsApi"],success:function(){e.audio.play()}})}):this.audio.play(),this.manager.onPlay(this)}}},{key:"stopPlay",value:function(){this.audio.paused||(this.audio.pause(),this.manager.onEnd(this))}}]),t}(l);e.exports=h},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t,i){n(this,e),this.master=t,this.manager=i}return i(e,[{key:"register",value:function(){this.manager.add(this)}},{key:"deregister",value:function(){this.manager.remove(this)}},{key:"update",value:function(e){}}]),e}();e.exports=o},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(106),c=n(26).resolveUrl,l=n(24),u=function(e){function t(e,n,r){i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return a.manager=r,a.soundJson=n.sound,a.type=2,a.init(),a.addEventListeners(),a.register(),a}return r(t,e),a(t,[{key:"init",value:function(){this.audio=new Audio,this.audio.src=c(l.FILE,this.soundJson.path),this.audio.loop=!0}},{key:"startPlay",value:function(){this.audio.paused&&(this.audio.play(),this.manager.onPlay(this))}},{key:"stopPlay",value:function(){this.audio.paused||(this.audio.pause(),this.audio.currentTime=0,this.manager.onEnd(this))}},{key:"addEventListeners",value:function(){var e=this;$(e.audio).on("AnimSound.start",function(t,n){e.startPlay()}).on("AnimSound.end",function(t,n){e.stopPlay()})}},{key:"update",value:function(e){switch(e.type){case"stop":this.stopPlay();break;case"play":this.startPlay();break;case"down":this.audio.volume=.1;break;case"restore":this.audio.volume=1}}}]),t}(s);e.exports=u},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(106),c=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.manager=n,r.compJson=r.master.compJson,r.type=5,r.addEventListeners(),r.register(),r}return r(t,e),a(t,[{key:"addEventListeners",value:function(){var e=this;this.master.$context.on("ended",function(){e.end()})}},{key:"play",value:function(){this.master.$context[0].play(),this.manager.onPlay(this)}},{key:"end",value:function(){this.master.$context[0].pause(),this.manager.onEnd(this)}}]),t}(s);e.exports=c},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(110),a=n(112),s=n(113),c=n(114),l=c.FtEditableProps,u=n(115),p=function(){function e(){i(this,e),this.eqxLayer=null,this.parent=null,this.group=null,this.eventMap={},this.FtEditableProps=l}return o(e,[{key:"isOrphan",value:function(){return!this.eqxLayer||!this.eqxLayer.eqxItems.includes(this)}},{key:"destroy",value:function(){this.eqxLayer=null,this.parent=null,this.group=null}},{key:"isDirectItem",value:function(){return this.eqxLayer.getDirectItems().includes(this)}},{key:"isEqxLayer",value:function(){return!1}},{key:"updateTop",value:function(e){this.updateCss({top:this.css.top+e}),this.autoSize()}},{key:"getFtEditableProps",value:function(){return[]}},{key:"getFtValue",value:function(e){return 0}},{key:"filterEditableProps",value:function(e){var t=this;return(e||this.getFtEditableProps()).filter(function(e){return t.isPropCanEdit(e)})}},{key:"isPropCanEdit",value:function(){return!1}},{key:"toJson",value:function(){}},{key:"isFunTemplate",value:function(){return!1}},{key:"hasFtRules",value:function(){var e=this.eqxPage.ftManager.getEqxItemRelativeFtRules(this);return e.length>0}},{key:"updateSize",value:function(){}},{key:"getRotate",value:function(){var e=this.getTransform(),t=r.parseTransform(e);return t.rotate}},{key:"getTransform",value:function(){}},{key:"updateTransform",value:function(e){}},{key:"autoZIndex",value:function(){return this.$item&&this.$item.css({zIndex:this.getZIndex()}),this}},{key:"getZIndex",value:function(){}},{key:"onResizeStart",value:function(){return this.oldAbsolutePosition=this.getAbsolutePos(),this.oldAbsolutePosition}},{key:"onResize",value:function(){}},{key:"onResizeEnd",value:function(){this.oldAbsolutePosition=null}},{key:"onRotateStart",value:function(){return this.oldTransform=this.getTransform(),this.oldTransform}},{key:"onRotate",value:function(e,t){isNaN(e)||(e="rotateZ("+e+"deg)"),this.oldTransform||this.onRotateStart(),this.updateTransform(e),this.autoSize(t)}},{key:"onRotateEnd",value:function(){this.oldTransform=null}},{key:"updateLeftTop",value:function(e,t){var n=this.oldPos,i=n.left,o=n.top;this.updateCss({left:i+e,top:o+t})}},{key:"onMoveBefore",value:function(){this.oldPos=JSON.parse(JSON.stringify(this.getAbsolutePos()))}},{key:"canMove",value:function(){return!this.isEditLocked}},{key:"onMove",value:function(e,t){!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.canMove()&&(this.oldPos||this.onMoveBefore(),this.updateLeftTop(e,t),this.autoSize())}},{key:"onMoveEnd",value:function(){this.oldPos=null}},{key:"moveToX",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.moveTo(e,void 0,t)}},{key:"moveToY",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.moveTo(void 0,e,t)}},{key:"moveTo",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i={};void 0!==e&&(i.left=e),void 0!==t&&(i.top=t),this.updateCss(i),n&&this.autoSize()}},{key:"instantMove",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.onMoveBefore(),this.onMove(e,t,n),this.onMoveEnd()}},{key:"instantRotate",value:function(e){this.onResizeStart(),this.onRotate(e),this.onRotateEnd()}},{key:"update$item",value:function(e){this.updateCss(e),this._updateSize()}},{key:"updateCss",value:function(){}},{key:"isSubItemOf",value:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.some(function(t){for(var n=e;n.group;){if(n.group===t)return!0;n=n.group}return!1})}},{key:"findTopGroup",value:function(){for(var e=this;e.group;)e=e.group;return e}},{key:"autoSizeTopDown",value:function(){this._updateSize(),this.fire("autoSizeTopDown.after")}},{key:"_updateSize",value:function(){return this.$item?(this.$item.css(this.getRelativePos()),this):null}},{key:"getRelativePos",value:function(){var e=this.getAbsolutePos(),t=e.width,n=e.height,i=e.top,o=e.left,s=e.transform,c=this.group;if(c){var l=c.getAbsolutePos(),u=l.left,p=l.top,d=l.width,h=l.height,f=l.transform,g=r.parseTransform(f).rotate,m=r.parseTransform(s).rotate;if(g){var v=new a(u,p,d,h),y=v.center(),b=new a(o,i,t,n),x=b.center(),w=x.pointRotate2Point(y,-g),k=w.x-x.x,S=w.y-x.y;b.move(k,S),o=b.p1.x,i=b.p1.y}o-=u,i-=p,s="rotate("+(m-g)+"deg)"}return{width:t,height:n,top:i,left:o,transform:s}}},{key:"updateMarker",value:function(){if(!this.$marker){var e=-25,t=-20,n="yellow";this.isGroupItem()&&(e=-40,t=-30),this.$marker=$('<div class="item-marker"></div>').css({width:70,fontSize:11,position:"absolute",top:t,left:e,background:n}),this.$item.append(this.$marker)}var i=this.getAbsolutePos(),o=(/\d+/.exec(this.getTransform())||[])[0]||0;this.$marker.html("("+parseInt(i.left)+","+parseInt(i.top)+") "+o+"°<br>w"+parseInt(i.width)+" h"+parseInt(i.height))}},{key:"getBoundingRect",value:function(){var e=this.getAbsolutePos(),t=e.width,n=e.height,i=e.top,o=e.left,s=e.transform,c=r.parseTransform(s).rotate;return new a(o,i,t,n).rotate(c).getBoundingRect()}},{key:"autoSize",value:function(e){this.findTopGroup().autoSizeTopDown(e)}},{key:"on",value:function(e,t){return this.eventMap[e]?this.eventMap[e].push(t):this.eventMap[e]=[t],this}},{key:"off",value:function(e){if("string"==typeof e)this.eventMap[e].length=[];else for(var t=Object.values(this.eventMap),n=0;n<t.length;n++){var i=t[n],o=i.indexOf(e);o>-1&&i.splice(o,1)}return this}},{key:"fire",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];(this.eventMap[e]||[]).forEach(function(e){return e.apply(void 0,n)})}},{key:"isSiblingOf",value:function(e){return this.parent&&e.parent&&this.parent===e.parent}},{key:"sameLayer",value:function(e){return this.eqxLayer===e.eqxLayer}},{key:"containsPoint",value:function(e,t){var n=this.getAbsolutePos(),i=n.width,o=n.height,c=n.top,l=n.left,u=n.transform,p=r.parseTransform(u).rotate,d=new s(l,c),h=new s(l+i,c+o),f=new a(d,h).rotate(p);return f.containsPoint(new s(e,t))}},{key:"centerInRect",value:function(e){var t=this.getAbsolutePos(),n=t.left+t.width/2,i=t.top+t.height/2,o=e.p1;return n>o.x&&n<o.x+e.width&&i>o.y&&i<o.y+e.height}},{key:"getAbsolutePos",value:function(){}},{key:"isGroupItem",value:function(){}},{key:"ft",get:function(){return this._ft||(this._ft=new u(this)),this._ft}},{key:"triggerManager",get:function(){return this.eqxLayer.eqxPage.triggerManager}},{key:"ftManager",get:function(){return this.eqxLayer.eqxPage.ftManager}},{key:"isEditLocked",get:function(){},set:function(e){}}],[{key:"findTopItems",value:function(e){var t=[];return e.forEach(function(e){var n=e.findTopGroup();t.includes(n)||t.push(n)}),t}},{key:"calItemsBoundingRect",value:function(e){for(var t=e[0],n=t.getBoundingRect(),i=n.width,o=n.height,r=n.left,a=n.top,s=1;s<e.length;s++){t=e[s];var c=t.getBoundingRect();c.left<r&&(i+=r-c.left,r=c.left),c.top<a&&(o+=a-c.top,a=c.top),i=Math.max(c.left+c.width-r,i),o=Math.max(c.height+c.top-a,o)}return{width:i,height:o,left:r,top:a}}}]),e}();e.exports=p},function(e,t,n){"use strict";function i(e){return r(e,y)}function o(e){return r(e,parseFloat)}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1];e+="";var n={rotate:0,rotateY:0,rotateX:0,scale:{x:1,y:1},translate3d:{x:0,y:0,z:0}};return e=e.replace(h,function(e,i){n.rotate=t(i)}),e=e.replace(g,function(e,i){n.rotateY=t(i)}),e=e.replace(f,function(e,i){n.rotateX=t(i)}),e=e.replace(m,function(e,i,o){n.scale={x:t(i),y:t(o)}}),e.replace(v,function(e,i,o,r){n.translate3d={x:t(i),y:t(o),z:t(r)}}),n}function a(e){return void 0!==e.rotate?"rotateZ("+e.rotate+"deg)":""}function s(e){if(e){var t=e.x,n=void 0===t?1:t,i=e.y,o=void 0===i?1:i;return"scale("+n+", "+o+")"}return""}function c(e){if(e){var t=e.x,n=void 0===t?0:t,i=e.y,o=void 0===i?0:i,r=e.z,a=void 0===r?0:r;return"translate3d("+n+"px, "+o+"px, "+a+"px)"}return""}function l(e){if(e){var t=e.match(/translate3d\((.*?)\)/),n=t&&t[1].split(","),i=t&&parseInt(n[2]);return i}return""}function u(e){var t=[],n=e.translate3d;return!n||0===n.x&&0===n.y&&0===n.z||t.push(c(e.translate3d)),null!==e.rotate&&void 0!==e.rotate&&t.push(a(e)),n=e.scale,!n||1===n.x&&1===n.y||t.push(s(e.scale)),p(t.join(" "))}function p(e){return e.trim().replace(/\s{2,}/," ")}function d(e,t){var n=i(e),o=Object.assign({},n,t);return u(o)}var h=/rotateZ\((-?\d*\.?\d*)(deg|)\)/,f=/rotateX\((-?\d*\.?\d*)(deg|)\)/,g=/rotateY\((-?\d*\.?\d*)(deg|)\)/,m=/scale\((-?\d+(?:\.\d+)?),\s?(\d+(?:\.\d+)?)\)/,v=/translate3d\((-?\d*(?:px)?),\s?(-?\d*(?:px)?),\s?(-?\d*(?:px)?)\)/,y=n(111).toInt;e.exports={scaleReg:m,translate3dReg:v,parseTransform:i,getRotateStr:a,getScaleStr:s,getTranslate3dStr:c,getTransformStr:u,trimTransformStr:p,updateTransformStr:d,parseTransformInFloat:o,getTranslateZStr:l}},function(e,t){"use strict";function n(e,t){return"number"!=typeof e&&(e=parseFloat(e)),parseFloat(e.toFixed(t))}function i(e){return n(e,0)}function o(e){return n(e,1)}function r(e){return n(e,2)}function a(e){return e.toFixed(2)}function s(e){return(!e||e<0)&&(e=0),e<1024?e+" KB":(e/=1024,e<1024?a(e)+" MB":(e/=1024,e<1024?a(e)+" GB":(e/=1024,a(e)+" TB")))}e.exports={toFixed:n,toFixed1:o,toFixed2:r,toInt:i,size:s}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(113),s=function(){function e(){i(this,e);var t=null,n=null;switch(arguments.length){case 1:var r=arguments[0];"object"===("undefined"==typeof r?"undefined":o(r))&&(r.p1&&r.p2?(t=new a(r.p1),n=new a(r.p2)):void 0!==r.left&&null!==r.left&&(t=new a(r.left,r.top),n=new a(r.left+r.width,r.top+r.height)));break;case 2:t=new a(arguments[0]),n=new a(arguments[1]);break;case 3:arguments[1]instanceof a?(t=new a(arguments[0]),n=new a(arguments[1]),this.angle=arguments[2]):isNaN(arguments[1])||(t=new a(arguments[0]),n=new a(t.x+arguments[1],t.y+arguments[2]));break;case 4:t=new a(arguments[0],arguments[1]),n=new a(t.x+arguments[2],t.y+arguments[3]);break;default:throw new Error("Invalid arguments for Rect")}if(this.angle){this.p1=t,this.p2=n;var s=this.p1.transform2RotateCoord(this.angle),c=this.p2.transform2RotateCoord(this.angle);this.nw=this.p1,this.ne=new a(c.x,s.y).transform2RotateCoord(-this.angle),this.se=this.p2,this.sw=new a(s.x,c.y).transform2RotateCoord(-this.angle),this.width=this.nw.distance2Point(this.ne),this.height=this.nw.distance2Point(this.sw)}else{var l=t.x,u=n.x,p=t.y,d=n.y;(l>u||p>d)&&(l>u&&(l=[u,u=l][0]),p>d&&(p=[d,d=p][0]),t=new a(l,p),n=new a(u,d)),this.p1=t,this.p2=n,this.width=n.x-t.x,this.height=n.y-t.y,this.nw=this.p1,this.ne=new a(this.p2.x,this.p1.y),this.se=this.p2,this.sw=new a(this.p1.x,this.p2.y)}}return r(e,[{key:"contains",value:function(t){return t instanceof a?this.containsPoint(t):t instanceof e&&this.containsRect(t)}},{key:"getBoundingRect",value:function(){var t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER;[this.nw,this.ne,this.sw,this.se].forEach(function(e){e.x>t&&(t=e.x),e.x<n&&(n=e.x),e.y>i&&(i=e.y),e.y<o&&(o=e.y)});var r=new a(n,o),s=new a(t,i);return new e(r,s)}},{key:"toString",value:function(){var e=this.left,t=this.top,n=this.width,i=this.height,o=this.angle,r=void 0===o?0:o;return JSON.stringify({l:parseInt(e),t:parseInt(t),w:parseInt(n),h:parseInt(i),r:parseInt(r)})}},{key:"containsPoint",value:function(e){var t=new a(e).transform2RotateCoord(this.angle),n=this.p1.transform2RotateCoord(this.angle),i=this.p2.transform2RotateCoord(this.angle);return t.x>=n.x&&t.x<=i.x&&t.y>=n.y&&t.y<=i.y}},{key:"containsRect",value:function(e){return e&&this.containsPoint(e.nw)&&this.containsPoint(e.ne)&&this.containsPoint(e.sw)&&this.containsPoint(e.se)}},{key:"move",value:function(e,t){this.p1.x+=e,this.p2.x+=e,this.p1.y+=t,this.p2.y+=t,this.nw=this.p1,this.ne=new a(this.p2.x,this.p1.y),this.se=this.p2,this.sw=new a(this.p1.x,this.p2.y)}},{key:"moveX",value:function(e){this.move(e,0)}},{key:"moveY",value:function(e){this.move(0,e)}},{key:"center",value:function(){var e=(this.p1.x+this.p2.x)/2,t=(this.p1.y+this.p2.y)/2;return new a(e,t)}},{key:"rotate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=this.p1.pointRotate2Point(this.center(),t),i=this.p2.pointRotate2Point(this.center(),t);return new e(n,i,(t+(this.angle||0)+360)%360)}},{key:"left",get:function(){return this.p1.x}},{key:"top",get:function(){return this.p1.y}},{key:"right",get:function(){return this.p2.x}},{key:"bottom",get:function(){return this.p2.y}}],[{key:"getContainingRect",value:function(t,n){for(var i=Number.MAX_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER,c=[],l=0;l<t.length;l++)t[l]instanceof e?(c.push(t[l].p1.transform2RotateCoord(n)),c.push(t[l].p2.transform2RotateCoord(n))):t[l]instanceof a&&c.push(t[l].transform2RotateCoord(n));for(var u=0;u<c.length;u++)c[u].x<i&&(i=c[u].x),c[u].x>r&&(r=c[u].x),c[u].y<o&&(o=c[u].y),c[u].y>s&&(s=c[u].y);return new e(new a(i,o).transform2RotateCoord(-n),new a(r,s).transform2RotateCoord(-n))}},{key:"getBoundingRect",value:function(t,n){var i=Number.MIN_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER;[t.nw,t.ne,t.sw,t.se].map(function(e){return e.transform2RotateCoord(n)}).forEach(function(e){e.x>i&&(i=e.x),e.x<o&&(o=e.x),e.y>r&&(r=e.y),e.y<s&&(s=e.y)});var c=new a(o,s).transform2RotateCoord(-n),l=new a(i,r).transform2RotateCoord(-n);return new e(c,l,n)}}]),e}();window.Rect=s,e.exports=s},function(e,t,n){"use strict";function i(){if(1===arguments.length)this.x=arguments[0].x||0,this.y=arguments[0].y||0;else{if(2!==arguments.length)throw new Error("Invalid arguments for Point");this.x=parseFloat(arguments[0])||0,this.y=parseFloat(arguments[1])||0}}var o=n(112);i.prototype.toString=function(){return"("+this.x+", "+this.y+")"},i.prototype.moveX=function(e){return this.move(e,0)},i.prototype.moveY=function(e){return this.move(0,e)},i.prototype.move=function(e,t){return this.x+=e,this.y+=t,this},i.prototype.update=function(e,t){this.x=e,this.y=t},i.prototype.equals=function(e){return this.x===e.x&&this.y===e.y},i.prototype.between=function(e,t){return new o(e,t).contains(this)},i.prototype.offset=function(e){return{x:e.x-this.x,y:e.y-this.y}},i.prototype.distance2Point=function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))},i.prototype.angle2Point=function(e,t){var n=this.offset(e),i=this.distance2Point(e),o=Math.acos(Math.abs(n.x)/i),r=180*o/Math.PI;if(!i)return 0;if(0===n.x&&n.y>0)var a=90;else n.x>0&&0===n.y?a=0:0===n.x&&n.y<0?a=270:n.x<0&&0===n.y?a=180:n.x<0&&n.y<0?a=180+r:n.x<0&&n.y>0?a=180-r:n.x>0&&n.y>0?a=r:n.x>0&&n.y<0&&(a=360-r);return(a-(t||0)+360)%360},i.prototype.pointRotate2Point=function(e,t){var n=e.angle2Point(this),o=(n+t+360)%360,r=this.distance2Point(e),a=o*Math.PI/180;return new i(e.x+r*Math.cos(a),e.y+r*Math.sin(a))},i.prototype.transform2RotateCoord=function(e){if(!e)return this;var t=new i(0,0),n=t.angle2Point(this),o=(n-e+360)%360,r=this.distance2Point(t),a=o*Math.PI/180;return new i({x:r*Math.cos(a),y:r*Math.sin(a)})},window.Point=i,e.exports=i},function(e,t){"use strict";function n(e){return 0===e.indexOf(c.color.fill)?s[c.color.fill]+(+e.split("-")[1]+1):s[e]}var i={content:{name:"文本内容",props:{content:{name:"文本内容"}}},image:{name:"图片内容",props:{imageSrc:{name:"图片内容"}}},color:{name:"颜色",props:{backgroundColor:{name:"背景颜色"},borderColor:{name:"边框颜色"},boxShadowColor:{name:"阴影颜色"},color:{name:"文本颜色"},counterColor:{name:"计数器颜色"},fill:{name:"形状颜色"}}},link:{name:"链接内容",props:{url:{name:"链接内容"}}},telephone:{name:"电话内容",props:{number:{name:"电话内容"}}},sound:{name:"音效内容",props:{soundSrc:{name:"音效内容"}}},time:{name:"计时时间",props:{time:{name:"计时时间"}}},internalLink:{name:"跳转页面",props:{internalLink:{name:"跳转页面"}}},input:{name:"输入框类型",props:{input:{name:"输入框类型"}}},video:{name:"视频内容",props:{video:{name:"视频内容"}}},tRandom:{name:"随机文本内容",props:{tRandom:{name:"随机文本内容"}}},iRandom:{name:"随机图片内容",props:{iRandom:{name:"随机图片内容"}}},code:{name:"代码内容",props:{code:{name:"代码内容"}}},addGroup:{name:"添加组合",props:{addGroup:{name:"添加组合"}}},moveGroup:{name:"移动组合",props:{moveGroup:{name:"移动组合"}}},deleteGroup:{name:"删除组合",props:{deleteGroup:{name:"删除组合"}}},editGroup:{name:"编辑组合",props:{editGroup:{name:"编辑组合"}}}},o={},r={},a={},s={},c=a;Object.keys(i).forEach(function(e){o[e]=e,r[e]=i[e].name;var t=i[e].props;a[e]={},Object.keys(t).forEach(function(n){a[e][n]=e+"."+n,s[e+"."+n]=t[n].name})}),e.exports=window.ftRuleType={FtRuleType:o,FtEditableProps:a,FtEditablePropName:s,getEditPropName:n,FtRuleName:r}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(c){o=!0,r=c}finally{try{!i&&s["return"]&&s["return"]()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(114),s=a.getEditPropName,c=function(){function e(t){i(this,e),this.eqxItem=t,this.ftManager=t.eqxPage.ftManager;var n=t.getFtEditableProps();this.props=n.map(function(e){return{key:e,name:s(e),ftTerm:null,select:!1,show:!1}}),this.updatePropsState()}return r(e,[{key:"isPropSelect",value:function(e){var t=this.props.find(function(t){return t.key===e});return t&&t.show&&t.select}},{key:"updatePropsState",value:function(){var e=this,t=this.ftManager,n=this.eqxItem;this.props.forEach(function(i){var o=t.findFtTerm(n,i.key);i.ftTerm=o,i.select=!!o,o&&(o.ftProp=i),i.show=e.eqxItem.isPropCanEdit(i.key)}),this.updateSelectAll()}},{key:"updateSelectAll",value:function(){var e=this.props.filter(function(e){return e.show});this.selectAll=e.length&&e.every(function(e){return e.select})}},{key:"toggleAllProps",value:function(){var e=this,t=this;t.selectAll?t.props.forEach(function(t){t.show&&!t.select&&e.selectProp(t)}):t.props.forEach(function(t){t.show&&t.select&&e.unSelectProp(t)})}},{key:"selectProp",value:function(e){var t=this.ftManager,n=e.key.split("."),i=o(n,2),r=i[0],a=i[1],s=this.eqxItem.getFtValue(e.key);t.addFtRule({type:r,value:s,comps:[{id:this.eqxItem.id,properties:[a]}]}),this.updatePropsState()}},{key:"unSelectProp",value:function(e){var t=e.ftTerm;t?(t.deleteSelf(!0),this.updatePropsState()):console.error("toggle no ftTerm")}},{key:"toggleProp",value:function(e){e.select?this.selectProp(e):this.unSelectProp(e)}}]),e}();e.exports=c},function(e,t,n){"use strict";function i(e,t,n){return r(e,t),a(e,t,n),s(e),l(e),o(e,t),c(e),u(e),p(e),h(e,t),S(e,"e",n),d(e),v(e,n),y(e,n),b(e),x(e),e}function o(e,t){if("EqxDrawingBoard"===w[e.type]&&t.map[P]){var n=t.map[P][e.id];n&&(e.properties.imgSrc=n,e.properties.qiniuSrc=n)}}function r(e,t){e&&t&&(e.properties=e.properties||{},"string"==typeof e.properties&&(e.properties={}),e.css=e.css||{},e.sceneId=t.meta.id,e.content&&(e.content=$.perfectStr(e.content)),e.title&&(e.title=$.perfectStr(e.title)))}function a(e,t,n){var i=e.css,o=w[e.type];if("translate3d(0px, 0px, 0px) rotateZ(0deg) scale(1, 1)"===i.transform&&(i.transform=""),i.letterSpacing&&!i.letterSpacing.toString().endsWith("em")&&(i.letterSpacing=i.letterSpacing+"em"),"EqxBackground"!==o){var r=["top","left","width","height","zIndex"];r.forEach(function(e){void 0===i[e]&&(_DEBUG_,"height"===e&&(["EqxInput","EqxInputEmail","EqxInputPhone"].includes(o)&&(i.height=38),"EqxSubmitButton"===o&&(i.height=36),"EqxRadio"!==o&&"EqxCheckbox"!==o||_DEBUG_&&console.info(o),_DEBUG_&&console.info("add height",i.height)))});var a={color:"#676767",backgroundColor:"",opacity:1,transform:"rotateZ(0deg)",textAlign:"left",borderWidth:0,borderStyle:"solid",borderColor:"rgba(0,0,0,1)",borderRadius:0,borderRadiusPerc:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,borderTopRightRadius:0,borderTopLeftRadius:0,paddingBottom:0,paddingTop:0,paddingLeft:0,paddingRight:0,boxShadow:"0px 0px 0px rgba(0,0,0,0.5)",boxShadowDirection:0,boxShadowSize:0},s=Object.assign({},a,i);Object.assign(i,s)}if(g(e),f(i),n){var c=n.properties.longPage||486;i.bottom&&!i.top&&(i.top=c-i.bottom-i.height,console.log("bottom "+i.bottom+" height "+i.height+" -> top "+i.top),delete i.bottom)}return i.top||(i.top=0),i.left||(i.left=0),e}function s(e){var t=e.properties;"string"==typeof t&&(t={}),t.anim?(Array.isArray(t.anim)||(t.anim=[t.anim]),t.anim=t.anim.filter(function(e){var t=e||{},n=t.type,i=t.direction;return!(n==-1||null==n||void 0==n||!I[n])&&(T[n]&&!I[n][i]&&(console.error("invalid animation type",e),e.direction=0),!0)})):t.anim=[],t.anim.forEach(function(e){["delay","duration"].forEach(function(t){"string"==typeof e[t]&&(e[t]=parseFloat(e[t]))})})}function c(e){var t=e.type,n=e.properties,i=n.cropSize,o=n.croptype,r=n.pageLength;"EqxBackground"===w[t]&&(i&&!o&&(n.croptype=k["固定背景模式"]),r&&(r<2&&delete n.pageLength,r<10&&(n.pageLength=486*r)))}function l(e){if("EqxImage"===w[e.type]){var t=e.properties;f(t),f(t.imgStyle||(t.imgStyle={}))}}function u(e){var t=w[e.type];"string"!=typeof e.choices||"EqxCheckbox"!==t&&"EqxDropDownList"!==t&&"EqxRadio"!==t||(e.choices=JSON.parse(e.choices)||{})}function p(e){}function d(e){"EqxDropDownList"==w[e.type]&&(e.showText&&e.placeholderText&&e.choices&&(e.choices.options.unshift({id:0,label:e.placeholderText}),e.choices.options.map(function(t){t.value=t.id,delete t.id,t.selected=!1,t.label==e.showText&&(t.selected=!0)})),delete e.showText,delete e.placeholderText,e.choices&&delete e.choices.seq)}function h(e,t){var n=t.meta.publishTime,i=w[e.type];if("EqxText"===i||"EqxAwesomeText"===i){e.type=2,e.properties&&e.properties.dataUrl&&delete e.properties.dataUrl;var o=e.content;o&&o.length>0&&(o=o.replace(/(^\s*)|(\s*$)/g,""),$.isBadStr(o)&&(console.error("xss text"),o=$.toGoodStr(o)),e.content=o),e.publishTime=n}}function f(e){"100%"===e.width&&(e.width=320),["opacity","width","height","top","bottom","left","right","zIndex","borderWidth","borderBottomLeftRadius","borderBottomRightRadius","borderTopRightRadius","borderTopLeftRadius","borderRadius"].forEach(function(t){var n=e[t];n&&(e[t]=parseFloat(n))})}function g(e){var t=e.css,n=w[e.type],i=["top","bottom","left","zIndex","width","height","lock","transform","opacity","color","backgroundColor","lineHeight","fontSize","textAlign","fontWeight","writingMode","letterSpacing","fontFamily","paddingBottom","paddingTop","paddingLeft","paddingRight","letterSpacing","fontStyle","textDecoration","letterSpacing","fontStyle","borderWidth","borderStyle","borderColor","borderRadius","borderRadiusPerc","borderBottomRightRadius","borderBottomLeftRadius","borderTopRightRadius","borderTopLeftRadius","boxShadow","boxShadowDirection","boxShadowSize"];return Object.keys(t).forEach(function(e){var o=i.indexOf(e),r=t[e];if(o===-1&&(_DEBUG_,"EqxInput"===n&&"text-align"===e&&(t.textAlign=t.textAlign||t["text-align"],
delete t[e]),"border"===e)){var a=m(r);t.borderColor=a.borderColor||t.borderColor,t.borderWidth=a.borderWidth||t.borderWidth,t.borderStyle=a.borderStyle||t.borderStyle,delete t[e],_DEBUG_&&console.info("delete border:",r,"add",t.borderColor,t.borderWidth,t.borderStyle)}}),e}function m(e){var t=e.split(" ");return{borderWidth:t[0],borderStyle:t[1],borderColor:t[2]}}function v(e,t){var n=e.properties,i=n.url,o=n.number,r="",a="";i?(!Number.isInteger(+i)&&i.startsWith("http://")&&window.location.href.startsWith("https://")&&(i=i.replace("http://","https://")),a=i,r=Number.isInteger(+i)?C.page:C.link,delete e.properties.url):o&&(a=o,r=C.phone,delete e.properties.number),a&&r&&t.properties.triggerGroup.push({eventType:_.click,sourceType:"e",sourceId:e.id,targetType:"e",targetId:e.id,targetState:r,targetContent:a})}function y(e,t){if(e.sound&&e.sound.src){var n=t.properties.triggerGroup.findIndex(function(t){return t.eventType==_.click&&t.sourceId==e.id&&t.targetState==C.play});n==-1&&t.properties.triggerGroup.push({eventType:_.click,sourceType:"e",sourceId:e.id,targetType:"e",targetId:e.id,targetState:C.play})}}function b(e){if("EqxMap"===w[e.type]){e.properties.zoom=e.properties.zoom||11;var t=e.content;t&&t.length>0&&(t=t.replace(/(^\s*)|(\s*$)/g,""),$.isBadStr(t)&&(console.error("xss text"),t=$.toGoodStr(t)),e.content=t)}}function x(e){"EqxDownTime"===w[e.type]&&(e.properties.arriveTipsContent=$.perfectStr(e.properties.arriveTipsContent))}var w=n(117).COMP_TYPE,k=n(118).BG_CROP_TYPE,S=n(119),I=n(120).ANIMATION_TYPE,T=n(120).ANIMATION_TYPE_WITH_DIR,$=n(66),E=n(26).getUrlParam,P=E("compKey"),_=n(121).RAW_EVENT,C=n(121).EQX_EVENT,A=n(122),O=A.perfectOrientation;e.exports={perfectComp:i,perfectJson:r,perfectCss:a,perfectAnim:s,perfectBg:c,perfectChoice:u,perfectInput:p,perfectText:h,perfectTrigger:S,perfectLink:v,perfectOrientation:O,perfectSound:y}},function(e,t,n){"use strict";var i=n(27),o=(i.isWxwork,{16:"EqxPipButton",1:"EqxHotNewText",13:"EqxPhotoWall",7:"EqxNewText",2:"EqxText",x:"EqxText",298:"EqxDeepShare",299:"EqxReport",3:"EqxBackground",4:"EqxImage",8:"EqxTelephone",9:"EqxRedPacket",10:"EqxRandomContent",11:"EqxReward",b:"EqxComment",h:"EqxShape",i:"EqxCount",l:"EqxLink",t:"EqxChart",v:"EqxVideo",o:"EqxInteractiveVideo",p:"EqxImageSlider",m:"EqxMap",n:"EqxRandom",s:"EqxSound",d:"EqxPv",g:"EqxAdvertise",e:"EqxDownTime",f:"EqxUpTime",upload:"EqxUploadImages",a:"EqxScore",c:"EqxCheckbox",r:"EqxRadio",z:"EqxDropDownList",5:"EqxInput",501:"EqxInput",502:"EqxInputPhone",503:"EqxInputEmail",504:"EqxInput",505:"EqxInputDate",6:"EqxSubmitButton",601:"EqxSubmitButton",12:"EqxSMS",201:"EqxWxNickName",401:"EqxWxProfile",403:"EqxWxUploadImage",w01:"EqxWxSoundPlay",w02:"EqxWxSoundRecord",j:"EqxImgVote",k:"EqxTextVote",q:"EqxGravity",u:"EqxDrawingBoard",14:"EqxDate",17:"EqxWeChatCard",18:"EqxTurntable",19:"EqxSmashEgg",20:"EqxScratchcard",21:"EqxRedPackets",2021:"EqxRedEnvelopes",22:"EqxNineSquare",23:"EqxQrcode",24:"EqxLongTouchSavePicButton",25:"EqxWordArt",26:"EqxSpeechRecognition",27:"EqxMagicCube",28:"EqxBuoy",29:"EqxFormRandom",30:"EqxDynamicNumber",31:"EqxLocation",32:"EqxImgGroup",33:"EqxFaceCheck",34:"EqxAgeChange",35:"EqxFaceMerge",36:"EqxCatalogue",37:"EqxWeather",66:"EqxGameTurnTable",65:"EqxGameTurnTable",38:"EqxCustomerCare"}),r=["upload","5","501","502","503","504","505","c","r","z","a","12"],a=["201","401","403","w01","w02","j","k","11","9","b","13","17","18","19","20","21","22","29","2021"],s=["i","6","601"],c=["3","q"],l=Date.now()+""+Math.floor(1e5*Math.random());e.exports={COMP_TYPE:o,FORM_COMPS:r,WX_COMPS:a,WX_CLICK_FARMER_COMPS:s,FIX_INDEX_COMPS:c,COMP_KEY:l}},function(e,t){"use strict";var n={"固定背景模式":1,"全屏背景模式":2};e.exports={BG_CROP_TYPE:n}},function(e,t){"use strict";function n(e,t,n){var i=e.trigger;if(i){var o=i.sends;Array.isArray(o)&&(n.properties.triggerGroup=n.properties.triggerGroup||[],o.forEach(function(i){i.handles.forEach(function(o){o.ids&&o.ids.length&&o.ids.forEach(function(r){n.properties.triggerGroup.push({eventType:i.type,sourceType:t,sourceId:"e"==t?e.id:n.id,targetType:"e",targetId:r,targetState:o.type,delay:i.delay})})})})),"e"==t&&i.initType&&(e.properties.initType=i.initType),delete e.trigger}if("e"==t&&1!=e.properties.initType&&2!=e.properties.initType)if(i&&i.receives&&i.receives.length){var r=i.receives.length;1===i.receives[r-1].type?e.properties.initType=2:2===i.receives[r-1].type&&(e.properties.initType=1)}else e.properties.initType=1}e.exports=n},function(e,t){"use strict";var n={0:["fadeIn"],1:["fadeInLeft","fadeInDown","fadeInRight","fadeInUp"],2:["bounceInLeft","bounceInDown","bounceInRight","bounceInUp"],3:["bounceIn"],4:["zoomIn"],5:["rubberBand"],6:["wobble"],7:["rotateIn"],8:["flip"],9:["swing"],10:["fadeOut"],11:["flipOutY"],12:["rollInRight","rollInDown","rollInLeft","rollInUp"],13:["lightSpeedInRight","lightSpeedInDown","lightSpeedInLeft","lightSpeedInUp"],14:["bounceOut"],15:["rollOutRight","rollOutDown","rollOutLeft","rollOutUp"],16:["lightSpeedOutRight","lightSpeedOutDown","lightSpeedOutLeft","lightSpeedOutUp"],17:["fadeOutRight","fadeOutDown","fadeOutLeft","fadeOutUp"],18:["zoomOut"],19:["bounceOutRight","bounceOutDown","bounceOutLeft","bounceOutUp"],20:["flipInY"],21:["tada"],22:["jello"],23:["flash"],24:["flipInX"],25:["flipOutX"],26:["twisterInDownRight","twisterInDownDown","twisterInDownLeft","twisterInDownUp"],27:["puffIn"],28:["puffOut"],29:["slideDown"],30:["slideUp"],31:["twisterInUpRight","twisterInUpDown","twisterInUpLeft","twisterInUpUp"],32:["hingeRight","hingeRight","hingeLeft"],33:["opacityFadeInLeft","opacityFadeInDown","opacityFadeInRight","opacityFadeInUp"],particles:["particles"],typer:["typer"],linearMotion:["linearMotion"],curveMotion:["curveMotion"],customMotion:["customMotion"]},i={1:["fadeInLeft","fadeInDown","fadeInRight","fadeInUp"],2:["bounceInLeft","bounceInDown","bounceInRight","bounceInUp"],12:["rollInRight","rollInDown","rollInLeft","rollInUp"],13:["lightSpeedInRight","lightSpeedInDown","lightSpeedInLeft","lightSpeedInUp"],15:["rollOutRight","rollOutDown","rollOutLeft","rollOutUp"],16:["lightSpeedOutRight","lightSpeedOutDown","lightSpeedOutLeft","lightSpeedOutUp"],17:["fadeOutRight","fadeOutDown","fadeOutLeft","fadeOutUp"],19:["bounceOutRight","bounceOutDown","bounceOutLeft","bounceOutUp"],26:["twisterInDownRight","twisterInDownDown","twisterInDownLeft","twisterInDownUp"],31:["twisterInUpRight","twisterInUpDown","twisterInUpLeft","twisterInUpUp"],33:["opacityFadeInLeft","opacityFadeInDown","opacityFadeInRight","opacityFadeInUp"]},o=[0,1,2,3,4,12,13,20,24,26,27,31,32,33,"particles"];e.exports={ANIMATION_TYPE:n,ANIMATION_TYPE_WITH_DIR:i,ANIMATION_ENTRY:o}},function(e,t){"use strict";function n(e,t){var n="";switch(t.targetState){case o.show:n="显示";break;case o.hide:n="隐藏";break;case o.play:n="o"==e.compJson.type?"播放视频":"播放音频";break;case o.link:n="跳转外链";break;case o.page:n="跳转页面";break;case o.phone:n="拨打电话";break;case o.position:n="定位页面";break;case o.anim:n="播放动画";break;case o.pageR:n="跳转页面";break;case o.toggleShow:n="切换"}return n}var i={click:1,shake:2,taphold:3,slide:4,mediaCanplay:5,mediaPlaying:6,mediaEnded:7,animStart:8,animIteration:9,animEnd:10,exceptionSuc:11},o={show:1,hide:2,random:3,play:4,link:5,page:6,phone:7,position:8,anim:9,pageR:10,toggleShow:11},r={show:1,hide:2,"default":0};e.exports={RAW_EVENT:i,EQX_EVENT:o,INIT_EVENT:r,getTriggerTargetStateName:n}},function(e,t,n){"use strict";function i(e,t){var n={x:e,y:t};return t>0?e>0?(n.x=-Math.abs(t),n.y=Math.abs(e)):(n.x=-Math.abs(t),n.y=-Math.abs(e)):e<0?(n.x=Math.abs(t),n.y=-Math.abs(e)):(n.x=Math.abs(t),n.y=Math.abs(e)),n}function o(e,t){var n={x:e,y:t};return t>0?e>0?(n.x=Math.abs(t),n.y=-Math.abs(e)):(n.x=Math.abs(t),n.y=Math.abs(e)):e<0?(n.x=-Math.abs(t),n.y=Math.abs(e)):(n.x=-Math.abs(t),n.y=-Math.abs(e)),n}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=e.properties,i=n.anim;i&&i.length>0&&i.forEach(function(e){switch(e.type){case"linearMotion":case"customMotion":for(var n=0;n<e.path.length;n+=2)if(n+1<e.path.length){var i=t(e.path[n],e.path[n+1]),o=i.x,r=i.y;e.path[n]=o,e.path[n+1]=r}break;case"curveMotion":e.path.forEach(function(e){e.forEach(function(e){var n=t(e.x,e.y),i=n.x,o=n.y;e.x=i,e.y=o})})}})}function a(e){return e.elements&&e.elements.forEach(function(e,t){var n=e.css,o=Number(l(n.top)),a=Number(l(n.left));n.top=a+(n.width-n.height)/2,n.left=320-(o+n.height+(n.width-n.height)/2);var s=n.transform,c=/rotateZ\(\s*(\d+)deg\s*\)/,u=s&&s.match(c);if(u&&u.length>1){var p=u[1];s=s.replace(c,""),n.transform=s+" rotateZ("+(+p+90)+"deg) translate3d(0px, 0px, 0px)"}else n.transform="rotateZ(90deg) translate3d(0px, 0px, 0px)";n.zIndex=t+1,r(e,i)}),e}function s(e,t){var n=t.meta;if(n.property.orientation&&"landscape"===n.property.orientation.curr){var i=Number(l(e.css.left)),a=Number(l(e.css.top));e.css.left=a-(e.css.width-e.css.height)/2,e.css.top=320-i-(e.css.width-e.css.height)/2-e.css.height;var s=e.css.transform,c=/rotateZ\(\s*(\d+)deg\s*\)/,u=s&&s.match(c);if(u&&u.length>1){var p=u[1];s=s.replace(c,""),e.css.transform=s+" rotateZ("+(+p-90)+"deg)"}r(e,o)}}var c=n(123),l=c.withoutPx;e.exports={perfectLandScapePage:a,perfectOrientation:s}},function(e,t){"use strict";function n(e){return e&&(""+e).indexOf("px")!==-1?e.replace("px",""):e}function i(e,t,n){var i="0px";if(n){var o=$(".workspace").scrollTop();i=e>1?o/(1.25*e)+(486-t)/2+"px":o+(486-t)/2+"px"}else i=(486-t)/2+"px";return i}function o(e){var t=(320-e)/2;return t}function r(e,t,n){var i=0;if(n){var o=$(".workspace").scrollLeft();i=t>1?o/(1.25*t)+(486-e)/2:o+(486-e)/2}else i=(486-e)/2;return i}function a(e,t,i,a,s){var c=t.eqxScene.getOrientation();if(c&&c.isLandScape()){var l=n(e.width),u=n(e.height);switch(i){case"left":e.top=o(u)+"px";break;case"top":e.left=r(l,a,s)+"px";break;default:e.top=o(u)+"px",e.left=r(l,a,s)+"px"}}}e.exports={getComDefaultTop:i,withoutPx:n,getLandscapeTop:o,getLandscapeLeft:r,setCompPosiByOrientation:a}},function(e,t,n){"use strict";function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0px 0px 0px rgba(0,0,0,0.5), inset 0px 0px 0px rgba(0,0,0,0.5)",t=(arguments[1],arguments[2],e.split(", inset")),n=t[0],i=t[1]||"0px 0px 0px rgba(0,0,0,0.5)";n=n.replace(a,function(e){return s.color=e,""}),i=i.replace(a,function(e){return s.insetColor=e,""});var o=n.trim().split(" "),c=i.trim().split(" ");return s.x=parseFloat(o[0]),s.y=parseFloat(o[1]),s.blur=r(o[2]),s.insetX=parseFloat(c[0]),s.insetY=parseFloat(c[1]),s.insetBlur=r(c[2]),s}function o(e){return e.x+"px "+e.y+"px "+e.blur+"px "+e.color+", inset "+e.insetX+"px "+e.insetY+"px "+e.insetBlur+"px "+e.insetColor}var r=n(111).toInt,a=/rgba\([^)]*\)/,s={blur:"",color:"",x:"",y:"",insetBlur:"",insetColor:"",insetX:"",insetY:""};e.exports={parseBoxShadow:i,getBoxShadowStr:o}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(126),n(17);var r=n(120).ANIMATION_TYPE,a=n(127),s=a.animInstanceMap,c=a.AnimClassifyMap,l=function(){function e(t,n){i(this,e),this.eqxComp=t,this.config=n}return o(e,[{key:"startAnimation",value:function(e){function t(){if(l++,l>=a.length)c.allAnimEnd(),n&&n();else{var e=a[l].type,o=r[e];if(!o)return t();var u=a[l].animClassify,p=void 0===u?"0":u,d=s.find(function(e){return e.key==p});d===-1&&(d=s[0]),c[d.name].doAnimation(a[l],i,l,a.length).then(function(){t()})}}var n=e.callback,i=e.maxCount,o=this.eqxComp.compJson,a=o.properties.anim||[];a&&!Array.isArray(a)&&(a=[a]);var c=this,l=-1;t()}},{key:"previewAnimation",value:function(e){var t=this,n=e.type,i=r[n];if(i){var o=e.animClassify,a=void 0===o?"0":o,c=s.find(function(e){return e.key==a});c===-1&&(c=s[0]),this[c.name].doAnimation(e).then(function(){t.stopAnimation()})}}},{key:"stopAnimation",value:function(){var e=this.eqxComp,t=s.find(function(e){return 1===e.key});if(this[t.name]&&this[t.name].stopAnimation(),e.$boxDiv.css({animation:""}),e.$li.css({animation:""}),e.$contextCopy){var n=e.$contextCopy.data("typed");n&&n.reset()}}},{key:"addAnimClassify",value:function(){var e=this,t=String(this.eqxComp.type),n="2"===t||"7"===t;s.forEach(function(t){var i=t.key;(n||1!==i)&&(e[t.name]=e.getAnimClass(t.key))})}},{key:"getAnimClass",value:function(e){var t=c[e];return t?new t(this.eqxComp,this.config):void console.error("In Valid Anim Type")}},{key:"onAllAnimEnd",value:function(e){e instanceof Function&&(this._animEndFnList||(this._animEndFnList=[]),this._animEndFnList.push(e))}},{key:"allAnimEnd",value:function(){this._animEndFnList&&this._animEndFnList.forEach(function(e){return e()})}}]),e}();e.exports=l},function(e,t){},function(e,t,n){"use strict";var i=n(128),o=n(131),r=[{key:0,name:"compAnim"},{key:1,name:"textAnim"}],a={COMPANIM:i,0:i,TEXTANIM:o,1:o};e.exports={animInstanceMap:r,AnimClassifyMap:a}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(120).ANIMATION_TYPE,a=n(25).$canvas,s=n(25).$loadTyped,c=n(129).Particles,l=n(24),u=n(130),p=function(){function e(t,n){i(this,e),this.eqxComp=t,this.config=n}return o(e,[{key:"doAnimation",value:function(e,t,n,i){var o=this,p=new Promise(function(p){function d(){L.off("webkitAnimationEnd animationend",d),n<i-1&&g.css({"animation-name":"","animation-duration":"","animation-timing-function":"","animation-delay":"","animation-iteration-count":""}),setTimeout(function(){p()},0)}var h=o.eqxComp,f=h.$li,g=h.$boxDiv,m=h.$context,v=h.compJson,y=e.type,b=e.direction,x=e.duration,w=void 0===x?.1:x,k=e.linear,S=e.count,I=e.countNum,T=void 0===I?1:I,$=e.delay,E=void 0===$?0:$,P=e.interval,_=e.path,C=void 0===_?[]:_;0===w&&(w=.1),null==E&&(E=0);var A=r[y],O=k?"linear":"ease",q=A[b]||r[y][0],L=g,M=["linearMotion","curveMotion","customMotion"].includes(q);M&&(L=f);var R=S?"infinite":T;if(t&&(R=1),g.css({"animation-name":"","animation-duration":"","animation-timing-function":"","animation-delay":"","animation-iteration-count":""}),"typer"===q)m.css({opacity:0}),s().then(function(){var e=h.create$context(),t={position:"absolute","pointer-events":"none"};h.compJson.css.writingMode&&"vertical-rl"===h.compJson.css.writingMode?t.left="-30px":t.top="0px",e.attr("context-copy",1).css(t),m.after(e),h.$contextCopy=e;var n=function(){h.$contextCopy=null,setTimeout(function(){e.remove(),e=null,h.$contextCopy||m.css({opacity:1}),p()},100)};e.typed({strings:[v.content],contentType:"html",showCursor:!1,typeSpeed:1e3*P||0,startDelay:1e3*E||0,onFirstTyped:function(){setTimeout(function(){e&&e.css({opacity:1})},0)},callback:function(){clearInterval(e.data("typed").timeout),e.removeData("typed"),n()},resetCallback:function(){n()}})},function(){m.css({opacity:1})});else if("particles"===q){var j=function(){if("number"==typeof R){if(1==R)return void p();R>1&&F(),R--}else F()},F=function(){var e=Math.abs(parseInt(g.find("img").css("marginLeft"))),t=Math.abs(parseInt(g.find("img").css("marginTop")));g.css("opacity","0");var n=new c({type:h.compJson.type,top:e,left:t,$parEle:f,imgUrl:l.FILE+h.compJson.properties.src,startX:h.compJson.css.width,startY:h.compJson.css.height,imgX:0,imgY:0,delay:1e3*E,duration:1e3*w,interval:0,ease:"linear"},j);n.animate()};f.remove("canvas"),"h"==h.compJson.type?(g.css("opacity","0"),a().then(function(){F()})):F()}else{var B=void 0;if(M){var D=v.css.transform,J={path:C.concat(),iterationCount:R,duration:w,delay:E,rotateFollow:e.rotateFollow,transform:D};C.length>2||"curveMotion"===q?B="linearMotion"===q||"customMotion"===q?u.linear(J):u.curve(J):p()}else{var N={"animation-name":q,"animation-duration":w+"s","animation-timing-function":O,"animation-delay":E+"s","animation-iteration-count":R,"animation-direction":"normal","animation-fill-mode":"both"};B=Object.keys(N).map(function(e){return N[e]}).join(" ")}M?setTimeout(function(){L.css("animation",B)},1e3*E):L.css("animation",B),L.on("webkitAnimationEnd animationend",d)}});return p}}]),e}();e.exports=p},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=(o={easeInOutBack:function(e,t,n,i,o){return void 0==o&&(o=1.70158),(e/=i/2)<1?n/2*(e*e*(((o*=1.525)+1)*e-o))+t:n/2*((e-=2)*e*(((o*=1.525)+1)*e+o)+2)+t},linear:function(e,t,n,i){return n*e/i+t},easeInOutQuad:function(e,t,n,i){return e/=i/2,e<1?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t)},easeOutQuad:function(e,t,n,i){return e/=i,-n*e*(e-2)+t}},i(o,"easeOutQuad",function(e,t,n,i){return e/=i,-n*e*(e-2)+t}),i(o,"easeInCubic",function(e,t,n,i){return e/=i,n*e*e*e+t}),i(o,"easeOutCubic",function(e,t,n,i){return e/=i,e--,n*(e*e*e+1)+t}),i(o,"easeInOutCubic",function(e,t,n,i){return e/=i/2,e<1?n/2*e*e*e+t:(e-=2,n/2*(e*e*e+2)+t)}),i(o,"easeInQuart",function(e,t,n,i){return e/=i,n*e*e*e*e+t}),i(o,"easeOutQuart",function(e,t,n,i){return e/=i,e--,-n*(e*e*e*e-1)+t}),i(o,"easeInOutQuart",function(e,t,n,i){return e/=i/2,e<1?n/2*e*e*e*e+t:(e-=2,-n/2*(e*e*e*e-2)+t)}),i(o,"easeInQuint",function(e,t,n,i){return e/=i,n*e*e*e*e*e+t}),i(o,"easeOutQuint",function(e,t,n,i){return e/=i,e--,n*(e*e*e*e*e+1)+t}),i(o,"easeInOutQuint",function(e,t,n,i){return e/=i/2,e<1?n/2*e*e*e*e*e+t:(e-=2,n/2*(e*e*e*e*e+2)+t)}),i(o,"easeInSine",function(e,t,n,i){return-n*Math.cos(e/i*(Math.PI/2))+n+t}),i(o,"easeOutSine",function(e,t,n,i){return n*Math.sin(e/i*(Math.PI/2))+t}),i(o,"easeInOutSine",function(e,t,n,i){return-n/2*(Math.cos(Math.PI*e/i)-1)+t}),i(o,"easeInExpo",function(e,t,n,i){return n*Math.pow(2,10*(e/i-1))+t}),i(o,"easeOutExpo",function(e,t,n,i){return n*(-Math.pow(2,-10*e/i)+1)+t}),o),s=function(){function e(t,i){n(this,e),this.colNumber=3,this.$parEle=t.$parEle,this.canvas={},this.image={},this.requestId=0,this.startTime=0,this.array=[],this.startX=t.startX,this.startY=t.startY,this.callBackFn=i,this.param=t,this.init()}return r(e,[{key:"randomX",value:function(){return parseInt(Math.random()*this.startX)}},{key:"randomY",value:function(){return parseInt(Math.random()*this.startY)}},{key:"init",value:function(){var e=this;if(this.$parEle.find("canvas").remove(),this.$canvas=$("<canvas></canvas>"),this.$parEle.prepend(this.$canvas),this.$canvas.css({position:"absolute",top:0,left:0}),this.canvas=this.$canvas[0],this.image.isLoaded=!1,this.canvas.width=this.$parEle.width(),this.canvas.height=this.$parEle.height(),this.canvas.width>300&&this.canvas.height>300&&(this.colNumber=4),this.canvas.ctx=this.canvas.getContext("2d"),"h"===this.param.type)return void setTimeout(function(){canvg(e.canvas,e.$parEle.find(".element-box-contents")[0],{ignoreMouse:!0,ignoreAnimation:!0}),e.calCanvas()},10);if(this.canvas&&this.canvas.getContext){var t=new Image;t.onload=function(){var n=e.$parEle.find("img").width(),i=e.$parEle.find("img").height(),o=t.height/i,r=t.width/n;e.canvas.ctx.drawImage(t,e.param.top*r,e.param.left*o,r*e.canvas.width,o*e.canvas.height,0,0,e.canvas.width,e.canvas.height),e.calCanvas()},t.crossOrigin="anonymous",t.src=this.param.imgUrl}}},{key:"draw",value:function(){this.image.isLoaded?this._draw():setTimeout(this.draw.bind(this))}},{key:"animate",value:function(){this.image.isLoaded?this._animate(this.param.delay):setTimeout(this.animate.bind(this))}},{key:"_calculate",value:function(e){for(var t=this.image.imgData.data,n=e.cols,i=e.rows,o=Math.round(this.canvas.width/n),r=Math.round(this.canvas.height/i),a=0,s={},c=0;c<n;c++)for(var l=0;l<i;l++)a=4*(l*r*this.canvas.width+c*o),t[a+3]>25&&(s={x0:this.randomX(),y0:this.randomY(),x1:this.param.imgX+c*o,y1:this.param.imgY+l*r,delay:l/20,currTime:0,count:0,duration:parseInt(e.duration/16.66)+1,interval:parseInt(10*Math.random()*e.interval),ease:e.ease,ratioX:e.ratioX,ratioY:e.ratioY},s.fillStyle="rgba("+t[a]+", "+t[a+1]+", "+t[a+2]+","+t[a+3]+")",this.array.push(s))}},{key:"_draw",value:function(){this.canvas.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);for(var e=this.array.length,t=null,n=0;n<e;n++)t=this.array[n],this.canvas.ctx.fillStyle=t.fillStyle,this.canvas.ctx.fillRect(t.x1,t.y1,1,1)}},{key:"_render",value:function(){var e=this;this.canvas.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);for(var t,n,i=this.array,o=i.length,r=null,s=0,c=0,l=0,u=1,p=1,d=0;d<o;d++)if(r=i[d],r.count++>r.delay){if(this.canvas.ctx.fillStyle=r.fillStyle,s=r.currTime,c=r.duration,l=r.interval,1!==r.ratioX?u=r.ratioX+2*Math.random():1,1!==r.ratioY?p=r.ratioY+2*Math.random():1,i[o-1].duration+i[o-1].interval<.9*i[o-1].currTime)return this.canvas=null,cancelAnimationFrame(this.requestId),this.$parEle.find("canvas").remove(),this.$parEle.find(".element-box").css("opacity","1"),void setTimeout(function(){e.callBackFn()},300);s<c+l?s>=l&&(t=a[r.ease]((s-l)*u,r.x0,(r.x1-r.x0)*u,c),n=a[r.ease]((s-l)*p,r.y0,(r.y1-r.y0)*p,c),this.canvas.ctx.fillRect(t,n,1,1)):this.canvas.ctx.fillRect(r.x1,r.y1,1,1),r.currTime+=Math.random()+.5}this.requestId=requestAnimationFrame(this._render.bind(this))}},{key:"_animate",value:function(e){var t=this;this.startTime+e<(new Date).getTime()?this.requestId=requestAnimationFrame(this._render.bind(this)):setTimeout(function(){t._animate(e)})}},{key:"calCanvas",value:function(){var e=this.param;this.image.imgData=this.canvas.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),this.canvas.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this._calculate({duration:e.duration||0,delay:e.delay||0,interval:e.interval||0,ease:e.ease,ratioX:1,ratioY:1,cols:Math.ceil(this.canvas.width/this.colNumber)||100,rows:Math.ceil(this.canvas.height/this.colNumber)||100}),this.image.isLoaded=!0,this.startTime=(new Date).getTime()}}]),e}();e.exports={Particles:s}},function(e,t){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e){var t=e.path,n=e.iterationCount,i=e.duration,o=e.delay,r=e.rotateFollow,s=e.transform,c=a(m,t,r,s),l=f(c,n,i,o);return l}function o(e){var t=e.path,n=e.iterationCount,i=e.duration,o=e.delay,r=e.rotateFollow,a=e.transform,s=c(m,t,r,a),l=f(s,n,i,o);return l}function r(){return"tempKeyframesForMotion"+v++}function a(e,t,i,o){var a=s(t,i),c=a.ratios,l=a.rotates,u=r(),p="",d="",h=new Set([].concat(n(c)));Array.from(h);c.forEach(function(e,n){var r=t.splice(0,2),a=g(r,2),s=a[0],c=a[1],u="translate("+s+"px, "+c+"px) rotate("+(l[n]||0)+"rad) "+o,h="translate("+s+"px, "+c+"px) rotate("+(l[n+1]||0)+"rad) "+o;i?(p+="\n                "+e+"% {\n                    transform: "+u+";\n                }\n                "+e+"% {\n                    transform: "+h+";\n                }\n            ",d+="\n                "+e+"% {\n                    -webkit-transform:  "+u+";\n                    transform: "+u+";\n                }\n                "+e+"% {\n                    -webkit-transform:  "+h+";\n                    transform: "+h+";\n                }\n            "):(p+="\n                "+e+"% {\n                    transform: "+u+";\n                }\n            ",d+="\n                "+e+"% {\n                    -webkit-transform:  "+u+";\n                    transform: "+u+";\n                }\n            ")});var f="\n        @keyframes "+u+" {\n            "+p+"\n        }\n    ",m="\n        @-webkit-keyframes "+u+" {\n            "+d+"\n        }        \n    ";try{e.insertRule(f,0),e.insertRule(m,0)}catch(v){console.log(v)}return u}function s(e,t){for(var n=[0],i=[],o=0,r=Math.sqrt,a=Math.pow,s=Math.atan2,c=(Math.floor,Math.PI),l=3,u=e.length;l<u;l+=2){var p=r(a(e[l-1]-e[l-3],2)+a(e[l]-e[l-2],2));if(o+=p,i.push(o),t){var d=s(e[l]-e[l-2],e[l-1]-e[l-3]),h=d-n[n.length-1];h>c?d-=2*c:h<-c&&(d+=2*c),n.push(d)}}var f=i.map(function(e){return e/o*100});return f.unshift(0),t&&n.push(n[n.length-1]),f.splice(-1,1,100),{ratios:f,rotates:n}}function c(e,t,n,i){var o=r(),a=l(t,n),s="",c="",u=0,p=a.length;a.forEach(function(e,t){var n=e.ratio,o=e.dps,r=e.p1,a=e.p2,l=e.rad,d=100*n;if(o){var h=d/o.length;o.forEach(function(e,n){var r=e.x,a=e.y,l=e.rad,d=void 0;d=t===p-1&&n===o.length-1?100:u+h*n;var f="translate("+r+"px, "+a+"px) rotate("+(l||0)+"rad) "+i;s+="\n                    "+d+"% {\n                        transform: "+f+";\n                    }\n                ",c+="\n                    "+d+"% {\n                        -webkit-transform:  "+f+";\n                        transform: "+f+";\n                    }\n                "})}else{var f=void 0,g=void 0;t?t===p-1?(f=u+d/10,g=100):(f=u+d/10,g=u+d-.001):(f=0,g=u+d-.001);var m=r.x,v=r.y,y=a.x,b=a.y,x="translate("+y+"px, "+b+"px) rotate("+(l||0)+"rad) "+i,w="translate("+m+"px, "+v+"px) rotate("+(l||0)+"rad) "+i;s+="\n                "+f+"% {\n                    transform: "+w+";\n                }\n                "+g+"% {\n                    transform: "+x+";\n                }\n            ",c+="\n                "+(u+d/10)+"% {\n                    -webkit-transform:  "+w+";\n                    transform: "+w+";\n                }\n                "+(u+d)+"% {\n                    -webkit-transform:  "+x+";\n                    transform: "+x+";\n                }                \n            "}u+=d});var d="\n    @keyframes "+o+" {\n        "+s+"\n    }\n    ",h="\n        @-webkit-keyframes "+o+" {\n            "+c+"\n        }        \n    ";try{e.insertRule(d,0),e.insertRule(h,0)}catch(f){throw new Error(f)}return o}function l(e,t){var n=[],i=[],o=0,r=0,a=Math.pow,s=Math.sqrt,c=Math.PI;return e.forEach(function(e){if(2===e.length){var l={},p=g(e,2),f=p[0],m=p[1],v=s(a(m.x-f.x,2)+a(m.y-f.y,2));if(i.push(v),o+=v,l.p2=m,l.p1=f,t){var b=Math.atan2(m.y-f.y,m.x-f.x),x=b-r;x>c?b-=2*c:x<-c&&(b+=2*c),l.rad=r=b}n.push(l)}else if(3===e.length){var w=g(e,3),k=w[0],S=w[1],I=w[2];y=u(e);var T=d(1),$=16,E=T/$,P=1/E;i.push(T),o+=T;for(var _=[],C=0;C<1;C+=P){var A=C*T,O=h(C,A),q=a(1-O,2),L=2*O*(1-O),M=a(O,2),R=q*k.x+L*S.x+M*I.x,j=q*k.y+L*S.y+M*I.y,F=_[_.length-1]||{x:0,y:0},B=F.x,D=F.y,J={x:R,y:j};if(t){var N=Math.atan2(j-D,R-B),z=N-r;z>c?N-=2*c:z<-c&&(N+=2*c),J.rad=r=N}_.push(J)}t&&(_[0].rad=r),n.push({dps:_})}else console.warn("曲线轨迹路径出现错误数据: curve.length = "+e.length)}),n.forEach(function(e,t){e.ratio=i[t]/o}),n}function u(e){var t=g(e,3),n=t[0],i=t[1],o=t[2],r=n.x-2*i.x+o.x,a=n.y-2*i.y+o.y,s=2*i.x-2*n.x,c=2*i.y-2*n.y,l=4*(r*r+a*a),u=4*(r*s+a*c),p=s*s+c*c;return{A:l,B:u,C:p}}function p(e){var t=y,n=t.A,i=t.B,o=t.C;return Math.sqrt(n*e*e+i*e+o)}function d(e){var t=y,n=t.A,i=t.B,o=t.C,r=Math.sqrt,a=Math.log,s=Math.pow,c=r(o+e*(i+n*e)),l=2*n*e*c+i*(c-r(o)),u=a(i+2*r(n)*r(o)),p=a(i+2*n*e+2*r(n)*c),d=2*r(n)*l,h=(i*i-4*n*o)*(u-p);return(d+h)/(8*s(n,1.5))}function h(e,t){for(var n=e,i=void 0,o=Math.abs;;){if(i=n-(d(n)-t)/p(n),o(n-i)<1e-5)break;n=i}return i}function f(e,t,n){var i=e+" "+(n+"s ")+"linear 0s "+(t+" ")+"normal both";return i}var g=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(c){o=!0,r=c}finally{try{!i&&s["return"]&&s["return"]()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),m=void 0,v=0;!function(){if(!m){document.head.appendChild(document.createElement("style"));var e=document.createElement("style");e.setAttribute("type","text/css"),e.innerHTML="",document.head.appendChild(e);var t=e.sheet;t||(t=document.styleSheets[document.styleSheets.length-1]),m=t}}();var y=void 0;e.exports={linear:i,curve:o}},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(132),s=n(120).ANIMATION_TYPE,c=n(27),l=String.fromCharCode(160),u=function(){function e(t,n,i){o(this,e),this.eqxComp=t,this.config=n,this.currentAnim=i,this.$textNode=null,this.$parentNode=null,this.isPlaying=!1,this.playDelayToIdx=void 0,this.interIdx=void 0,this.playEndToIdx=void 0,this.infinity=!1}return r(e,[{key:"doAnimation",value:function(e,t){var n=this;return this.isPlaying&&this.stopAnimation(),new Promise(function(i,o){n.isPlaying=!0;var r=n.eqxComp,l=String(r.type);console.log(r);var u=void 0;u="2"===l||r.compJson&&r.compJson.properties&&r.compJson.properties.flexo?r.$context:r.$context.find("span"),n.$textNode=u;var p=$(u).clone(!0),d=n.$parentNode=u.parent();u.remove(),p.css("opacity",0),d.append(p);var h=[],f=e.type,g=e.direction,m=e.duration,v=e.delay,y=e.countNum,b=e.count,x=e.textInterval,w=e.order;v*=1e3,x*=1e3,m*=1e3,c.shouldBeSafari()&&!m&&(m=1);for(var k="animation-duration: "+m+"ms;",S=s[f][g||0],I=void 0,T=["access","emphasize","exit"],E=Object.keys(a),P=0;P<E.length;P++)if(a[P].includes(f)){I=T[P];break}var _=document,C="access"===I?"animTextCharPlace animHidden":"animTextCharPlace",A=new RegExp("<[^>]*underline[^>]*>"),O=new RegExp("<[^>]*line-through[^>]*>");if("2"===l){var q=r.compJson.content,L=q.match(/<span[^>]*>/);if(L){var M=[0];A.test(M)&&(C+=" underline"),O.test(M)&&(C+="line-through")}}else C+=" "+r.compJson.css.textDecoration;var R="vertical-rl"===r.$context.css("writingMode");c.shouldBeSafari()&&R&&(C+=" safari");var j=[],F=function D(e,t){if(e){var i=$(e),o=i.clone(!0).get(0).childNodes;e.innerHTML="";for(var r=0,a=o.length;r<a;r++){var s=o[r];if(3===s.nodeType)i.append(n.textToEls(s.data,h,_,t));else if("BR"===s.tagName)i.append("<br>");else{if(s.children.length){var c=t,l=s.outerHTML.slice(0,s.outerHTML.indexOf(">"))+">";A.test(l)&&(c+=" underline"),O.test(l)&&(c+=" line-through"),D(s,c)}else{var u=s.innerText;s.innerText="";var p=t;A.test(s.outerHTML)&&(p+=" underline"),O.test(s.outerHTML)&&(p+=" line-through"),$(s).append(n.textToEls(u,h,_,p))}i.append(s),r--,a--}}}};F(p.get(0),C),n.preTimeout=setTimeout(function(){j=[];for(var e=String.fromCharCode(10),i=new RegExp(e,"g"),o=void 0,r=p[0].innerText;o=i.exec(r);)j.push(o.index-j.length);var a=r.split(e);n.insertBR(p,R,h,a.join(""),C,j),p.css("opacity",1),n.orderText(w,h),n.playDelayToIdx=setTimeout(function(){t?B(1,h):b?B(1/0,h):B(y,h)},v)});var B=function J(e,t){var o=0,r=t.length;n.interIdx=setInterval(function(){if(o<r){var a=t[o++];a.className&&(a.className+=" animTextChar "+S,1e3!==m&&(a.style.cssText+=k))}else clearInterval(n.interIdx),n.playEndToIdx=setTimeout(function(){--e>0||n.infinity?(t.forEach(function(e){e.className="animTextCharPlace"}),J(e,t)):i()},m)},x)}})}},{key:"getNotations",value:function(){var e=l+"“”‘’'\"",t="\\[({（《「【$¥￥:：\\\\",n="\\])}）》」】?？!！%;.。、,，；\\-…",i=e+t+n,o="<>.";return{bothNotations:e,preNotations:t,sufNotations:n,fullNotations:i,enBothNotations:o}}},{key:"textToEls",value:function(e,t,n,i){var o=$(n.createDocumentFragment()),r=new RegExp("[a-zA-Z\\d]+","g"),a=e.match(r);if(!a)return this.charToEl(e,t,n,i,o);var s=e.split(r),c=this.charToEl.bind(this);return a.forEach(function(e,r){
c(s[r],t,n,i,o);var a=n.createElement("span");a.innerText=e,a.className=i+" enWord",t.push(a),o.append(a)}),c(s[s.length-1],t,n,i,o),o}},{key:"charToEl",value:function(e,t,n,i,o){return e.split("").forEach(function(e){var r=void 0;"\n"===e?r=n.createElement("br"):(32===e.charCodeAt(0)&&(e=String.fromCharCode(160)),r=n.createElement("span"),r.innerText=e,r.className=i),t.push(r),o.append(r)}),o}},{key:"insertBR",value:function(e,t,n,i,o,r){function a(e){for(;I<e;){for(var t=n[S];I>E;)k=w,E=r[T++];var i=void 0,o=c(t);I+=t.textContent.length,i=parseFloat(o[l]),k>=i?k-=i:(k=w-i,i>w&&s(t,!0)),S++}}function s(e,t){var i=n.indexOf(e),r=void 0,a=void 0,s=void 0;if(t&&(s=n[S-1],/[<>]/.test(s.textContent))){r=!0;var u=c(s);a=parseFloat(u[l])}var p=$(e),d=e.textContent;e.innerHTML=d.split("").map(function(e){return'<span style="display: inline-block;">'+e+"</span>"}).join(""),t&&(k=w,r&&t&&(k-=a,$(s).before("<br>")));var h=[0];Array.prototype.forEach.call(e.children,function(e,t){var n=c(e),i=parseFloat(n[l]);k>=i?k-=i:(h.push(t),k=w-i)});var f=1;h.forEach(function(e,t){var r=$('\n                                <span class="'+o+'">\n                                '+d.slice(e,h[t+1]||d.length)+"\n                                </span>\n                            ")[0];p.before(r),n.splice(i+f++,0,r)}),p.remove(),n.splice(i,1),S+=h.length-1}for(var c=window.getComputedStyle,l=t?"height":"width",u=this.getNotations(),p=u.bothNotations,d=u.preNotations,h=u.sufNotations,f=new RegExp("[a-zA-Z\\d.]","g"),g=d+p,m=p,v=p+h,y="[\\u4e00-\\u9fa5]|([a-zA-z\\d"+d+"]*)",b="[\\u4e00-\\u9fa5]|([a-zA-z\\d"+h+"]*)",x=new RegExp("[^a-zA-Z\\d]?(["+g+"]("+y+")?)*["+m+"]+(("+b+")?["+v+"])*.?"+("|["+d+"]+.?")+"|[^a-zA-Z\\d]?(\\.+[a-zA-Z\\d])+"+("|[^a-zA-Z\\d]?["+h+"]+"),"g"),w=e[l](),k=w,S=0,I=0,T=0,E=r[T++],P=void 0,_=0,C=function(){var e=P[0],t=_=P.index;for(a(t);I>E;)k=w,E=r[T++];for(var i=e.length,o=0,u=0,p=[];I<t+i;){var d=c(n[S]);for(I+=n[S++].textContent.length;I>E;)k=w,E=r[T++],o=0,u=0;var h=parseFloat(d[l]);o+=h,u++,p.push(h)}k<o?($(n[S-u]).before("<br>"),k=w,p.forEach(function(e,t){var i=n[S-p.length+t];/enWord/.test(i.className)?s(i):k>=e?k-=e:k=w-e})):k-=o};P=x.exec(i);)C();_<i.length-1&&f.test(i.slice(_))&&a(i.length)}},{key:"orderText",value:function(e,t){if(2===e)t.reverse();else if(3===e){var n=t.length,o=[].concat(i(t));for(t.length=0;n--;)t.push(o.splice(Math.floor(Math.random()*n),1)[0])}}},{key:"stopAnimation",value:function(){if(this.isPlaying){this.infinity=!1,clearTimeout(this.preTimeout),clearTimeout(this.playDelayToIdx),clearInterval(this.interIdx),clearTimeout(this.playEndToIdx);var e=this.$parentNode,t=this.$textNode;if(e&&t&&e.first()){var n=e[0];n&&n.replaceChild(t[0],n.firstChild)}this.isPlaying=!1}}}]),e}();e.exports=u},function(e,t){"use strict";e.exports={0:[0,1,20,2,24,12,3,13,4,26,27,31],1:[6,5,8,9,23,29,30,21,22],2:[10,17,19,11,14,18,15,25,16,28,32]}},function(e,t,n){"use strict";function i(e){var t=e.id,n=e.type;return'<div style="width: 100%; height: 100%" class="element" id="ad'+t+'" ctype="'+n+'"></div>'}function o(e){var t=e.sceneId,n=e.pageNum,i=e.content,o=e.width,s=e.height,c="";return c="tpl"===i?"tpl":"true",'<iframe width="100%" height="100%" scrolling="no" frameborder="0" src="'+a(r.YQC)+"yqc/gg/gg.html?sceneId="+t+"&pageNum="+n+"&content="+c+"&width="+o+"&height="+s+'"></iframe>'}var r=n(24),a=n(26).url2https;e.exports={compDiv:i,iframeDiv:o}},function(e,t,n){e.exports=n.p+"images/phone-noAd-ad3571.svg"},function(e,t,n){"use strict";function i(){var e=a.nr(),t=u();return'\n    <div id="view_panel__feishu">\n        <div class="phone_panel">\n            <div class="p-index main phoneBox" id="con" style="display: none;">         \n                <div class="scene_title_baner">\n                    <h1 class="scene_title"></h1>\n                </div>\n                '+e+"\n            </div>\n            "+t+"\n        </div>\n    </div>"}function o(){var e=a.ppitest(),t=r(),n=p();return d(),"\n            "+e+'\n            <div id="view_panel">\n            '+t+"\n            "+n+'\n                <div id="support">\n                    <a target="_blank" href="http://www.eqxiu.com">\n                         <em class="eqf-eqxiulogoorgin"></em>\n                     </a>\n                </div>\n            </div>'}function r(){return'\n            <div id="code">\n                <div class="code_panel">\n                    <div class="code_panel_top">\n                        <div class="app">\n                            <a id="downApp" style="font-size:12px;">下载APP</a>\n                            <div id="downAppView" class="zoomIn-change">\n                                <h3><a id="close" style="cursor:pointer">X</a>易企秀APP</h3>\n                                <div id="downCode"></div>\n                                <p style="padding-bottom:20px;padding-top:10px;">一键生成H5，随时随地查数据</p>\n                            </div>\n                        </div>\n                        扫一扫，分享给朋友！\n                    </div>\n                    <div id="codeImg"/>\n                </div>\n   \n                <a class="btn_panel" target="_blank" href="'+c+'">\n                    <div rdt="3" btn loc="PC预览" cat="作品预览页" act="跳转商城" id="view_reg">这么漂亮的场景&nbsp;→\n                        <span>我也来制作</span>\n                    </div>\n                </a>\n            </div>\n            '}var a=n(61),s=n(24),c=s.STORE;c=s.STORE.replace("https://","http://");var l=n(60),u=l.pcCtrlBtnLandscape,p=l.phonePanel,d=l.changeStyle;e.exports={sidebarDiv:i,pcDiv:o}},function(e,t,n){"use strict";function i(){var e=c.nr();return'<div class="phone_panel">\n   \n    <div class="p-index main phoneBox" id="con" style="display: none;">\n        <div class="top"></div>\n        <div class="phone_menubar"></div>\n        <div class="scene_title_baner">\n            <h1 class="scene_title"></h1>\n        </div>\n        '+e+'\n        <div class="bottom"></div>\n    </div>\n</div>'}function o(){var e=c.nr(),t=c.ppitest();return"\n"+t+'\n<div class="p-index main iframe-phone" id="con" style="display: none; width: 320px; margin-right: 40px;">\n'+e+"\n\n</div>\n"}function r(e){var t="";if(e.property.orientation&&"landscape"===e.property.orientation.curr){var n=$(".nr").parent();n.addClass("iframe-phone__landscape--no-list"),n.removeAttr("style"),t="iframe_panel__landscape--no-list"}var i='<div class = "iframe_panel '+t+'" style="z-index:2;">\n        <div class="preview"><a id = "pre_page" type = "button" class = "scroll_btn"><span class="eqf-right" style="display: inline-block;transform: rotate(-90deg);font-size: 18px;"></span></a></div>\n        <div class="next"><a id = "next_page" type = "button" class = "scroll_btn"><span class="eqf-left" style="display: inline-block;transform: rotate(-90deg);font-size: 18px;"></span></a></div>\n    </div>';return i}function a(){return'<div class="iframe_panel2">\n                    <ul>\n                        <li id="pre_page">上一页</li>\n                        <li id="next_page">下一页</li>\n                    </ul>\n                </div>'}function s(e){var t=$(".nr").parent(),n="prelistmode_vertical",i="iframe_panel_prelistmode",o='<div class="previewlist"><ul class="previewlist_ul"></ul></div>';e.property.orientation&&"landscape"===e.property.orientation.curr&&(n="prelistmode_transverse",i+=" transverse_mode"),t.addClass(n),t.removeAttr("style"),t.append(o);var r='<div class = "'+i+'" style="z-index:2;">\n        <div class="preview_prelistmode"><a id = "pre_page" type = "button" class = "scroll_btn_prelistmode"><span class="text_span">上一页</span></a></div>\n        <div class="page-tip-prelistmode"><em class="prelistmode_pagenum"></em></div>\n        <div class="next_prelistmode"><a id = "next_page" type = "button" class = "scroll_btn_prelistmode"><span class="text_span">下一页</span></a></div>\n    </div>';return r}var c=n(61);e.exports={div:i,phoneDiv:o,ctrlBtnDiv:r,ctrlBtnDiv2:a,makeprelistdom:s}},function(e,t,n){"use strict";function i(){var e=o.nr(),t=o.ppitest();return"\n"+t+'\n<div class="p-index main" id="con" style="display: none;">\n'+e+"\n</div>\n"}var o=n(61);e.exports={div:i}},function(e,t,n){"use strict";function i(e){T()||r(e.meta,e.$ele),u(),l(e),a(e.meta,e.$ele),p(),d(e),h(e),w(e),o(e)}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.meta.name;m()||(t+="-易企秀"),e.meta&&e.meta.name&&(document.getElementsByTagName("title")[0].innerText=t)}function r(e,t){var n=e.property.userInfo;if(n&&n.show){var i=void 0;i=m()?t.parent()[0]:t[0],v.init("","",e),v.appendTo(i)}}function a(e,t){var n=b();if(n.nickname&&n.headimgurl){var i=e.ext.yqc;if(i&&i.hot_status){var o=void 0;o=m()?t.parent()[0]:t[0],y.init(i),y.appendTo(o)}}}function s(e){return x().then(function(){if(e.ext&&e.ext.yqc){var t=g();return t.initRenderAd(e.id,e.code)}return Promise.resolve()})}function c(e,t){return x().then(function(){if(!t.ext||!t.ext.yqc)return Promise.resolve();var n=g();n.addEventListener(e)})}function l(e){window.renderAd&&(e.renderAd=window.renderAd,delete window.renderAd,e.renderAd.renderAllAds(e))}function u(){function e(){document[n]?(t=window.app.bgm.soundAgent.$audio[0].paused,t||window.app.bgm&&window.EQX.pauseBgm()):setTimeout(function(){t||window.app.bgm&&window.EQX.startBgm()},100)}var t=!0,n="hidden"in document?"hidden":"webkitHidden"in document?"webkitHidden":"mozHidden"in document?"mozHidden":null;if(window.app.bgm&&(t=window.app.bgm.soundAgent.$audio[0].paused,n)){var i=n.replace(/hidden/i,"visibilitychange"),o=function(n){console.log("visibilityChange",t),e()};document.addEventListener(i,o)}}function p(){var e=window.location.href;e.indexOf("tg.eqxiu.com")>-1&&(window.onresize=function(){window.screen.width<450&&window.location.reload()})}function d(e){window.addEventListener("message",function(e){e&&e.data&&"h5"===e.data.product&&e.data.location&&window.devScene.pageScroll.asyncGoToPageByIndex(e.data.location-1)}),$("#pre_page").click(function(){e.pageScroll.goToPrePage()}),$("#next_page").click(function(){e.pageScroll.goToNextPage()})}function h(e){if(m()){var t=window.matchMedia("(orientation: landscape)"),i='<div id="landscapeTip" class="" style="display: none;" >\n    <div class="landscape-tip-layout">\n        <p style="font-size:14px;color:rgba(51,51,51,1);line-height:14px;">请开启锁屏后继续浏览</p>\n        <div class="landscape-tip-lock-icon"></div>\n    </div>\n</div>';t.addListener(function(t){var o=e.sceneJson.meta.property,r="";if(o&&o.orientation&&(r=o.orientation.curr),"landscape"===r)if(t.matches&&!S()){var a=n(88),s=n(90);$("#landscapeTip").length||($("body").append($(i)),$("#landscapeTip").css({backgroundImage:"url("+a+")",backgroundRepeat:"no-repeat",backgroundSize:"cover",width:"100%",zIndex:1e4,height:"100%",position:"absolute",top:0}),$(".landscape-tip-lock-icon").css({backgroundImage:"url("+s+")",backgroundRepeat:"no-repeat",backgroundSize:"cover",display:"inline-block",marginTop:24,width:32,height:32}),$(".landscape-tip-layout").css({position:"absolute",textAlign:"center",left:"50%",top:"50%",transform:"translate(-50%, -50%)"})),$("#landscapeTip").show(),$("#con").hide()}else $("#landscapeTip").hide(),$("#con").show()})}}var f=n(67),g=f.getAd,m=n(27).mobilecheck,v=n(139),y=n(144),b=n(69).getWeChatUser,x=n(67).renderBeanDou,w=n(148).makeprelist,k=n(84),S=k.hasInputMaskPage,I=n(40),T=I.hasMarketUserComp;e.exports={sceneLoadEndHook:i,renderAd:s,initAdEventListener:c}},function(e,t,n){"use strict";function i(e,t,n){y=e,b=t,r(n),a(),s(),v=!0}function o(e){m=e,m.appendChild(g)}function r(e){return g=document.createElement("div"),g.innerHTML=u,e&&e.property.orientation&&"landscape"===e.property.orientation.curr&&$(g).find(".user-info-wrapper").css({bottom:"20px",left:"60px",transform:"rotate(90deg) translate3d(0px, 0px, 0px)"}),g}function a(){var e=void 0;"editor"===y?(e=b?/^http/.test(b)?b:p.FILE+b:h,g.querySelector("img").src=e):d.getUserInfo().then(function(e){var t=void 0;t=e.headImg?/^http/.test(e.headImg)?e.headImg:p.FILE+e.headImg:h,g.querySelector("img").src=t})}function s(){f()&&g.addEventListener("click",function(){window.open(p.WAP_HOST+"wpmall/tiny/share/"+window.scene.userId)})}function c(e,t,n,r){v?g.style.display="block":(i(t,n,r),o(e))}function l(){g&&g.style&&(g.style.display="none")}n(140);var u=n(141),p=n(24),d=n(142),h=n(143),f=n(27).mobilecheck,g=void 0,m=void 0,v=void 0,y=void 0,b=void 0;e.exports={init:i,appendTo:o,show:c,hide:l}},function(e,t){},function(e,t){e.exports='<div class="user-info-wrapper"><img class="user-info-logo"><div class="user-info-follow-bg"></div><i class="eqf-plus-f user-info-follow"></i></div>'},function(e,t,n){"use strict";function i(){return c({url:s.SERVER_1+"eqs/s/get/userInfo",data:{userId:window.scene?window.scene.userId:window.devScene.meta.createUser}}).then(function(e){return e.obj||e.map})}function o(){return l({url:s.SERVER_0+"m/e/scene/get/user/member/info?memberIds=7,8,9,14,20,202,203,204,205"}).then(function(e){return e})}function r(){return l({url:s.SERVER_1+"eqs/s/serviceTime/get"}).then(function(e){return e})}function a(){return c({url:s.SERVER_1+"eqs/s/get/control/host"}).then(function(e){return e})}var s=n(24),c=n(23).$ajax,l=n(23).ajax;e.exports={getUserInfo:i,getUserMemberInfo:o,getCurrentTime:r,inducedDomain:a}},function(e,t,n){e.exports=n.p+"images/user-cb8f09.png"},function(e,t,n){"use strict";function i(e){f=e.hot_img,m=e.hot_text,g=e.hot_page,r(),a(),s(),h=!0}function o(e){d=e,d.appendChild(p)}function r(){return p=document.createElement("div"),p.innerHTML=u,p}function a(){f&&(p.querySelector("img").src=f),p.querySelector("span").innerText=m||"领取福利"}function s(){p.addEventListener("click",function(){window.location.href=g+"?worksId="+(window.scene.id||"")+"&code="+(window.scene.code||"")})}function c(e,t){h?p.style.display="block":(i(t),o(e))}function l(){p.style.display="none"}n(145);var u=n(146),p=void 0,d=void 0,h=void 0,f=void 0,g=void 0,m=void 0;e.exports={init:i,appendTo:o,show:c,hide:l}},function(e,t){},function(e,t,n){e.exports='<div class="gift-info-wrapper" rdt="3" cat="wap_growth" act="卡片h5_增长浮标"><img class="gift-info-logo gift-info-anim-wobble" src="'+n(147)+'"> <span class="gift-info-follow"></span></div>'},function(e,t,n){e.exports=n.p+"images/gift-icon-50b667.png"},function(e,t,n){"use strict";function i(e){if(window.top!==window&&location.href.indexOf("exemplarReview")>=0&&location.href.indexOf("prelistmode")>=0){var t=!0;e.meta.property.orientation&&"landscape"===e.meta.property.orientation.curr&&(t=!1),r(e,$(".previewlist_ul"),t),o($(".previewlist")[0],e,t)}}function o(e,t,n){var i=document.createElement("script");i.type="text/javascript",i.src="//lib.eqh5.com/iScroll/5.2.1/iscroll.min.js",i.onload=function(){var t={mouseWheel:!0,scrollbars:!0,interactiveScrollbars:!0,probeType:2,bounce:!1,disableMouse:!0,disableTouch:!0,preventDefault:!1,disablePointer:!0,wheelMoveStopPropagation:!0};if(IScroll){n||(t.scrollY=!1,t.scrollX=!0,t.mouseWheel=!1);var i=new IScroll(e,t);$(e).on("wheel",function(e){if(e.stopPropagation(),!n){e.preventDefault();var t=Math.abs(e.originalEvent.wheelDelta),o=i.x,r=i.maxScrollX;i.x>=0&&e.originalEvent.wheelDelta>0?i.scrollTo(0,0,100,IScroll.utils.ease.elastic):Math.abs(i.x)>=Math.abs(r)&&e.originalEvent.wheelDelta<0?i.scrollTo(r,0,100,IScroll.utils.ease.elastic):e.originalEvent.deltaX>0?i.scrollTo(o+e.originalEvent.wheelDeltaX,0,t,IScroll.utils.ease.elastic):i.scrollTo(o+e.originalEvent.wheelDelta,0,t,IScroll.utils.ease.elastic)}}),$(i.wrapper).find(".iScrollIndicator").on("click",function(e){e.stopPropagation()})}},document.getElementsByTagName("head")[0].appendChild(i)}function r(e,t,n){var i=e.eqxPageList.length,o=$(".iframe_panel_prelistmode").find(".prelistmode_pagenum"),r={width:132,height:200.5};!n&&i>0&&t.css("width",i*r.height+80+"px");for(var c=0;c<i;c++){var l=document.createElement("li");l.className="preview_list_item";var u=e.eqxPageList[c];if(u.pageJson.properties.thumbSrc){var p='width="'+r.width+'px" height="'+r.height+'px"';n||(p='width="'+r.height+'px" height="'+r.width+'px" style="margin-top:35px;margin-left:-78px;"'),$(l).html('<img src="'+(s.FILE+u.pageJson.properties.thumbSrc)+'" '+p+">"),t.append(l),a(e,c,i,o,l,u)}else{var d={"-webkit-transform":"scale(0.4)",position:"absolute",top:"-56px",left:"-36px"},h=JSON.parse(JSON.stringify(u.pageJson)),f=e.renderPageByPageJson(h);n||(d={"-webkit-transform":"scale(0.4)",position:"absolute",top:"-61px",left:"-2px"}),f.find(".layer").css(d),f.show(),$(l).append(f),t.append(l),a(e,c,i,o,l,u)}$(l).attr("preview_page_id",u.id)}o.html("1/"+i)}function a(e,t,n,i,o,r){o.addEventListener("click",function(o){e.currentPage.$section&&e.currentPage.$section.removeClass("z-current"),e.currentPage=t>0?e.eqxPageList[t-1]:e.eqxPageList[n-1],e.renderDependenciesPages(),e.currentPage.$section&&e.currentPage.$section.addClass("z-current"),e.pageScroll.goToPageById(r.id),i.html(t+1+"/"+n),o.stopPropagation(),o.preventDefault()},!0)}var s=n(24);e.exports={makeprelist:i}},function(e,t,n){"use strict";function i(e){var t=e.property.activityPageId;if(e.isPwd)var n=new Promise(function(t){e.property.orientation&&"landscape"===e.property.orientation.curr?new a(e.cover,$("#nr"),t):new r(e.cover,$("#nr"),t)});else n=s();var i=n.then(function(t){return t.normalPageIdList=t.list.map(function(e){return e.id})||[],t.meta=e,new u(t,[p]).start(),t}),g=c(t)["catch"](function(){return null}),v=[i,g];if(e.property.hasRedActivity&&y()){var b=m(e.id)["catch"](function(e){return null});v.push(b)}return Promise.all(v).then(function(e){var t=o(e,3),n=t[0],i=t[1],r=t[2];return i instanceof Object&&n.list.push(i),r&&(n.redpacketJson=r.map||{}),n}).then(function(e){return new l(e).addPageFn(d).addEleFn(h).start(),f(e)})}var o=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(c){o=!0,r=c}finally{try{!i&&s["return"]&&s["return"]()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=n(150).Guess,a=n(153).GuessLandScape,s=n(62).$getSceneData,c=n(56).$getActivityPage,l=n(154),u=n(155).ObjAdaptor,p=n(156).perfectScene,d=n(157).perfectPage,h=n(116).perfectComp,f=n(158).addEqAdInfo,g=n(164),m=g.$getRedPacketActivity,v=n(34),y=v.isRedEnvelopesSupportHost;e.exports={getPerfectSceneData:i,$getActivityPage:c}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(151);var r=n(152),a=n(36).parse,s=n(62).$getSceneData,c=n(27),l=c.mobilecheck,u=c.isAndroidPhone,p=c.tabletCheck,d=c.isPc,h=n(24),f=function(){function e(t,n,o){if(i(this,e),this.callBack=o,this.password="",t.startsWith("http")||(t=h.FILE+t),n.append(a(r,{cover:t})),$("#loading").hide(),$("#verifyCode").show(),d()||u()?($(".password-numbers>span").on("click",this.passwordEventListener.bind(this)),$("#btnClear").on("click",this.btnClearEventListener.bind(this)),$("#btnCancel").on("click",this.btnCancelEventListener.bind(this))):($(".password-numbers>span").on("touchstart",this.passwordEventListener.bind(this)),$("#btnClear").on("touchstart",this.btnClearEventListener.bind(this)),$("#btnCancel").on("touchstart",this.btnCancelEventListener.bind(this))),l()||p()){var s,c=$(".container"),f=c.width(),g=c.height();s=Math.floor(10*Math.min(document.documentElement.clientHeight/g,document.documentElement.clientWidth/f))/10,c.css("transform","scale("+s+", "+s+")")}}return o(e,[{key:"requestSceneDataWithPassword",value:function(e){var t=this;s(e).then(function(e){t.clearGuess(),t.callBack(e)})["catch"](function(){t.warnGuess()})}},{key:"animateVerifyTip",value:function(){var e=this;$("#verifyTip").addClass("shake").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("shake"),e.syncronizeTheIndicator()})}},{key:"syncronizeTheIndicator",value:function(){var e=this;$(".password-indicator li").each(function(t,n){t<e.password.length?$(n).addClass("active"):$(n).removeClass("active")})}},{key:"passwordEventListener",value:function(e){var t=$(e.target);t.addClass("active"),this.password+=t.text(),this.syncronizeTheIndicator(),4==this.password.length&&(this.requestSceneDataWithPassword(this.password),this.password=""),setTimeout(function(){t.removeClass("active")},100)}},{key:"btnClearEventListener",value:function(e){this.password="",this.syncronizeTheIndicator()}},{key:"btnCancelEventListener",value:function(e){this.password&&(this.password=this.password.substring(0,this.password.length-1),this.syncronizeTheIndicator())}},{key:"clearGuess",value:function(){$("#verifyCode").remove(),d()||u()?($(".password-numbers>span").off("click",this.passwordEventListener.bind(this)),$("#btnClear").off("click",this.btnClearEventListener.bind(this)),$("#btnCancel").off("click",this.btnCancelEventListener.bind(this))):($(".password-numbers>span").off("touchstart",this.passwordEventListener.bind(this)),$("#btnClear").off("touchstart",this.btnClearEventListener.bind(this)),$("#btnCancel").off("touchstart",this.btnCancelEventListener.bind(this)))}},{key:"warnGuess",value:function(){$("#verifyCode").show(),this.animateVerifyTip()}}]),e}();e.exports={Guess:f}},function(e,t){},function(e,t){e.exports='<div id="verifyCode" class="verifyCode"><div class="container"><div class="scene-cover"><img class="cover-img" src="#{cover}"></div><div class="scene-name">场景名称</div><div class="confirm-password"><div class="verify-label">请输入访问密码</div><div class="verify-tips" id="verifyTip"><ul class="password-indicator"><li></li><li></li><li></li><li></li></ul></div><div class="password-numbers"><span>1</span> <span>2</span> <span>3</span> <span>4</span> <span>5</span> <span>6</span> <span>7</span> <span>8</span> <span>9</span> <span>0</span></div><div class="password-operation"><span class="btn-clear" id="btnClear">清空</span> <span class="btn-cancel" id="btnCancel">取消</span></div></div></div></div>'},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(150).Guess,c=function(e){function t(e,n,r){i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r));return a.init(),a}return r(t,e),a(t,[{key:"init",value:function(){$("#verifyCode").css({transform:"rotate(0deg) translate3d(0px, 0px, 0px)"}),$("#verifyCode").find(".scene-cover").remove(),$("#verifyCode").find(".scene-name").remove(),$("#verifyCode").find(".container").css({transform:"rotate(90deg) translate3d(0px, 0px, 0px)",top:"65%"})}}]),t}(s);e.exports={GuessLandScape:c}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(155),a=r.ObjAdaptor,s=r.ListAdaptor,c=n(156).perfectScene,l=function(){function e(t){i(this,e),c(t),this.sceneJson={map:t.map,meta:t.meta,list:t.list},this.mapAdaptor=new a(t.map),this.metaAdaptor=new a(t.meta),this.pageAdaptor=new s(t.list),this.eleAdptorList=t.list.map(function(e){return e.elements||(e.elements=[]),new s(e.elements)})}return o(e,[{key:"addMapFn",value:function(e){return this.mapAdaptor.addFn(e),this}},{key:"addMetaFn",value:function(e){return this.metaAdaptor.addFn(e),this}},{key:"addPageFn",value:function(e){return this.pageAdaptor.addFn(e),this}},{key:"addEleFn",value:function(e){return this.eleAdptorList.forEach(function(t){return t.addFn(e)}),this}},{key:"start",value:function(){var e=this;this.mapAdaptor.start(this.sceneJson),this.metaAdaptor.start(this.sceneJson),this.pageAdaptor.start(this.sceneJson),this.eleAdptorList.forEach(function(t,n){return t.start(e.sceneJson,e.sceneJson.list[n])})}}]),e}();e.exports=l},function(e,t){"use strict";function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];o(this,e),this.fns=t}return r(e,[{key:"addFns",value:function(e){var t=this;return e.forEach(function(e){return t.addFn(e)}),this}},{key:"addFn",value:function(e){return this.fns.includes(e)||this.fns.push(e),this}},{key:"removeFn",value:function(e){var t=this.fns.indexOf(e);return t>-1&&this.fns.splice(t,1),this}},{key:"clearFns",value:function(){return this.fns.length=0,this}},{key:"start",value:function(){return this}}]),e}(),s=function(e){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];o(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i));return r.data=e,r}return i(t,e),r(t,[{key:"start",value:function(e){var t=this;return this.fns.forEach(function(n){return n.call(null,t.data,e)}),this}}]),t}(a),c=function(e){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];o(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i));return Array.isArray(e)||(_DEBUG_&&console.error("Invalid Array"),e=[]),r.list=e,r}return i(t,e),r(t,[{key:"start",value:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return this.fns.forEach(function(t){return e.list.forEach(function(e){return t.call.apply(t,[null,e].concat(n))})}),this}}]),t}(a);e.exports={ObjAdaptor:s,ListAdaptor:c}},function(e,t){"use strict";function n(e){return e.meta?e.obj=e.meta:e.obj=e.obj||{},e.meta=e.obj,e.map=e.map||{},e.list=e.list||[],e.list.forEach(function(e,t){e.num=t+1}),e}e.exports={perfectScene:n}},function(e,t,n){"use strict";function i(e,t){o(e),s(e,t),r(e,t),a(e),l(e),d(e.properties,"p",e)}function o(e){e.elements&&e.elements.forEach(function(e){e.css=e.css||{};var t=e.type;"3"==t?e.css.zIndex=-1:"q"==t&&(e.css.zIndex=0)})}function r(e){e.elements=e.elements.filter(function(e){var t=e.type;if("EqxShape"==h[t]){e.properties||(e.properties={});var n=e.properties,i=n.type,o=n.src;if(o)return!0;if(!i)return!1;if(i.includes("symbols"))return!0;var r=i.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()});return!!r}return!0})}function a(e){var t=e.properties,n=t.longPage;n&&n>1&&n<6&&(t.longPage=486*n)}function s(e,t){e.properties=e.properties||{},e.properties.triggerGroup=e.properties.triggerGroup||[],e.properties.pageScroll=e.properties.pageScroll||{},Array.isArray(e.properties.triggerGroup)||(e.properties.triggerGroup=[]),e.elements=e.elements||[],e.sceneId=t.meta.id,e.name=e.name||"第"+e.num+"页",e.elements.forEach(function(t){return t.pageId=e.id}),e.properties.pagefilter=e.properties.pagefilter||{disableAnimation:!0}}function c(e){var t=e+"Effect";f.includes(t)||f.push(t)}function l(e){var t=e.properties||{};if(t.image||t.scratch){c("scratch");var n=t.effect=Object.assign({name:"scratch"},t.image||t.scratch),i=n.percentage?n.percentage.value||n.percentage||.15:.15;return delete n.percentage,n.percentage=i,void(t.image?delete t.image:delete t.scratch)}if(t.finger)return c("finger"),t.effect=Object.assign({name:"finger"},t.finger),void delete t.finger;if(t.fallingObject)return c("fallingObject"),t.effect=Object.assign({name:"fallingObject"},t.fallingObject),void delete t.fallingObject;if(t.effect){var o=t.effect.name;c(o),"money"===o&&_DEBUG_&&(t.effect.seconds=2)}}var u=n(122),p=u.perfectLandScapePage,d=n(119),h=n(117).COMP_TYPE,f=[];e.exports={perfectPage:i,perfectJson:s,perfectLongPage:a,perfectTrigger:d,effectArr:f,perfectEffect:l,perfectLandScapePage:p}},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){$.setScene(t);var n={};return new Promise(function(i){return e?w(e).then(function(e){return m(t,e.obj)}).then(function(e){return s(e),i(e)}):(n=p(t),s(n),i(n))})}function r(e){$.setScene(e);var t=e.meta,n=t.id,o=t.property,r=o.lastPageId,u=o.eqAdType,h=t.bizType,v=t.isTemplate,b=(t.ext,e.list),S=b.length;return new Promise(function(t){function o(){return I().then(function(n){return T=p(e,n),c(T),b.push(T),t(e)})["catch"](function(){return T=p(e),c(T),b.push(T),t(e)})}var T=void 0;if(S&&(T=b[S-1],T.elements=T.elements||[]),!(k()||30!=h&&2!=v||u!=x["deepshare尾页"]&&(u!=x["技术支持尾页"]||r)))return I().then(function(e){return e}).then(function(n){return T=a(e,n),c(T),b.push(T),t(e)})["catch"](function(){return T=a(e),c(T),b.push(T),t(e)});switch(""+u){case x["无尾页无底标"]:var E=d(T);return l(T,E),t(e);case x["技术支持尾页"]:return r?w(r).then(function(t){return m(e,t.obj)}).then(function(n){return s(n),b.push(n),t(e)})["catch"](function(){return o()}):o();case x["技术支持底标"]:try{var E=d(T),P=$.bottomLabel({sceneId:n,pageId:T.pageId,top:E,pageIndex:S});return T.elements.push(P),l(T,E),t(e)}catch(_){return console.error("添加技术支持底标尾页失败",_),o()}case x["品牌联合底标"]:try{var C=Promise.resolve();return C=y(e)&&!T.properties.longPage?f(e):g(e),C.then(function(n){T.elements=[].concat(i(T.elements),i(n));var o=d(T);return c(T,void 0,o),t(e)})}catch(_){return console.error("添加品牌联合底标失败",_),o()}default:return o()}})}function a(e,t){var n=e.meta,i=n.id,o=n.cover,r=n.name,a=n.code,s=e.list.length+1;return $.lastPageBlur({id:i,name:r,num:s,cover:o,code:a,isDeepShare:!0},t)}function s(e,t){var n=e.pageId,i=e.sceneId,o=e.num,r=$.report({pageId:n,sceneId:i,pageIndex:o,center:t});r&&e.elements.push(r)}function c(e,t,n){var i=e.pageId,o=e.sceneId,r=e.num,a=e.properties,s=$.addReportBlur({pageId:i,sceneId:o,pageIndex:r,center:t,top:n,properties:a});s&&e.elements.push(s)}function l(e,t,n){var i=e.pageId,o=e.sceneId,r=e.num,a=e.properties,s=$.addReportTab({pageId:i,sceneId:o,pageIndex:r,properties:a,top:t,center:n});s&&e.elements.push(s)}function u(e){var t=e.sceneId,n=e.url;return b.SERVER_1+"eqs/link?id="+t+"&url="+encodeURIComponent(n)}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.meta,i=n.id,o=n.cover,r=n.name,a=e.list.length+1;return $.lastPageBlur({id:i,name:r,num:a,cover:o},t)}function d(e){var t=(e.properties||{}).longPage||1;return t<10?486*(t-1):t-486}function h(e,t,n){var i=d(e),o=$.bottomLabel({
sceneId:t,pageId:e.pageId,top:i,pageIndex:n});return o}function f(e){var t=e.meta,n=t.id,i=t.property.bottomLabel,o=i.id,r=i.name,a=i.url,s=i.color,c=i.type;if(!o)throw new Error("No bottomLabel's id");var l=e.list,u=l[l.length-1],p=d(u),h=u.pageId,f=E[c]||[];return Promise.resolve(f.map(function(e){var t=v({ele:e,sceneId:n,pageId:h,url:a,top:p,name:r});return"bg"===t.properties.type&&s&&(t.css.backgroundColor=""+s),t}))}function g(e){var t=e.meta,n=t.id,i=t.property.bottomLabel,o=i.id,r=i.name,a=i.url;if(!o)throw new Error("No bottomLabel's id");var s=e.list,c=s[s.length-1],l=d(c),u=c.pageId;return w(o).then(function(e){return(e.obj.elements||[]).map(function(e){return v({ele:e,sceneId:n,pageId:u,url:a,top:l,name:r})})},function(){return[]})}function m(e,t){var n=e.list,o=e.meta,r=o.cover,a=o.id,s=o.name;t.properties=t.properties||{},t.sceneId=a;var c=function(e){var t=e.properties.src;return 4==e.type&&!!t&&["group1/M00/A5/5E/yq0KA1QmePmAKr7yAAEByp5jyLc752.jpg","group1/M00/C5/9D/yq0KA1SH1zuAFgkLAAAFgBR8hJs456.png","group1/M00/C5/3F/yq0KA1SHp-2AQZZZAAB-7rIaK6I743.png","group1/M00/C5/9D/yq0KA1SH1zuAeQuFAAAFfUkeXDc110.png"].includes(t)},l=function(t){2==t.type&&(/http:\/\/service.eqxiu.com\/eqs\/link/.test(t.content)&&(t.content=t.content.replace(/;url=.*com"/,";url="+encodeURIComponent(S))),e.meta.property&&e.meta.property.orientation&&"landscape"===e.meta.property.orientation.curr&&(t.css.top=240,t.css.width=164,t.css.left=-34,t.css.transform="rotate(90deg)"))};if(t.elements=t.elements.filter(function(e){return!c(e)}),t.elements.forEach(l),"group1/M00/61/8A/yq0KA1T2vYSAEgo7AACovQVgHxk048.jpg"!==r){var u=$.image1();u.properties.src=r}else u=$.eqxLogo();return t.elements=[].concat(i(t.elements),[$.shadow(),u,$.line(),$.title(s)]),t.num=n.length+1,t}function v(e){var t=e.ele,n=e.sceneId,i=(e.pageId,e.url),o=e.top,r=e.name;t.sceneId=n,t.pageId=129811;var a="EQXIU.COM科技公司",s=t.type;return 2==s&&(r&&i&&"http://"!==i&&(t.content=t.content.replace(new RegExp(a),'<a href="'+u({sceneId:n,url:i})+'" target=_blank data-event="1120203">'+r+"</a>")),r=r||a,t.content=t.content.replace(new RegExp(a),r)),t.css.top+=o,t.css.zIndex=200,t}function y(e){return e&&e.meta&&e.meta.property&&e.meta.property.orientation&&"landscape"===e.meta.property.orientation.curr}var b=n(24),x=n(65).AD_TYPE,w=n(56).$getPageInfo,k=n(27).isApp,S=n(26).redirectUrl(),I=n(55).getLastPageConfig,T=n(159),$=new T(window.scene),E=n(163);e.exports={addEqAdInfo:r,getLastPage:o,getDefaultBottom:h,getCustomBottomLabel:g,getCustomBottomLabelLandscape:f,getTop:d}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(24),a=n(26).redirectUrl(),s="易企秀技术支持",c=n(27).isApp,l=n(25).$loadJWeixin,u=n(27),p=u.isWeChatMiniProgram,d=u.isFeiShu,h=n(62).randomId,f=n(160),g=n(161),m=n(58),v=m.getPlatform,y=m.isAdScene,b=n(28),x=b.isMiniWebViewLoad;n(162);var w=function(){function e(t){i(this,e),this.scene=t||window.scene,this.platform=v()}return o(e,[{key:"setScene",value:function(e){this.scene=e||window.scene}},{key:"isLandScape",value:function(){return this.scene&&this.scene.meta&&this.scene.meta.property&&this.scene.meta.property.orientation&&"landscape"===this.scene.meta.property.orientation.curr}},{key:"bottomLabel",value:function(e){var t=e.sceneId,n=void 0===t?16060:t,i=e.pageId,o=e.top,r=e.pageIndex,c=a,l='\n    <div style="text-align: center;transform: translateY(-2px);-webkit-animation: fadeIn 2s ease 1s both;-webkit-animation-play-state: initial;">\n        <a data-not-limit="true" href="'+c+'" target="_blank"\n        style="font-size: 12px;display:block;line-height: 10px;">\n            <font color="#ffffff">'+s+"</font>\n        </a>\n    </div>",u={zIndex:"1000",height:"20",width:"129",left:"97px",fontSize:"12px",top:362+o+"px",backgroundColor:"rgba(0,0,0,0.5)",borderBottomLeftRadius:20,borderBottomRightRadius:20,borderTopRightRadius:20,borderTopLeftRadius:20,borderRadius:20};return this.isLandScape()&&(u.top=230,u.left=-35,u.transform="rotate(90deg) translate3d(0px, 0px, 0px)"),{id:h(),pageId:i,sceneId:n,num:r,type:2,content:l,status:1,css:u,properties:{anim:{type:0,direction:0,duration:2,delay:0}}}}},{key:"report",value:function(e){var t=e.pageId,n=void 0===t?1:t,i=e.sceneId,o=void 0===i?1:i,r=e.pageIndex,a=void 0===r?1:r,s=e.center,c='\n    <div style="text-align: right;">\n        <span style="line-height: 1; background-color: initial;">\n            <font size="2" color="#888888"><b>举报</b></font>\n        </span>\n    </div>',l={zIndex:999,height:36,width:60,left:s?130:10,top:420};return this.isLandScape()&&(l.top=12,l.left=8,l.transform="rotate(90deg) translate3d(0px, 0px, 0px)"),{id:h(),pageId:n,sceneId:o,num:a,type:299,content:c,status:1,css:l,properties:{anim:{type:0,direction:0,duration:3,delay:1}}}}},{key:"image1",value:function(){var e={borderRadius:"0",borderStyle:"solid",height:"158",zIndex:"1000",borderColor:"rgba(0,0,0,1)",boxShadow:"0 0px 0px #333333",color:"#000000",backgroundColor:"white",borderWidth:"0px",width:"158",left:"84px",paddingTop:"11px",paddingLeft:"10px",top:"170px"};return this.isLandScape()&&(e.top=172,e.left=90,e.transform="rotate(90deg) translate3d(0px, 0px, 0px)"),{id:h(),pageId:"",sceneId:"",num:1,type:"4",isInput:0,title:null,content:null,status:1,css:e,properties:{height:"100px",imgStyle:{width:139,height:136,marginTop:"0px",marginLeft:"0px"},width:"100px",src:"group1/M00/01/30/yq0JCFQpOR-AOULFAAFBPO1yzBQ984.jpg"}}}},{key:"image2",value:function(){var e={height:"257",width:"257",left:"78px",top:"175px"};return this.isLandScape()&&(e.top=172,e.left=154,e.transform="rotate(90deg) translate3d(0px, 0px, 0px)"),{id:h(),pageId:129810,sceneId:16060,num:1,type:2,isInput:0,title:null,content:'\n    <div class="logo-shadow1" style="text-align: center; \n        cursor:pointer;height:127px;width:220px;transform:rotate(-45deg);-webkit-transform:rotate(-45deg);\n        position:absolute;left:20px;top:56px;">\n    </div>',status:1,css:e,properties:{}}}},{key:"eqxLogo",value:function(){return{id:h(),pageId:129810,sceneId:16060,num:1,type:"2",isInput:0,title:null,content:'\n    <div class="bottom-logo" style="text-align: center;cursor:pointer;height:136px;width:139px;">\n        <em style="color:white;line-height:136px;font-size:120px;" class="eqf-eqxiu"></em>\n    </div>',status:1,css:{height:"158",width:"158",left:"84px",top:"170px",backgroundColor:"white"},properties:{}}}},{key:"title",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"点击此处进行编辑",t={zIndex:"102",height:"65",width:"320",left:"0px",top:"70px"};return this.isLandScape()&&(t.top=216,t.left=130,t.transform="rotate(90deg) translate3d(0px, 0px, 0px)"),{id:h(),pageId:"",sceneId:"",num:1,type:"2",isInput:0,title:null,content:'<div style="text-align: center;"><font color="#ffffff" size="3">'+e+"</font></div>",status:1,css:t,properties:{}}}},{key:"line",value:function(){var e='<div style="width:280px;height:1px;background-color:rgba(60,60,60,0.4);cursor:pointer;position:absolute;left:0;-webkit-filter:drop-shadow(0px 1px 0px rgba(60,60,60,0.4));top:12px;"></div>',t={height:"24",width:"280",left:"21px",top:"122px"};return this.isLandScape()&&(t.top=235,t.left=130,t.transform="rotate(90deg) translate3d(0px, 0px, 0px)"),{id:h(),pageId:129810,sceneId:16060,num:1,type:"2",isInput:0,title:null,content:e,status:1,css:t,properties:{}}}},{key:"shadow",value:function(){var e='<div class="logo-shadow1" style="text-align: center;cursor:pointer;height:127px;width:220px;transform:rotate(-45deg);-webkit-transform:rotate(-45deg);position:absolute;left:20px;top:56px;"></div>';return{id:h(),pageId:129810,sceneId:16060,num:1,type:"2",isInput:0,title:null,content:e,status:1,css:{height:257,width:257,left:"78px",top:"175px"},properties:{}}}},{key:"lastPage",value:function(e,t,n){var i=e.id,o=void 0===i?16060:i,s=e.name,l=e.num,u=e.cover,p=void 0===u?"group1/M00/BA/DA/yq0KA1Rq8COAAYRjAAKU4OVYum0889.jpg":u,d=(e.code,e.isDeepShare),f=e.href;s=s||"",t=t||{};var g=129810,m=o;f||(f=a),t&&!t.brandSrc&&t.brandLink&&(f=t.brandLink);var v="",y='<div style="text-align: center;">\n                            <span style="line-height: 1; background-color: initial;">\n                                <font size="4" color="#888888"><b>'+(t.sceneName||s)+"</b></font>\n                            </span>\n                        </div>",b='<div style="width:280px;\n                                    height:1px;\n                                    background-color:rgba(60,60,60,0.4);\n                                    cursor:pointer;\n                                    position:absolute;\n                                    left:0;\n                                    -webkit-filter:drop-shadow(0px 1px 0px rgba(60,60,60,0.4));\n                                    top:12px;"></div>',x='<div style="text-align: center;padding-top: 0;">\n                            <span style="font-size: small; line-height: 1; background-color: initial;">\n                                <a data-not-limit="true" href="'+f+'" target="_blank">\n                                    <font color="#888888">'+v+"</font>\n                                </a>\n                            </span>\n                        </div>",w='<a class="element comp_anchor editable-text deepShareHref" \n                        data-event="1120601"\n                        style="cursor: default; \n                                width: 100px; \n                                height: 36px; \n                                display: block;\n                                background: #08c3fd; \n                                color:#ffffff;\n                                font-size:13px;\n                                border-radius: 4px;">使用该模板</a>',k={id:"",sceneId:m,num:l,name:s,properties:{},elements:[]},S={id:h(),pageId:g,sceneId:m,num:0,type:"3",css:{},properties:{}};t.backgroundSrc?S.properties.imgSrc=t.backgroundSrc:S.properties.bgColor="#E6E9EE",k.elements.push(S);var I={id:h(),pageId:g,sceneId:m,num:1,type:"2",content:y,css:{height:"65",zIndex:"10",width:"320",left:"0px",top:"77px"},properties:{}};k.elements.push(I);var T={id:h(),pageId:g,sceneId:m,num:2,type:"4",isInput:0,title:null,content:null,status:1,css:{borderBottomLeftRadius:10,borderBottomRightRadius:10,borderTopRightRadius:10,borderTopLeftRadius:10,borderRadius:10,borderStyle:"solid",zIndex:"9",borderColor:"rgba(0,0,0,1)",paddingTop:"0px",height:"88",backgroundColor:"",color:"",boxShadow:"0px 0px 0px #333333",borderWidth:"0px",width:"88",left:"116px",paddingBottom:"0px",top:"177px"},properties:{height:"100px",imgStyle:{width:88,height:88,marginTop:"-0.5px",marginLeft:"0px"},width:"100px",src:p}};t.logoSrc&&(T.properties.src=t.logoSrc),t.logoLink&&(T.properties.url=t.logoLink),k.elements.push(T);var $={id:h(),pageId:129810,sceneId:m,num:1,type:"2",content:b,css:{height:"24",width:"280",left:"21px",top:"122px"},properties:{}};k.elements.push($);var E={id:h(),pageId:g,sceneId:m,num:1,type:d&&!c()?"298":"2",content:d?w:"",css:{height:"36",width:"120",left:"98px",top:"350px",zIndex:"13"},properties:{}};if(k.elements.push(E),t.brandSrc){var P='<a style="position: absolute;\n                                display: block;\n                                width: 100%;\n                                height: 100%;\n                                background-image: url('+(r.FILE+t.brandSrc)+');    \n                                background-repeat: no-repeat;\n                                background-position: center;\n                                background-size: cover;" \n                                data-not-limit="true" \n                            href="'+t.brandLink+'"\n                            target="_blank"></a>',_={height:"40px",width:"320px",left:"0",top:"420px",zIndex:"13"};this.isLandScape()&&(_.left=-90,_.top=220,_.transform="rotate(90deg) translate3d(0px, 0px, 0px)");var C={id:h(),pageId:g,sceneId:m,num:2,type:"7",content:P,css:_,properties:{}};k.elements.push(C)}else{var A={borderRadius:"0px",borderStyle:"solid",height:"30",paddingTop:"0px",borderColor:"rgba(222,220,227,1)",zIndex:"12",boxShadow:"0px 0px 0px rgba(200,200,200,0.6)",color:"",backgroundColor:"rgba(255,255,255,0)",borderWidth:"0px",width:"320",left:"1px",bottom:"36px",paddingBottom:"20px"};this.isLandScape()&&(A.left=-90,A.top=220,A.transform="rotate(90deg) translate3d(0px, 0px, 0px)");var O={id:439885,pageId:g,sceneId:m,num:1,type:d&&!c()?"298":"2",content:x,css:A,properties:{anim:[{type:1,direction:3,duration:"1",delay:"0.6"}]}};k.elements.push(O)}return k}},{key:"bizType40Page",value:function(){return{id:849219621,sceneId:87910723,num:1,name:null,properties:{},elements:[{css:{top:-132,left:-270,width:873,height:692,zIndex:1,color:"#676767",backgroundColor:"",opacity:1,transform:"rotateZ(0deg)",textAlign:"left",borderWidth:0,borderStyle:"solid",borderColor:"rgba(0,0,0,1)",borderRadius:0,borderRadiusPerc:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,borderTopRightRadius:0,borderTopLeftRadius:0,paddingBottom:0,paddingTop:0,boxShadow:"0px 0px 0px rgba(0,0,0,0.5)",boxShadowDirection:0,boxShadowSize:0},properties:{src:"Fl5L4C5JXbrlNDUm1TlMi6rZP7SA",imgStyle:{width:873,height:1376.3390625,marginTop:-342.16953125,marginLeft:0},maskSrc:"",originSrc:"Fl5L4C5JXbrlNDUm1TlMi6rZP7SA",anim:[],initType:0},type:4,id:4791539496,pageId:849219621,sceneId:87910723,num:1,name:"图片1"},{css:{top:-197.5,left:-118,width:579.5,height:388,zIndex:2,color:"#676767",backgroundColor:"",opacity:1,transform:"rotateZ(0deg)",textAlign:"left",borderWidth:0,borderStyle:"solid",borderColor:"rgba(0,0,0,1)",borderRadius:0,borderRadiusPerc:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,borderTopRightRadius:0,borderTopLeftRadius:0,paddingBottom:0,paddingTop:0,boxShadow:"0px 0px 0px rgba(0,0,0,0.5)",boxShadowDirection:0,boxShadowSize:0},properties:{src:"Fie_7zLKX1jFwnowjnupl0uxuRzf",imgStyle:{width:579.5,height:388,marginLeft:0,marginTop:0},maskSrc:"",originSrc:"Fie_7zLKX1jFwnowjnupl0uxuRzf",anim:[{type:0,direction:0,duration:1,delay:0,countNum:1,interval:0,count:0,$show:!0,$$hashKey:"object:1200"}],initType:0},type:4,id:2648920976,pageId:849219621,sceneId:87910723,num:2,name:"图片2"},{css:{top:283.5,left:78,width:165,height:50.5,zIndex:5,color:"#676767",backgroundColor:"",opacity:1,transform:"rotateZ(0deg)",textAlign:"left",borderWidth:0,borderStyle:"solid",borderColor:"rgba(0,0,0,1)",borderRadius:0,borderRadiusPerc:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,borderTopRightRadius:0,borderTopLeftRadius:0,paddingBottom:0,paddingTop:0,boxShadow:"0px 0px 0px rgba(0,0,0,0.5)",boxShadowDirection:0,boxShadowSize:0},properties:{src:"FszOmxnRNeOR4QbwDnYQHGP4uF4G",imgStyle:{width:165,height:50.5,marginLeft:0,marginTop:0},maskSrc:"",originSrc:"FszOmxnRNeOR4QbwDnYQHGP4uF4G",anim:[{type:24,direction:0,duration:1,delay:.2,countNum:1,interval:0,count:0,$show:!0,$$hashKey:"object:1336"}],initType:0},type:4,id:6696803295,pageId:849219621,sceneId:87910723,num:5,name:"图片4"},{css:{top:118.5,left:86,width:148,height:148,zIndex:4,color:"#676767",backgroundColor:"",opacity:1,transform:"rotateZ(0deg)",textAlign:"left",borderWidth:0,borderStyle:"solid",borderColor:"rgba(0,0,0,1)",borderRadius:0,borderRadiusPerc:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,borderTopRightRadius:0,borderTopLeftRadius:0,paddingBottom:0,paddingTop:0,boxShadow:"0px 0px 0px rgba(0,0,0,0.5)",boxShadowDirection:0,boxShadowSize:0},properties:{src:"FvqrpftukXbdDhFScUbzUuFZEIkz",imgStyle:{width:148,height:148,marginLeft:0,marginTop:0},maskSrc:"",originSrc:"FvqrpftukXbdDhFScUbzUuFZEIkz",anim:[{type:4,direction:0,duration:1,delay:0,countNum:1,interval:0,count:0,$show:!0,$$hashKey:"object:1268"}],initType:0},type:4,id:8888432263,pageId:849219621,sceneId:87910723,num:4,name:"图片5"}],price:null,isPaid:null,forms:null}}},{key:"lastPageBlur",value:function(e,t){var n=e.id,i=void 0===n?16060:n,o=e.name,s=e.num,u=e.cover,g=void 0===u?"group1/M00/BA/DA/yq0KA1Rq8COAAYRjAAKU4OVYum0889.jpg":u,m=(e.code,e.isDeepShare),v=e.href;o=o||"",t=t||{};var b=129810,w=i;v||(v=a),t&&!t.brandSrc&&t.brandLink&&(v=t.brandLink);var k='<div style="text-align: center;">\n                            <span style="line-height: 1.5; background-color: initial;text-shadow: 0px 0px 4px rgba(0, 0, 0, 0.6) !important;color:#FFFFFF">\n                                '+(t.sceneName||o)+"\n                            </span>\n                        </div>",S={id:"",sceneId:w,num:s,name:o,properties:{},elements:[]},I={id:h(),pageId:b,sceneId:w,num:0,type:"3",css:{left:0,opacity:.7,top:0,zIndex:-1,filter:"blur(6px)"},properties:{imgSrc:window.scene?window.scene.cover:"tencent/1622511810645-8c2lcdswuuh.png",originSrc:window.scene?window.scene.cover:"tencent/1622511810645-8c2lcdswuuh.png"}},T={content:"",css:{color:"#555",height:"700px",left:-27,top:-107,width:374,zIndex:1},id:h(),num:1,pageId:b,sceneId:w,type:"h",properties:{anim:[],id:144877595,initType:1,items:[{element:[0],fill:"rgba(0,0,0,0.6)",svgFill:"#08A1EF"}],src:"group1/M00/B1/A3/yq0KXFZysi-ACYaKAAACDQH4Nes625.svg",translate3dZ:0,type:"rect"}};t.backgroundSrc?(I.properties.imgSrc=t.backgroundSrc,I.css={left:0,opacity:.7,top:0,zIndex:-1}):S.elements.push(T),S.elements.push(I);var $={height:"65px",zIndex:"10",width:"320px",left:"0px",top:"150px",fontSize:"14px",lineHeihgt:1.5};this.isLandScape()&&($.left=-49,$.top=150,$.transform="rotate(90deg) translate3d(0px, 0px, 0px)");var E={id:h(),pageId:b,sceneId:w,num:2,type:"2",content:k,css:$,properties:{}};S.elements.push(E);var P=null,_=t.logoLink,C=t.logoSrc,A={borderBottomLeftRadius:10,borderBottomRightRadius:10,borderTopRightRadius:10,borderTopLeftRadius:10,borderRadius:10,borderStyle:"solid",zIndex:"9",borderColor:"rgba(0,0,0,1)",paddingTop:"0px",height:"88",backgroundColor:"",color:"",boxShadow:"0px 0px 0px #333333",borderWidth:"0px",width:"88px",left:"116px",paddingBottom:"0px",top:"47px"};this.isLandScape()&&(A.left=154,A.top=172,A.transform="rotate(90deg) translate3d(0px, 0px, 0px)");var O={id:h(),pageId:b,sceneId:w,num:3,type:"4",isInput:0,title:null,content:null,status:1,css:A,properties:{height:"100px",imgStyle:{width:88,height:88,marginTop:"-0.5px",marginLeft:"0px"},width:"100px",src:g}};if(_&&p()){var q=t.logoLink.indexOf("page/"),L="";if(q!==-1){C=r.FILE+C+"?imageMogr2/auto-orient/thumbnail/620x92>",_="/"+_.substr(q),L={evtType:"jump",evtInfo:{type:"switchTab",url:""+_}},L=JSON.stringify(L);var M="";M=x()?'href="'+_+'" data-mini-naviagte="true" ':"onclick= 'window.parent.postMessage("+L+', "*");\' ',P='<a style="position: absolute;\n                    display: block;\n                    width: 88px;\n                    height: 88px;\n                    margin-left: 0px;\n                    margin-top: -0.5px;\n                    background-image: url('+C+');\n                    background-repeat: no-repeat;\n                    background-position: center;\n                    background-size: cover;\n                    border-bottom-left-radius: 10px;\n                    border-bottom-right-radius: 10px;\n                    border-top-right-radius: 10px;\n                    border-top-left-radius: 10px;\n                    border-radius: 10px;\n                    border-style: solid;\n                    z-index: 9;\n                    border-color: rgba(0,0,0,1);\n                    padding-top: 0px;\n                    box-shadow: 0px 0px 0px #333333;\n                    border-width: 0px;\n                    left: 116px;\n                    padding-bottom: 0px;\n                    top: 47px;" \n                    '+M+' \n                    target="_blank"></a>',O={id:h(),pageId:b,sceneId:w,num:5,type:"2",content:P,properties:{}}}}if(!P&&C&&(O.properties.src=C),!P&&_&&(O.properties.url=_),S.elements.push(O),(!c()||p())&&!d())if(t.brandSrc){var R=r.FILE+t.brandSrc+"?imageMogr2/auto-orient/thumbnail/620x92>",j="",F="",B=t.brandLink,D=B.indexOf("page/");p()&&D!==-1?(l(),B="/"+B.substr(D),x()?j='href="'+B+'" data-mini-naviagte="true" ':(F={evtType:"jump",evtInfo:{type:"switchTab",url:""+B}},F=JSON.stringify(F),j="onclick = 'window.parent.postMessage("+F+', "*");\' ')):j='href="'+B+'" data-not-limit="true" ';var J=void 0,N=void 0,z=void 0;t.stationAd&&(z='bd_attr= "cat=尾页广告&act='+t.stationAd+'"'),y()?(J='<a style="position: absolute;\n                    display: block;\n                    width: 310px;\n                    height: 100%;\n                    left: 0px;\n                    right: 0px;\n                    margin: 0 auto;\n                    z-index:13;\n                    background-image: url('+R+');\n                    background-repeat: no-repeat;\n                    background-position: center;\n                    background-size: cover;" \n                    '+j+'\n                    data-go-straight="1"\n                    ></a>',N={height:"46px",width:"320px",left:"0px",bottom:"92px",zIndex:"13"}):(J='<a style="position: absolute;\n                    display: block;\n                    width: 232px;\n                    height: 100%;\n                    left: 0px;\n                    right: 0px;\n                    margin: 0 auto;\n                    z-index:13;\n                    background-image: url('+R+');\n                    background-repeat: no-repeat;\n                    background-position: center;\n                    background-size: cover;"\n                    bigdata_view="0" \n                    '+z+"\n                    "+j+'\n                    data-go-straight="1"\n                    ></a>',N={height:"64px",width:"320px",left:"0px",bottom:"115px",zIndex:"13"}),this.isLandScape()&&(N.left=-90,N.top=220,N.transform="rotate(90deg) translate3d(0px, 0px, 0px)");var W={id:h(),pageId:b,sceneId:w,num:5,type:"2",content:J,css:N,properties:{isBrand:!0}};S.elements.push(W)}else{var H='<a style="position: absolute;\n                    display: block;\n                    width: 310px;\n                    height: 100%;\n                    left: 0px;\n                    right: 0px;\n                    margin: 0 auto;\n                    z-index:13;\n                    background-image: url('+f+');\n                    background-repeat: no-repeat;\n                    background-position: center;\n                    background-size: cover;" \n                    href="'+v+'"\n                    data-go-straight="1"\n                    target="_blank"></a>',Y={height:"46px",width:"320px",left:"0px",bottom:"92px",zIndex:"13",top:"364px",paddingBottom:"20px"};this.isLandScape()&&(Y.left=-90,Y.top=220,Y.transform="rotate(90deg) translate3d(0px, 0px, 0px)");var U={id:h(),pageId:b,sceneId:w,num:5,type:m&&!c()?"298":"2",content:H,css:Y,properties:{}};S.elements.push(U)}var X="",G="",Q=void 0,V=window._lastLogo;V&&884==V.mediaId&&(X=V.picSrc,G=V.linkUrl,Q=V.mediaId);var K={height:20,left:160,bottom:10,width:192,transform:"translate(-50%, -50%)"};this.isLandScape()&&(K.left=-77,K.top=231,K.transform="rotate(90deg) translate3d(0px, 0px, 0px)");var Z={css:K,id:h(),num:6,pageId:b,sceneId:w,properties:{anim:[],id:144899161,initType:1,items:[{elements:[0],fill:"rgba(255, 255, 255, 0.6)",svgFill:"#08A1EF"},{elements:[1],fill:"rgba(0, 0, 0, 0.4)",svgFill:"#08A1EF"}],isLogo:!0,src:X,translate3dZ:0,type:"4",stationAd:Q},type:"4",straightUrl:G};return S.elements.push(Z),S}},{key:"addReportBlur",value:function(e){var t=e.pageId,n=void 0===t?1:t,i=e.sceneId,o=void 0===i?1:i,r=e.pageIndex,a=void 0===r?1:r,s=e.center,c=e.top,l=e.properties,u='\n            <div style="text-align: center;width: 56px;height: 24px;padding-left: 14px;font-size: 12px;color: #ffffff;line-height: 24px;border-radius: 12px;background-image: url('+g+');background-repeat: no-repeat;background-size: 22%;background-position: 9px;background-color: rgba(0, 0, 0, .3)">\n                    举报\n            </div>',p={zIndex:999,height:41,width:74,left:s?130:1,top:c?c+0:10};return this.isLandScape()&&(p.top=12,p.left=258,p.transform="rotate(90deg) translate3d(0px, 0px, 0px)"),{id:h(),pageId:n,sceneId:o,num:a,pageProperties:l,type:299,content:u,status:1,css:p,properties:{anim:{type:0,direction:0,duration:3,delay:1}}}}},{key:"addReportTab",value:function(e){var t=e.pageId,n=void 0===t?1:t,i=e.sceneId,o=void 0===i?1:i,r=e.pageIndex,a=void 0===r?1:r,s=e.properties,c=e.top,l=e.center,u='<div style="text-align: center;width: 56px;height: 24px;padding-left: 14px;font-size: 12px;color: #ffffff;line-height: 24px;border-radius: 12px;background-image: url('+g+');background-repeat: no-repeat;background-size: 22%;background-position: 9px;background-color: rgba(0, 0, 0, .3)">\n                    举报\n            </div>',p={zIndex:999,height:32,width:72,left:l?130:-3,top:446+c};return this.isLandScape()&&(p.top=12,p.left=8,p.transform="rotate(90deg) translate3d(0px, 0px, 0px)"),{id:h(),pageId:n,sceneId:o,num:a,pageProperties:s,type:299,content:u,status:1,css:p,properties:{anim:{type:0,direction:0,duration:3,delay:1}}}}}]),e}();e.exports=w},function(e,t,n){e.exports=n.p+"images/tailBtn-fb83ca.gif"},function(e,t,n){e.exports=n.p+"images/alert-l-3cc5a6.png"},function(e,t){},function(e,t){"use strict";e.exports={vert:[{content:"",css:{top:222,left:-280,zIndex:1,width:600,height:56,backgroundColor:"",opacity:1,color:"#676767",borderWidth:0,borderStyle:"solid",borderColor:"rgba(0,0,0,1)",paddingBottom:0,paddingTop:0,lineHeight:1,borderRadius:0,transform:"rotate(90deg) translate3d(0px, 0px, 0px)",borderRadiusPerc:0,boxShadow:"0px 0px 0px rgba(0,0,0,0.5)",boxShadowDirection:0,boxShadowSize:0,content:"",textAlign:"left",letterSpacing:"0",borderBottomRightRadius:0,borderBottomLeftRadius:0,borderTopRightRadius:0,borderTopLeftRadius:0},id:102,num:1,pageId:38144107,properties:{type:"bg",width:600,height:56,src:"o_1ajintkvpgdd1rmc1c2c1pfkgco9.png",imgStyle:{width:600,height:600,marginTop:-474.5,marginLeft:0},anim:[{type:1,direction:3,duration:2,delay:0,countNum:1}],id:295349204},sceneId:1311,type:4,name:"图片1",isEditable:1},{content:'<div style="text-align: center;"><span style="color: inherit; line-height: inherit; font-size: 12px; background-color: initial;">EQXIU.COM科技公司</span></div>',css:{top:222,left:-124,zIndex:2,width:319,height:38,backgroundColor:"",opacity:1,color:"rgba(255,255,255,1)",borderWidth:0,borderStyle:"solid",borderColor:"rgba(0,0,0,1)",paddingBottom:0,paddingTop:0,lineHeight:1,borderRadius:0,transform:"rotate(90deg) translate3d(0px, 0px, 0px)",borderRadiusPerc:0,boxShadow:"0px 0px 0px rgba(0,0,0,0.5)",boxShadowDirection:0,boxShadowSize:0,content:'<div style="text-align: center;"><span style="color: inherit; line-height: inherit; font-size: 12px; background-color: initial;">EQXIU.COM科技公司</span></div>',borderBottomRightRadius:0,borderBottomLeftRadius:0,borderTopRightRadius:0,borderTopLeftRadius:0,textAlign:"left"},id:498,num:2,pageId:38144107,properties:{width:319,height:36,anim:[{type:1,direction:3,duration:1,delay:1,countNum:1}]},sceneId:1311,type:2,publishTime:1472136748e3,name:"文本1"},{content:'<div style="text-align: center;"><span style="color: inherit; line-height: inherit; font-size: 12px; background-color: initial;"><a href="http://s1.eqxiu.com/eqs/link?id=1311&amp;url=http%3A%2F%2Fwww.eqxiu.com" target="_blank" style="">易企秀技术支持</a></span></div>',css:{top:222,left:-148,zIndex:3,backgroundColor:"",opacity:1,color:"rgba(255,255,255,1)",borderWidth:0,borderStyle:"solid",borderColor:"rgba(0,0,0,1)",paddingBottom:0,paddingTop:0,lineHeight:.6,borderRadius:0,transform:"rotate(90deg) translate3d(0px, 0px, 0px)",borderRadiusPerc:0,boxShadow:"0px 0px 0px rgba(0,0,0,0.5)",boxShadowDirection:0,boxShadowSize:0,width:320,height:37,content:'<div style="text-align: center;"><span style="color: inherit; line-height: inherit; font-size: 12px; background-color: initial;"><a href="http://s1.eqxiu.com/eqs/link?id=1311&amp;url=http%3A%2F%2Fwww.eqxiu.com" target="_blank" style="">易企秀技术支持</a></span></div>',borderBottomRightRadius:0,borderBottomLeftRadius:0,borderTopRightRadius:0,borderTopLeftRadius:0,textAlign:"left"},id:761,num:3,pageId:38144107,properties:{width:320,height:37,anim:[{type:0,direction:0,duration:1,delay:1.6,countNum:1}]},sceneId:1311,type:2,publishTime:1472136748e3,name:"文本2"}],hori:[{content:'<div style="text-align: center;"><br></div>',css:{top:222,left:-290,zIndex:"1",backgroundColor:"rgba(80,154,222,1)",opacity:1,color:"#676767",borderWidth:0,borderStyle:"solid",borderColor:"rgba(0,0,0,1)",paddingBottom:0,paddingTop:0,lineHeight:1,borderRadius:"0px",transform:"rotate(90deg) translate3d(0px, 0px, 0px)",borderRadiusPerc:0,boxShadow:"0px 0px 0px rgba(0,0,0,0)",boxShadowDirection:0,boxShadowSize:0,width:600,height:42,content:'<div style="text-align: center;"><br></div>',borderBottomRightRadius:"0px",borderBottomLeftRadius:"0px",borderTopRightRadius:"0px",borderTopLeftRadius:"0px"},id:13,num:1,pageId:38164479,properties:{type:"bg",anim:{type:1,direction:3,duration:1,delay:.6,countNum:1},width:600,height:42},sceneId:1311,type:2},{content:'<div style="text-align: center;"><span style="color: inherit; line-height: inherit; background-color: initial;"><font size="2">|</font></span></div>',css:{top:227,left:-141,zIndex:"2",width:320,height:39,backgroundColor:"",opacity:1,color:"rgba(255,255,255,1)",borderWidth:0,borderStyle:"solid",borderColor:"rgba(0,0,0,1)",paddingBottom:0,paddingTop:0,lineHeight:1,borderRadius:"0px",transform:"rotate(90deg) translate3d(0px, 0px, 0px)",borderRadiusPerc:0,boxShadow:"0px 0px 0px rgba(0,0,0,0)",boxShadowDirection:0,boxShadowSize:0,borderBottomRightRadius:"0px",borderBottomLeftRadius:"0px",borderTopRightRadius:"0px",borderTopLeftRadius:"0px"},id:77,num:1,pageId:38164479,properties:{width:320,height:39,anim:{type:0,direction:0,duration:1,delay:1.6,countNum:1}},sceneId:1311,type:2},{content:'<div style="text-align: left;"><span style="font-size: small; color: inherit; line-height: inherit; background-color: initial;"><a href="http://s1.eqxiu.com/eqs/link?id=1311&amp;url=http%3A%2F%2Fwww.eqxiu.com" target="_blank">易企秀技术支持</a></span></div>',css:{top:194,left:-63,zIndex:"3",width:164,height:38,backgroundColor:"",opacity:1,color:"rgba(255,255,255,1)",borderWidth:0,borderStyle:"solid",borderColor:"rgba(0,0,0,1)",paddingBottom:0,paddingTop:0,lineHeight:1,borderRadius:"0px",transform:"rotate(90deg) translate3d(0px, 0px, 0px)",borderRadiusPerc:0,boxShadow:"0px 0px 0px rgba(0,0,0,0)",boxShadowDirection:0,boxShadowSize:0,borderBottomRightRadius:"0px",borderBottomLeftRadius:"0px",borderTopRightRadius:"0px",borderTopLeftRadius:"0px"},id:33,num:1,pageId:38164479,properties:{width:164,height:38,anim:{type:1,direction:2,duration:1,delay:1.4,countNum:1}},sceneId:1311,type:2},{content:'<div style="text-align: right;"><font size="2" style="color: inherit; background-color: initial;">EQXIU.COM科技公司</font></div>',css:{top:294,left:-63,zIndex:"4",width:164,height:38,backgroundColor:"",opacity:1,color:"rgba(255,255,255,1)",borderWidth:0,borderStyle:"solid",borderColor:"rgba(0,0,0,1)",paddingBottom:0,paddingTop:0,lineHeight:1,borderRadius:"0px",transform:"rotate(90deg) translate3d(0px, 0px, 0px)",borderRadiusPerc:0,boxShadow:"0px 0px 0px rgba(0,0,0,0)",boxShadowDirection:0,boxShadowSize:0,borderBottomRightRadius:"0px",borderBottomLeftRadius:"0px",borderTopRightRadius:"0px",borderTopLeftRadius:"0px"},id:12,num:0,pageId:38164479,properties:{width:164,height:38,anim:{type:1,direction:0,duration:1,delay:1.4,countNum:1}},sceneId:1311,type:2}]}},function(e,t,n){"use strict";function i(e,t,n){return l({type:"GET",url:c.SERVER_1+"eqs/s/wx/robRedPacket",data:{sceneId:e,componentId:t,openid:n}})}function o(e){return l({type:"GET",url:c.SERVER_1+"eqs/s/redpackage/activity/query?sceneId="+e})}function r(e,t,n){return l({type:"POST",
url:c.SERVER_1+"eqs/s/redpackage/activity/send",data:{sceneId:e,activityId:t,openId:n}})}function a(e,t){return l({type:"GET",url:c.SERVER_0+"m/e/redpackage/style/query/redpackageType?sceneId="+e+"&redpackageType="+t})}function s(e,t){return l({type:"GET",url:c.SERVER_1+"eqs/s/redpackage/activity/check?sceneId="+e+"&activityId="+t})}var c=n(24),l=n(23).ajax;e.exports={$robRedPacket:i,$getRedPacketActivity:o,$grabRedPacket:r,$getSpecialRedPacketJson:a,$checkRedPacket:s}},function(e,t,n){"use strict";function i(){v||(v=n(24))}function o(e,t){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("link");i.rel="stylesheet",i.href=e,i.id=t,n.appendChild(i)}function r(e){var t=document.getElementById(e);t&&t.remove()}function a(e){var t=e.fontFamily,n=e.textContent,a=e.compId;if(t&&n){i();var s=t+a+n,c=t+a+"_dynamic";if(t&&!g[s]){r(c);var l=encodeURIComponent(n),u=v.FONT+"/font.css?family="+t+"&text="+l;o(u,c),g[s]=!0}}}function s(e){var t=e.fontFamily,n=e.textContent;if(i(),t&&!m[t]){var o=encodeURIComponent(n),r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("link");a.rel="stylesheet",a.href=v.FONT+"font.css?family="+t+"&text="+o,r.appendChild(a),m[t]=!0}}function c(e){var t=e.fontFamily,n=e.textContent,o=e.compId;if(i(),t&&!g[t+o]){var r=encodeURIComponent(n),a=document.head||document.getElementsByTagName("head")[0],s=document.createElement("link");s.rel="stylesheet",s.href=v.FONT+"font.css?family="+t+"&text="+r,a.appendChild(s),g[t+o]=!0}}function l(e){var t=e.fontFamily,n=e.sceneId,o=e.mode;if(i(),"view"===o&&window.scene&&t&&!g[t]){var r="@font-face{font-family:'"+t+"';src: url('"+v.FONT+"fonts/"+n+"_"+window.scene.publishTime+"/"+t+".woff') format('woff'),url('"+v.FONT+"fonts/"+n+"_"+window.scene.publishTime+"/"+t+".ttf') format('truetype');}";h(r),g[t]=!0}}function u(e,t){return v.FONT+"h5fonts/"+e+"/"+t+".css"}function p(e){var t=e.mode,n=(e.fontFamily,e.sceneId),o=e.publishTime;if(i(),"view"===t&&window.scene&&o&&!g.fontLoaded){var r=u(n,o);f(r),g.fontLoaded=!0}}var d=n(166),h=d.addGlobalStyle,f=d.addGlobalStyleBySrc,g={},m={},v=void 0;e.exports={addFontStyle:p,getFontFamilyStyle:c,addFontFamily:l,getDeitorFontFamilyStyle:s,getFontFamilyByContent:a}},function(e,t){"use strict";function n(e){var t=document.getElementsByTagName("style")[0];if(!t){t=document.createElement("style");var n=document.head||document.getElementsByTagName("head")[0];t.type="text/css",n.appendChild(t)}var i=document.createTextNode(e);t.appendChild(i)}function i(e){var t=document.createElement("link"),n=document.head||document.getElementsByTagName("head")[0];t.rel="stylesheet",t.href=e,n.appendChild(t)}function o(e){return e=""+e,e.indexOf("px")===-1&&(e+="px"),e}function r(e,t,n){var i=a.js+t.substring(0,1).toUpperCase()+t.substring(1,t.length);e.style[i]=n}var a=function(){var e=window.getComputedStyle(document.documentElement,""),t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1],n="WebKit|Moz|MS|O".match(new RegExp("("+t+")","i"))[1];return{dom:n,lowercase:t,css:"-"+t+"-",js:t[0].toUpperCase()+t.substr(1)}}();e.exports={addGlobalStyle:n,addSuffixPx:o,preFixCss:r,prefix:a,addGlobalStyleBySrc:i}},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(c){o=!0,r=c}finally{try{!i&&s["return"]&&s["return"]()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(27),c=s.mobilecheck,l=s.isAndroidPhone,u=n(27).isApp,p=n(157),d=p.perfectPage,h=p.perfectLandScapePage,f=n(168),g=n(740),m=n(746),v=n(747),y=n(791),b=n(801),x=n(802),w=n(804),k=n(805),S=n(807),I=n(808),T=n(810),E=n(811),P=n(63).perfectMeta,_=n(27).isWeChatMiniProgram,C=n(27).isFeiShu,A=n(721),O=n(812),q=n(813),L=n(66),M=L.getSafeJson,R=n(814),j=R.diff;n(821);var F=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e),this.sceneJson=t,this.config=Object.assign({toPageIndex:0,selector:"#nr",mode:"view",disablePageEffect:!1,disableCompEvent:!1,disableSubmit:!1,disableTrigger:!1,disableArrow:!1,disableCommentManager:!1,showProgressBar:!1,disableProgressBar:!1,disableCompAnim:!1,disableReport:!1,disablePageScroll:!1,disablePv:!1,initManagers:!0,disableQiniuZoom:!1,mobileEdit:!1,EqxGravity:{disableGravityMotion:!1},disableSetUlTopAndLeft:!1,disableViewRedPacket:!1,disableExceptionManager:!1},n),this.meta=P(this.sceneJson.meta),"view"==this.config.mode&&!this.sceneJson.normalPageIdList&&(this.sceneJson.normalPageIdList=this.sceneJson.list.map(function(e){return e.id})||[]),this.eqxPageList=[],this.currentPage=null,this.soundManager=null,this.statManager=null,this.commentManager=null,this.exceptionManager=null,this.formManager=null,this.pageScroll=null,this.progressBar=null,this.trackManager=null,this.config.initManagers&&this.initManagers(),this.dependenciesRenderObj={num:0,renderQueue:[],allRendered:!1,renderedPageList:{}},this.nextRenderPageId=-1,this.renderPageCnt=0,this.variableComps={texts:[],textsPreLen:0,inputs:[],inputsPreLen:0,images:[],imagesPreLen:0,uploads:[],uploadsPreLen:0},window.devScene=this,this.MessEventListener=new O("onmessage")}return a(e,[{key:"setNextRenderPageId",value:function(e){this.nextRenderPageId=e}},{key:"setPageList",value:function(e){var t;this.sceneJson.list.length=0,(t=this.sceneJson.list).push.apply(t,i(M(e))),this.eqxPageList=[],this.eqxPageList.length=e.length}},{key:"getOrientation",value:function(){return A(this)}},{key:"getMetaWx",value:function(){var e=this.meta.property;return{wxCount:e.wxCount,wxClickFarmerCount:e.wxClickFarmerCount}}},{key:"calMetaWx",value:function(){return this.eqxPageList.reduce(function(e,t){return e.wxCount+=t.getWxCompCount(),e.wxClickFarmerCount+=t.getWxClickFarmerCompCount(),e},{wxCount:0,wxClickFarmerCount:0})}},{key:"getCompCountByType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.eqxPageList.reduce(function(t,n){return t.compCount+=n.getCompCountByType(e),t},{compCount:0})}},{key:"syncMetaWx",value:function(){var e=this.calMetaWx();this.setProps({property:e})}},{key:"toJson",value:function(){var e=JSON.parse(JSON.stringify(this.sceneJson));for(var t in e)e.hasOwnProperty(t)&&t.startsWith("$")&&delete e[t];return e}},{key:"toLandscapeJson",value:function(){var e=this.toJson();return this.getOrientation().isLandScape()&&e.list.forEach(function(e){h(e)}),e}},{key:"renderScene",value:function(e){return this.initContainer(e||this.config.selector),this.renderBgm(),this.renderIsAndroidMusicTip(),this.renderCatalogueArrow(),C()||!c()||"view"!=this.config.mode||u()||_()||2!=this.meta.isTemplate||this.tempAppUseBtn(),this.initEqxPages(),this.currentPage=this.eqxPageList[this.config.toPageIndex],this.initProgressBar(),this.initPageScroll(),this.updateProgressBar(),this.renderDependenciesPages(),this.config.autoRecordScreen&&this.pageScroll.autoRecordScreen(),Promise.resolve()}},{key:"tempAppUseBtn",value:function(){if(!this.$tempAppUseBtn&&window.scene){var e=new m(this);e.render(this.$ele)}}},{key:"updateMeta",value:function(e){e=P(e);var t=JSON.parse(JSON.stringify(this.meta));delete t.property.wxAuth,Object.assign(this.meta,e);var n=JSON.parse(JSON.stringify(this.meta));delete n.property.wxAuth;j(t,n)}},{key:"setProps",value:function(e){var t=JSON.parse(JSON.stringify(this.meta)),n=this.meta;Object.keys(e).filter(function(e){return"property"!==e}).forEach(function(t){n[t]=e[t]}),e.property&&("string"==typeof e.property&&(e.property=JSON.parse(e.property)),Object.keys(e.property).forEach(function(t){n.property[t]=e.property[t]}));var i=JSON.parse(JSON.stringify(this.meta));j(t,i)}},{key:"getMeta",value:function(e){return this.meta[e]}},{key:"getMetaProperty",value:function(e){return this.meta.property[e]}},{key:"initContainer",value:function(e){$(this.$ele).is(e)||(this.$ele=$(e));var t=this.$ele;"static"===t.css("position")&&t.css({position:"relative"}),c()&&!window.feishu&&t.css({width:"100%",height:"100%"}),this.width=t.width(),this.height=t.height()}},{key:"createBgm",value:function(e){var t=e||this.meta.bgAudio;if(t)return this.bgm=new y(t,this),this.bgm}},{key:"renderBgm",value:function(){this.bgm||this.createBgm(),this.bgm&&(this.$ele.append(this.bgm.$bgmBtn),this.bgm.lrcCtr&&this.$ele.append(this.bgm.lrcCtr.dom))}},{key:"updateBgm",value:function(e){return this.meta.bgAudio=e,e?void(this.bgm?this.bgm.updateJson(e):(this.createBgm(e),this.renderBgm())):void(this.bgm&&(this.bgm.hide(),this.bgm.stopPlay(),this.bgm=null))}},{key:"renderDependenciesPages",value:function(){var e=this;if(this.dependenciesRenderObj&&this.dependenciesRenderObj.num===this.dependenciesRenderObj.total)return void(this.dependenciesRenderObj.allRendered=!0);if(!this.pageScroll||!this.pageScroll.pageFliping){var t=this.currentPage?this.currentPage.pageJson.id:this.eqxPageList[0].pageJson.id;this.dependenciesRenderObj.renderedPageList[t]||this.getDependenciesPages();var n=this.dependenciesRenderObj.renderedPageList[t];if(!n||0==n.length)return;var i=n.shift();this.renderPage(i),this.renderPageCnt++,i.pageJson.id===this.nextRenderPageId&&(this.pageScroll.goToPageById(this.nextRenderPageId),this.setNextRenderPageId(-1))}this.stopRenderPages(),this.renderPagesTimeoutId=setTimeout(function(){e.renderDependenciesPages()},0)}},{key:"getDependenciesPages",value:function(){function e(){for(var e=0;e<o;e++){var t=r.eqxPageList[e];if(t.isXb()&&!t.$section)return t}}var t=this,n=[];if(this.nextRenderPageId!==-1){var i=this.eqxPageList.find(function(e){return e.pageJson.id===t.nextRenderPageId});this.pageIsNeedRendered(i,n)}var o=this.eqxPageList.length,r=this;this.renderPageCnt<2&&(i=e(),this.pageIsNeedRendered(i,n));var a=this.eqxPageList.indexOf(this.currentPage);a=a===-1?0:a,i=this.eqxPageList[a],this.pageIsNeedRendered(i,n);var s=a<=0?o-1:a-1,c=a>=o-1?0:a+1;[s,c].forEach(function(e){r.pageIsNeedRendered(r.eqxPageList[e],n)});var l=this.getPageLinkId(this.eqxPageList[a]);l.length>0&&l.forEach(function(e){i=t.eqxPageList.find(function(t){return t.pageJson.id===e}),r.pageIsNeedRendered(i,n)}),this.dependenciesRenderObj.total=o;var u=this.currentPage?this.currentPage.pageJson.id:this.eqxPageList[0].pageJson.id;return this.dependenciesRenderObj.renderedPageList[u]=n,n}},{key:"pageIsNeedRendered",value:function(e,t){e&&!e.$section&&t.push(e)}},{key:"stopRenderPages",value:function(){this.renderPagesTimeoutId&&clearTimeout(this.renderPagesTimeoutId)}},{key:"getPageLinkId",value:function(e){var t=[],n=e.pageJson.properties.triggerGroup,i=e.pageJson.elements;return n&&n.length>0&&n.forEach(function(e){6==e.targetState&&t.push(+e.targetContent),10==e.targetState&&e.targetContent.forEach&&e.targetContent.forEach(function(e){t.push(+e)})}),i.forEach(function(e){2==e.type&&/href="[0-9]+"/.test(e.content)&&t.push(parseInt(/[0-9]+/.exec(/href="[0-9]+"/.exec(e.content)[0])[0])),e.properties&&e.properties.url&&/^[0-9]+$/.test(e.properties.url)&&t.push(parseInt(/^[0-9]+$/.exec(e.properties.url)[0]))}),t}},{key:"initEqxPages",value:function(){var e=this;this.sceneJson.list.forEach(function(t,n){return e.initEqxPage(n)})}},{key:"initEqxPage",value:function(e){var t=this.sceneJson.list[e];if(t){d(t,this.sceneJson);var n=f.get(t,this),i=new n(t,this);return this.eqxPageList[e]=i,i}throw new Error("Invalid Page Index: "+e)}},{key:"renderCatalogueArrow",value:function(e){var t=window.document.createElement("div");t.style="width:30px;height:30px;border-radius: 50%";var n=window.document.createElement("div");n.innerText="点击按钮可返回目录列表",this.bgm?(t.setAttribute("class","eqf-arrow-left has-bgm"),n.setAttribute("class","go-back-tip tip-has-bgm")):(t.setAttribute("class","eqf-arrow-left no-bgm"),n.setAttribute("class","go-back-tip tip-no-bgm")),window.document.getElementsByClassName("preview-content")[0]&&(window.document.getElementsByClassName("preview-content")[0].appendChild(t),window.document.getElementsByClassName("preview-content")[0].appendChild(n))}},{key:"renderIsAndroidMusicTip",value:function(){if(l()){localStorage.removeItem("isAndroidMusicTip");var e=window.document.createElement("div");e.innerText="点击播放",e.setAttribute("class","is-android-music-tip"),window.document.getElementsByClassName("preview-content")[0]&&window.document.getElementsByClassName("preview-content")[0].appendChild(e)}}},{key:"renderPage",value:function(e){var t=this;if("number"==typeof e)var n=this.eqxPageList[e];else n=e,e=this.eqxPageList.indexOf(n);if(n){var i=n.$section;if(i)return;if(i=n.create$section(),this.dependenciesRenderObj.num++,this.dependenciesRenderObj.total=this.eqxPageList.length,"edit"!==this.config.mode&&n.addEventListener(),this.$ele&&this.$ele.append(i),this.sceneJson.list.length>1){var o=n.pageJson.properties.pageMode;n.renderArrow(o)}return n.arrow&&(n.pageJson.properties.pageScroll.disableFlip?n.arrow.updateCss({display:"none"}):0===e&&n.arrow.updateCss({bottom:"30px"})),this.bindVariableComps(),n.addEffect().then(function(){e===t.config.toPageIndex&&(t.currentPage=n,n.active().then(function(e){var t=n.deactive();t&&t.show()})),t.renderPageEnd(n)})}return Promise.reject(new Error("no eqxPage at index "+e))}},{key:"bindVariableComps",value:function(){var e=this.variableComps,t=e.texts,n=e.inputs,i=e.images,o=e.uploads,r=e.textsPreLen,a=e.inputsPreLen,s=e.imagesPreLen,c=e.uploadsPreLen,l=function(e,t,n,i){for(var o=t.length,r=function(){var r=t[o],a=r.compJson.properties["var"].comp;if(a){var s=i.find(function(e){return e.compJson.id==a});if(s){if(s.variables=s.variables||[],s.variables.push(r),"7"===String(r.type)){var c=s.variablesValue;c&&r.updateContent(c)}else{var l=s.variablesValues;if(l){var u=l.key,p=l.w,d=l.h;r.updateImageSrc(u,p,d)}}e.splice(o+n,1)}}};o--;)r()};t.length>r&&n.length&&(l(t,t.slice(r),r,n),e.textsPreLen=t.length),n.length>a&&t.length&&(l(t,t,0,n.slice(a)),e.inputsPreLen=n.length),i.length>s&&o.length&&(l(i,i.slice(s),s,o),e.imagesPreLen=i.length),o.length>c&&i.length&&(l(i,i,0,o.slice(c)),e.uploadsPreLen=o.length)}},{key:"changePageMode",value:function(e,t){if(t){var n=this.eqxPageList[t-1];if(!n)return!1;n.$section&&(n.arrow?n.arrow.updatePageMode(e):n&&n.renderArrow(e)),n.pageJson.properties.pageMode=e,n.pageMode=e}else this.eqxPageList.forEach(function(t){return!!t&&(t.$section&&(t.arrow?t.arrow.updatePageMode(e):t&&t.renderArrow(e)),t.pageJson.properties.pageMode=e,void(t.pageMode=e))})}},{key:"initProgressBar",value:function(){this.progressBar=new g(this.sceneJson.list.length,1,this.config,this),this.$ele.append(this.progressBar.$progress),c()||this.progressBar.$slideNumber.addClass("page-tip__pc")}},{key:"updateProgressBar",value:function(e){if(e||(e=this.currentPage),e)t=e.pageJson.num;else var t=this.eqxPageList[0].pageJson.num;var n=this.sceneJson.list.length;if(this.progressBar.update(t,n),this.config.showProgressBar)this.progressBar.show();else{var i=this.meta.property.slideNumber&&!this.config.disableProgressBar;i?this.progressBar.show():this.progressBar.hide()}}},{key:"initPageScroll",value:function(){this.config.disablePageScroll||(this.pageScroll=new v(this))}},{key:"initManagers",value:function(){this.initSoundManager(),this.initPageEffectManager(),this.initStatManager(),this.config.disableCommentManager||this.initCommentManager(),this.initEventManager(),this.initFormManager(),this.initTrackManager(),this.config.disableExceptionManager||this.initExceptionManager()}},{key:"initSoundManager",value:function(){this.soundManager=new I}},{key:"initStatManager",value:function(){return this.statManager=new S(this.sceneJson),this.statManager.iterate(),this.statManager}},{key:"initCommentManager",value:function(){this.commentManager=new x(this.meta.id)}},{key:"initExceptionManager",value:function(){this.exceptionManager=new w(this.meta)}},{key:"initEventManager",value:function(){var e=this;this.eventManager=new b,this.getOrientation().isLandScape()&&this.eventManager.subscribe("formMask",{update:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.data.comp;if(e.currentPage._formMaskPage)e.currentPage._formMaskPage.show(n);else{var i=new q(JSON.parse(JSON.stringify(e.currentPage.pageJson)),e);i.show(n)}}})}},{key:"initFormManager",value:function(){this.formManager=new k}},{key:"initTrackManager",value:function(){this.trackManager=new E(this)}},{key:"initPageEffectManager",value:function(){this.pageEffectManager=new T(this)}},{key:"replaceEqxPage",value:function(e,t){var n=this.eqxPageList[e];n.destroy(),this.sceneJson.list.splice(e,1,JSON.parse(JSON.stringify(t))),this.updatePageNum(),this.eqxPageList[e]=null;var i=this.initEqxPage(e);return this.currentPage&&this.currentPage.pageJson.num===e+1&&(this.currentPage=i),i}},{key:"updatePageNum",value:function(){this.sceneJson.list.forEach(function(e,t){e.num=t+1})}},{key:"insertPage",value:function(e,t){var n=this.sceneJson.list;return n.splice(e+1,0,t),this.updatePageNum(),this.eqxPageList.splice(e+1,0,null),this.initEqxPage(e+1)}},{key:"deletePage",value:function(e){var t=this.sceneJson.list,n=this.eqxPageList[e];return n&&n.destroy(),t.splice(e,1),this.updatePageNum(),this.eqxPageList.splice(e,1)}},{key:"destroy",value:function(){this.stopRenderPages(),this.eqxPageList.forEach(function(e){return e.destroy()}),this.bgm&&(this.bgm.destroy(),this.bgm=null)}},{key:"sortPage",value:function(e,t){var n=this.sceneJson.list,i=n.length;if(e===t||e<0||e>i-1||t<0||t>i-1)return console.error("invalid sortPage arguments");if(e>t){var o=n.splice(e,1),a=r(o,1),s=a[0];n.splice(t,0,s);var c=this.eqxPageList.splice(e,1),l=r(c,1);s=l[0],this.eqxPageList.splice(t,0,s)}else{var u=n.splice(e,1),p=r(u,1);s=p[0],n.splice(t,0,s);var d=this.eqxPageList.splice(e,1),h=r(d,1);s=h[0],this.eqxPageList.splice(t,0,s)}this.updatePageNum()}},{key:"getCompsNumberByType",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=0;return this.eqxPageList?(this.eqxPageList.forEach(function(e){var n=e.pageJson.elements;n.forEach(function(e){t.includes(e.type+"")&&i++})}),i):0}},{key:"getCompsExistByType",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.eqxPageList?this.eqxPageList.some(function(e){return e.pageJson.elements.some(function(e){return t.includes(e.type+"")})}):0}},{key:"getHdCompsStatus",value:function(e){if(!this.eqxPageList)return[];var t=[];return this.eqxPageList.forEach(function(n){for(var i=n.pageJson.elements,o=0;o<i.length;o++)66!=i[o].type&&65!=i[o].type||e?66!=i[o].type&&65!=i[o].type||"id"!=e||t.push(i[o].properties.activityId):t.push({id:i[o].properties.activityId,type:i[o].type,redPackage:i[o].properties.redPackage})}),t}},{key:"getEqxPageByIndex",value:function(e){var t=this.eqxPageList[e];return t||(t=this.initEqxPage(e)),t}},{key:"isEqxPage",value:function(e){return this.eqxPageList.some(function(t){return t===e})}},{key:"getEqxPageById",value:function(e){return this.getEqxPageByKeyValue("id",e)}},{key:"getEqxPageByKeyValue",value:function(e,t){var n=this.sceneJson.list.findIndex(function(n){return n[e]===t});if(n>-1)return this.getEqxPageByIndex(n)}},{key:"renderPageByPageJson",value:function(e){var t=f.get(e,this),n=new t(e,this),i=n.create$section();return i}},{key:"renderPageEnd",value:function(e){this.renderAd&&this.renderAd.renderBuoy(e)}},{key:"isAllPageViewed",value:function(){var e=this.sceneJson.normalPageIdList||[];return this.eqxPageList.every(function(t){return!e.includes(t.id)||t.viewed})}}]),e}();e.exports=F},function(e,t,n){"use strict";var i=n(169),o=n(736),r=n(737),a=n(738),s=n(739);e.exports={get:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.properties,c=n.longPage,l=n.xb,u=t.getOrientation();return l?a:u&&u.isLandScape()?c?r:s:c?o:i}}},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(117).COMP_TYPE,c=n(117).FORM_COMPS,l=n(117).WX_COMPS,u=n(117).FIX_INDEX_COMPS,p=n(117).WX_CLICK_FARMER_COMPS,d=n(116),h=d.perfectComp,f=n(62).randomId,g=n(170),m=n(174),v=n(196),y=n(101),b=n(702),x=n(251),w=n(707),k=n(708),S=n(712),I=n(714),T=n(715),E=n(717),P=n(718),_=n(720),C=n(721),A=n(716),O=n(722),q=n(723),L=n(724),M=L.brogastPz,R=n(725),j=console.log.bind(console,"[EqxPage]"),F=n(111).toInt,B=n(726),D=n(730),J=n(731),N=n(732),z=n(733),W=n(120).ANIMATION_ENTRY,H=n(64).SPECIAL_MODE,Y=n(165),U=Y.getFontFamilyStyle,X=n(498).createSpecialRedPacket,G=function(){function e(t,n){o(this,e),this.pageJson=t,this.eqxScene=n,this.eqxItemList=[],this.eqxLayerList=[],this.currentLayer=null,this.displayed=!1,this.viewed=!1,this.hasCoverEffect=!1,this.destroyed=!1;var i=this.eqxScene.sceneJson,r=i.meta,a=r.pageMode,s=r.property.forbidHandFlip,c=this.eqxScene,l=c.width,u=c.height;this.width=l,this.height=u,this.pageMode=a,this.activeClass=H.indexOf(this.pageMode+"")>-1?"z-active special-zIndex":"z-active",this.forbidHandFlip=s,this.bgm=this.eqxScene.bgm,this.eqxStatManager=null,this.pv=0,this.timer=null;var p=t.properties;this.notImageCut=p.oneShot&&p.oneShot.isOpen||p.pip&&p.pip.used,this.orientation=C(this.eqxScene)}return a(e,[{key:"switchCurrentLayer",value:function(e){null!==e&&void 0!==e&&(isNaN(parseFloat(e))?e instanceof A&&(this.currentLayer=e):this.currentLayer=this.eqxLayerList[e])}},{key:"getCurrentLayer",value:function(){return this.currentLayer||this.eqxLayerList[this.eqxLayerList.length-1]||null}},{key:"hasEqxItem",value:function(e){return this.eqxLayerList.some(function(t){return t.eqxItems.includes(e)})}},{key:"getTopItems",value:function(){var e=[];return this.eqxLayerList.forEach(function(t){e.push.apply(e,i(t.eqxItems.filter(function(e){return!e.group})))}),e}},{key:"initEqxLayers",value:function(){function e(){p.forEach(function(e){delete e.tag,delete e.visited})}function t(){var e=u.slice(),t={};e.forEach(function(e,n){"EqxGravity"!=s[e.type]&&(t[e.id]=e)});for(var i=function(e){var n=[],i=f[e],o=i.thumbnail,r=i.pipButton,a=i.displayed,s=i.compIds,c=i.screenBg,u=i.flash,p=i.area,d=i.name,h=i.hash,m=i.id,v=void 0===m?l._generateLayerId():m;s.forEach(function(e){var i=t[e];void 0!==i&&(n.push(i),delete t[e])}),g.push({thumbnail:o,pipButton:r,displayed:a,compIds:s,flash:u,screenBg:c,items:n,area:p,name:d,hash:h,id:v})},o=0;o<f.length;o++)i(o);n(Object.values(t),g),t=null,g.length||g.push({items:[],json:{compIds:[],id:l._generateLayerId()}}),g.forEach(function(e,t){e.zIndex=e.zIndex||t+1})}function n(e,t){var n=e.findIndex(function(e){return"16"===e.type});if(n>=0)var i=e.splice(n,1);e.length&&t.unshift({items:e}),i&&t.unshift({items:i,pipButton:1})}function i(){for(var e=0;e<g.length;e++){var t=g[e];r();for(var n=0;n<p.length;n++){var i=p[n];i.tag||i.visited||o(i,t)}}}function o(e,t){e.visited=!0;for(var n=e.compIds,i=t.items.map(function(e){return e.id}),r=!0,s=0;s<n.length;s++){var c=n[s];if(i.indexOf(c)===-1){if(!/group/.test(c)){r=!1;break}var l=a(c);if(!l||l.visited||!o(l,t)){r=!1;break}}}return r&&(e.tag=!0,t.items.push(e)),r}function r(){for(var e=0;e<p.length;e++)p[e].visited=!1}function a(e){return p.find(function(t){return t.id===e})}var c=this,l=this,u=this.pageJson.elements,p=this.pageJson.groups||[];e();var d=this.pageJson.extend=this.pageJson.extend||{},h=d.screens,f=void 0===h?[]:h,g=[];return t(),i(),e(),g.map(function(e){return new A(e,c)})}},{key:"_generateLayerId",value:function(){return"layer:"+f()}},{key:"addEmptyEqxLayer",value:function(e,t){if(!this.$editDiv)return null;var n=void 0;n=e?"object"===("undefined"==typeof t?"undefined":r(t))?JSON.parse(JSON.stringify(t)):this.currentLayer.json.screenBg?JSON.parse(JSON.stringify(this.currentLayer.json.screenBg)):null:null;var i={compIds:[],items:[],id:this._generateLayerId(),screenBg:n},o=new A(i,this),a=this.oneShot?this.$editDiv.find(".one-shot-change-wraper"):this.$editDiv;return 0===e?(this.eqxLayerList.unshift(o),a.prepend(o.render()),this.eqxLayerList.forEach(function(e,t){return e.updateEqxLayerIndex(t+1)})):e===this.eqxLayerList.length?(this.eqxLayerList.push(o),a.append(o.render()),o.updateEqxLayerIndex(this.eqxLayerList.length)):e?(this.eqxLayerList.splice(e,0,o),a.children().eq(e).before(o.render()),this.eqxLayerList.forEach(function(e,t){return e.updateEqxLayerIndex(t+1)})):(this.eqxLayerList.push(o),a.append(o.render()),o.updateEqxLayerIndex(this.eqxLayerList.length)),o}},{key:"deleteEqxLayer",value:function(e){var t=this.eqxLayerList;isNaN(parseInt(e))&&(e=t.findIndex(function(t){return t===e})),e>=0&&t.length>1&&(t.splice(e,1)[0].destroy(),this.switchCurrentLayer(t[t.length-1]))}},{key:"getEaxPageTreeStructureFlatted",value:function(){function e(t){var n=[];return t.eqxItems.forEach(function(t){n.push(t),t.isGroupItem()&&n.push.apply(n,i(e(t)))}),n}function t(e){e.forEach(function(e){return e.isGroupItem()&&t(e.eqxItems)}),e.sort(function(e,t){return t.zIndex-e.zIndex})}function n(e){return e.eqxLayerList.slice().sort(function(e,t){return t.zIndex-e.zIndex}).map(function(e){var n=e.getDirectItems();return t(n),{eqxItems:n}})}var o=[];return n(this).forEach(function(t){return o.push.apply(o,i(e(t)))}),o}},{key:"openPipEditor",value:function(){var e=this.pageJson,t=e.properties;t.pip=t.pip||{},t.pip.used=!0,t.pip.playback=!0,t.pip.mode=1}},{key:"initQuickFlash",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.pageJson.properties;e&&(t.flash=t.flash||{},t.flash.used=e),t.flash&&t.flash.used&&(this.flash=new J(t.flash,this))}},{key:"initMockDialog",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.pageJson.properties;e&&(t.mockDialog=t.mockDialog||{},t.mockDialog.used=e,t.mockDialog.chatStyle=0,t.mockDialog.currentSoundId=1,t.mockDialog.showHead=!0,t.mockDialog.showNickname=!1,t.mockDialog.showRead=!1,t.mockDialog.memberList=[{id:1,nickname:"",head:n(734),isSender:!0},{id:2,nickname:"",head:n(734),isSender:!1}],t.mockDialog.groupName=""),t.mockDialog&&t.mockDialog.used&&(this.mockDialog=new N(t.mockDialog,this))}},{key:"initVoiceAssistant",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.pageJson.properties;e&&(t.voiceAssistant=t.voiceAssistant||{},t.voiceAssistant.used=e,t.voiceAssistant.dialogueList=[{open:!0,question:{text:"SiriSiri，做H5用什么网站？",voice:"无语音",gender:"女生",music:"",duration:0},answer:{text:"易企秀H5做起来很方便，网址是www.eqxiu.com",voice:"无语音",gender:"女生",music:"",duration:0}}],t.voiceAssistant.setFontStyle={selectedFontName:"默认字体"},t.fontFamily="Microsoft YaHei, Helvetica Neue, Helvetica, Arial, sans-serif"),t.voiceAssistant&&t.voiceAssistant.used&&(this.voiceAssistant=new z(t.voiceAssistant,this))}},{key:"openOneShot",value:function(){this.orientation.isLandScape()?this.oneShot=new R(this):this.oneShot=new q(this),this.oneShot.open()}},{key:"toSaveJson",value:function(){return this.toPageJson()}},{key:"toJson",value:function(){if(!this.eqxLayerList.length)return this.pageJson;var e=[],t=[],n=[];this.eqxLayerList.sort(function(e,t){return e.zIndex-t.zIndex}).forEach(function(o){var r=o.toJson(),a=r.elems,s=r.groups,c=r.thumbnail,l=r.pipButton,u=r.screenBg,p=r.compIds,d=r.flash,h=r.area,f=r.name,g=r.hash,m=r.id;e.push.apply(e,i(a)),t.push.apply(t,i(s)),n.push({thumbnail:c,pipButton:l,compIds:p,screenBg:u,flash:d,area:h,hash:g,name:f,id:m})}),e.forEach(function(e,t){var n=e.css;n.zIndex=t+1}),this.eqxBackground&&e.push(this.eqxBackground.compJson),this.eqxGravity&&e.push(this.eqxGravity.compJson),this.pageJson.elements=e,this.pageJson.groups=t,this.pageJson.extend=this.pageJson.extend||{},this.pageJson.extend.screens=n;var o=this.pageJson.properties;return o&&(o.groupSettings=this.ftManager.toJson()),this.pageJson}},{key:"toPageJson",value:function(e,t){e=Object.assign({transformText:!0,addForms:!0},e);var n=t||this.toJson(),i=JSON.parse(JSON.stringify(n)),o=i.id,r=i.sceneId,a=i.forms=[],l=i.redPacket={};if(i.elements.forEach(function(e){var t=e.type+"";if("EqxRedPacket"===s[t]){var n=e.properties;l.title=n.title,l.activity=n.activity,l.amount=n.amount,l.begin=n.begin,l.end=n.end,l.count=n.count,l.chance=n.chance}if("EqxText"===s[t]&&e.content&&(e.content=e.content.replace(/(^\s*)|(\s*$)/g,"")),c.includes(t)){var i={id:e.id,pageId:o,sceneId:r,type:t,fieldType:t,title:e.title,num:e.num};"z"===t&&e.choices&&e.choices.options&&(i.title=e.choices.options[0].label||e.title),/^[rc]/.test(t)&&(e.choices&&"string"!=typeof e.choices&&(e.choices=JSON.stringify(e.choices)),i.choices=e.choices),a.push(i)}if(e.trigger){var u=e.trigger;u.sends&&0===u.sends.length&&delete u.sends,u.receives&&0==u.receives.length&&delete u.receives,u.sends||u.receives||delete e.trigger}"EqxTelephone"!==s[t]&&"EqxLink"!==s[t]&&"EqxSubmitButton"!==s[t]||e.properties.title&&(e.properties.title=e.properties.title.replace(/ /g,"&nbsp;"))}),i.trigger){var u=i.trigger;u.sends&&0===u.sends.length&&delete u.sends,u.receives&&0===u.receives.length&&delete u.receives,u.sends||u.receives||delete i.trigger}return i}},{key:"setProps",value:function(e){var t=this.pageJson.properties;Object.keys(e).forEach(function(n){t[n]=e[n]})}},{key:"isXb",value:function(){return!!this.pageJson.properties.xb}},{key:"isLongPage",value:function(){return"longPage"in this.pageJson.properties}},{key:"isMockDialog",value:function(){return"mockDialog"in this.pageJson.properties}},{key:"isVoicePage",value:function(){return"voiceAssistant"in this.pageJson.properties}},{key:"getPageWidth",value:function(){return 320}},{key:"getPageHeight",value:function(){var e=this.pageJson.properties;return e.longPage||486}},{key:"toString",value:function(){return"page-"+this.pageJson.id}},{key:"initStatManager",value:function(){return this.statManager=new w(this.pageJson.elements),this.statManager.iterate(),this.statManager}},{key:"updateItemIndex",value:function(e,t){t.eqxLayer.updateItemIndex(e,t)}},{key:"updateItemsIndexBySplit",value:function(e,t){t[0].eqxLayer.updateItemsIndexBySplit(e,t)}},{key:"updateItemsIndex",value:function(e,t){var n=t.sort(function(e,t){return e.getZIndex()-t.getZIndex()});"--"===e&&n.reverse(),n.forEach(function(t){t.eqxLayer.updateItemIndex(e,t)})}},{key:"show",value:function(){var e=this;if(this.displayed=!0,this.triggerEventAgent&&this.triggerEventAgent.addEventListener(),this.$section&&this.$section.addClass("z-current"),this.isLongPage()&&(this.renderEqxList=this.eqxCompList.slice()),this.isMockDialog()&&"view"==this.eqxScene.config.mode){var t=this.pageJson.extend.mockItems.length||0;g.mockDialogPlay(t)}else g.mockDialogStop();if(this.isVoicePage()){var n=this.pageJson.properties.voiceAssistant.dialogueList.every(function(e){return"无语音"==e.question.voice&&"无语音"==e.answer.voice}),i=this.pageJson.num,o={longPage:this.pageJson.properties.longPage,mode:this.eqxScene.config.mode,voiceProp:this.pageJson.properties.voiceAssistant,
num:this.pageJson.num};g.voiceAssistantPlay(i,o,this.eqxScene),!n&&this.bgm&&setTimeout(function(){e.bgm.stopPlay()},0)}if(this.pageJson.cataloguePosition?this.controlCatalogueArrow(this.pageJson.cataloguePosition):this.controlCatalogueArrow(),window.scene&&window.scene.property){var r=window.scene.property.activityPageId;r&&!this.pv&&(this.pv+=1)}if(this.$editDiv.find('li[ctype="299"]')[0]){var a;if(this.width/this.height<=320/486)if(window.scene&&window.scene.property){var s=window.scene.property;a=s.adBagSwitch||0==s.eqAdType||s.pcAdSwitch?(this.height/(this.width/320)-486)/2:-(this.height/(this.width/320)-486)/2}else a=-(this.height/(this.width/320)-486)/2;var c=$(this.$editDiv.find('li[ctype="299"]')[0]),l=+c.css("top").replace("px","")||0;l>0&&c.css("top",l+a)}return this.soundAgent&&this.soundAgent.start(),this.$section&&"view"==this.eqxScene.config.mode&&!this.eqxScene.config.disableViewRedPacket&&(this.viewed=!0,this.eqxScene.isAllPageViewed()&&!this.eqxScene.viewRedPacket&&X(3,this.eqxScene).then(function(t){e.eqxScene.viewRedPacket=t})),this}},{key:"controlCatalogueArrow",value:function(e){var t=this,n=$(".eqf-arrow-left");$(".go-back-tip");if(e){var i=localStorage.getItem("goBackTip"),o=$(".go-back-tip");i?o.remove():(localStorage.setItem("goBackTip",!0),o.css({display:"block"}),setTimeout(function(){o.remove()},3e3)),this.bgm&&!this.soundAgent?(n.css({position:"absolute",top:"58px",right:"16px"}),o.css({position:"absolute",top:"58px",right:"54px"})):(n.css({position:"absolute",top:"16px",right:"16px"}),o.css({position:"absolute",top:"16px",right:"54px"})),n.css({display:"block"}),n.unbind(),n.click(function(n){n.stopPropagation(),t.eqxScene.pageScroll.goToPageById(e)})}else n.css({display:"none"})}},{key:"isAndroidMusicTip",value:function t(){var e=$(".is-android-music-tip");if(e.length>0&&this.bgm&&!this.soundAgent&&1==this.pageJson.num){var t=localStorage.getItem("isAndroidMusicTip");t?e.remove():(localStorage.setItem("isAndroidMusicTip",!0),e.css({display:"block"}),setTimeout(function(){e.remove()},3e3))}}},{key:"hide",value:function(){if(this.displayed=!1,this.oneShot&&this.oneShot.reset&&this.oneShot.reset(),this.flash&&this.flash.reset&&this.flash.reset(),this.triggerEventAgent&&this.triggerEventAgent.removeEventListener(),this.eqxCompList.forEach(function(e){e.$li&&e.eleHide()}),this.effect&&this.effect.stopEffect&&this.effect.stopEffect(),this.$section&&this.$section.removeClass("z-current"),this.soundAgent&&this.soundAgent.pause(),this.isMockDialog()&&g.mockDialogStop(),this.isVoicePage()){var e=this.pageJson.num,t={longPage:this.pageJson.properties.longPage,mode:this.eqxScene.config.mode,voiceProp:this.pageJson.properties.voiceAssistant,num:this.pageJson.num};g.clearTimeOutFun(e,t,void 0,this.eqxScene)}return this.pageJson.cataloguePosition=null,this}},{key:"showElements",value:function(){var e=this;this.getEqxComps().forEach(function(t){var n=t.compJson.css,i=n.top,o=n.transform,r=n.width,a=n.height,s=0;o&&"[object String]"===Object.prototype.toString.call(o)&&o.replace(/rotateZ\((-?\d*\.?\d*)(deg|)\)/,function(e,t){s=t}),t.compJson.properties.anim&&t.compJson.properties.anim[0]&&30===t.compJson.properties.anim[0].type&&(i-=t.compJson.css.height),90==parseFloat(s)&&(i-=(r-a)/2),2===t.compJson.properties.initType?t.eleHide():t.compJson.properties.anim&&t.compJson.properties.anim[0]&&(2===t.compJson.properties.anim[0].type||19===t.compJson.properties.anim[0].type)?t.eleShow():i&&parseFloat(i)<=e.height?t.eleShow():i||t.eleShow()}),this.eqxBackground&&this.eqxBackground.eleShow()}},{key:"hideElements",value:function(){this.getEqxComps().forEach(function(e){var t=e.compJson.properties.anim;if(t.length>0){var n=t.filter(function(e){return W.indexOf(e.type)>-1});n.length>0&&e.eleHide()}})}},{key:"active",value:function(){function e(e){if(e.hasCoverEffect)e.bgm&&e.bgm.hide(),e.eqxScene.progressBar&&e.eqxScene.progressBar.hide();else if(e.isVoicePage()){var t=e.pageJson.properties.voiceAssistant.dialogueList.every(function(e){return"无语音"==e.question.voice&&"无语音"==e.answer.voice});t?e.bgm&&e.bgm.resumePlay():e.bgm&&e.bgm.stopPlay(),e.eqxScene.progressBar&&e.eqxScene.progressBar.hide()}else e.showElements(),e.bgm&&(e.bgm.resumePlay(),e.isAndroidMusicTip());e.effect&&e.effect.startEffect&&e.effect.startEffect(),e.$section&&e.$section.addClass(e.activeClass),e.eqxScene.pageEffectManager.perfectPageEffect(e),e.flash&&e.flash.play(),e.oneShot&&e.oneShot.play(),e.activePageEndHook&&e.activePageEndHook(e)}function t(e){var t=[],n=e.eqxCompList;return n&&n.length&&n.forEach(function(e){e.anim&&!Array.isArray(e.anim)&&(e.anim=[e.anim]),(e.anim||[]).forEach(function(e){e.sound&&e.soundAgent&&t.push(e.soundAgent.audio)})}),t}var n=this,i=new Promise(function(i,o){var r=t(n),a=r.length;r&&r.length?r.forEach(function(t){4===t.readyState?0===--a&&(e(n),i()):(t.load(),$(t).on("canplay",function(){0===--a&&(e(n),i())}).on("error",function(){0===--a&&(e(n),i())}))}):(e(n),i())});return i}},{key:"deactive",value:function(){if(this.$section)return this.$section.removeClass(this.activeClass),this}},{key:"resetComps",value:function(){this.getEqxComps().forEach(function(e){"26"===e.type&&e.eleHide()})}},{key:"destroy",value:function(){this.hide(),this.eqxLayerList.forEach(function(e){e.destroy()}),this.$ul&&(this.$ul.remove(),this.$ul=null),this.$editDiv&&(this.$editDiv.remove(),this.$editDiv=null),this.$pageDiv&&(this.$pageDiv.remove(),this.$pageDiv=null),this.$section&&(this.$section.remove(),this.$section=null),this.destroyed=!0,this.soundAgent&&this.soundAgent.destroy(),this._ftManager=null,this._groupManager=null,this._triggerManager=null}},{key:"create$section",value:function(){function e(e){e.eqxScene.config.autoRecordScreen&&(e.pageJson.properties.maxAnimTime=e.calAnimTime())}function t(){j.eqxLayerList.some(function(e){return e.hasGroupsInLayer()})&&j.addGroupManager()}function i(){j.trigger=new P(j,k)}function o(){j.initQuickFlash()}function r(){E.isOpen&&(j.orientation.isLandScape()?j.oneShot=new R(j):j.oneShot=new q(j))}function a(){var e=y.find(function(e){return"EqxGravity"===s[e.type]});e&&(j.eqxGravity=j.initEqxGravityByJson(e),j.renderGravity(j.eqxGravity))}function c(){(C.used||E.isOpen||"edit"===w)&&(j.eqxLayerList=j.initEqxLayers(),j.$editDiv.append(j.eqxLayerList.map(function(e){return e.render()})),j.switchCurrentLayer(j.eqxLayerList.length-1))}function l(){I.used&&"view"===w&&j.$editDiv.append(new O({},j).render())}function u(){if(!C.used&&!E.isOpen&&!I.used&&"view"===w){var e=y.slice().map(function(e){return e.name=j.getCompName(e),e}).filter(function(e){var t=e.type;return"EqxBackground"!==s[t]&&"EqxGravity"!==s[t]}).sort(function(e,t){var n=e.css.zIndex,i=t.css.zIndex;return n-i}).map(function(e,t){return e.num=t+1,e.css.zIndex=t+1,e}),t={id:j._generateLayerId(),items:e,compIds:e.map(function(e){return e.id}),zIndex:1};j.eqxLayerList=[new A(t,j)],j.$editDiv.append(j.eqxLayerList.map(function(e){return e.render()})),j.switchCurrentLayer(j.eqxLayerList.length-1)}}function p(){if(y.length){var e=[],t=[];if(y.forEach(function(n){"EqxBackground"===s[n.type]?t.push(n):e.push(n)}),t.length){var n=j.initEqxBgByJson(t[t.length-1]);j.renderBg(n)}y.length=0,y.push.apply(y,e)}}function d(){if(j.pageJson.properties.hasOwnProperty("pagefilter")){var e=j.initEqxPagefilterByJson(j.pageJson.properties.pagefilter);j.renderPageFilter(e)}}var h=this.pageJson,f=h.num,m=h.id,v=h.properties,y=h.elements,b=h.extend,x=this.eqxScene.config,w=x.mode,k=x.disableTrigger,S=v.pip,I=void 0===S?{}:S,T=v.oneShot,E=void 0===T?{}:T,_=v.flash,C=void 0===_?{}:_,L=v.mockDialog,M=v.voiceAssistant,j=this;if(this.$section=$(g.section()),this.section=this.$section[0],this.$pageDiv=$(g.pageDiv(f)),L){var F={longPage:v.longPage,mode:w,mockProp:L,mockItems:b.mockItems};this.$editDiv=$(g.mockDialog(F));var B=document.createElement("audio");B.id="wechatSound",B.style.display="none",B.src=n(735),document.body.append(B)}else if(M){var D=function(e){var t=e.fontFamily,n=e.textContent,i=e.mode,o=e.compId;"view"===i&&U({fontFamily:t,textContent:n,compId:o})},J="";M.dialogueList.forEach(function(e,t){return J=J+e.question.text+e.answer.text,0==t?(e.question.delayTime=0,e.answer.delayTime=e.question.duration+2,e.totalTime=e.question.duration+e.answer.duration+2):(e.question.delayTime=M.dialogueList[t-1].totalTime+2,e.answer.delayTime=e.question.delayTime+e.question.duration+2,e.totalTime=M.dialogueList[t-1].totalTime+e.question.duration+e.answer.duration+4),M.dialogueList}),D({mode:w,fontFamily:M.fontFamily,compId:m,textContent:J});var N={longPage:v.longPage,mode:w,voiceProp:M,num:f};this.$editDiv=$(g.voiceAssistant(N))}else this.$editDiv=$(g.editDiv(m));return this.$pageDiv.append(this.$editDiv),this.$section.append(this.$pageDiv),L||M||(p(),l(),c(),u()),a(),r(),o(),i(),t(),d(),e(j),this.$section}},{key:"addEventListener",value:function(){this.addPageSoundAgent()}},{key:"addPageSoundAgent",value:function(){this.pageJson.properties.hasOwnProperty("music")&&(this.soundAgent=new _(this,this.eqxScene.soundManager))}},{key:"renderPageFilter",value:function(e){e&&e.create$pagefilter()}},{key:"renderGravity",value:function(e){e.$gravity?console.error("gravity already rendered"):this.$editDiv.prepend(e.create$gravity())}},{key:"addGravityJson",value:function(e){return this.deleteGravity(),this.addCompJson(e)}},{key:"deleteGravity",value:function(){var e=this;if(this.eqxGravity){var t=this.pageJson.elements.findIndex(function(t){return t.id===e.eqxGravity.compJson.id});t>-1&&this.pageJson.elements.splice(t,1),this.eqxGravity.delete$gravity(),this.eqxGravity=null}}},{key:"renderBg",value:function(e){e.$bg?console.error("background already rendered"):e.create$bg(this.$editDiv,this.width,this.height)}},{key:"addBgJson",value:function(e){return this.deleteBg(),this.addCompJson(e)}},{key:"deleteBg",value:function(){var e=this;if(this.eqxBackground){var t=this.pageJson.elements.findIndex(function(t){return t.id===e.eqxBackground.compJson.id});t>-1&&this.pageJson.elements.splice(t,1),this.eqxBackground.delete$bg(),this.eqxBackground=null}}},{key:"reEffectJson",value:function(e){this.pageJson.properties.effect=e}},{key:"addTriggerManager",value:function(){return this._triggerManager=new D(this),this._triggerManager}},{key:"addGroupManager",value:function(){return this._groupManager=new T(this),this._groupManager}},{key:"addFtManager",value:function(){return this._ftManager=new B(this),this._ftManager}},{key:"addScreenManager",value:function(){return this.screenManager=new E(this),this.screenManager}},{key:"addEffect",value:function(){var e=this,t=this.pageJson,n=t.num,i=t.properties.effect,o=this.eqxScene.config;return new Promise(function(t,r){if(!i||o.disablePageEffect||"gravity"===i.name)t();else{var a=e,s=function(e){if(a.hasCoverEffect=!0,1===n){var t=a.eqxScene.progressBar;t.hide(),a.bgm&&(a.bgm.hide(),a.bgm.stopPlay())}e&&a.hideElements()},c=function(e){a.hasCoverEffect=!1;var t=a.eqxScene.progressBar;t&&t.decide(),a.bgm&&a.bgm.show(),1===n&&a.bgm&&a.bgm.resumePlay(),e&&a.showElements()},l=i.name,u=e;m.load(l).then(function(n){u.effect=new n(e,i,u.$pageDiv,u.width,u.height,s,c),u.eqxScene.pageEffectManager.add(u.effect),u.effect.init(),t()})["catch"](function(e){console.log(e),r()})}})}},{key:"renderArrow",value:function(e){var t=this.eqxScene.config;e||(e=this.pageMode),this.forbidHandFlip||t.disableArrow||(this.arrow=new b(e,this),this.$section.append(this.arrow.$arrow))}},{key:"alignItem",value:function(e,t){var n=e.getBoundingRect(),i=function(e){return e.isGroupItem()?function(t,n){var i=e.getAllSubEqxComps();i.forEach(function(e){e.instantMove(t,n,!1)}),e.autoSize()}:function(t,n){e.instantMove(t,n,!1)}}(e);switch(t){case"左对齐":var o=-n.left;i(o,0);break;case"右对齐":var r=320-n.left-n.width;i(r,0);break;case"上对齐":var a=-n.top;i(0,a);break;case"下对齐":var s=this.getPageHeight(),c=s-n.top-n.height;i(0,c);break;case"水平居中对齐":var l=n.left,u=l+n.width/2,p=parseInt(160-u);i(p,0);break;case"垂直居中对齐":var d=this.getPageHeight(),h=n.top,f=h+n.height/2,g=parseInt(d/2-f);i(0,g);break;default:throw new Error("对齐元素位置类型"+t)}j("alignItem",t,n.toString(),"-->",e.getBoundingRect().toString(),e.id)}},{key:"initEqxBgByJson",value:function(e){return this.eqxBackground=new x(e,this),this.eqxBackground}},{key:"initEqxGravityByJson",value:function(e){return this.eqxGravity=new k(e,this),this.eqxGravity}},{key:"initEqxPagefilterByJson",value:function(e){return this.eqxPagefilter=new S(e,this),this.eqxPagefilter}},{key:"alignItems",value:function(e,t){if(0!==e.length){if(1===e.length)return this.alignItem(e[0],t);var n=this.groupManager||this.addGroupManager();e=n.filterNestedItems(e);var i=n.traceTopItemsContain(e),o=i.map(function(e){return e.getBoundingRect()}).join("\n"),r=i.filter(function(e){return e.isGroupItem()}),a=e.length;if(!(a<1)){for(var s=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,l=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,p=0;p<a;p++){var d=e[p],h=d.getBoundingRect(),f=h.center();d.$rect=h,d.$center=f,h.p1.x<s&&(s=h.p1.x),h.p1.y<l&&(l=h.p1.y),h.p2.x>c&&(c=h.p2.x),h.p2.y>u&&(u=h.p2.y)}var g=F((s+c)/2),m=F((l+u)/2);switch(t){case"左对齐":e.forEach(function(e){var t=e.$rect,n=s-t.left;e.instantMove(n,0,!1)});break;case"右对齐":e.forEach(function(e){var t=e.$rect,n=c-t.left-t.width;e.instantMove(n,0,!1)});break;case"上对齐":e.forEach(function(e){var t=e.$rect,n=l-t.top;e.instantMove(0,n,!1)});break;case"下对齐":e.forEach(function(e){var t=e.$rect,n=u-t.top-t.height;e.instantMove(0,n,!1)});break;case"水平居中对齐":e.forEach(function(e){var t=e.$center,n=g-t.x;e.instantMove(n,0,!1)});break;case"垂直居中对齐":e.forEach(function(e){var t=e.$center,n=m-t.y;e.instantMove(0,n,!1)});break;case"水平均分":if(a<2)return;var v=e.map(function(e){return e}).sort(function(e,t){return e.$center.x-t.$center.x});s=v[0].$center.x,c=v[a-1].$center.x;var y=(c-s)/(a-1);v.forEach(function(e,t){var n=s+y*t-e.$center.x;e.instantMove(n,0,!1)});break;case"竖直均分":if(a<2)return;v=e.map(function(e){return e}).sort(function(e,t){return e.$center.y-t.$center.y}),l=v[0].$center.y,u=v[a-1].$center.y,y=(u-l)/(a-1),v.forEach(function(e,t){var n=l+y*t-e.$center.y;e.instantMove(0,n,!1)});break;default:throw new Error("对齐元素位置类型"+t)}r.forEach(function(e){e.autoSize()});var b=i.map(function(e){return e.getBoundingRect()}).join("\n");j("alignItems\n",o,"\n-->\n",b)}}}},{key:"updateEqxComp",value:function(e,t){t=JSON.parse(JSON.stringify(t)),h(t,this.eqxScene.sceneJson,this.pageJson);var n=this.getEqxCompById(e);if(n)return delete t.id,delete t.num,delete t.pageId,delete t.sceneId,delete t.type,Object.assign(n.compJson,t),n}},{key:"isFunTemplate",value:function(){var e=this.pageJson.properties,t=e.pip,n=e.oneShot;if(t||n)return this.ftManager.ftRules.length}},{key:"isSpecialPage",value:function(){var e=this.pageJson.properties,t=e.pip,n=e.oneShot;return t||n}},{key:"getEqxCompByCoord",value:function(e,t){for(var n=this.eqxLayerList.length,o=[],r=n-1;r>=0;r--){var a=this.eqxLayerList[r];if(a.allowOperate){var s=a.eqxItems.filter(function(e){return!e.isGroupItem()}).sort(function(e,t){return t.css.zIndex-e.css.zIndex});o.push.apply(o,i(s))}}for(var c=0;c<o.length;c++)if(o[c].containsPoint(e,t))return o[c]}},{key:"getWxCompCount",value:function(){return this.pageJson.elements.reduce(function(e,t){return l.includes(t.type+"")&&(e+=1),e},0)}},{key:"getCompCountByType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.pageJson.elements.reduce(function(t,n){return e.includes(n.type+"")&&(t+=1),t},0)}},{key:"getWxClickFarmerCompCount",value:function(){return this.pageJson.elements.reduce(function(e,t){var n=t.type+"";return p.includes(n)&&t.properties.clickFarmer&&(e+=1),e},0)}},{key:"getCompName",value:function(e){if(e.name)return e.name;var t=I.find(function(t){return t.types.includes(e.type+"")});if(!t)return null;var n=t.types,i=this.getEqxComps().map(function(e){return e.compJson}).filter(function(e){return n.includes(e.type+"")}),o=0;return i.forEach(function(e){if(e.name){var n=new RegExp(t.name+"(\\d+)"),i=parseInt((n.exec(e.name)||[])[1]);i&&i>o&&(o=i)}}),t.name+(o+1)}},{key:"getOperableLayers",value:function(){return this.eqxLayerList.filter(function(e){return e.allowOperate})}},{key:"getEqxItems",value:function(){var e;return(e=[]).concat.apply(e,i(this.eqxLayerList.map(function(e){return e.eqxItems})))}},{key:"getDirectEqxItems",value:function(){var e;return(e=[]).concat.apply(e,i(this.eqxLayerList.map(function(e){return e.getDirectItems()})))}},{key:"getEqxItem",value:function(e){return e&&this.getEqxItems().find(function(t){return""+t.id==""+e})}},{key:"getEqxCompById",value:function(e){return this.getEqxItem(e)}},{key:"getEqxComps",value:function(){var e=[];return this.eqxLayerList.forEach(function(t){e.push.apply(e,i(t.getEqxComps()))}),e}},{key:"getEqxGroups",value:function(){var e=[];return this.eqxLayerList.forEach(function(t){e.push.apply(e,i(t.getEqxGroups()))}),e}},{key:"getZIndex",value:function(e){return e.compJson.css.zIndex}},{key:"initEqxCompById",value:function(e){var t=this.pageJson.elements.find(function(t){return t.id==e});return this.initEqxCompByJson(t)}},{key:"deleteEqxComp",value:function(e){this.deleteEqxItem(e)}},{key:"deleteEqxItem",value:function(e){if(e){var t=e.eqxLayer;t.deleteEqxItem(e),e.isGroupItem()||this.deleteTrigger(e)}}},{key:"deleteTrigger",value:function(e){var t=e.compJson.id,n=this.pageJson.properties;n.triggerGroup&&(n.triggerGroup=n.triggerGroup.filter(function(e){return e.sourceId.toString()!=-t.toString()&&e.targetId.toString()!==t.toString()}))}},{key:"renderEqxComp",value:function(e,t){e&&this.getCurrentLayer().renderEqxItem(e,t)}},{key:"initEqxCompByJson",value:function(e,t){if(e){this.getCompJsonById(e.id)||(e=this.addCompJson(e,t));var n=this.getEqxItem(e.id),i=v[e.type];if(n)return console.error("already init",e,n),null;if(!(i&&i.prototype instanceof y))return console.error("In Valid Type: "+e.type+" @Page"+this.pageJson.id,e),null;var o=this.getCurrentLayer(),r=new i(e,o);return o.initEqxItem(r),r}}},{key:"getCompJsonById",value:function(e){if(e){var t=this.getEqxItem(e);return t?t.compJson:void 0}}},{key:"addCompJson",value:function(e,t){var n=JSON.parse(JSON.stringify(e));return this.addPageInfo(n,t),h(n,this.eqxScene.sceneJson,this.pageJson),n}},{key:"addPageInfo",value:function(e,t){var n=this.pageJson,o=0;return u.indexOf(""+e.type)===-1&&(o=Math.max.apply(Math,[0].concat(i(this.getEqxItems().map(function(e){return e.zIndex})))),e.css.zIndex=e.css.zIndex||o+1),e.id||(e.id=f()),Object.assign(e,{id:e.id,pageId:n.id,sceneId:n.sceneId,num:o+1}),e.fromSource&&"psd"===e.fromSource?(delete e.fromSource,e):(t||(delete e.name,e.name=this.getCompName(e)),e)}},{key:"getLayer0ItemIds",value:function(){function e(e){for(var t=0;t<n.length;t++)for(var i=n[o].compIds,r=0;r<i;r++)if(i[r]===e)return!1;return!0}for(var t=this.pageJson.elements,n=this.pageJson["extends"].screens,i=[],o=0;o<t.length;o++){var r=t[o].id;e(r)&&i.push(r)}return i}},{key:"getEqxLayerById",value:function(){}},{key:"newEqxLayer",value:function(){}},{key:"mergeEqxLayers",value:function(){}},{key:"centerUI",value:function(){}},{key:"initTrigger",value:function(){}},{key:"addPageGroup",value:function(e){this.pageJson.groups=this.pageJson.groups||[],e.type&&this.pageJson.groups.push(e)}},{key:"getPageGroups",value:function(){return this.pageJson.groups||[]}},{key:"getPageGroupSettings",value:function(){var e=this.pageJson.properties;return e.groupSettings=e.groupSettings||[],e.groupSettings}},{key:"renderEqxCompById",value:function(e){return this.renderEqxComp(this.getEqxCompById(e))}},{key:"setIframeUlTopAndLeft",value:function(){var e,t=(this.width-320)/2,n=(this.height-486)/2;return e=this.width/this.height<=320/486?"scale("+this.width/320+")":"scale("+this.height/486+")",this.$ul.css({marginTop:n,marginLeft:t,transform:e}),{marginLeft:t,marginTop:n}}},{key:"resetZIndex",value:function(e){for(var t=e.length,n=t-1;n>=0;n--){var i=e[n];i.compJson.css.zIndex=t-n,i.update$li({zIndex:i.compJson.css.zIndex})}}},{key:"calAnimTime",value:function(){if(this.flash)return this.eqxLayerList.reduce(function(e,t){return e+t.calLayerAnimTime()},0);if(this.oneShot){var e=Math.max.apply(Math,i(this.eqxLayerList.map(function(e){return parseFloat(e.translate3dz+1)||0})));return e/80*1e3}return this.pip?1500:this.eqxLayerList[0].calLayerAnimTime()}},{key:"toggle",value:function(e,t){var n=this;this.timer?(clearTimeout(this.timer),this.timer=setTimeout(function(){e(t),n.timer=null},800)):this.timer=setTimeout(function(){e(t),n.timer=null},800)}},{key:"activePageEndHook",value:function(e){this.eqxScene.trackManager&&this.eqxScene.trackManager.lastPageTrack(e),this.eqxScene.eventManager.publish("activePageEnd",{pageInfo:e}),this.toggle(M,e)}},{key:"id",get:function(){return this.pageJson.id}},{key:"triggerManager",get:function(){return this._triggerManager||this.addTriggerManager()}},{key:"groupManager",get:function(){return this._groupManager||this.addGroupManager()}},{key:"ftManager",get:function(){return this._ftManager||this.addFtManager()}},{key:"eqxCompList",get:function(){return this.getEqxComps()}}]),e}();e.exports=G},function(e,t,n){"use strict";function i(){return'<section class="main-page"></section>'}function o(e){return'<div class="m-img" id="page'+e+'"></div>'}function r(e){return'<div class="edit_wrapper" data-scene-id="'+e+'" style="position: relative; z-index: 1"></div>'}function a(e){return'<ul id="edit_area'+e+'" class="edit_area weebly-content-area weebly-area-active"></ul>'}function s(){return'<section class="input-mask-page"></section>'}function c(e){$("#wechatSound")[0].muted=!1;for(var t=0;t<e;t++)v=setTimeout(function(){$("#wechatSound")[0].play()},1500*t)}function l(){$("#wechatSound")[0]&&(clearTimeout(v),$("#wechatSound")[0].muted=!0)}function u(e){var t=[];return e.mockItems.forEach(function(n,i){var o='<div class="message-item fade-out" style="animation-delay: '+(1.5*i+.5)+'s">\n                    <div class="other-sender '+(e.mockProp.memberList.find(function(e){return e.isSender===!0}).id===n.sender.id?"mine":"")+'">\n                        <div class="clearfix"></div>\n                        <div class="time" style="display: '+(n.isShowTime?"block":"none")+'">\n                            <span>'+n.sendTime+'</span>\n                        </div>\n                        <div\n                            style="display: '+(e.mockProp.showNickname?"block":"none")+'"\n                            class="nickname '+(e.mockProp.showHead?"":"head-hide")+'"\n                        >\n                            '+(n.sender.nickname||(e.mockProp.memberList.find(function(e){return e.isSender===!0}).id===n.sender.id?"发送者":"接收者"))+'\n                        </div>\n                        <span\n                            style="display: '+("text"===n.type?"inline-block":"none")+'"\n                            class="text-message '+(e.mockProp.showHead?"":"head-hide")+" "+(e.mockProp.showNickname?"nickname-show":"")+'">'+(n.message||"请输入文本消息")+'<span class="read-type is-read eqf-yes-l"\n                                style="display: '+(e.mockProp.showRead&&e.mockProp.memberList.find(function(e){return e.isSender===!0}).id===n.sender.id&&n.readed?"inline-block":"none")+'"></span>\n                            <span class="read-type not-read" style="display: '+(e.mockProp.showRead&&e.mockProp.memberList.find(function(e){return e.isSender===!0}).id===n.sender.id&&!n.readed?"inline-block":"none")+'"></span>\n                        </span>\n                        <span class="mock-head" style="display: '+(e.mockProp.showHead?"inline-block":"none")+'">\n                            <img src="'+n.sender.head+'" alt="" />\n                        </span>\n                    </div>\n                </div>';t.push(o)}),'<div class="mock-dialog-space style-'+e.mockProp.chatStyle+'">\n    <div class="head">\n        <span class="back">\n            <em class="eqf-left"></em>\n        </span>\n        <span class="name ellipsis">'+(e.mockProp.groupName||e.mockProp.memberList.find(function(e){return e.isSender===!1}).nickname)+'</span>\n        <span class="more">\n            <em class="eqf-menu-p"></em>\n        </span>\n    </div>\n    <div class="mock-content" style="height: '+(e.longPage-64)+'px" id="mockList">\n        '+t.join(" ")+'\n    </div>\n    <div class="footer">\n        <em class="eqf-mic-l"></em>\n        <div class="input-area"></div>\n        <em class="eqf-happy-l"></em>\n        <em class="eqf-plus-l"></em>\n    </div>\n</div>\n'}function p(e){m()&&(y=g());var t=[];return e.voiceProp.dialogueList.forEach(function(n,i){var o='\n        <div class="voice-space fade-out" ng-class="{\'margin-Style\': '+i+'===0 }" style="font-family: '+e.voiceProp.fontFamily+';">\n            <div class="voice-space-question fade-out" style="animation-delay:  '+n.question.delayTime+'s">\n                <audio id="'+n.question.music.id+'" src="'+(f.FILE+n.question.music.url)+'" preload/>\n                <div style="font-family: '+e.voiceProp.fontFamily+';">'+(n.question.text||"请输入文字内容")+'</div>\n            </div>\n            <div class="voice-space-answer fade-out" style="animation-delay: '+n.answer.delayTime+'s">\n                <audio id="'+n.answer.music.id+'" src="'+(f.FILE+n.answer.music.url)+'"  preload/>\n                <div style="font-family: '+e.voiceProp.fontFamily+';">'+(n.answer.text||"请输入文字内容")+"</div>\n            </div>\n    </div>";t.push(o)}),'<div class="voice-assistant-space" style="height: '+e.longPage+'px"> \n        '+t.join(" ")+"\n</div>\n"}function d(e,t){"view"===t.mode&&(t.voiceProp.dialogueList.forEach(function(e,t){e.answer.music&&$("#"+e.answer.music.id)[0].pause(),e.question.music&&$("#"+e.question.music.id)[0].pause()}),t.voiceProp.dialogueList.forEach(function(e,t){if(e.answer.music&&(e.answer.music.audioDelay=setTimeout(function(){function t(e,t){var n=void 0,i=document.getElementById(e);i.paused&&m()&&!t?n?(i.currentTime=0,i.play()):y.then(function(){wx.checkJsApi({jsApiList:["checkJsApi"],success:function(){n=!0,i.currentTime=0,i.play()}})}):(i.currentTime=0,i.play())}t(e.answer.music.id)},1e3*e.answer.delayTime)),e.question.music){var n=void 0,i=function(e,t){var i=document.getElementById(e);i.paused&&m()&&!t?n?(i.currentTime=0,i.play()):y.then(function(){wx.checkJsApi({jsApiList:["checkJsApi"],success:function(){n=!0,i.currentTime=0,i.play()}})}):(i.currentTime=0,i.play())};t?e.question.music.audioDelay=setTimeout(function(){i(e.question.music.id)},1e3*e.question.delayTime):i(e.question.music.id)}}))}function h(e,t){"view"===t.mode&&t.voiceProp.dialogueList.forEach(function(e,t){e.answer.music&&($("#"+e.answer.music.id)[0].pause(),clearTimeout(e.answer.music.audioDelay)),e.question.music&&($("#"+e.question.music.id)[0].pause(),clearTimeout(e.question.music.audioDelay))})}n(171),n(172),n(173);var f=n(24),g=n(69).getWxJSSDK,m=n(27).isWeixin;e.exports={section:i,pageDiv:o,editDiv:r,ul:a,inputMaskSection:s,mockDialog:u,mockDialogPlay:c,mockDialogStop:l,voiceAssistant:p,voiceAssistantPlay:d,clearTimeOutFun:h};var v=null,y=void 0},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";e.exports={load:function(e){return new Promise(function(t,i){switch(e.includes("fireworks")&&(e="fireWorks"),e.includes("snowFly")&&(e="snowFly"),e){case"finger":n.e(1,function(){return t(n(175))});break;case"money":n.e(2,function(){return t(n(179))});break;case"scratch":n.e(3,function(){return t(n(183))});break;case"snowFly":n.e(4,function(){return t(n(185))});break;case"fallingObject":n.e(5,function(){return t(n(187))});break;case"fireWorks":n.e(6,function(){return t(n(188))});break;case"gradient":n.e(7,function(){return t(n(189))});break;case"glassBreak":n.e(8,function(){return t(n(192))});break;default:var o="Invalid Effect name: "+e;console.error(o),i(o)}})}}},,,,,,,,,,,,,,,,,function(e,t){"use strict";function n(){var e=navigator.userAgent,t=e.indexOf("Opera")>-1;return t?"Opera":e.indexOf("Firefox")>-1?"FF":e.indexOf("Chrome")>-1?"Chrome":e.indexOf("Safari")>-1?"Safari":e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1&&!t?"IE":void 0}function i(){var e={Chrome:"-webkit-",FF:"-moz-",Opera:"-o-",Safari:"-webkit-"};return e[n()]||"-webkit-"}function o(e){return e in document.documentElement.style}function r(e){var t=e.originalEvent,n=t.touches,i=n?t.changedTouches[0]:null;return e=i?i:e}e.exports={getBrowserPrefix:i,isSupportStyle:o,getEvent:r}},,,,,function(e,t,n){"use strict";var i=n(197),o=n(199),r=n(202),a=n(206),s=n(212),c=n(216),l=n(222),u=n(225),p=n(229),d=n(239),h=n(246),f=n(250),g=n(100),m=n(251),v=n(295),y=n(299),b=n(318),x=n(321),w=n(349),k=n(353),S=n(361),I=n(369),T=n(393),$=n(396),E=n(398),P=n(402),_=n(417),C=n(453),A=n(460),O=n(463),q=n(464),L=n(469),M=n(472),R=n(473),j=n(475),F=n(479),B=n(482),D=n(484),J=n(485),N=n(486),z=n(490),W=n(491),H=n(495),Y=n(565),U=n(568),X=n(572),G=n(576),Q=n(580),V=n(582),K=n(583),Z=n(601),ee=n(604),te=n(610),ne=n(613),ie=n(615),oe=n(619),re=n(622),ae=n(625).EqxTurntable,se=n(641).EqxSmashEgg,ce=n(648).EqxScratchcard,le=n(653),ue=n(656),pe=n(658).EqxNineSquare,de=n(669),he=n(672),fe=n(684),ge=n(691),me=n(700),ve=n(701),ye={EqxReward:v,11:v,Exception:y,n11:y,EqxRandomContent:R,10:R,EqxRedPacket:b,9:b,EqxNewText:L,7:L,EqxHotNewText:M,1:M,EqxText:A,2:A,x:A,EqxDeepShare:O,298:O,EqxReport:q,299:q,EqxBackground:m,3:m,EqxTelephone:c,8:c,EqxComment:p,b:p,EqxShape:s,h:s,EqxCount:d,i:d,EqxLink:o,l:o,EqxChart:i,t:i,EqxImageSlider:a,p:a,EqxMap:r,m:r,EqxSound:l,s:l,EqxPv:u,d:u,EqxAdvertise:g,g:g,EqxDownTime:h,e:h,EqxUpTime:f,f:f,EqxUploadImages:Y,upload:Y,EqxScore:N,a:N,EqxCheckbox:z,c:z,EqxRadio:W,r:W,EqxDropDownList:j,z:j,EqxInput:F,5:F,501:F,EqxInputPhone:D,502:D,EqxInputEmail:B,503:B,504:F,505:J,EqxSubmitButton:H,6:H,601:H,12:U,EqxWxNickName:V,201:V,EqxWxProfile:K,401:K,EqxWxUploadImage:Z,403:Z,EqxWxSoundPlay:G,w01:G,EqxWxSoundRecord:Q,w02:Q,EqxTextVote:ee,k:ee,EqxImgVote:te,j:te,EqxDrawingBoard:ne,u:ne,EqxPhotoWall:x,13:x,14:oe,EqxPipButton:re,16:re,17:ie,EqxTurntable:ae,18:ae,EqxSmashEgg:se,19:se,EqxScratchcard:ce,20:ce,EqxRedPackets:le,21:le,EqxRedEnvelopes:ue,2021:ue,EqxNineSquare:pe,22:pe,EqxQrcode:de,23:de,EqxLongTouchSavePicButton:w,24:w,EqxWordArt:he,25:he,EqxSpeechRecognition:fe,26:fe,EqxMagicCube:ge,27:ge,EqxBuoy:me,28:me,29:X,30:k,31:E,32:S,33:T,34:I,35:$,36:P,66:ve,65:ve,37:_,EqxCustomerCare:C,38:C};e.exports=ye},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function h(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:h(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)};n(198);var c=n(25).$loadChart,l=n(101),u=n(66).toGoodStr,p=n(66).isBadStr,d=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{advanceStyle:{border:!1,shadow:!1,paddingTop:!1,borderWidth:!1,borderRadius:!1,borderStyle:!1,borderColor:!1,boxShadowSize:!1,boxShadowBlur:!1,boxShadowColor:!1,boxShadowDirection:!1}},trigger:{self:!1},sound:!1,link:!1}),r.pieOptions={segmentShowStroke:!1,
showTooltips:!1,scaleFontColor:"#000",legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><%if(segments[i].label){%><span style="background-color:<%=segments[i].fillColor%>"></span><%=segments[i].label%><%}%></li><%}%></ul>',animation:!1,onAnimationComplete:function(){var e=this.chart.ctx,t=this.segments;e.textAlign="start",e.textBaseline="middle";for(var n=0,i=0;i<t.length;i++)n+=parseFloat(t[i].value);e.fillText(n,e.width/2-20,e.height/2,100);for(var i=0;i<t.length;i++){var o=t[i].startAngle+(t[i].endAngle-t[i].startAngle)/2,r=(t[i].outerRadius-t[i].innerRadius)/1.5+t[i].innerRadius,a=t[i].x+Math.cos(o)*r,s=t[i].y+Math.sin(o)*r;e.textAlign="center",e.textBaseline="middle",e.fillStyle=this.options.scaleFontColor,e.font="normal 12px Helvetica",e.fillText(t[i].value,a,s)}}},r.barOptions={showTooltips:!1,scaleShowLabels:!0,scaleShowGridLines:!1,scaleBeginAtZero:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><%if(datasets[i].label){%><span style="background-color:<%=datasets[i].fillColor%>"></span><%=datasets[i].label%><%}%></li><%}%></ul>',animation:!1,onAnimationComplete:function(){var e=this.chart.ctx;e.fillStyle=this.options.scaleFontColor,e.font="normal 12px Helvetica",e.textAlign="center",e.textBaseline="bottom",this.datasets.forEach(function(t){t.bars.forEach(function(t){e.fillText(t.value,t.x,t.y)})})}},r.lineOptions={showTooltips:!1,scaleShowLabels:!0,scaleShowGridLines:!1,scaleBeginAtZero:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><%if(datasets[i].label){%><span style="background-color:<%=datasets[i].pointColor%>"></span><%=datasets[i].label%><%}%></li><%}%></ul>',animation:!1,onAnimationComplete:function(){var e=this.chart.ctx;e.font=this.scale.font,e.fillStyle=this.options.scaleFontColor,e.textAlign="center",e.textBaseline="bottom",this.datasets.forEach(function(t){t.points.forEach(function(n,i){0===i?e.fillText(n.value,n.x+10,n.y-5):i===t.points.length-1?e.fillText(n.value,n.x-10,n.y-5):e.fillText(n.value,n.x,n.y-5)})})}},r}return r(t,e),a(t,[{key:"create$context",value:function(){var e=this.compJson,t=$('<div class="create-chart" id="chart-'+e.id+'"></div>');this.perfectJson(e);var n=document.createElement("h5");n.setAttribute("class","chart-title"),t.append(n);var i=this.canvas=document.createElement("canvas");i.id=e.id,i.setAttribute("ctype",e.type),t.append(i);var o=document.createElement("div");o.id="legend-"+e.id,t.append(o);var r=this;return this.initedChart=new Promise(function(t){c().then(function(){r.initChart(o,i,n,e),t()})["catch"](function(e){return console.error(e)})}),t}},{key:"perfectJson",value:function(e){function t(e){n(e),i(e),o(e)}function n(e){e&&e.chartTitle&&(e.chartTitle=u(e.chartTitle))}function i(e){e&&e.segments&&e.segments.length&&e.segments.forEach(function(e){p(e.label)&&(e.label=u(e.label))})}function o(e){e&&e.lengends&&e.lengends.length&&e.lengends.forEach(function(t,n){p(t)&&(e.lengends[n]=u(t))})}var r=e.properties;n(r),t(r.pieChart),t(r.barChart),t(r.lineChart)}},{key:"initChart",value:function(e,t,n,i){var o,r=i.properties.chartType,a=t.getContext("2d"),s=parseFloat(i.css.width),c=parseFloat(i.css.height);$(t).css("width",s+"px"),$(t).css("height",c/2+"px"),t.width=parseInt(window.getComputedStyle(t).width),t.height=parseInt(window.getComputedStyle(t).height),"pie"===r?o=this.pieChart=this.createPieChart(a):"bar"===r?o=this.barChart=this.createBarChart(a):"line"!==r&&"curve"!==r||(o=this.lineChart=this.createLineChart(a,r)),i.properties.chartTitle&&(n.innerHTML=i.properties.chartTitle),"pie"===r&&i.properties.pieChart&&(o=this.pieChart=this.setPieChartView(i,a,o),$(t).data("pieChart",o)),"bar"===r&&i.properties.barChart&&(o=this.barChart=this.setBarChartView(i,a,o),$(t).data("barChart",o)),"line"!==r&&"curve"!==r||!i.properties.lineChart||(o=this.lineChart=this.setLineChartView(i,a,o),$(t).data("lineChart",o)),e.innerHTML=o.generateLegend();var l=i.properties.legPosition;"position-align"===l?$(e).addClass("position-align"):"position-right"===l?$(e).addClass("position-right"):"position-none"===l&&$(e).addClass("position-none")}},{key:"getChartValue",value:function(e){for(var t,n=[],i=[],o=[],r=[],a="",s="",c="",l="",u=0;u<e.segments.length;u++)t=e.segments[u],a=isNaN(t.value)||t.value<0?"":t.value,s=isNaN(t.value1)||t.value1<0?"":t.value1,c=isNaN(t.value2)||t.value2<0?"":t.value2,l=isNaN(t.value3)||t.value3<0?"":t.value3,(t.label||a||s||c||l)&&(r.push(t.label),s=a||s,n.push(s),i.push(c),o.push(l));return{data1:n,data2:i,data3:o,xLabels:r}}},{key:"setLineChartView",value:function(e,t,n){var i=e.properties.lineChart,o=this.getChartValue(i),r=[],a=[];n.datasets.forEach(function(e){r.push(e.strokeColor),a.push(e.fillColor)});var s={labels:o.xLabels,datasets:[{label:i.lengends[0],fillColor:a[0],strokeColor:r[0],pointColor:r[0],pointStrokeColor:"#fff",data:o.data1},{label:i.lengends[1],fillColor:a[1],strokeColor:r[1],pointColor:r[1],pointStrokeColor:"#fff",data:o.data2},{label:i.lengends[2],fillColor:a[2],strokeColor:r[2],pointColor:r[2],pointStrokeColor:"#fff",data:o.data3}]},c=n.options;return i.options&&i.options.scaleFontColor&&(c.scaleFontColor=i.options.scaleFontColor),n.destroy(),n=new Chart(t).Line(s,c),n.datasets.forEach(function(e){var t=!0;e.points.forEach(function(e){e.value&&(t=!1)}),t?e.points.length=0:e.points.forEach(function(e){e.value||(e.value=0)})}),n.update(),n}},{key:"setBarChartView",value:function(e,t,n){var i=n.options,o=e.properties.barChart,r=this.getChartValue(o),a={labels:r.xLabels,datasets:[{fillColor:o.fillColors[0],strokeColor:"rgba(0,0,0,0)",data:r.data1,label:o.lengends[0]},{fillColor:o.fillColors[1],strokeColor:"rgba(0,0,0,0)",data:r.data2,label:o.lengends[1]},{fillColor:o.fillColors[2],strokeColor:"rgba(0,0,0,0)",data:r.data3,label:o.lengends[2]}]};return o.options&&o.options.scaleFontColor&&(i.scaleFontColor=o.options.scaleFontColor),n.destroy(),new Chart(t).Bar(a,i)}},{key:"setPieChartView",value:function(e,t,n){var i=n.options,o="#000",r=e.properties.pieChart;r.options&&r.options.scaleFontColor&&(o=r.options.scaleFontColor),i.scaleFontColor=o;var a=this.getChartValue(r),s=a.data1.map(function(e,t){return{value:e,color:r.fillColors[t],label:a.xLabels[t]}});return n.destroy(),new Chart(t).Pie(s,i)}},{key:"getPixelRatio",value:function(e){var t=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t}},{key:"createPieChart",value:function(e){var t=[{value:300,color:"#57c7d4",label:"1月"},{value:150,color:"#3aa99e",label:"2月"},{value:100,color:"#f2a654",label:"3月"},{value:140,color:"#f96868",label:"4月"},{value:120,color:"#926dde",label:"5月"}],n=new Chart(e).Pie(t,this.pieOptions);return n}},{key:"createBarChart",value:function(e){var t={labels:["1月","2月","3月","4月","5月"],datasets:[{fillColor:"#62a8ea",strokeColor:"rgba(0,0,0,0)",data:[60,70,80,56,40],label:"图例1"},{fillColor:"#926dde",strokeColor:"rgba(0,0,0,0)",data:[80,56,40,93,112],label:"图例2"},{fillColor:"#f2a654",strokeColor:"rgba(0,0,0,0)",data:[160,86,140,123,23],label:"图例3"}]},n=new Chart(e).Bar(t,this.barOptions);return n}},{key:"createLineChart",value:function(e,t){var n,i=this.compJson.properties.lineChart;n=i&&i.fillColors&&i.fillColors.length>2?i.fillColors:["rgba(146,109,222,1)","rgba(87,199,212,1)","rgba(242,166,84,1)"];var o=n.map(function(e){return e.replace(/[^,]+(?=\))/,"0")});this.lineOptions.bezierCurve=!1,"curve"===t&&(o=o.map(function(e){return e.replace(/[^,]+(?=\))/,"0.2")}),this.lineOptions.bezierCurve=!0);var r={labels:["1月","2月","3月","4月","5月"],datasets:[{label:"图例1",fillColor:o[0],strokeColor:n[0],pointColor:n[0],pointStrokeColor:"#fff",data:[28,24,40,19,27]},{label:"图例2",fillColor:o[1],strokeColor:n[1],pointColor:n[1],pointStrokeColor:"#fff",data:[123,132,146,118,189]},{label:"图例3",fillColor:o[2],strokeColor:n[2],pointColor:n[2],pointStrokeColor:"#fff",data:[201,232,256,215,278]}]},a=new Chart(e).Line(r,this.lineOptions);return a}},{key:"updateSize",value:function(e,n){var i=parseFloat(n.width),o=parseFloat(n.height),r=this.canvas,a=r.getContext("2d"),c=this.compJson,l=c.properties.chartType,u=null;$(r).css("width",i+"px"),$(r).css("height",o/2+"px"),r.width=parseInt(window.getComputedStyle(r).width),r.height=parseInt(window.getComputedStyle(r).height),"pie"===l?u=this.pieChart=this.createPieChart(a):"bar"===l?u=this.barChart=this.createBarChart(a):"line"!==l&&"curve"!==l||(u=this.lineChart=this.createLineChart(a,l)),"pie"===l&&c.properties.pieChart&&(u=this.pieChart=this.setPieChartView(c,a,u),$(r).data("pieChart",u)),"bar"===l&&c.properties.barChart&&(u=this.barChart=this.setBarChartView(c,a,u),$(r).data("barChart",u)),"line"!==l&&"curve"!==l||!c.properties.lineChart||(u=this.lineChart=this.setLineChartView(c,a,u),$(r).data("lineChart",u)),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSize",this).call(this,e,n)}}]),t}(l);e.exports=d},function(e,t){},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=e.id,n=e.type,i=e.title,o=void 0===i?"":i,r=e.imgSrc,a=void 0===r?"":r,s=e.width,c=void 0===s?0:s,u=e.height,h=void 0===u?0:u,f=e.padding;c=l(c),h=l(h);var g=o.replace(/ /g,"&nbsp;"),m=a?'<img style="width: 100%; height: 100%;" src="'+a+'">':g;return d(p,{id:t,type:n,width:c,height:h,content:m,padding:f})}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function g(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:g(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)};n(200);var l=n(166).addSuffixPx,u=n(101),p=n(201),d=n(36).parse,h=(n(26).openUrl,n(67).getForbiddenImages),f=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{self:!0,fontFamily:!1,fontColor:!0}},trigger:{self:!1},sound:!1,link:!1}),r}return r(t,e),s(t,[{key:"getFtEditableProps",value:function(){var e=c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtEditableProps",this).call(this),n=this.FtEditableProps;return e.concat([n.link.url,n.internalLink.internalLink,n.telephone.number])}},{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.properties,o=i.imgSrc,r=i.title,s=e.css,c=s.width,l=s.height;if(o){o=this.getImgSrc(o,{width:c,height:l});var u="0"}else u="0 8px";this.$context=$(a({id:t,type:n,imgSrc:o,title:r,width:c,height:l,padding:u}));var p=h();return p.length>0&&e.properties.imgSrc&&p.includes(e.properties.imgSrc)&&this.$boxContentDiv.css({display:"none"}),this.$context}},{key:"bindAfterRenderEvent",value:function(e,t){}},{key:"updateBtnTitle",value:function(e){this.compJson.properties.imgSrc||(this.$context[0].innerText=e)}},{key:"deleteImage",value:function(){this.compJson.properties.imgSrc||(this.$context[0].innerText="")}}]),t}(u);e.exports=f},function(e,t){},function(e,t){e.exports='<span id="#{id}" ctype="#{type}" class="element eqx-link editable-text" style="cursor: default; width: 100%; height: 100%; display: flex;\n   justify-content: center; align-items:center; padding: #{padding}" data-event="1120601">#{content}</span>'},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(25).$loadAMap,c=n(25).$loadQQMap,l=n(101),u=n(36).parse;n(203);var p=n(204),d=n(27).isWeixin,h=n(27).isWeChatMiniProgram,f=n(28),g=f.isMiniWebViewLoad,m=n(205),v=m.openWxMiniMap,y=n(69).getWxJSSDK,b=n(26).openUrl,x=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{advanceStyle:{shadow:!1,paddingTop:!1,borderWidth:!0,borderRadius:!0,borderStyle:!0,borderColor:!0,boxShadowSize:!1,boxShadowBlur:!1,boxShadowColor:!1,boxShadowDirection:!1}},trigger:{self:!1},sound:!1,link:!1}),r}return r(t,e),a(t,[{key:"create$context",value:function(){var e=this,t=this.compJson,n=t.id,i=t.type,o=t.content,r=t.css.width,a=t.properties,l=a.lat,d=void 0===l?39.916527:l,h=a.lng,f=void 0===h?116.397128:h,g=a.zoom,m=void 0===g?11:g,v=a.address,y=a.version,b=t.content||t.properties.address;if(t.properties.graphicalStyle=t.properties.graphicalStyle||"square",1==y){var x="https://3gimg.qq.com/lightmap/v1/marker/index.html?marker=coord:"+d+","+f+";title:"+o+";addr:"+v+"&referer=myapp",w="";w="customer"===t.properties.layout?p.$customerHtml({contentDes:b}):p.$defalutHtml({url:x})}else w="customer"===t.properties.layout?p.$customerHtml({contentDes:b}):p.$htmlText({content:o,address:v,width:r});var k=$(u(w,{id:n,type:i})).css({width:"100%",height:"100%"}).on("mousedown mousemove mouseup mouseleave touchstart touchmove touchend",function(e){e.stopPropagation()});return 1==y&&"view"==this.eqxScene.config.mode?console.log("不加载高德地图"):"view"==this.eqxScene.config.mode?c().then(function(){1!=y&&"customer"!==t.properties.layout&&e.initQQMap({$context:k,content:o,lat:d,lng:f,zoom:m})}):s().then(function(){c().then(function(){1!=y&&"customer"!==t.properties.layout&&e.initQQMap({$context:k,content:o,lat:d,lng:f,zoom:m})})}),this.updateOmit(),k}},{key:"updateContent",value:function(){this.$context.remove(),this.$context=this.create$context(),this.$contentsDiv.append(this.$context)}},{key:"initQQMap",value:function(e){var t=e.$context,n=e.content,i=e.lat,o=e.lng,r=e.zoom,a=new qq.maps.LatLng(i,o),s={disableDefaultUI:!0,center:a,zoom:parseFloat(r)},c=this.map=new qq.maps.Map(t[0],s);n&&(this.label=new qq.maps.Label({position:a,map:c,content:n}));var l=new qq.maps.Marker({map:c,position:a});t.data("marker",l)}},{key:"updateOmit",value:function(){function e(){var e=t.$boxDiv.find(".navigation"),n=t.$boxDiv.find(".navigation_pad"),i=e.parent().height(),o=n.height();if(i-12<o){e.removeClass("omits"),e.removeClass("omit-height");var r=i-12-30,a=parseInt(r/20)+1;e.addClass("omits"),e.css("-webkit-line-clamp",""+a)}else e.removeClass("omits"),e.addClass("omit-height")}var t=this;setTimeout(function(){e()},0)}},{key:"bindAfterRenderEvent",value:function(e,t){function n(){if(h()){var e={name:i,lon:l,lat:s,address:u,scale:m};if(g())v(e);else{var t={evtType:"location",evtInfo:e};window.parent.postMessage(t,"*")}}else d()?y().then(function(){wx.openLocation({latitude:s,longitude:l,address:u,name:i})}):b(x,o)}var i=t.content,o=t.pageId,r=t.properties,a=r.lat,s=void 0===a?39.916527:a,c=r.lng,l=void 0===c?116.397128:c,u=r.address,p=r.layout,f=r.version,m=r.zoom,x="//apis.map.qq.com/tools/routeplan/eword="+u+"&epointx="+l+"&epointy="+s+"?referer=myapp&key=OB4BZ-D4W3U-B7VVO-4PJWW-6TKDJ-WPB77";"customer"===p?$(e).click(function(){n()}):(0==f&&"default"==p||void 0==f)&&$(e).find(".go-here").click(function(){n()})}}]),t}(l);e.exports=x},function(e,t){},function(e,t,n){"use strict";function i(e){var t=e.contentDes,n='<div id="#{id}" ctype="#{type}" class="element">\n                                <span class="mapBtn_div navigation">\n                                     <i class="eqf-address-f address"></i>\n                                     <span class="style-btn default  navigation_pad">\n                                         导航至'+a(t)+"\n                                     </span>\n                                </span>\n                           </div>";return $(n)}function o(e){var t=e.url,n='<div id="#{id}" ctype="#{type}" class="element"><iframe src='+a(t)+' width="100%" height="100%" class="map-iframe"></iframe></div>';return $(n)}function r(e){var t=e.content,n=e.address,i=(e.width,'<div id="#{id}" ctype="#{type}" class="element">\n                        <div class="map-nav-box">\n                            <div class="address-name">\n                                <p style="max-width: 40%" maxLength=\'10\'>'+a(t)+'</p>\n                                <p style="max-width: 30%">'+a(n)+'</p>\n                            </div>\n                        </div>\n                        <div class="go-here">\n                                <i class="eqf-send-f"></i>\n                                <span>路线</span>\n                            </div>\n                    </div>');return $(i)}var a=n(66).perfectStr;e.exports={$customerHtml:i,$defalutHtml:o,$htmlText:r}},function(e,t,n){"use strict";function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map(function(t){return t+"="+e[t]}).join("&")}function o(e){var t=e.url,n=e.params;if(t)if(t.indexOf(u)!==-1)r(t);else{var o=t,s=i(n);s&&(o+=o.indexOf("?")!==-1?"&"+i(n):"?"+i(n)),a(o)}}function r(e){l().then(function(){wx.miniProgram.switchTab({url:e})})}function a(e){l().then(function(){wx.miniProgram.navigateTo({url:e})})}function s(e){var t="/page/map/map?address="+e.address+"&lat="+e.lat+"&lon="+e.lon+"$name="+e.name+"&scale="+e.scale;a(t)}var c=n(25),l=c.$loadJWeixin,u="/page/mall/mall";e.exports={navigateTo:a,switchTab:r,openWxMiniPath:o,openWxMiniMap:s}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v[0].value;return v.find(function(t){var n=t.value;return n===e})}function s(e){var t=e.imgW,n=e.imgH,i=e.containerW,o=e.containerH,r={},a=t/n,s=i/o;return a>s?(r.width=i,r.height=i/a):(r.height=o,r.width=o*a),r.margin=(o-n)/2+"px "+(i-t)/2+"px",r}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function b(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:b(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)};n(207),n(208);var u=n(209),p=n(210),d=n(26).openUrl,h=n(191).getEvent,f=n(211).$getAuditResult,g="#imgIndex",m=n(101),v=[{value:1,desc:"轮播",name:"slide"},{value:2,desc:"下落",name:"bars"},{value:3,desc:"百页窗",name:"blinds"},{value:4,desc:"消隐",name:"blocks"},{value:5,desc:"渐变",name:"blocks2"},{value:9,desc:"梳理",name:"zip"},{value:11,desc:"翻转",name:"bars3d"},{value:13,desc:"立方体",name:"cube"},{value:14,desc:"棋盘",name:"tiles3d"},{value:16,desc:"飞出",name:"explode"}],y=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.intervalObj={},$.extend(!0,r.$ability,{style:{self:!0,compStyle:{backgroundColor:!0}},anim:!0,trigger:{self:!1},sound:!1,link:!1}),r._viewStyle=e.properties.viewStyle,r}return r(t,e),c(t,[{key:"updateSize",value:function(e,n){n.width&&n.height&&(1===this.compJson.properties.viewStyle?(this.flux.width=n.width,this.flux.height=n.height,this.$context.find(".fluxslider, .images, .image1, .image2").css({width:n.width,height:n.height})):5===this.compJson.properties.viewStyle||(this.$context.empty(),this.createStyle2(this.$context),this.setTextHeight()),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSize",this).call(this,e,n))}},{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.properties;i=void 0===i?{}:i;var o=i.viewStyle,r=void 0===o?1:o,a=e.css.backgroundColor,s=$('<div id="'+t+'" class="imageSlider element" ctype="'+n+'"></div>').css({"background-color":a});return s.removeClass("swiper-container"),1===r?this.createStyle1(s):5===r?this.createStyle3(s):this.createStyle2(s),s}},{key:"eleShow",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleShow",this).call(this),5===this.compJson.properties.viewStyle&&this.create$context()}},{key:"eleHide",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleHide",this).call(this)}},{key:"createStyle1",value:function(e){var t=this,n=this.compJson;e.removeClass("swiper-film");var i=n.id,o=n.properties;o=void 0===o?{}:o;var r=o.children,a=void 0===r?[]:r,c=n.css,l=c.width,u=c.height;if(a.length){var p=a.map(function(e,n){var i=e.width,o=e.height,r=e.src,a=(e.href,s({imgW:i,imgH:o,containerW:l,containerH:u}));r=t.getImgSrc(r,{width:l,height:u});var c=$('<img src="'+r+'" play-id="'+n+'">').css(a);return c});e.append(p),this.deleteInterval(i),this.initFlux(e,a)}}},{key:"createStyle2",value:function(e){var t=this;e.removeClass("imageSlider").addClass("image-slider"),e.removeClass("swiper-film");var n=this.compJson,i=n.properties,o=n.css,r=i.viewStyle,a=i.children,s=i.imageText,c=i.bgColor,l=i.imageTitle,u=i.imageDetail,p=o.width,d=JSON.parse(JSON.stringify(a));for(var h in d)d[h].src=d[h].src+(""+g+h);if(2===r){var f=this.style2Carriers=["image-slider-style2-current","image-slider-style2-right1","image-slider-style2-right2","image-slider-style2-alternate","image-slider-style2-left2","image-slider-style2-left1"],m=d[0],v=parseInt(p-60),y=parseInt(v*m.height/m.width),b=y+s.showHeight,x=this.$imgBases=f.map(function(e,t){var n=$('\n                    <div class="image-slider-style2 '+f[t]+'"\n                        style="width: '+v+"px; height: "+b+"px; background-color: "+c+'">\n                        <a><img style="width: '+v+"px; height: "+y+'px" /></a>\n                        <div class="image-slider-img-title"\n                            style="\n                                font-size: '+l.fontSize+"px;\n                                color: "+l.color+"; \n                                display: "+("enable"===l.state?"block":"none")+";\n                                font-weight: "+(l.weight&&"bold")+';\n                                word-break:break-all;\n                                "\n                        >\n                        </div>\n                        <div class="image-slider-img-detail"\n                            style="\n                                font-size: '+u.fontSize+"px; \n                                color: "+u.color+";\n                                display: "+("enable"===u.state?"block":"none")+';\n                                word-break:break-all;\n                                "\n                        >\n                        </div>\n                    </div>\n                ');return n}),w=d.length,k=d[0],S=d[1],I=d[2%w],T=d[w-1],E=d[w-2],P=d[(w-3+w)%w],_=[];_=1==w?[k,k,k,k,k,k]:[k,S,I,P,E,T],_.forEach(function(e,n){var o=x[n];o.data("childrenIndex",n);var r=e;t.tap(o,r,n,d);var a=o.children();a.first().find("img").attr("src",decodeURI(t.getImgSrc(e.src)));var s=a.first().next();i.imageTitle&&"enable"===i.imageTitle.state&&(s=s.text(e.title)),s=s.next(),i.imageDetail&&"enable"===i.imageDetail.state&&s.text(e.detail)}),this.imgSrcState={pos:3,neg:-3,len:w,children:d},e.append(x),this.imgDomIndex=0,this.next=this.next2.bind(this)}if(3===r){var C=this.style3Carriers=["image-slider-style3-current","image-slider-style3-right1","image-slider-style3-alternate","image-slider-style3-left1"],A=d[0],O=parseInt(p-60),q=parseInt(O*A.height/A.width),L=q+s.showHeight,M=this.$imgBases=C.map(function(e,t){var n=$('\n                    <div class="image-slider-style3 '+C[t]+'"\n                        style="width: '+O+"px; height: "+L+"px; background-color: "+c+'">\n                        <a><img style="width: '+O+"px; height: "+q+'px" /></a>\n                        <div class="image-slider-img-title"\n                            style="font-size: '+l.fontSize+"px; color: "+l.color+"; font-weight: "+(l.weight&&"bold")+";\n                            display: "+("enable"===l.state?"block":"none")+';word-break:break-all;\n                            "\n                        >\n                        </div>\n                        <div class="image-slider-img-detail"\n                            style="font-size: '+u.fontSize+"px; \n                            color: "+u.color+";\n                            display: "+("enable"===u.state?"block":"none")+';word-break:break-all;\n                            "\n                        >\n                        </div>\n                    </div> \n                ');return n}),R=d.length,j=d[0],F=d[1],B=d[R-1],D=d[(R-3+R)%R],J=[];J=1==R?[j,j,j,j]:[j,F,D,B],J.forEach(function(e,n){var o=M[n];o.data("childrenIndex",n);var r=e;t.tap(o,r,n,d);var a=o.children();a.first().find("img").attr("src",decodeURI(t.getImgSrc(e.src)));var s=a.first().next();i.imageTitle&&"enable"===i.imageTitle.state&&(s=s.text(e.title)),s=s.next(),i.imageDetail&&"enable"===i.imageDetail.state&&s.text(e.detail)}),this.imgSrcState={pos:2,neg:-2,len:R,children:d},e.append(M),this.imgDomIndex=0,this.next=this.next3.bind(this)}if(4===r){var N=this.style4List=["image-slider-style4-current","image-slider-style4-up1","image-slider-style4-up2","image-slider-style4-below3","image-slider-style4-below2","image-slider-style4-below1"],z=d[0],W=parseInt(p-40),H=parseInt(W*z.height/z.width),Y=H+s.showHeight+10,U=this.$imgBases=N.map(function(e,t){var n=$('\n                    <div class="image-slider-style4 '+N[t]+'"\n                        style="width: '+(W+20)+"px; height: "+Y+"px; background-color: "+c+';">\n                        <div style="height: '+s.showHeight+'px">\n                            <div class="image-slider-img-title"\n                                style="font-size: '+l.fontSize+"px; color: "+l.color+"; font-weight: "+(l.weight&&"bold")+";\n                                    display: "+("enable"===l.state?"block":"none")+';\n                                    word-break:break-all;\n                                    "\n                            >\n                            </div>\n                            <div class="image-slider-img-detail"\n                                style="font-size: '+u.fontSize+"px; \n                                    color: "+u.color+";\n                                    display: "+("enable"===u.state?"block":"none")+';\n                                    word-break:break-all;\n                                    "\n                            >\n                            </div>\n                        </div>\n                        <a><img style="width: '+W+"px; height: "+H+'px" /></a>                        \n                    </div> \n                ');return n}),X=d.length,G=d[0],Q=d[1],V=d[2%X],K=d[X-1],Z=d[X-2],ee=d[(X-3+X)%X],te=[G,Q,V,ee,Z,K];1==X&&(te=[G,G,G,G,G,G]),U.forEach(function(e,n){var o=n,r=te[o];t.tap(e,r,n,d),e.data("childrenIndex",o),i.imageTitle&&"enable"===i.imageTitle.state&&e.find(".image-slider-img-title").text(r.title),i.imageDetail&&"enable"===i.imageDetail.state&&e.find(".image-slider-img-detail").text(r.detail),e.find("a > img").attr("src",t.getImgSrc(r.src))}),this.imgSrcState={pos:3,neg:-3,len:X,children:d},e.append(U),this.imgDomIndex=0,this.next=this.next4.bind(this)}return e}},{key:"createStyle3",value:function(e){var t=this,n=this.compJson,i=this.compJson,o=i.properties,r=(i.css,o.viewStyle,o.bgColor,n.id),a=n.properties;a=void 0===a?{}:a;var c=a.children,l=void 0===c?[]:c,d=a.autoPlay,h=a.interval,f=n.css,m=f.width,v=f.height,y=JSON.parse(JSON.stringify(l));for(var b in y)y[b].src=y[b].src+(""+g+b);var x=y.map(function(e,n){var i=e.width,o=e.height,r=e.src;e.href,s({imgW:i,imgH:o,containerW:m,containerH:v});r=t.getImgSrc(r,{width:m,height:v});var a=$('<div class="swiper-slide" style="position: relation;">\n                <div class="film-top" style="background: black url('+u+');\n    background-size: 20px 26px; background-repeat: space;"></div>\n                <img style="width: 100%; height: 100%" src="'+r+'">\n                <div class="film-bottom" style="background: black url('+p+');\n    background-size: 20px 26px; background-repeat: space;"></div>\n            </div>');return a}),w=$('<div class="swiper-wrapper" style="width: 100%; height: 20%; top: 40%;"></div>');w.append(x),e.append(w),this.deleteInterval(r),e.removeClass("imageSlider").addClass("swiper-film"),d="view"==this.eqxPage.eqxScene.config.mode&&d,e.addClass("swiper-container"),this.initSwiper(e,y,d,h)}},{key:"next2",value:function(){var e=this.$imgBases,t=this.imgSrcState,n=this.imgDomIndex,i=this.style2Carriers,o=t.pos,r=t.neg,a=t.len,s=t.children,c=this.direction?-1:1,l=void 0;l=this.direction?(r+2*a)%a:o%a;var u=s[l],p=u.src,d=u.title,h=u.detail,f=e.find(function(e){return e.hasClass("image-slider-style2-alternate")});f.find("img").attr("src",this.getImgSrc(p)),f.find(".image-slider-img-title").text(d).next().text(h);var g=i.length;e.forEach(function(e,t){var o=(t-n+g)%g,r=(o-c+g)%g;e.addClass(i[r]).removeClass(i[o])}),this.direction?(t.pos=(o-1+a)%a,t.neg=(r-1)%a):(t.pos=(o+1+a)%a,t.neg=(r+1-a)%a),this.imgDomIndex=(n+c+g)%g,this.direction=!1}},{key:"next3",value:function(){var e=this.$imgBases,t=this.imgSrcState,n=this.imgDomIndex,i=this.style3Carriers,o=t.pos,r=t.neg,a=t.len,s=t.children,c=this.direction?-1:1,l=void 0;l=this.direction?(r+a)%a:o%a;var u=s[l],p=u.src,d=u.title,h=u.detail,f=e.find(function(e){return e.hasClass("image-slider-style3-alternate")});f.find("img").attr("src",this.getImgSrc(p)),f.find(".image-slider-img-title").text(d).next().text(h);var g=i.length;e.forEach(function(e,t){var o=(t-n+g)%g,r=(o-c+g)%g;e.addClass(i[r]).removeClass(i[o])}),this.direction?(t.pos=(o-1+a)%a,t.neg=(r-1)%a):(t.pos=(o+1)%a,t.neg=(r+1-a)%a),this.imgDomIndex=(n+c+g)%g,this.direction=!1}},{key:"next4",value:function(){var e=this.$imgBases,t=this.imgSrcState,n=this.imgDomIndex,i=this.style4List,o=t.pos,r=t.neg,a=t.len,s=t.children,c=this.direction?-1:1,l=void 0;l=this.direction?o%a:(r+2*a)%a;var u=s[l],p=u.src,d=u.title,h=u.detail,f=e.find(function(e){return e.hasClass("image-slider-style4-below3")});f.find("img").attr("src",this.getImgSrc(p)),f.find(".image-slider-img-title").text(d).next().text(h);var g=i.length;e.forEach(function(e,t){var o=(t-n+g)%g,r=(o+c+g)%g;e.addClass(i[r]).removeClass(i[o]);
}),this.direction?(t.pos=(o+1+a)%a,t.neg=(r+1-a)%a):(t.pos=(o-1+a)%a,t.neg=(r-1)%a),this.imgDomIndex=(n-c+g)%g,this.direction=!1}},{key:"newClickJumpFun",value:function(e){if(console.log(e,"点击每一项的数据-----"),e&&2==e.modeChoice&&e.targetJumpPage){var t=e.targetJumpPage,n=this.eqxPage.eqxScene.eqxPageList,i=n.findIndex(function(e){return e.pageJson.id==t});this.eqxPage.eqxScene.renderPage(i),this.eqxPage.eqxScene.pageScroll.goToPageById(t)}e&&3==e.modeChoice&&(window.location.href="tel:"+e.targetContent),e&&1==e.modeChoice&&setTimeout(function(){e.targetContent.startsWith("http://")&&window.location.href.startsWith("https://")&&/eqs\/link\?id=\d+&url=(.*)/.test(e.targetContent)&&(e.targetContent=e.targetContent.replace("http://","https://")),/eqs\/link\?id=\d+&url=(.*)/.exec(e.targetContent)&&(e.targetContent=(/eqs\/link\?id=\d+&url=(.*)/.exec(e.targetContent)||[])[1]);var t=e.targetContent;f({checkUrl:t,sceneId:window.scene.id}).then(function(t){t?d(decodeURIComponent(e.targetContent)):window.open("https://check.eqxiu.com/back-check/static/url.html?jumpUrl="+e.targetContent,"_self")})},1e3)}},{key:"tap",value:function(e,t,n,i){var o=n,r=t,a=this,s=0,c=0,l=0,u=0,p=0,d=0,f=15,m=!1;!function(t,n,i){e.on("mousedown touchstart",function(t){var o=h(t);s=o.timeStamp,l=o.clientX,u=o.clientY,m=!1,e.on("mousemove touchmove",function(e){var t=h(e);p=t.clientX,d=t.clientY,(Math.abs(p-l)>f||Math.abs(d-u)>f)&&(m=!0)}),e.on("mouseup touchend",function(t){var o=h(t);if(e.off("mousemove touchmove"),e.off("mouseup touchend mouseleave"),c=o.timeStamp,!m){for(var r=o.target.currentSrc,s=void 0,l=0;l<i.length;l++){var u=g+r.split(g)[1];if(i[l].src.search(u)>-1){s=l;break}}n=i[s],a.newClickJumpFun(n)}}),e.on("mouseleave",function(t){var o=h(t);if(e.off("mousemove touchmove"),e.off("mouseup touchend mouseleave"),c=o.timeStamp,!m){for(var r=o.target.currentSrc,s=void 0,l=0;l<i.length;l++){var u=(""+r).split(i[l].src);if(u.length>1){s=l;break}}n=i[s],a.newClickJumpFun(n)}})})}(o,r,i)}},{key:"bindAfterRenderEvent",value:function(e,n){var i=this;l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"bindAfterRenderEvent",this).call(this,e,n),this._viewStyle>1&&this._viewStyle<5&&(n.properties.autoPlay&&(this.direction=4===this._viewStyle,setInterval(function(){i.next()},n.properties.interval||2e3)),this.mmove=this.mmove.bind(this),this.mend=this.mend.bind(this),e.on("mousedown touchstart",function(t){e.on("mousemove touchmove",i.mmove),e.on("mouseup touchend",i.mend),e.on("mouseleave",i.mend),i.mstart(t)}))}},{key:"mstart",value:function(e){var t=h(e);this.originX=t.clientX,this.originY=t.clientY,e.stopPropagation()}},{key:"mmove",value:function(e){var t=h(e),n=void 0;n=4===this._viewStyle?t.clientY-this.originY:t.clientX-this.originX,this.direction=n>0,Math.abs(n)>5?this.mallow=!0:this.mallow=!1,e.stopPropagation()}},{key:"mend",value:function(e){var t=(h(e),this.$li);t.off("mousemove touchmove",this.mmove),t.off("mouseup touchend mouseleave",this.mend),this.mallow&&(this.next(),this.mallow=!1),e.stopPropagation()}},{key:"showImage",value:function(e){var t=this,n=this.compJson.properties.children,i=[n[e],n[e+1]||n[0],n[e-1]||n[n.length-1]],o=this.$imgBases,r=[o[0],o[1],o[o.length-1]];r.forEach(function(o,r){var a=i[r];o.find("img").attr("src",t.getImgSrc(a.src)),o.find(".image-slider-img-title").text(a.title),o.find(".image-slider-img-detail").text(a.detail),o.data("childrenIndex",(e+r)%n.length)})}},{key:"initFlux",value:function(e,t){var n=this,i=this.compJson,o=i.id,r=i.properties,s=r.autoPlay,c=void 0!==s&&s,l=r.interval,u=r.picStyle,p=i.css,d=p.width,h=p.height,f=(p.bgColor,flux.slider);this.flux=new f(e,{autoplay:c,delay:l,pagination:!1,transitions:[a(u).name],width:d,height:h,bgColor:"rgba(255,255,255,0.1)",onStartEnd:function(e){return n.addInterval(o,e)}})}},{key:"initSwiper",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3,o=n?{delay:i,disableOnInteraction:!1}:n,r=this;this.swiper=new Swiper(e[0],{direction:"horizontal",observer:!0,slidesPerView:2.5,observeParents:!0,freeMode:!0,loop:!0,autoplay:o,autoplayDisableOnInteraction:!1,on:{slideChangeTransitionEnd:function(){console.log(this.realIndex)},click:function(e){for(var n=window.event.target.currentSrc,i=void 0,o=0;o<t.length;o++){var a=g+t[o].src.split(g)[1];if(n.search(a)>-1){i=o;break}}var s=t[i];r.newClickJumpFun(s)}}})}},{key:"addInterval",value:function(e,t){this.intervalObj[e]=t}},{key:"deleteInterval",value:function(e){this.intervalObj[e]&&(clearInterval(this.intervalObj[e]),delete this.intervalObj[e])}},{key:"clearInterval",value:function(){for(var e in this.intervalObj)this.deleteInterval(e)}},{key:"switchStyle",value:function(e){var t=this.$context;switch(t.empty(),e){case 1:this.createStyle1(t);break;case 5:this.createStyle3(t);break;case 2:case 3:case 4:default:this.createStyle2(t)}this._viewStyle=e,e>1&&e<5&&this.setTextHeight()}},{key:"updateFontSize",value:function(){var e=this.compJson.properties,t=e.imageTitle,n=t.fontWeight,i=t.fontSize,o=t.color,r=e.imageDetail,a=r.fontSize,s=r.color;this.$imgBases.forEach(function(e){var t=e.find(".image-slider-img-title");t.css({fontSize:i+"px",fontWeight:n,color:o}).next().css({fontSize:a+"px",color:s})}),this.setTextHeight("fontSize")}},{key:"updateText",value:function(){var e=this.imgDomIndex,t=this.$imgBases,n=this.compJson,i=n.properties.children,o=t[e],r=i[o.data("childrenIndex")],a=r.title,s=r.detail,c=o.find(".image-slider-img-title");c.text(a).next().text(s),this.setTextHeight()}},{key:"switchText",value:function(){var e=this.$imgBases,t=this.compJson,n=t.properties,i=n.imageTitle,o=n.imageDetail,r=n.children;e.forEach(function(e){var t=e.find(".image-slider-img-title"),n=r[e.data("childrenIndex")];"enable"===i.state?(t.css("display","block"),n&&t.text(n.title)):t.css("display","none");var a=t.next();"enable"===o.state?(a.css("display","block"),n&&a.text(n.detail)):a.css("display","none")}),this.setTextHeight("switchText")}},{key:"setTextHeight",value:function(e){function t(e){var t=0,n=0,o=0;e.$imgBases.forEach(function(e){var i=e.find("img").height();4===u&&(i+=10);var r="enable"===a.state?e.find(".image-slider-img-title").outerHeight(!0):0,c="enable"===s.state?e.find(".image-slider-img-detail").outerHeight(!0):0,p=i+r+c;r&&c&&(p-=10);var d=e.data("childrenIndex")%l.length;isNaN(d)||(l[d].titleHeight=r,l[d].detailHeight=c),p>t&&(t=p,n=r,o=c)}),t=Math.max(t,80),i.forEach(function(e){e.height(t)}),c.titleHMax=n,c.detailHMax=o,c.showHeight=c.titleHMax+c.detailHMax,c.titleHMax&&c.detailHMax&&(c.showHeight-=10)}var n=this.imgDomIndex,i=this.$imgBases,o=this.compJson,r=o.properties,a=r.imageTitle,s=r.imageDetail,c=r.imageText,l=r.children,u=r.viewStyle;if(1!==u&&5!==u){var p=i[n],d=c.titleHMax,h=c.detailHMax;if("switchText"===e){var f=0;"enable"===a.state&&(f=d);var g=0;"enable"===s.state&&(g=h);var m=c.showHeight=f+g+((f||g)&&20)+(f&&g&&10);4===this._viewStyle&&(m+="disable"===a.state&&"disable"===s.state?20:"disable"===a.state||"disable"===s.state?10:20);var v=p.find("img").height()+m;i.forEach(function(e){e.height(v)})}else t("crop"===e?this:this)}}},{key:"updateTextColor",value:function(){var e=this.imgDomIndex,t=this.$imgBases,n=this.compJson,i=n.properties,o=i.imageTitle,r=i.imageDetail,a=i.viewStyle,s=i.bgColor;if([2,3,4].indexOf(a)>-1){var c=t[e],l=c.children().first();l=4===a?l.children().first():l.next(),l.css("color",o.color).css("fontWeight",o.weight?"bold":"normal").next().css("color",r.color),t.forEach(function(e){e.css("backgroundColor",s)})}this.$context.css("backgroundColor",n.css.backgroundColor)}}]),t}(m);e.exports=y},function(e,t){"use strict";window.flux={version:"1.4.4"},function(e){flux.slider=function(t,n){flux.browser.init(),flux.browser.supportsTransitions||window.console&&window.console.error&&console.error("Flux Slider requires a browser that supports CSS3 transitions");var i=this;this.element=e(t),this.transitions=[];for(var o in flux.transitions)this.transitions.push(o);this.options=e.extend({autoplay:!0,transitions:this.transitions,delay:4e3,pagination:!0,controls:!1,captions:!1,width:null,height:null,onTransitionEnd:null,onStartEnd:null,bgColor:""},n),this.height=this.options.height?this.options.height:null,this.width=this.options.width?this.options.width:null;var r=[];e(this.options.transitions).each(function(e,t){var n=new flux.transitions[t](this),i=!0;n.options.requires3d&&!flux.browser.supports3d&&(i=!1),n.options.compatibilityCheck&&(i=n.options.compatibilityCheck()),i&&r.push(t)}),this.options.transitions=r,this.images=[],this.imageLoadedCount=0,this.currentImageIndex=0,this.nextImageIndex=1,this.playing=!1,this.container=e('<div class="fluxslider"></div>').appendTo(this.element),this.surface=e('<div class="surface" style="position: relative"></div>').appendTo(this.container),this.container.bind("click",function(t){e(t.target).hasClass("hasLink")&&(window.location=e(t.target).data("href"))}),this.imageContainer=e('<div class="images loading1"></div>').css({position:"relative",overflow:"hidden"}).appendTo(this.surface),this.width&&this.height&&this.imageContainer.css({width:this.width+"px",height:this.height+"px"}),this.image1=e('<div class="image1" style="height: 100%; width: 100%"></div>').appendTo(this.imageContainer),this.image2=e('<div class="image2" style="height: 100%; width: 100%"></div>').appendTo(this.imageContainer),e(this.image1).add(this.image2).css({position:"absolute",top:"0px",left:"0px"}),this.element.find("img, a img").each(function(t,n){var o=n.cloneNode(!1),r=e(n).parent();r.is("a")&&e(o).data("href",r.attr("href")),i.images.push(o),e(n).remove()});for(var a=0;a<this.images.length;a++){var s=new Image;s.onload=function(){i.imageLoadedCount++,i.width=i.width?i.width:this.width,i.height=i.height?i.height:this.height,i.imageLoadedCount>=i.images.length&&(i.finishedLoading(),i.setupImages())},s.src=this.images[a].src}this.element.bind("fluxTransitionEnd",function(e,t){i.options.onTransitionEnd&&(e.preventDefault(),i.options.onTransitionEnd(t))}),this.transitionEndLock=!1;var c={},l={},u=20;this.element.bind("mousedown touchstart",function(e){"touchstart"===e.type?c.left=e.originalEvent.touches[0].pageX:"mousedown"===e.type&&(c.left=e.pageX)}).bind("mouseup touchend",function(e){"touchend"===e.type?l.left=e.originalEvent.changedTouches[0].pageX:"mouseup"===e.type&&(l.left=e.pageX),l.left-c.left>u?i.prev(null,{direction:"right"}):c.left-l.left>u&&i.next(null,{direction:"left"}),i.options.autoplay&&(i.stop(),i.start())})},flux.slider.prototype={constructor:flux.slider,playing:!1,start:function(){var e=this;this.playing=!0,this.transitionEndLock=!1,this.interval=setInterval(function(){!e.transitionEndLock&&e.transition()},this.options.delay),"function"==typeof this.options.onStartEnd&&this.options.onStartEnd(this.interval)},stop:function(){this.playing=!1,clearInterval(this.interval),this.interval=null},isPlaying:function(){return this.playing},next:function(e,t){t=t||{},t.direction="left",this.showImage(this.currentImageIndex+1,e,t)},prev:function(e,t){t=t||{},t.direction="right",this.showImage(this.currentImageIndex-1,e,t)},showImage:function(e,t,n){this.setNextIndex(e),this.setupImages(),this.transition(t,n)},finishedLoading:function(){var t=this;if(this.container.css({width:this.width+"px",height:this.height+"px"}),this.imageContainer.removeClass("loading1"),this.options.pagination&&(this.pagination=e('<ul class="pagination"></ul>').css({margin:"0px",padding:"0px","text-align":"center"}),this.pagination.bind("click",function(n){n.preventDefault(),t.showImage(e(n.target).data("index"))}),e(this.images).each(function(n,i){var o=e('<li data-index="'+n+'">'+(n+1)+"</li>").css({display:"inline-block","margin-left":"0.5em",cursor:"pointer"}).appendTo(t.pagination);0==n&&o.css("margin-left",0).addClass("current")}),this.container.append(this.pagination)),e(this.imageContainer).css({width:this.width+"px",height:this.height+"px"}),e(this.image1).css({width:this.width+"px",height:this.height+"px"}),e(this.image2).css({width:this.width+"px",height:this.height+"px"}),this.container.css({width:this.width+"px",height:this.height+(this.options.pagination?this.pagination.height():0)+"px"}),this.options.controls){var n={padding:"4px 10px 10px","font-size":"60px","font-family":"arial, sans-serif","line-height":"1em","font-weight":"bold",color:"#FFF","text-decoration":"none",background:"rgba(0,0,0,0.5)",position:"absolute","z-index":2e3};this.nextButton=e('<a href="#">»</a>').css(n).css3({"border-radius":"4px"}).appendTo(this.surface).bind("click",function(e){e.preventDefault(),t.next()}),this.prevButton=e('<a href="#">«</a>').css(n).css3({"border-radius":"4px"}).appendTo(this.surface).bind("click",function(e){e.preventDefault(),t.prev()});var i=(this.height-this.nextButton.height())/2;this.nextButton.css({top:i+"px",right:"10px"}),this.prevButton.css({top:i+"px",left:"10px"})}this.options.captions&&(this.captionBar=e('<div class="caption"></div>').css({background:"rgba(0,0,0,0.6)",color:"#FFF","font-size":"16px","font-family":"helvetica, arial, sans-serif","text-decoration":"none","font-weight":"bold",padding:"1.5em 1em",opacity:0,position:"absolute","z-index":110,width:"100%",bottom:0}).css3({"transition-property":"opacity","transition-duration":"800ms","box-sizing":"border-box"}).prependTo(this.surface)),this.updateCaption()},setupImages:function(){var t=this.getImage(this.currentImageIndex),n={background:'url("'+t.src+'") 50% 50% / contain no-repeat '+this.options.bgColor,zIndex:101,cursor:"auto"};e(t).data("href")?(n.cursor="pointer",this.image1.addClass("hasLink"),this.image1.data("href",e(t).data("href"))):(this.image1.removeClass("hasLink"),this.image1.data("href",null)),this.image1.css(n).children().remove(),this.image2.css({background:'url("'+this.getImage(this.nextImageIndex).src+'") 50% 50% / contain no-repeat '+this.options.bgColor,zIndex:100,display:"none"}),this.options.pagination&&this.pagination&&(this.pagination.find("li.current").removeClass("current"),e(this.pagination.find("li")[this.currentImageIndex]).addClass("current"))},transition:function(t,n){if(void 0==t||!flux.transitions[t]){var i=Math.floor(Math.random()*this.options.transitions.length);t=this.options.transitions[i]}var o=null;try{o=new flux.transitions[t](this,e.extend(this.options[t]?this.options[t]:{},n))}catch(r){var a=flux.transition;o=new a(this,{fallback:!0})}o.run(),this.currentImageIndex=this.nextImageIndex,this.setNextIndex(this.currentImageIndex+1),this.updateCaption()},updateCaption:function(){var t=e(this.getImage(this.currentImageIndex)).attr("title");this.options.captions&&this.captionBar&&(""!==t&&this.captionBar.html(t),this.captionBar.css("opacity",""===t?0:1))},getImage:function(e){return e%=this.images.length,this.images[e]},setNextIndex:function(e){void 0==e&&(e=this.currentImageIndex+1),this.nextImageIndex=e,this.nextImageIndex>this.images.length-1&&(this.nextImageIndex=0),this.nextImageIndex<0&&(this.nextImageIndex=this.images.length-1)},increment:function(){this.currentImageIndex++,this.currentImageIndex>this.images.length-1&&(this.currentImageIndex=0)}}}(window.jQuery||window.Zepto),function(e){flux.browser={init:function(){if(void 0===flux.browser.supportsTransitions){var t=["-webkit","-moz","-o","-ms"];if(window.Modernizr&&void 0!==window.Modernizr.csstransitions?flux.browser.supportsTransitions=window.Modernizr.csstransitions:flux.browser.supportsTransitions=this.supportsCSSProperty("Transition"),window.Modernizr&&void 0!==window.Modernizr.csstransforms3d)flux.browser.supports3d=window.Modernizr.csstransforms3d;else if(flux.browser.supports3d=this.supportsCSSProperty("Perspective"),flux.browser.supports3d&&"webkitPerspective"in e("body").get(0).style){var n=e('<div id="csstransform3d"></div>'),i=e('<style media="(transform-3d), ('+t.join("-transform-3d),(")+'-transform-3d)">div#csstransform3d { position: absolute; left: 9px }</style>');e("body").append(n),e("head").append(i),flux.browser.supports3d=9==n.get(0).offsetLeft,n.remove(),i.remove()}}},supportsCSSProperty:function(e){for(var t=document.createElement("div"),n=["Webkit","Moz","O","Ms"],i=!1,o=0;o<n.length;o++)n[o]+e in t.style&&(i=i||!0);return i},translate:function(e,t,n){return e=void 0!=e?e:0,t=void 0!=t?t:0,n=void 0!=n?n:0,"translate"+(flux.browser.supports3d?"3d(":"(")+e+"px,"+t+(flux.browser.supports3d?"px,"+n+"px)":"px)")},rotateX:function(e){return flux.browser.rotate("x",e)},rotateY:function(e){return flux.browser.rotate("y",e)},rotateZ:function(e){return flux.browser.rotate("z",e)},rotate:function(e,t){return e in{x:"",y:"",z:""}||(e="z"),t=void 0!=t?t:0,flux.browser.supports3d?"rotate3d("+("x"==e?"1":"0")+", "+("y"==e?"1":"0")+", "+("z"==e?"1":"0")+", "+t+"deg)":"z"==e?"rotate("+t+"deg)":""}},e(function(){flux.browser.init()})}(window.jQuery||window.Zepto),function(e){e.fn.css3=function(e){var t={},n=["webkit","moz","ms","o"];for(var i in e){for(var o=0;o<n.length;o++)t["-"+n[o]+"-"+i]=e[i];t[i]=e[i]}return this.css(t),this},e.fn.transitionEnd=function(t){for(var n=["webkitTransitionEnd","transitionend","oTransitionEnd"],i=0;i<n.length;i++)this.bind(n[i],function(i){for(var o=0;o<n.length;o++)e(this).unbind(n[o]);t&&t.call(this,i)});return this},flux.transition=function(t,n){if(this.options=e.extend({requires3d:!1,after:function(){}},n),this.slider=t,this.options.requires3d&&!flux.browser.supports3d||!flux.browser.supportsTransitions||this.options.fallback===!0){var i=this;this.options.after=void 0,this.options.setup=function(){i.fallbackSetup()},this.options.execute=function(){i.fallbackExecute()}}},flux.transition.prototype={constructor:flux.transition,hasFinished:!1,run:function(){var e=this;void 0!==this.options.setup&&this.options.setup.call(this),this.slider.image1.css({"background-image":"none"}),this.slider.imageContainer.css("overflow",this.options.requires3d?"visible":"hidden"),setTimeout(function(){void 0!==e.options.execute&&e.slider.image1.css("background-color",""),e.options.execute.call(e),e.slider.options.autoplay&&(e.slider.transitionEndLock=!0)},5)},finished:function(){this.hasFinished||(this.hasFinished=!0,this.options.after&&this.options.after.call(this),this.slider.imageContainer.css("overflow","hidden"),this.slider.setupImages(),this.slider.element.trigger("fluxTransitionEnd",{currentImage:this.slider.getImage(this.slider.currentImageIndex)}),this.slider.options.autoplay&&(this.slider.transitionEndLock=!1))},fallbackSetup:function(){},fallbackExecute:function(){this.finished()}},flux.transitions={},flux.transition_grid=function(t,n){var i=flux.transition;return new i(t,e.extend({columns:10,rows:10,forceSquare:!1,setup:function(){var t=this.slider.image1.width(),n=this.slider.image1.height(),i=Math.floor(t/this.options.columns),o=Math.floor(n/this.options.rows);this.options.forceSquare&&(o=i,this.options.rows=Math.floor(n/o));for(var r=t-this.options.columns*i,a=Math.ceil(r/this.options.columns),s=n-this.options.rows*o,c=Math.ceil(s/this.options.rows),l=0,u=0,p=document.createDocumentFragment(),d=0;d<this.options.columns;d++){var h=i;if(u=0,r>0){var f=r>=a?a:r;h+=f,r-=f}for(var g=0;g<this.options.rows;g++){var m=o,v=s;v>0&&(f=v>=c?c:v,m+=f,v-=f);var y=e('<div class="tile tile-'+d+"-"+g+'"></div>').css({width:h+"px",height:m+"px",position:"absolute",top:u+"px",left:l+"px",overflow:"hidden"}).append("<div></div>");this.options.renderTile.call(this,y,d,g,h,m,l,u),p.appendChild(y.get(0)),u+=m}l+=h}this.slider.image1.get(0).appendChild(p)},execute:function(){var e=this,t=this.slider.image1.height(),n=this.slider.image1.find("div.barcontainer");this.slider.image2.hide(),n.last().transitionEnd(function(t){e.slider.image2.show(),e.finished()}),n.css3({transform:flux.browser.rotateX(-90)+" "+flux.browser.translate(0,t/2,t/2)})},renderTile:function(e,t,n,i,o,r,a){}},n))}}(window.jQuery||window.Zepto),function(e){flux.transitions.bars=function(t,n){var i=flux.transition_grid;return new i(t,e.extend({columns:10,rows:1,delayBetweenBars:40,renderTile:function(t,n,i,o,r,a,s){e(t).children().css({position:"absolute",top:-s+"px",left:-a+"px",width:this.slider.width+"px ",height:this.slider.height+"px",background:this.slider.image1.css("background")}).parent().css3({"transition-duration":"400ms","transition-timing-function":"ease-in","transition-property":"all","transition-delay":n*this.options.delayBetweenBars+"ms"})},execute:function(){var t=this,n=this.slider.image1.height(),i=this.slider.image1.find("div.tile");e(i[i.length-1]).transitionEnd(function(){t.finished()}),setTimeout(function(){i.css({opacity:"0.5"}).css3({transform:flux.browser.translate(0,n)})},50)}},n))}}(window.jQuery||window.Zepto),function(e){flux.transitions.bars3d=function(t,n){var i=flux.transition_grid;return new i(t,e.extend({requires3d:!0,columns:7,rows:1,delayBetweenBars:150,perspective:1e3,renderTile:function(t,n,i,o,r,a,s){var c=e('<div class="bar-'+n+'"></div>').css({width:o+"px",height:"100%",position:"absolute",top:"0px",left:"0px","z-index":200,overflow:"hidden"}).css3({"backface-visibility":"hidden"}),l=e("<div></div>").css({position:"absolute",top:-s+"px",left:-a+"px",width:this.slider.width+"px ",height:this.slider.height+"px",background:this.slider.image1.css("background")}).appendTo(c),u=e(c.get(0).cloneNode(!1)).css3({transform:flux.browser.rotateX(90)+" "+flux.browser.translate(0,-r/2,r/2)});e(l.get(0).cloneNode(!1)).css({"background-image":this.slider.image2.css("background-image")}).appendTo(u);var p=e('<div class="side bar-'+n+'"></div>').css({width:r+"px",height:r+"px",position:"absolute",top:"0px",left:"0px",background:"#222","z-index":190}).css3({transform:flux.browser.rotateY(90)+" "+flux.browser.translate(r/2,0,-r/2)+" "+flux.browser.rotateY(180),"backface-visibility":"hidden"}),d=e(p.get(0).cloneNode(!1)).css3({transform:flux.browser.rotateY(90)+" "+flux.browser.translate(r/2,0,o-r/2)});e(t).empty().css({overflow:"visible",width:o+"px",height:"100%",position:"absolute",top:"0px",left:a+"px","z-index":n>this.options.columns/2?1e3-n:1e3}).css3({"transition-duration":"800ms","transition-timing-function":"linear","transition-property":"all","transition-delay":n*this.options.delayBetweenBars+"ms","transform-style":"preserve-3d"}).append(c).append(u).append(p).append(d)},execute:function(){this.slider.image1.css3({perspective:this.options.perspective,"perspective-origin":"50% 50%"}).css({"-moz-transform":"perspective("+this.options.perspective+"px)","-moz-perspective":"none","-moz-transform-style":"preserve-3d"});var e=this,t=this.slider.image1.height(),n=this.slider.image1.find("div.tile");this.slider.image2.hide(),n.last().transitionEnd(function(t){e.slider.image1.css3({"transform-style":"flat"}),e.slider.image2.show(),e.finished()}),setTimeout(function(){n.css3({transform:flux.browser.rotateX(-90)+" "+flux.browser.translate(0,t/2,t/2)})},50)}},n))}}(window.jQuery||window.Zepto),function(e){flux.transitions.blinds=function(t,n){var i=flux.transitions.bars;return new i(t,e.extend({execute:function(){var t=this,n=this.slider.image1.find("div.tile");e(n[n.length-1]).transitionEnd(function(){t.finished()}),setTimeout(function(){n.css({opacity:"0.5"}).css3({transform:"scalex(0.0001)"})},50)}},n))}}(window.jQuery||window.Zepto),function(e){flux.transitions.zip=function(t,n){var i=flux.transitions.bars;return new i(t,e.extend({execute:function(){var t=this,n=this.slider.image1.height(),i=this.slider.image1.find("div.tile");e(i[i.length-1]).transitionEnd(function(){t.finished()}),setTimeout(function(){i.each(function(t,i){e(i).css({opacity:"0.3"}).css3({transform:flux.browser.translate(0,t%2?"-"+2*n:n)})})},20)}},n))}}(window.jQuery||window.Zepto),function(e){flux.transitions.blocks=function(t,n){var i=flux.transition_grid;return new i(t,e.extend({forceSquare:!0,delayBetweenBars:100,renderTile:function(t,n,i,o,r,a,s){var c=Math.floor(10*Math.random()*this.options.delayBetweenBars);e(t).children().css({position:"absolute",top:-s+"px",left:-a+"px",width:this.slider.width+"px ",height:this.slider.height+"px",background:this.slider.image1.css("background")}).parent().css3({"transition-duration":"350ms","transition-timing-function":"ease-in","transition-property":"all","transition-delay":c+"ms"}),void 0===this.maxDelay&&(this.maxDelay=0),c>this.maxDelay&&(this.maxDelay=c,this.maxDelayTile=t)},execute:function(){var t=this,n=this.slider.image1.find("div.tile");this.maxDelayTile.transitionEnd(function(){t.finished()}),setTimeout(function(){n.each(function(t,n){e(n).css({opacity:"0"}).css3({transform:"scale(0.8)"})})},50)}},n))}}(window.jQuery||window.Zepto),function(e){flux.transitions.blocks2=function(t,n){var i=flux.transition_grid;return new i(t,e.extend({cols:12,forceSquare:!0,delayBetweenDiagnols:150,renderTile:function(t,n,i,o,r,a,s){e(t).children().css({position:"absolute",top:-s+"px",left:-a+"px",width:this.slider.width+"px ",height:this.slider.height+"px",background:this.slider.image1.css("background")}).parent().css3({"transition-duration":"350ms","transition-timing-function":"ease-in","transition-property":"all","transition-delay":(n+i)*this.options.delayBetweenDiagnols+"ms","backface-visibility":"hidden"})},execute:function(){var t=this,n=this.slider.image1.find("div.tile");n.last().transitionEnd(function(){t.finished()}),setTimeout(function(){n.each(function(t,n){e(n).css({opacity:"0"}).css3({transform:"scale(0.8)"})})},50)}},n))}}(window.jQuery||window.Zepto),function(e){flux.transitions.cube=function(t,n){var i=flux.transition;return new i(t,e.extend({requires3d:!0,barWidth:100,direction:"left",perspective:1e3,setup:function(){var t=this.slider.image1.width(),n=this.slider.image1.height();this.slider.image1.css3({perspective:this.options.perspective,"perspective-origin":"50% 50%"}),this.cubeContainer=e('<div class="cube"></div>').css({width:t+"px",height:n+"px",position:"relative"}).css3({"transition-duration":"800ms","transition-timing-function":"linear","transition-property":"all","transform-style":"preserve-3d"});var i={height:"100%",width:"100%",position:"absolute",top:"0px",left:"0px"},o=e('<div class="face current"></div>').css(e.extend(i,{background:this.slider.image1.css("background")})).css3({"backface-visibility":"hidden"});this.cubeContainer.append(o);var r=e('<div class="face next"></div>').css(e.extend(i,{backgroundImage:this.slider.image2.css("background-image")})).css3({transform:this.options.transitionStrings.call(this,this.options.direction,"nextFace"),"backface-visibility":"hidden"});this.cubeContainer.append(r),this.slider.image1.append(this.cubeContainer)},execute:function(){var e=this;this.slider.image2.hide(),this.cubeContainer.transitionEnd(function(){e.slider.image2.show(),e.finished()}),setTimeout(function(){e.cubeContainer.css3({transform:e.options.transitionStrings.call(e,e.options.direction,"container")})},50)},transitionStrings:function(e,t){var n=this.slider.image1.width(),i=this.slider.image1.height(),o={up:{nextFace:flux.browser.rotateX(-90)+" "+flux.browser.translate(0,i/2,i/2),container:flux.browser.rotateX(90)+" "+flux.browser.translate(0,-i/2,i/2)},down:{nextFace:flux.browser.rotateX(90)+" "+flux.browser.translate(0,-i/2,i/2),container:flux.browser.rotateX(-90)+" "+flux.browser.translate(0,i/2,i/2)},left:{nextFace:flux.browser.rotateY(90)+" "+flux.browser.translate(n/2,0,n/2),container:flux.browser.rotateY(-90)+" "+flux.browser.translate(-n/2,0,n/2)},right:{nextFace:flux.browser.rotateY(-90)+" "+flux.browser.translate(-n/2,0,n/2),container:flux.browser.rotateY(90)+" "+flux.browser.translate(n/2,0,n/2)}};return!(!o[e]||!o[e][t])&&o[e][t]}},n))}}(window.jQuery||window.Zepto),function(e){flux.transitions.tiles3d=function(t,n){var i=flux.transition_grid;return new i(t,e.extend({requires3d:!0,forceSquare:!0,columns:5,perspective:600,delayBetweenBarsX:200,delayBetweenBarsY:150,renderTile:function(t,n,i,o,r,a,s){var c=e("<div></div>").css({width:o+"px",height:r+"px",position:"absolute",top:"0px",left:"0px",background:this.slider.image1.css("background"),"background-size":this.slider.width+"px "+this.slider.height+"px","background-position":"-"+a+"px -"+s+"px","background-repeat":"no-repeat","-moz-transform":"translateZ(1px)"}).css3({"backface-visibility":"hidden"}),l=e(c.get(0).cloneNode(!1)).css({"background-image":this.slider.image2.css("background-image")}).css3({transform:flux.browser.rotateY(180),"backface-visibility":"hidden"});e(t).empty().css({overflow:"visible","z-index":(n>this.options.columns/2?500-n:500)+(i>this.options.rows/2?500-i:500)}).css3({"transition-duration":"800ms","transition-timing-function":"ease-out","transition-property":"all","transition-delay":n*this.options.delayBetweenBarsX+i*this.options.delayBetweenBarsY+"ms","transform-style":"preserve-3d"}).append(c).append(l)},execute:function(){this.slider.image1.css3({perspective:this.options.perspective,"perspective-origin":"50% 50%"});var e=this,t=this.slider.image1.find("div.tile");this.slider.image2.hide(),t.last().transitionEnd(function(t){e.slider.image2.show(),e.finished()}),setTimeout(function(){t.css3({transform:flux.browser.rotateY(180)})},50)}},n))}}(window.jQuery||window.Zepto),function(e){flux.transitions.turn=function(t,n){var i=flux.transition;return new i(t,e.extend({requires3d:!0,perspective:1300,direction:"left",setup:function(){var t=e('<div class="tab"></div>').css({width:"50%",height:"100%",position:"absolute",top:"0px",left:"left"===this.options.direction?"50%":"0%","z-index":101}).css3({"transform-style":"preserve-3d","transition-duration":"1000ms","transition-timing-function":"ease-out","transition-property":"all","transform-origin":"left"==this.options.direction?"left center":"right center"});e("<div></div>").appendTo(t).css({background:this.slider.image1.css("background"),"background-size":this.slider.width+"px "+this.slider.height+"px","background-position":("left"==this.options.direction?"-"+this.slider.image1.width()/2:0)+"px 0",width:"100%",height:"100%",position:"absolute",top:"0",left:"0","-moz-transform":"translateZ(1px)"}).css3({"backface-visibility":"hidden"}),e("<div></div>").appendTo(t).css({background:this.slider.image2.css("background"),"background-size":this.slider.width+"px "+this.slider.height+"px","background-position":("left"===this.options.direction?0:"-"+this.slider.image1.width()/2)+"px 0",width:"100%",height:"100%",position:"absolute",top:"0",left:"0"}).css3({transform:flux.browser.rotateY(180),"backface-visibility":"hidden"});var n=e("<div></div>").css({position:"absolute",top:"0",left:"left"===this.options.direction?"0":"50%",width:"50%",height:"100%",background:this.slider.image1.css("background"),"background-size":this.slider.width+"px "+this.slider.height+"px","background-position":("left"===this.options.direction?0:"-"+this.slider.image1.width()/2)+"px 0","z-index":100}),i=e('<div class="overlay"></div>').css({position:"absolute",top:"0",left:"left"===this.options.direction?"50%":"0",width:"50%",height:"100%",background:"#000",opacity:1}).css3({"transition-duration":"800ms","transition-timing-function":"linear","transition-property":"opacity"}),o=e("<div></div>").css3({width:"100%",height:"100%"}).css3({perspective:this.options.perspective,"perspective-origin":"50% 50%"}).append(t).append(n).append(i);this.slider.image1.append(o)},execute:function(){var e=this;this.slider.image1.find("div.tab").first().transitionEnd(function(){e.finished()}),setTimeout(function(){e.slider.image1.find("div.tab").css3({transform:flux.browser.rotateY("left"==e.options.direction?-179:179)}),e.slider.image1.find("div.overlay").css({opacity:0})},50)}},n))}}(window.jQuery||window.Zepto),function(e){flux.transitions.slide=function(t,n){var i=flux.transition;return new i(t,e.extend({direction:"left",setup:function(){var t=this.slider.image1.width(),n=this.slider.image1.height(),i=e('<div class="current"></div>').css({height:n+"px",width:t+"px",position:"absolute",top:"0px",left:"0px",background:this.slider["left"===this.options.direction?"image1":"image2"].css("background")
}).css3({"backface-visibility":"hidden"}),o=e('<div class="next"></div>').css({height:n+"px",width:t+"px",position:"absolute",top:"0px",left:t+"px",background:this.slider["left"===this.options.direction?"image2":"image1"].css("background")}).css3({"backface-visibility":"hidden"});this.slideContainer=e('<div class="slide"></div>').css({width:2*t+"px",height:n+"px",position:"relative",left:"left"===this.options.direction?"0px":-t+"px","z-index":101}).css3({"transition-duration":"600ms","transition-timing-function":"ease-in","transition-property":"all"}),this.slideContainer.append(i).append(o),this.slider.image1.append(this.slideContainer)},execute:function(){var e=this,t=this.slider.image1.width();"left"===this.options.direction&&(t=-t),this.slideContainer.transitionEnd(function(){e.finished()}),setTimeout(function(){e.slideContainer.css3({transform:flux.browser.translate(t)})},50)}},n))}}(window.jQuery||window.Zepto),function(e){flux.transitions.explode=function(t,n){var i=flux.transition_grid;return new i(t,e.extend({columns:10,forceSquare:!0,delayBetweenBars:30,perspective:800,requires3d:!0,renderTile:function(t,n,i,o,r,a,s){var c=Math.floor(10*Math.random()*this.options.delayBetweenBars);e(t).children().css({position:"absolute",top:-s+"px",left:-a+"px",width:this.slider.width+"px ",height:this.slider.height+"px",background:this.slider.image1.css("background")}).parent().css3({"transition-duration":"500ms","transition-timing-function":"ease-in","transition-property":"all","transition-delay":c+"ms"}),void 0===this.maxDelay&&(this.maxDelay=0),c>this.maxDelay&&(this.maxDelay=c,this.maxDelayTile=t)},execute:function(){this.slider.image1.css3({perspective:this.options.perspective,"perspective-origin":"50% 50%"}).css({"-moz-transform":"perspective("+this.options.perspective+"px)","-moz-perspective":"none","-moz-transform-style":"preserve-3d"});var t=this,n=this.slider.image1.find("div.tile");this.maxDelayTile.transitionEnd(function(){t.slider.image1.css3({"transform-style":"flat"}),t.finished()}),setTimeout(function(){n.each(function(t,n){e(n).css({opacity:"0"}).css3({transform:flux.browser.translate(0,0,700)+" rotate3d("+(Math.round(2*Math.random())-1)+", "+(Math.round(2*Math.random())-1)+", "+(Math.round(2*Math.random())-1)+", 90deg) "})})},50)}},n))}}(window.jQuery||window.Zepto)},function(e,t){},function(e,t,n){e.exports=n.p+"images/repeat-top-6687d2.svg"},function(e,t,n){e.exports=n.p+"images/repeat-bottom-39921b.svg"},function(e,t,n){"use strict";function i(e){var t=e.checkUrl,n=e.sceneId,i=r.Audit+"back-check/check/url/check/result";return a({type:"GET",url:i,xhrFields:{withCredentials:!1},data:{productKey:"h5_page",sceneId:n,url:t}}).then(function(e){if(e&&200===e.code){var t=e.obj;return!(!t||!t.checkResult)}return!1})["catch"](function(e){return!1})}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return a({type:"GET",url:r.SERVER_1+"eqs/s/wx/get/auth/config?productType="+e})}var r=n(24),a=n(23).ajax;e.exports={$getAuditResult:i,$getAdAppIdAndDomain:o}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return new Promise(function(t,i){n.e(9,function(){var o=n(215),r=o[e];/^<path.*>$/.test(r)?t(r):i(e+" does not match <path />")})})}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function g(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:g(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)},l=n(54).$getSvg,u=n(213),p=n(214),d=n(101),h="http://www.w3.org/2000/svg",f=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!0},advanceStyle:{"function":!0}},link:!0}),r}return r(t,e),s(t,[{key:"getFtEditableProps",value:function(){var e=c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtEditableProps",this).call(this),n=this.FtEditableProps,i=this.compJson.properties.items,o=(i||[]).map(function(e,t){return n.color.fill+"-"+t});return e.concat([n.sound.soundSrc,n.link.url,n.internalLink.internalLink,n.telephone.number],o)}},{key:"getFtValue",value:function(e){var n=this.FtEditableProps;if(e.includes(n.color.fill)){var i=e.split("-")[1];return this.getProp("items")[i].fill}return c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtValue",this).call(this,e)}},{key:"updateFillColor",value:function(e,t){var n=$(this.$li).find("[fill], [style*='fill']"),i=this.getProp("items")[e];if(i){var o=i.elements;i.fill=t,n.each(function(e){if(o.indexOf(e)>-1){var i=$.Color(t).toString();n.eq(e).css({fill:i})}})}}},{key:"create$context",value:function(){var e=this.compJson,t=this;this.$contentsDiv.css({position:"relative"});var n=e.id,i=e.properties,o=i.viewBox,r=void 0===o?"0 0 64 64":o,s=i.type,c=void 0===s?"":s,d=i.src,f=i.items,g=e.css.color,m=void 0===g?"#555":g;if(d){var v=document.createElementNS(h,"svg");return v.setAttribute("class","element svg-element"),l(d).then(function(i){var o=i.getElementsByTagName("svg"),r=o[0].viewBox.baseVal,a=parseFloat($(o).attr("width"))||r.width,s=parseFloat($(o).attr("height"))||r.height,c=$(o).find("[fill], [style*='fill']")||[];if(f)if(c.length==f.length)for(var l=0;l<f.length;l++)c.eq(l).css({fill:f[l].fill});else $.each(c,function(e,t){for(var n=0;n<f.length;n++)for(var i=f[n].elements||[],o=0;o<i.length;o++)e==i[o]&&(""!=f[n].fill?c.eq(e).css({fill:f[n].fill}):c.eq(e).css({fill:"none"}))});else{var u=[],p={};$.each(c,function(e,t){var n=$(t).attr("style");if(n){for(var i=n.split(";")||[],o=0,r=i.length;o<r;o++)if(i[o].includes("fill:")){u.push(i[o].split(":")[1]);break}}else u.push($(t).attr("fill"))});for(var d=0;d<u.length;d++)p[u[d]]||(p[u[d]]=1,"none"!=u[d]?f.push({fill:u[d],svgFill:u[d]}):f.push({fill:"",svgFill:"none"}));for(var h=0;h<f.length;h++){var g=[];$.each(c,function(e,t){var n,i=$(t).attr("style");if(i){for(var o=i.split(";"),r=0,a=o.length;r<a;r++)if(o[r].includes("fill:")){n=o[r].split(":")[1];break}}else n=$(t).attr("fill");n==f[h].svgFill&&g.push(e)}),f[h].elements=g}e.properties.items=f}var m="0 0 "+a+" "+s,y=t.$contentsDiv;y.empty();var b=t.$contentsDiv[0];v=o[0],b.appendChild(v),v.getAttribute("viewBox")||v.setAttribute("viewBox",m),v.setAttribute("preserveAspectRatio","none"),v.setAttribute("width","100%"),v.setAttribute("height","100%"),v.id=n,v.setAttribute("class","element svg-element"),t.$context=$(v)})["catch"](function(){var e;(e=console).error.apply(e,arguments)}),$(v)}var y=r.split(" "),b=y[2]||64,x=y[3]||64;if(c.includes("symbols")){var w=$(p.svg({id:n,viewBox:r}))[0];return a(c.replace(/^symbols-/,"")).then(function(e){w.innerHTML=p.g({id:n,color:m,path:e})})["catch"](function(){var e;(e=console).error.apply(e,arguments)}),$(w)}var k=c.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()});if(u[k]){var S=$(u[k](b,x)).attr("fill",m);return $(p.svg({id:n,viewBox:r,content:S[0].outerHTML}))}console.error("shape#"+n+" does not match any!")}},{key:"updateTurnOver",value:function(e){this.$boxContentDiv.css("transform",e)}}]),t}(d);e.exports=f},function(e,t){"use strict";function n(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function i(e){for(var t=[];e.length>=2;)t.push(e.shift()+","+e.shift());return t.join(" ")}function o(e,t){var i=n("rect");return i.setAttribute("width",e),i.setAttribute("height",t),i}function r(e,t){var i=n("ellipse");return i.setAttribute("rx",e/2),i.setAttribute("ry",t/2),i.setAttribute("cx",e/2),i.setAttribute("cy",t/2),i}function a(e,t){var o=n("polygon");return o.setAttribute("points",i([e/2,0,e,t,0,t])),o}function s(e,t){var o=n("polygon");return o.setAttribute("points",i([0,0,e,0,e/2,t])),o}function c(e,t){var o=n("polygon");return o.setAttribute("points",i([0,t/2,e,0,e,t])),o}function l(e,t){var o=n("polygon");return o.setAttribute("points",i([e,t/2,0,t,0,0])),o}function u(e,t){var o=n("polygon");return o.setAttribute("points",i([.5*e,0,e,.5*t,.7*e,.5*t,.7*e,t,.3*e,t,.3*e,.5*t,0,.5*t,.5*e,0])),o}function p(e,t){var o=n("polygon");return o.setAttribute("points",i([.5*e,t,e,.5*t,.7*e,.5*t,.7*e,0,.3*e,0,.3*e,.5*t,0,.5*t,.5*e,t])),o}function d(e,t){var o=n("polygon");return o.setAttribute("points",i([e,.3*t,.5*e,.3*t,.5*e,0,0,.5*t,.5*e,t,.5*e,.7*t,e,.7*t,e,.3*t])),o}function h(e,t){var o=n("polygon");return o.setAttribute("points",i([0,.3*t,.5*e,.3*t,.5*e,0,e,.5*t,.5*e,t,.5*e,.7*t,0,.7*t])),o}function f(e,t,o){var r=n("polygon"),a=[];if(3===o)a=[e/2,0,e,t,0,t];else if(o>3)for(var s=e/2,c=t/2,l=0;o>l;l++){var u=s+s*Math.cos(2*Math.PI*l/o),p=c+c*Math.sin(2*Math.PI*l/o);u=Math.round(10*u)/10,p=Math.round(10*p)/10,a.push(u),a.push(p)}return r.setAttribute("points",i(a)),r}function g(e,t){return f(e,t,4)}function m(e,t){return f(e,t,8)}e.exports={rect:o,ellipse:r,circle:r,triangleUp:a,triangleDown:s,triangleLeft:c,triangleRight:l,arrowUp:u,arrowDown:p,arrowLeft:d,arrowRight:h,diamond:g,octagon:m};var v=n("rect");v.attr=v.setAttribute},function(e,t){"use strict";function n(e){var t=e.color,n=e.id,i=e.path;return'<g fill="'+t+'" id="path_'+n+'">'+i+"</g>"}function i(e){var t=e.id,n=e.viewBox,i=e.content,r=void 0===i?"":i;return'\n<svg id="'+t+'" class="element svg-element" xmlns="'+o+'" version="1.1" width="100%"\n     height="100%" preserveAspectRatio="none" viewBox="'+n+'">\n    '+r+"\n</svg>"}var o="http://www.w3.org/2000/svg";e.exports={g:n,svg:i}},,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function p(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)};n(217);var c=n(218),l=n(101),u=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{self:!0,fontFamily:!1,fontColor:!0}},trigger:{self:!1},sound:!1,link:!1}),r}return r(t,e),a(t,[{key:"getFtEditableProps",value:function(){var e=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtEditableProps",this).call(this),n=this.FtEditableProps;return e.concat([n.link.url,n.internalLink.internalLink,n.telephone.number])}},{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.css,o=i.width,r=i.height,a=e.properties,s=a.title,l=a.imgSrc;if(l){l=this.getImgSrc(l,{width:o,height:r});var u="0"}return this.$context=$(c.compDiv({id:t,title:s,type:n,imgSrc:l,padding:u})),this.$context}},{key:"updateBtnTitle",value:function(e){this.compJson.properties.imgSrc||(this.$context[0].innerText=e)}},{key:"deleteImage",value:function(){this.compJson.properties.imgSrc||(this.$context[0].innerText="")}},{key:"bindAfterRenderEvent",value:function(){}}]),t}(l);e.exports=u},function(e,t){},function(e,t,n){"use strict";function i(e){return e.imgSrc?r(e):o(e)}function o(e){var t=e.id,n=e.title,i=e.type;return n=n?n.replace(/ /g,"&nbsp;"):"",c(a,{id:t,title:n,type:i})}function r(e){var t=e.id,n=e.imgSrc,i=e.type,o=e.padding;return c(s,{id:t,src:n,type:i,padding:o})}n(219);var a=n(220),s=n(221),c=n(36).parse;e.exports={compDiv:i}},function(e,t){},function(e,t){e.exports='<a id="#{id}" ctype="#{type}" class="element eqx-tel editable-text" style="display: flex; justify-content: center; align-items: center" data-event="1120602" style="cursor: default; width: 100%">#{title}</a>'},function(e,t){e.exports='<a id="#{id}" ctype="#{type}" class="element eqx-tel editable-text" style="cursor: default; width: 100%;height: 100%;padding: #{padding}"><img style="width: 100%; height: 100%" src="#{src}"></a>'},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function d(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:d(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)};n(223);var c=n(224),l=n(101),u=n(36).parse,p=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!1},compFont:{self:!1,fontFamily:!1}},trigger:{self:!1},sound:!1,link:!1}),r}return r(t,e),a(t,[{key:"getFtEditableProps",value:function(){var e=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtEditableProps",this).call(this),n=this.FtEditableProps;return e.concat([n.sound.soundSrc])}},{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.properties,o=i.imgSrc,r=i.title,a=e.css,s=a.height,l=a.width;if(o){o=this.getImgSrc(o,{width:l,height:s});var p="0",d='<img style="width: 100%; height: 100%;" src="'+o+'">'}return r&&(d=r.replace(/ /g,"&nbsp;"),p="0 8px",o=""),o||r||(d=""),$(u(c,{id:t,type:n,content:d,padding:p}))}},{key:"updateBtnTitle",value:function(e){this.compJson.properties.imgSrc||(this.$context[0].innerText=e)}},{key:"deleteImage",value:function(){this.compJson.properties.imgSrc||(this.$context[0].innerText="")}}]),t}(l);e.exports=p},function(e,t){},function(e,t){e.exports='<a id="#{id}" ctype="#{type}" class="element eqx-sound editable-text" data-event="1120604" style="cursor: default; width: 100%;height: 100%; padding: #{padding};\ndisplay: flex; justify-content: center; align-items: center">#{content}</a>'},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=e.id,n=e.type,i=e.layout,o=e.size,r=e.icon,a=e.css,s=e.imgSrc,c=void 0;if(s){var l=f.FILE+s;c='<img class="counter-elem counter-icon"\n             style="width: 115px; height: 115px;" src="'+l+'">'}else c='<i class="counter-elem counter-icon '+r+'"></i>';var u=$(h(d,{layout:i,size:o,id:t,type:n,i:c}));return u.css(a),u}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function m(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:m(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)};n(226);var l=n(81).$getPvCount,u=n(227).fixedNum,p=n(101),d=n(228),h=n(36).parse,f=n(24),g=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{self:!1,fontFamily:!1},functionStyle:{counter:!1},advanceStyle:{"function":!0}},trigger:{self:!1},sound:!1,link:!1}),r}return r(t,e),s(t,[{key:"eleShow",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleShow",this).call(this),this.getPvCount()}},{key:"create$context",value:function(){var e=this.compJson;e.properties.color&&(e.css.color=e.properties.color,delete e.properties.color);var t=e.id,n=e.type,i=e.properties,o=i.layout,r=i.size,s=i.icon,c=i.imgSrc,l=e.css.fontSize,u=a({id:t,type:n,layout:o,size:r,icon:s,css:{fontSize:l},imgSrc:c});return u.hasClass("counter-tb")&&u.find("img").length&&u.find("img").css("margin","0 auto"),u}},{key:"getPvCount",value:function(){var e=this;if("view"==this.eqxScene.config.mode&&!this.eqxScene.config.disablePv)return l(this.compJson.sceneId).then(function(t){var n=e.compJson.properties.numberStyle||"simple",i=e.compJson.properties.countBase||0;return t=parseInt(t)+parseInt(i),"simple"===n?u(t)||0:t||0}).then(function(t){e.$li.find(".counter-number").text(t)})}},{key:"updateLayout",value:function(){this.$context.remove(),this.$li.css({height:this.compJson.css.height,lineHeight:this.compJson.css.lineHeight}),this.$context=this.create$context(),this.$contentsDiv.append(this.$context)}},{key:"updateSize",value:function(e,n){n.height&&(n.lineHeight=n.height+"px",this.$context.css({lineHeight:n.lineHeight})),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSize",this).call(this,e,n)}}]),t}(p);e.exports=g},function(e,t){},function(e,t){"use strict";function n(e){var t;return e<1e4?t=e:e>=1e4&&e<1e8?t=(e/1e4).toFixed(2)+"万":e>=1e8&&(t=(e/1e8).toFixed(2)+"亿"),t}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.floor(Math.random()*e)%e+t}e.exports={fixedNum:n,random:i}},function(e,t){e.exports='<div class="element comp_counter editable-text #{layout} #{size}" id="#{id}" ctype="#{type}"><div class="counter-container">#{i}<span class="counter-elem counter-number">0</span></div></div>'},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(c){o=!0,r=c}finally{try{!i&&s["return"]&&s["return"]()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function C(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:C(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)},u=n(230),p=n(101),d=n(69).getWeChatUser,h=n(27),f=h.isWeixin,g=h.isWxwork,m=n(80).$getUserWxInfo,v=n(69).setWeChatUser,y=n(69).hrefToWxAuth,b=n(82).popUpModal,x=n(26).setUrlHistory,w=n(236),k=n(27),S=k.mobilecheck,I=k.isIOS,T=n(66),E=T.perfectStr,P=T.getSafeStr,_=function(e){function t(e,n){o(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),s=a.style=a.compJson.properties.style;"barrage"===s&&(a.Barrage=new w,a.isBarragePlaying=!1,a.barrageComments=[]);var c=new Promise(function(){});if(a.commentManager=a.eqxScene.commentManager,a.commentManager){a.commentManager.register(a);var l=a.commentManager.getComments();c=l.length?Promise.resolve():a.commentManager.loadInitComments(50),c.then(function(){if("barrage"===s){var e;(e=a.barrageComments).push.apply(e,i(l)),a.eleShow()}else"button"===s&&a.commentManager.getCommentSumNum().then(function(e){a.commentManager.sum_num=e.obj,a.$boards.find(".buttonDiv").find(".mess-counts").text(a.commentManager.sum_num)})})}return $.extend(!0,a.$ability,{style:{advanceStyle:{border:!1,shadow:!1,paddingTop:!1,borderWidth:!1,borderRadius:!1,borderStyle:!1,borderColor:!1,boxShadowSize:!1,boxShadowBlur:!1,boxShadowColor:!1,boxShadowDirection:!1}},trigger:{self:!1},sound:!1,link:!1}),a}return a(t,e),c(t,[{key:"setProps",value:function(e){e.style&&this.getProp("style")!=e.style&&this.updateStyle(e.style),"title"in e&&this.getProp("title")!==e.title&&this.updateTitle(e.title),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setProps",this).call(this,e)}},{key:"getStyles",value:function(){return n(238)}},{key:"updateTitleCss",value:function(e){e&&(this.$context.find(".title").css(e),e.color&&(this.updateSplitLineColor(e.color),this.$boards.find(".record-btn").css({color:e.color})))}},{key:"updateSplitLineColor",value:function(e){if(e&&e.indexOf("rgba")>-1){var t=e.split("(")[1].split(")")[0].split(","),n=s(t,4),i=n[0],o=n[1],r=n[2],a=n[3];this.$boards.find(".title").css({borderBottom:"1px solid rgba("+i+","+o+","+r+","+.1*a+")"}),this.$boards.find(".record").css({borderBottom:"1px solid rgba("+i+","+o+","+r+","+.1*a+")"})}}},{key:"updateRecordTextColor",value:function(e){this.$context.find(".record").css(e)}},{key:"updateBackgroundColor",value:function(e){this.$boards.css(e)}},{key:"updateButtonColor",value:function(e){this.$boards.find(".button")[0].className="button",this.$boards.find(".button").css(e)}},{key:"updateButtonBg",value:function(e){this.$boards.find(".buttonDiv").css(e)}},{key:"updateStyle",value:function(e){this.$boards&&"barrage"===e?this.compJson.css.backgroundColor="transparent":this.$boards&&this.$boards.removeClass().addClass("boards-"+e)}},{key:"updateTitle",value:function(e){this.$context.find(".title").html(e||"")}},{key:"updatePlaceholder",value:function(e){this.$context.find(".content-text").attr("placeholder",e)}},{key:"updateButtonIcon",value:function(e){this.$boards.find(".buttonDiv").find("#buttonIcon")[0].className=e;var t=e.split("-")[2];this.$boards.find(".buttonDiv").find(".button")[0].className="button "+t}},{key:"updateLayout",value:function(e){"vertical"===e?this.$boards.find(".buttonDiv").addClass("buttonDiv-ver").removeClass("buttonDiv-hor"):this.$boards.find(".buttonDiv").addClass("buttonDiv-hor").removeClass("buttonDiv-ver")}},{key:"eleShow",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleShow",this).call(this);var e=this.compJson.properties,n=e.style,i=e.auto,o=e.titleColor;if(this.$panel.parent().length||(this.$panel.hide(),this.$panel.insertBefore(this.$li.parent().parent())),"barrage"===n)i&&this.playBarrageScroll();else if("button"===n)this.$boards&&this.commentManager&&this.commentManager.getComments().map(function(e){return u.record(e)});else{var r=this.commentManager?this.commentManager.getComments().map(function(e){return u.record(e)}):[];r.length?(this.$boards.find(".empty-boards").length&&this.$boards.find(".empty-boards").remove(),this.$boards.find(".record").remove(),this.$panelList.prepend(r)):"view"==this.eqxScene.config.mode&&(this.$panelList.append(u.emptyBoards(n)),"userDefine"===n&&this.$panelList.find(".userDefine-empty").css({color:o}))}}},{key:"eleHide",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleHide",this).call(this);var e=this.compJson.properties.style;"barrage"!==e?(this.$boards.find(".record").remove(),this.$boards.find(".empty-boards").remove(),this.$panel.hide()):this.stopBarrageScroll()}},{key:"addClassToLi",value:function(e){e.addClass("wsite-boards"),e.attr("min-h",60).attr("min-w",230)}},{key:"updateComments",value:function(){var e=this.compJson.properties.style;"barrage"!==e&&this.$boards&&this.$panel&&this.eleShow()}},{key:"create$context",value:function(){var e=this.compJson.properties.style;return"barrage"===e?this.$ele=this.initBarrageDiv():"button"===e?this.$ele=this.initButtonStyleDiv():this.$ele=this.initCommentStyleDiv(),this.$ele}},{key:"playBarrageScroll",value:function(){var e=this;if(!this.isBarragePlaying&&this.barrageComments.length){this.isBarragePlaying=!0;var t=this.$boards.find("a.barrage-play");t.removeClass("off").addClass("on");var n=this.compJson,i=n.css,o=i.width,r=i.height,a=n.properties.mode,s=this.$boards.find(".barrage-comments").get(0),c=window.devicePixelRatio||1;s.width=o*c,s.height=r*c,setTimeout(function(){e.Barrage.render(s,e.barrageComments,"0"===a.toString())})}}},{key:"stopBarrageScroll",value:function(){if(this.isBarragePlaying){this.isBarragePlaying=!1;var e=this.$boards.find("a.barrage-play");e.removeClass("on").addClass("off"),this.Barrage&&this.Barrage.stop()}}},{key:"initBarrageDiv",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.properties,o=i.style,r=i.auto,a=i.editable,s=$(u.compDiv({id:t,type:n,style:o})),c=this.$boards=s.find(".boards-"+o);return c.append(u.barrageComments()),c.append(u.barrageTools(r,a)),this.$panel=$(u.panel({style:"default"})),this.$panelList=this.$panel.find(".list"),this.$contentText=this.$panel.find(".content-text"),this.$contentTip=this.$panel.find(".content-tip"),this.$submit=this.$panel.find(".record-btn"),this.$more=this.$panel.find(".more-mes"),this.$close=this.$panel.find(".eqf-no"),this.$title=this.$panel.find(".title"),this.maxLength=this.$contentText.attr("maxLength"),s}},{key:"initButtonStyleDiv",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.properties,o=i.style,r=i.iconColor,a=i.buttonBackground,s=i.layout,c=i.buttonIcon,l=$(u.compDiv({id:t,type:n,style:o})),p=this.$boards=l.find(".boards-"+o);return p.append(u.button()),this.$panel=$(u.panel({style:"default"})),this.$trigger=this.$boards.find(".buttonDiv"),this.$panelList=this.$panel.find(".list"),this.$contentText=this.$panel.find(".content-text"),this.$contentTip=this.$panel.find(".content-tip"),this.$submit=this.$panel.find(".record-btn"),this.$more=this.$panel.find(".more-mes"),this.$close=this.$panel.find(".eqf-no"),this.$title=this.$panel.find(".title"),this.maxLength=this.$contentText.attr("maxLength"),this.$boards.find(".button").css({color:r}),this.$boards.find(".buttonDiv").css({backgroundColor:a}),this.$boards.find(".button").find("#buttonIcon").hasClass(c)||(this.$boards.find(".buttonDiv").find("#buttonIcon")[0].className=c),"vertical"===s&&this.$boards.find(".buttonDiv").addClass("buttonDiv-ver"),l}},{key:"initCommentStyleDiv",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.properties,o=i.placeholder,r=void 0===o?"请输入留言板默认文案":o,a=i.style,s=i.titleColor,c=i.recordTextColor,l=i.backgroundColor,p=$(u.compDiv({id:t,type:n,style:a})),d=this.$boards=p.find(".boards-"+a),h=this.compJson.properties.title||"留言板";d.append(u.title(h)),d.append(u.recordParent()),d.append(u.tool(r)),d.append(u.contentWarn()),this.$trigger=d.find(".tool a"),this.end=!1;var f=this.$panel=$(u.panel({style:a}));this.$close=f.find(".eqf-no"),this.$contentText=d.find(".content-text"),this.$contentWarn=d.find(".content-warn"),this.$contentTip=f.find(".content-tip"),this.$submit=d.find(".record-btn"),this.$more=f.find(".more-mes"),this.$panelList=d.find(".recordParent"),this.maxLength=this.$contentText.attr("maxLength");var g=this.$boards.find(".tool");if(this.eqxScene.config.disableCommentManager){var m=(new Date).getTime(),v=["很好很喜欢哦，不错！","赞一个！好多新功能哦~","界面真不错，好好看。"],y=[1,2,3].map(function(e){return u.record({content:E(v[e-1]),name:"匿名用户",createTime:m+1e4*e,isEditor:!0})});this.$panelList.append(y)}return"userDefine"===a&&(this.$boards.find(".title").css({color:s}),this.$boards.find(".tool").find(".record-btn").css({color:s}),this.$boards.find(".recordParent").css({color:c}),this.updateSplitLineColor(s),this.$boards.css({backgroundColor:l})),this.eqxScene.getOrientation().isLandScape()&&(this.$panelList.css({height:"180px"}),g.css({bottom:"10px"})),p}},{key:"bindAfterRenderEvent",value:function(e,t){function n(){k.commentManager&&k.commentManager.loadMoreComments().then(function(e){k.$more.before(e.map(function(e){return u.record(e)}))})["catch"](function(){k.$more.html("没有更多"),k.$more.unbind("click"),"barrage"!==k.style&&"button"!==k.style&&(k.end=!0,k.$panelList.append(u.noMore()))})}function i(){var e=k.compJson.properties.style,t=k.commentManager.getComments().map(function(e){return u.record(e)});k.$panelList.find(".record").remove(),k.$panelList.prepend(t),k.$panel.show();var i=k.eqxPage,o=i.$editDiv.css("transform")||"",r=o.match(/matrix.*, (.*)\)/),a=r?r[1]:0,s=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;k.$panel.css({top:Math.abs(a)+"px",height:(S()?s:486)+"px"}),"barrage"===e&&k.stopBarrageScroll(),n()}var o=this,r=t.sceneId,a=t.pageId,s=t.properties,c=s.style,l=void 0===c?"default":c,p=s.editable,h=d(),w=m,k=this,T=0,_=0,C=0;this.$panel.on("touchstart touchmove touchend mousedown mouseup mousemove",function(e){e.stopPropagation()}),this.$contentText.on("touchstart touchmove touchend mousedown mouseup mousemove",function(e){e.stopPropagation()}),this.$boards.find(".recordParent").on("touchstart touchmove touchend mousedown mouseup mousemove",function(e){if(e.stopPropagation(),S()&&k.eqxPage.orientation.isLandScape()&&k.eqxPage===k.eqxScene.currentPage){if(e.preventDefault(),!e.originalEvent.touches)return;var t=e.originalEvent.touches[0];"touchstart"===e.type&&(T=t.clientX,C=e.currentTarget.scrollTop),"touchmove"===e.type&&(_=t.clientX-T,e.currentTarget.scrollTop=C+_)}}),this.$contentText.on("input",function(e){var t=e.target.value;if("barrage"===l||"button"===l){var n=t.length+t.split("\n").length-1;o.$contentTip.html(n+"/"+o.maxLength)}else t.length>=o.maxLength&&(o.$contentWarn.addClass("content-warn-show"),setTimeout(function(){o.$contentWarn.removeClass("content-warn-show")},3e3))}),I()&&this.$contentText.on("blur",function(e){window.scrollTo(0,0)}),window.addEventListener("resize",function(){"INPUT"!=document.activeElement.tagName&&"TEXTAREA"!=document.activeElement.tagName||window.setTimeout(function(){
document.activeElement.scrollIntoViewIfNeeded()},0)});var A=!1;if(this.$submit.on("click",function(){var e=P(E($.trim(o.$contentText.val())));if(!e)return!1;if(!A){A=!0,o.$submit.addClass("submit-disabled");var t=e.length+e.split("\n").length-1;t>o.maxLength&&(e=e.slice(0,o.maxLength));var n={sceneId:r,content:e,url:h.headimgurl||"",name:h.nickname||"匿名用户"};g()&&(n.name="企业微信用户"),o.commentManager.postComment(n).then(function(e){var t=u.record(e);b(""+("barrage"===l?"发送弹幕成功，谢谢参与！":"留言成功，谢谢参与！")),o.$contentText.val(""),o.$panelList.parent().scrollTop(0),"barrage"!==l&&"button"!==l||o.$panelList.prepend(t),o.commentManager.sum_num+=1,o.eqxScene.$ele.find(".main-page").find(".mess-counts").text(o.commentManager.sum_num),"barrage"===l&&o.barrageComments.unshift(e)})["catch"](function(){b("file:"===window.location.protocol?"请发布后再提交！":"提交失败，请重新提交")})["finally"](function(){o.$contentTip.html("0/"+o.maxLength);var e=5,t=function n(){var t="barrage"===l||"button"===l?"提交留言":"";e?(o.$submit.text(""+t+e--),setTimeout(function(){n()},1e3)):(o.$submit.text(t),o.$submit.removeClass("submit-disabled"),A=!1)};t()})}}),this.$close.on("click",function(){o.$panel.hide(),o.eleShow()}),this.$more.on("click",function(){n()}),"barrage"===l){var O=this.$boards.find("a.barrage-submit"),q=this.$boards.find("a.barrage-play");O.click(function(){if(p)return g()?i():void(f()&&!h.nickname?w(null,o.eqxScene.meta).then(function(e){e.obj?(v(e.obj),i()):(x(a),y(null,null,o.eqxScene.meta))})["catch"](function(){i()}):i())}),q.click(function(){o.isBarragePlaying?o.stopBarrageScroll():o.playBarrageScroll()})}else this.$trigger.on("click",function(){return g()?i():void(f()&&!h.nickname?w(null,o.eqxScene.meta).then(function(e){e.obj?(v(e.obj),i()):(x(a),y(null,null,o.eqxScene.meta))})["catch"](function(){i()}):i())});return"barrage"!==l&&"button"!==l&&(this.onFocusInTrigger(this.$contentText),this.$panelList.on("scroll",function(e){var t=o.$panelList[0];t.scrollHeight-t.scrollTop!==t.clientHeight||o.end||n()})),!0}},{key:"onFocusInTrigger",value:function(e){var t=this;S()&&this.eqxScene.getOrientation().isLandScape()&&e.on("focusin",function(e){t.eqxPage===t.eqxScene.currentPage&&(t.eqxScene.eventManager.publish("formMask",{comp:t}),$(e.currentTarget).blur(),e.preventDefault())})}}]),t}(p);e.exports=_},function(e,t,n){"use strict";function i(e){var t=e.id,n=e.type,i=e.style,o=void 0===i?"default":i;return x(b,{id:t,type:n,style:o})}function o(){return'<canvas class="barrage-comments"></canvas>'}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return'<div class="buttonDiv">\n                <a class="button"><i class="eqf-comment-f" id="buttonIcon"></i><span class="mess-counts">'+S(e)+"</span></a>\n            </div>"}function a(e,t){return'<div class="barrage-tools">\n                '+(t?'<a class="barrage-submit eqf-pen-f"></a>':"")+'\n                <a class="barrage-play '+(e?"on":"off")+'">弹<i class="eqf-slash-l"></i></a>\n            </div>'}function s(e){var t=n(235);return'<div class="empty-boards width240"><img style="margin-top:-51px;" src="'+t+'" />\n                <p class="'+e+'-empty">还没有留言，快来抢沙发哦～</p>\n            </div>'}function c(e){return'<div class="tool width240">\n                <textarea type="text" placeholder="'+S(e)+'" class="input200 content-text" rows="2" cols="20"  maxlength="140"></textarea>\n                <i class="eqf-yes-f record-btn"></i>\n            </div>'}function l(){return'<div class="content-warn">最多输入140个字</div>'}function u(e){return'<div class="title width240">'+S(e)+"</div>"}function p(){return'<div class="no-more-comment">\n            没有更多\n        </div>'}function d(e){return'<div class="headimg" style="background-image:url('+e+')"></div>'}function h(){return'<div class="headimg headimg-bg"><img src="'+w+'"></div>'}function f(){return'<div class="recordParent"></div>'}function g(e){var t=e.url,n=e.name,i=e.content,o=e.createTime,r=t?d(t):h();if((new Date).getTime()-o<6e4)var a="刚刚";else a=v(new Date(o),"MM月dd日 hh:mm");return'<div class="record width240">\n                '+r+'\n                <div class="name ellipsis">'+I(S(n))+'</div>\n                <div class="mes">'+I(S(i))+'</div>\n                <div class="time">'+I(S(a))+"</div>\n            </div>"}function m(e){var t=e.style,n=void 0===t?"default":t;return x(y,{style:n})}n(231);var v=n(35).dateFormat,y=n(232),b=n(233),x=n(36).parse,w=n(234),k=n(66),S=k.perfectStr,I=k.getSafeStr;e.exports={compDiv:i,emptyBoards:s,tool:c,headImgUser:d,headImgEqxView:h,record:g,panel:m,barrageTools:a,barrageComments:o,title:u,recordParent:f,button:r,contentWarn:l,noMore:p}},function(e,t){},function(e,t){e.exports='<div class="boards-panel boards-#{style}"><div class="boards-top"><div class="head">留言板<em class="eqf-no"></em></div><div class="boards-form"><div class="textParent"><textarea placeholder="请输入留言板默认文案" maxlength="140" class="content-text"></textarea><span class="content-tip">0/140</span></div><a class="record-btn" data-event="11207">提交留言</a></div><div class="spline-con"><span>更多留言</span> <span class="spline"></span></div></div><div class="boards-con ios-boards-con"><div class="list"><div class="more-mes">查看更多</div></div></div></div>'},function(e,t){e.exports='<div class="element-box-contents eqx-comp-comment" style="width: 100%; height: 100%"><div id="#{id}" class="element boards-#{style}" ctype="#{type}"></div></div>'},function(e,t,n){e.exports=n.p+"images/head1-b9ab62.png"},function(e,t,n){e.exports=n.p+"images/sofa-737426.png"},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){this.realCav=e,this.realCtx=this.realCav.getContext("2d"),this.cavWidth=this.cav.width=this.realCav.width,this.cavHeight=this.cav.height=this.realCav.height;var t=void 0;switch(this.bulletScreenStyle){case 1:t=D;break;case 2:t=J}var n=this.lineHeight=t.lineHeight,i=this.cavHeight-2*t.canvasMargin,o=n+t.MARGIN_BOTTOM;this.lineCount=Math.floor(i/o),i-o*this.lineCount>=n&&(this.lineCount+=1),this.ctx.font=B+" "+q+"px Arial",2==this.bulletScreenStyle&&(this.ctx.shadowColor=t.textShadowColor,this.ctx.shadowOffsetX=t.textShadowOffsetX,this.ctx.shadowOffsetY=t.textShadowOffsetY,this.ctx.shadowBlur=t.textShadowBlur)}function a(e,t){var i=this;this.barrageArr=[],e.forEach(function(e){i.barrageArr.push({logo:e.wxHeadUrl||n(237),wxName:(e.wxName||"").slice(0,6),rewardUserName:(e.rewardUserName||"").slice(0,6),rewardType:e.rewardType,giftImgSrc:""+_.FILE+e.giftImg,giftName:e.giftName||"",totalMoney:(e.totalMoney||0)/100,stayMessage:(e.stayMessage||"").slice(0,20)})});for(var o=0;o<this.barrageArr.length;o++){var r=this.barrageArr[o];if(1==t){var a=D.logoLeftMargin,s=D.logoSize,c=D.logoRightMargin,l=D.marginRight,u=D.sameLineTextSpace,p=D.giftImgSize,d=D.giftLeftMargin,h=D.MARGIN_RIGHT;if(r.rewardType&&1!=r.rewardType){if(2==r.rewardType){r.name=r.rewardUserName||r.wxName;var f=r.nameWidth=this.ctx.measureText(r.name).width;r.rewardText="送"+r.giftName;var g=r.rewardTextWidth=this.ctx.measureText(r.rewardText).width,m=void 0;if(r.stayMessage){var v=this.ctx.measureText(r.stayMessage).width;m=Math.max(v,f+u+g+d+p)}else m=f+u+g+d+p;r.rectWidth=a+s+c+m+l;var y=new Image;y.src=r.giftImgSrc,r.giftImg=y}}else{r.name=r.wxName;var b=r.nameWidth=this.ctx.measureText(r.name).width;r.rewardText="打赏￥"+r.totalMoney;var x=this.ctx.measureText(r.rewardText).width,w=void 0;if(r.stayMessage){var k=this.ctx.measureText(r.stayMessage).width;w=Math.max(k,b+x+u)}else w=b+x+u;r.rectWidth=a+s+c+w+l}r.rectHeight=this.lineHeight,r.left=this.cavWidth,r.right=h;var S=new Image;S.src=r.logo,r.logoImg=S}else if(2==t){var I=J.textSpace,T=J.giftImgSize,$=J.giftLeftMargin,E=J.giftRightMargin,P=J.MARGIN_RIGHT;if(r.rewardType&&1!=r.rewardType){if(2==r.rewardType){r.name=r.rewardUserName||r.wxName;var C=r.nameWidth=this.ctx.measureText(r.name).width;r.rewardText="送"+r.giftName;var A=r.rewardTextWidth=this.ctx.measureText(r.rewardText).width,O=0;r.stayMessage&&(O=this.ctx.measureText(r.stayMessage).width),r.rectWidth=C+I+A+$+T+(O?E+O:0);var q=new Image;q.src=r.giftImgSrc,r.giftImg=q}}else{r.name=r.wxName;var L=r.nameWidth=this.ctx.measureText(r.name).width;r.rewardText="打赏￥"+r.totalMoney;var M=r.rewardTextWidth=this.ctx.measureText(r.rewardText).width,R=0;r.stayMessage&&(R=this.ctx.measureText(r.stayMessage).width),r.rectWidth=L+I+M+(R?I+R:0)}r.rectHeight=this.lineHeight,r.left=this.cavWidth,r.right=P}}}function s(){this.magazine=[].concat(i(this.barrageArr));for(var e=[],t=0,n=this.lineCount;t<n;t++)e.push({lastBarrage:null,couldCarry:!0,speed:2*A});this.battlefield={lineStates:e,width:this.cavWidth,barrageList:[]}}function c(){var e=this,t=this.magazine,n=this.battlefield;y.call(this);for(var o=l.call(this);t.length&&o;){var r=t.shift();n.barrageList.push(r),o=l.call(this,r)}var a=u.call(this);a.length&&(t.push.apply(t,i(a)),a.forEach(function(t){t.left=e.cavWidth,t.top=void 0}))}function l(e){var t=this.battlefield.lineStates,n=void 0;switch(this.bulletScreenStyle){case 1:n=D;break;case 2:n=J}if(e)for(var i=0;i<t.length;i++){var o=t[i];if(o.couldCarry){o.lastBarrage||(e.left=i*n.Line_SPACE+this.cavWidth),o.lastBarrage=e,o.couldCarry=!1;var r=n.MARGIN_BOTTOM,a=n.canvasMargin;e.top=i*(this.lineHeight+r)+a,e.speed=o.speed;break}}var s=t.some(function(e){return e.couldCarry});return s}function u(){for(var e=this.battlefield,t=this.ctx,n=e.barrageList,i=n.length,o=[],r=i;r>0;r--){var a=n[r-1];if(a.left+a.rectWidth<=0)o.push(a),n.splice(r-1,1);else{var s=a.left-=a.speed,c=s,l=a.top,u=l;if(1==this.bulletScreenStyle){var p=D.Radius,d=D.bgColor,h=D.logoLeftMargin,f=D.logoTopMargin,g=D.logoSize,m=D.logoRightMargin,v=D.borderColor,y=D.borderWidth,b=D.oneLineTextTopBottomMargin,x=D.twoLineTextTopBottomMargin,w=D.twoLineSpace,k=D.sameLineTextSpace,S=D.giftImgSize,P=D.giftLeftMargin,_=D.oneLineGiftTopMargin,C=D.twoLineGiftTopMargin,A=s+h,O=l+f;T(c,u,a.rectWidth,a.rectHeight,t,p,d),$(a.logoImg,A,O,g,t),E(A,O,g,v,y,t);var L=A+g+m,M=L+a.nameWidth+k,R=void 0,j=void 0,F=void 0,B=void 0;if(a.stayMessage){var N=L;j=u+x,F=j,B=u+C;var z=j+q+w;I(a.stayMessage,N,z,t)}else j=u+b,F=j,B=u+_;I(a.name,L,j,t),I(a.rewardText,M,F,t),2==a.rewardType&&(R=M+a.rewardTextWidth+P,t.drawImage(a.giftImg,R,B,S,S))}else if(2==this.bulletScreenStyle){var W=J.textSpace,H=J.textTopBottomMargin,Y=J.giftImgSize,U=J.giftLeftMargin,X=J.giftRightMargin,G=s,Q=G+a.nameWidth+W,V=void 0,K=l+H,Z=K,ee=l;if(I(a.name,G,K,t),I(a.rewardText,Q,Z,t),1==a.rewardType){if(a.stayMessage){var te=Q+a.rewardTextWidth+W,ne=K;I(a.stayMessage,te,ne,t)}}else if(2==a.rewardType&&(V=Q+a.rewardTextWidth+U,t.drawImage(a.giftImg,V,ee,Y,Y),a.stayMessage)){var ie=V+Y+X,oe=K;I(a.stayMessage,ie,oe,t)}}}}return o}function p(e){this.realCav=e,this.realCtx=this.realCav.getContext("2d"),this.cavWidth=this.cav.width=this.realCav.width,this.cavHeight=this.cav.height=this.realCav.height,this.limitTextWidth=this.cavWidth-O-2*j-F-q;var t=this.lineHeight=O+2*j;this.lineCount=Math.floor(this.cavHeight/(t+L)),this.yOff=Math.round(this.cavHeight-this.lineCount*(t+L))/2,this.ctx.font=q+"px Arial"}function d(e){var t=this;this.barrageArr=[],e.forEach(function(e){t.barrageArr.push({logo:e.url||n(237),text:e.content})})}function h(){for(var e=0;e<this.barrageArr.length;e++){var t=this.barrageArr[e],n=this.ctx.measureText(t.text).width,o=new Image;o.src=t.logo,t.image=o,t.rectWidth=O+F+n+2*j,t.rectHeight=O+2*j,t.left=this.cavWidth}this.magazine=[].concat(i(this.barrageArr));for(var r=[],a=0,s=this.lineCount;a<s;a++)r.push({lastBarrage:null,couldCarry:!0,speed:k(50,100)/100*A});this.battlefield={lineStates:r,width:this.cavWidth,barrageList:[]}}function f(e){for(var t=0;t<this.barrageArr.length;t++){var n=this.barrageArr[t-1],i=this.barrageArr[t],o=new Image;o.src=i.logo,e||(i.left=0,i.speed=A,i.image=o,i.textRows=S(this.barrageArr[t].text,this.limitTextWidth,this.ctx),i.oneLineTextHeight=1.2*q,i.oneLineTextWidth=this.ctx.measureText(i.textRows[0]).width,i.mutilLineTextHeight=i.oneLineTextHeight*i.textRows.length,i.rectWidth=O+F+i.oneLineTextWidth+2*j,i.mutilLineTextHeight>O?i.rectHeight=i.mutilLineTextHeight+2*j-.2*q:i.rectHeight=O+2*j),i.top=n?n.top+n.rectHeight+L:this.cavHeight}}function g(){w.call(this),this.playFn(),this.realCtx.drawImage(this.cav,0,0,this.cavWidth,this.cavHeight),this.animationId=requestAnimationFrame(g.bind(this))}function m(){var e=this,t=this.magazine,n=this.battlefield;y.call(this);for(var o=v.call(this);t.length&&o;){var r=t.shift();n.barrageList.push(r),o=v.call(this,r)}var a=b.call(this);a.length&&(t.push.apply(t,i(a)),a.forEach(function(t){t.left=e.cavWidth,t.top=void 0,t.speed=void 0,t.right=void 0}))}function v(e){var t=this.battlefield.lineStates;if(e)for(var n=0;n<t.length;n++){var i=t[n];if(i.couldCarry){var o=Math.round,r=Math.random;i.lastBarrage=e,i.couldCarry=!1,e.top=n*(this.lineHeight+L)+this.yOff+o(r()*M),e.speed=i.speed*(.8+.8*r()),e.right=o(R*(.6+.8*r()));break}}var a=t.some(function(e){return e.couldCarry});return a}function y(){var e=this,t=this.battlefield.lineStates;t.forEach(function(t){var n=t.lastBarrage;n&&n.left+n.rectWidth+n.right<e.cavWidth&&(t.couldCarry=!0)})}function b(){for(var e=this.battlefield,t=this.ctx,n=e.barrageList,i=n.length,o=[],r=i;r>0;r--){var a=n[r-1];if(a.left+a.rectWidth<=0)o.push(a),n.splice(r-1,1);else{var s=a.left-=a.speed,c=s,l=s+j,u=l+O+F,p=a.top,d=p,h=p+j,f=h+3*A;T(c,d,a.rectWidth,a.rectHeight,t),$(a.image,l,h,O,t),I(a.text,u,f,t)}}return o}function x(){for(var e=0;e<this.barrageArr.length;e++){var t=this.barrageArr[e],n=this.barrageArr[this.barrageArr.length-1];n.top+n.rectHeight<=0&&f.call(this,!0);var i=t.left,o=i+j,r=o+O+F,a=t.top-=t.speed,s=a,c=a+j,l=t.textRows.length>1?c:c+3*A;T(i,s,t.rectWidth,t.rectHeight,this.ctx),$(t.image,o,c,O,this.ctx);for(var u=0;u<t.textRows.length;u++)I(t.textRows[u],r,l+t.oneLineTextHeight*u,this.ctx)}}function w(){this.realCtx&&(this.ctx.clearRect(0,0,this.cavWidth,this.cavHeight),this.realCtx.clearRect(0,0,this.cavWidth,this.cavHeight))}function k(e,t){var n=t-e+1;return Math.floor(Math.random()*n+e)}function S(e,t,n){for(var i=e.split(""),o="",r=[],a=0;a<i.length;a++)n.measureText(o).width>=t&&(r.push(o),o=""),o+=i[a];return r.push(o),r}function I(e,t,n,i){i.fillStyle="#fff",i.textBaseline="top",i.fillText(e,t,n)}function T(e,t,n,i,o,r,a){var s=r||3*A;n<2*s&&(s=n/2),i<2*s&&(s=i/2),o.fillStyle=a||"rgba(0,0,0,.3)",o.beginPath(),o.moveTo(e+s,t),o.arcTo(e+n,t,e+n,t+i,s),o.arcTo(e+n,t+i,e,t+i,s),o.arcTo(e,t+i,e,t,s),o.arcTo(e,t,e+n,t,s),o.fill()}function $(e,t,n,i,o){o.beginPath(),o.arc(t+i/2,n+i/2,i/2,0,2*Math.PI,!0),o.closePath(),o.save(),o.clip(),o.drawImage(e,t,n,i,i),o.restore()}function E(e,t,n,i,o,r){r.strokeStyle=i,r.lineWidth=o,r.beginPath(),r.arc(e+n/2,t+n/2,n/2,0,2*Math.PI,!0),r.stroke()}var P=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_=n(24),C=window.devicePixelRatio,A=C||1,O=20*A,q=12*A,L=18*A,M=Math.round(.7*L),R=60*A,j=5*A,F=5*A,B=500,D={lineHeight:40*A,logoSize:36*A,logoLeftMargin:2*A,logoRightMargin:8*A,logoTopMargin:2*A,logoBottomMargin:2*A,borderColor:"rgb(255, 255, 255)",borderWidth:1*A,oneLineTextTopBottomMargin:14*A,twoLineTextTopBottomMargin:6*A,twoLineSpace:4*A,sameLineTextSpace:4*A,giftImgSize:16*A,giftLeftMargin:4*A,oneLineGiftTopMargin:12*A,twoLineGiftTopMargin:4*A,marginRight:12*A,bgColor:"rgba(0, 0, 0, 0.59)",Radius:32*A,canvasMargin:63*A,MARGIN_BOTTOM:40*A,MARGIN_RIGHT:14*A,Line_SPACE:40*A},J={lineHeight:16*A,textTopBottomMargin:2*A,textSpace:4*A,textShadowColor:"#000000",textShadowOffsetX:0*A,textShadowOffsetY:0*A,textShadowBlur:1*A,giftImgSize:16*A,giftLeftMargin:4*A,giftRightMargin:8*A,canvasMargin:80*A,MARGIN_BOTTOM:60*A,MARGIN_RIGHT:40*A,Line_SPACE:40*A},N=function(){function e(){o(this,e),this.cav=document.createElement("canvas"),this.ctx=this.cav.getContext("2d"),this.realCav=null,this.realCtx=null,this.cavWidth=0,this.cavHeight=0,this.barrageArr=[],this.isH=!0,this.animationId=null,this.limitTextWidth=0}return P(e,[{key:"render",value:function(e,t,n){cancelAnimationFrame(this.animationId),this.stop(),p.call(this,e),d.call(this,t),n?(h.call(this),this.playFn=m.bind(this)):(f.call(this),this.playFn=x.bind(this)),this.animationId=requestAnimationFrame(g.bind(this))}},{key:"renderBulletScreen",value:function(e,t,n){this.bulletScreenStyle=n,cancelAnimationFrame(this.animationId),this.stop(),r.call(this,e),a.call(this,t,n),s.call(this),this.playFn=c.bind(this),this.animationId=requestAnimationFrame(g.bind(this))}},{key:"stop",value:function(){cancelAnimationFrame(this.animationId),w.call(this)}}]),e}();e.exports=N},function(e,t,n){e.exports=n.p+"images/head-38c163.png"},function(e,t){"use strict";e.exports=[{name:"默认",value:"default"},{name:"简约黑",value:"black"},{name:"少女粉",value:"pink"},{name:"邮票风",value:"blue"},{name:"便签风",value:"yellow"},{name:"弹幕风",value:"barrage"},{name:"按钮风",value:"button"},{name:"自定义",value:"userDefine"}]},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function m(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:m(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)};n(226);var c=n(240).$postCount,l=n(227).fixedNum,u=n(241),p=n(101),d=n(27).isWeixin,h=n(243),f=n(82).popUpModal,g=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!0},functionStyle:{counter:!0,repeatSubmit:!0},advanceStyle:{"function":!0}},trigger:{self:!1},sound:!1,link:!1}),r}return r(t,e),a(t,[{key:"getFtEditableProps",value:function(){var e=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtEditableProps",this).call(this),n=this.FtEditableProps;return e.concat([n.color.counterColor])}},{key:"getFtValue",value:function(e){var n=this.FtEditableProps;return e===n.color.counterColor?this.getProp("color"):s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtValue",this).call(this,e)}},{key:"updateSize",value:function(e,n){n.height&&(n.lineHeight=n.height+"px",this.$context.css({lineHeight:n.lineHeight})),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSize",this).call(this,e,n)}},{key:"bindAfterRenderEvent",value:function(e){var t=this,n=this.compJson,i=n.id,o=n.sceneId,r=n.pageId,a=n.properties.countBase,s=void 0===a?0:a,u=this.eqxScene.sceneJson.meta.code,p=this.$context;this.eqxScene.statManager.getCounterValues().then(function(e){var t=parseInt(e[i]||0)+parseInt(s);p.find(".counter-number").attr("data-counter-number",t).html(l(t))});var g=this.$li.find(".comp_counter"),m=g.find(".counter-number"),v="rating-l";return g.click(function(){t.compJson.properties&&t.compJson.properties.clickFarmer?d()?c({sceneId:o,elementId:i,pageId:r},u).then(function(){g.unbind("click").removeClass("not-voted");var e=Number.parseInt(m.attr("data-counter-number"))||0,t=e+1;m.attr("data-counter-number",t).text(l(t))})["catch"](function(t){120504===t.code?h.modal(e,v,!1,null,"请到微信中打开使用"):120505===t.code||120603===t.code?h.modal(e,v,!1,null,"请不要重复提交"):f("服务器异常!")}):h.modal(e,v,!1,null,"请到微信中打开使用"):c({sceneId:o,elementId:i,pageId:r},u).then(function(){g.unbind("click").removeClass("not-voted");var e=Number.parseInt(m.attr("data-counter-number"))||0,t=e+1;m.attr("data-counter-number",t).text(l(t))})["catch"](function(t){120603===t.code||120505===t.code?h.modal(e,v,!1,null,"请不要重复提交"):f("服务器异常!")})}),!0}},{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.properties,o=i.layout,r=i.imgSrc,a=i.color,s=i.icon,c=i.size,l=e.css.textAlign,p=u.$compDiv({id:t,layout:o,size:c,type:n,icon:s,color:a,imgSrc:r});return"center"===l&&p.find("img").css("margin","0 auto"),p}},{key:"update$img",value:function(e){this.$context.find("img").attr("src",e)}},{key:"iconToImg",value:function(e){this.$context.find("i").remove().prepend(u.img(e))}},{key:"updateLayout",value:function(){this.$context.remove(),this.$li.css({height:this.compJson.css.height,lineHeight:this.compJson.css.lineHeight}),this.$context=this.create$context(),this.$contentsDiv.append(this.$context)}},{key:"update$iconColor",value:function(e){this.$context.find(".counter-container").css({color:e}),this.updateProp("color",e)}},{key:"deleteImage",value:function(){this.compJson.properties.imgSrc||this.$context.find("img").remove()}}]),t}(p);e.exports=g},function(e,t,n){"use strict";function i(e,t){var n=localStorage.getItem("wxUserResForH5");e.openid=n;var i=a.SERVER_1+"eqs/s/scene/count";return t&&(i=i+"?code="+t),r({type:"POST",url:i,data:e})}function o(e){return r({type:"POST",url:a.SERVER_1+"eqs/s/scene/counter/values",data:e})}var r=n(23).ajax,a=n(24);e.exports={$postCount:i,$getCountValues:o}},function(e,t,n){"use strict";function i(e){var t=e.id,n=e.layout,i=e.size,s=e.type,u=e.icon,p=e.color,d=e.imgSrc,h=d?r(d):o(u),f=d?1120609:a(u),g=$(l(c,{layout:n,size:i,id:t,type:s,i:h,dataEvent:f}));return g.find(".counter-container").css({color:p}),g}function o(e){return'<i class="counter-elem counter-icon '+e+'" ></i>'}function r(e){var t=s.FILE+e;return'<img class="counter-elem counter-icon"\n             style="width: 115px; height: 115px;" src="'+t+'">'}function a(e){var t={"eqf-heart-f":1120605,"eqf-zan-f":1120606,"eqf-flower2":1120607,"eqf-vote":1120608};return t[e]}var s=n(24),c=n(242),l=n(36).parse;e.exports={$compDiv:i}},function(e,t){e.exports='<div class="element comp_counter not-voted editable-text #{layout} #{size}" id="#{id}" ctype="#{type}" name="eq[f_#{id}]"><div class="counter-container" data-event="#{dataEvent}" style="white-space: nowrap">#{i} <span class="counter-elem counter-number" data-counter-number="0">0</span></div></div>'},function(e,t,n){"use strict";function i(e){var t=e.id,n=e.type,i=e.src,o=(e.css,e.padding),r='<button style="display: block;width: 100%;height: 100%; padding: '+o+';" data-event="11201"\n                        id="'+t+'" ctype="'+n+'" class="element comp_button editable-text" >\n                    <img style="width: 100%; height: 100%;" src="'+i+'" />\n                </button>';return $(r)}function o(e){var t=e.id,n=e.type,i=e.title,o=(e.css,e.inWxwork),r=i.replace(/ /g,"&nbsp;"),a='<button style="display: block;width: 100%;height: 100%;" \n                        id="'+t+'" ctype="'+n+'" data-event="11201"\n                        class="element comp_button editable-text '+(o?"inWxwork":"")+'" >'+x(r)+"</button>";return $(a)}function r(e){var t=e.layout,n=e.hasLink,i=e.src,o=e.text,r=e.link,s=e.linkText,c=a(),u=p(n,r,s,t);return c.append($('<div class="feedback-form"><img class="imghead" src='+w+"></div>").append(l(o,t,i),u)),c}function a(){var e=$('<div class="feedback-box"></div>');return $(".main-page.z-current").not(".editor-section").prepend(e),e}function s(e){return $('<div class="feedback-content__title feedback-content__title--text"><span>'+x(e)+"</span></div>")}function c(e,t,n){var i=$('<div class="feedback-content__title feedback-content__title--img"><span>'+x(n)+"</span></div>");return"rating-m"===e?i.prepend('<img class="up" src="'+t+'"/>'):"rating-s"===e&&i.append('<img class="down" src="'+t+'"/>'),i}function l(e,t,n){var i=$('<div class="feedback-content"></div>');return"rating-l"===t?i.append(s(e)):n&&i.append(c(t,n,e)),i}function u(e){y({checkUrl:e,sceneId:window.scene.id}).then(function(t){t?b(decodeURIComponent(e)):window.open("https://check.eqxiu.com/back-check/static/url.html?jumpUrl="+e,"_self")})}function p(e,t,n,i){var o=$('<div class="feedback-btn"></div>');if(e){var r=document.createElement("a");r.innerText="关闭",r.className="feedback-close left";var a=document.createElement("a");a.innerText=x(n),a.className="right",$(a).on("click",u.bind(null,t)),o.append(r).append(a).addClass("line")}else try{eqxAdSDK&&eqxAdSDK.text({mediaId:1088}).then(function(e){var t=void 0;e.data&&(t=e.data[0]);var n=void 0;if(t&&(k=t.content,S=t.linkUrl,n=t.mediaId),k?o.append('<a class="feedback-close">关闭</a><a bigdata_view="0" bd_attr="cat=尾页广告&act='+n+'" href="'+S+'" class="text-ad">'+k+"</a>"):o.append('<a class="feedback-close" style="display: block; color: #fff;width: 220px; border-radius: 18px; background: #1A94FF"; margin: 0 auto;>关闭</a>'),h($(".feedback-box")),"rating-l"!==i){var r=$(".feedback-form");r.css({top:"calc(50% - 10px)"})}})}catch(s){console.log(s),o.append('<a class="feedback-close" style="display: block; color: #fff;width: 220px; border-radius: 18px; background: #1A94FF"; margin: 0 auto;>关闭</a>')}return o}function d(e,t,n,i,o,r,s,c,u){var d=a(),f=$('<div class="ad-form-submit__wrapper"></div>');return f.append(l(o,t,i),$('<div id="ad-form-pop-submit"></div>'),p(n,r,s)),d.append(f),h(d),"#ad-form-pop-submit"}function h(e,t){var n=e.find(".feedback-close");n.on("click",function(){e.animate({opacity:0},{duration:300,complete:function(n){e.remove(),t&&t()}})})}function f(e,t,n,i,o,a,s,c,l){var u=r({layout:t,hasLink:n,src:i,text:o,link:a,linkText:s}),p=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,d=u.find(".feedback-box").prevObject,f=u.find(".feedback-form"),g=void 0;if(g="rating-l"===t?{marginTop:-Number.parseInt(f.height())/2+"px",top:p/2-d.offset().top+"px"}:{marginTop:-Number.parseInt(f.height())/2+"px",top:p/2-d.offset().top+32+"px"},v()){var m=f.height();g.transform="rotate(90deg)",g.top="calc(50% - "+m/2+"px)",g.marginTop="0px"}return f.css(g),h(u,l),u}function g(e,t,n,i){var o=void 0;o=i?$('<div id="domainTypeAd" bigdata_view="0" rdt="3" cat="pc_form_submit_ad" act="H5场景预览_表单提交_广告"><a href="'+t+'" bigdata_view="0" bd_attr="cat=尾页广告&act='+i+'"><img class="submit_banner_ad" src="'+n+'"/></a></div>'):$('<div id="domainTypeAd" bigdata_view="0" rdt="3" cat="pc_form_submit_ad" act="H5场景预览_表单提交_广告"><a href="'+t+'"><img class="submit_banner_ad" src="'+n+'"/></a></div>'),e.find(".feedback-content__title--text").append(o);var r=e.find(".feedback-form");r.css({top:"calc(50% - 115px)"});var a=r.find(".feedback-content__title--img img");a.length&&a.css({width:"160px",height:"160px"}),v()&&a.length&&(a.css({width:"60px",height:"60px"}),r.css({top:"calc(50% - 92.5px)",left:"60%"}))}function m(e,t){var n=void 0,i=void 0;if(e.renderAd&&e.renderAd.bannerSubmit)g(t),e.renderAd.renderFormSubMitDom("#domainTypeAd");else try{eqxAdSDK&&eqxAdSDK.text({mediaId:1089}).then(function(e){var o=void 0;if(e.data&&(o=e.data[0]),o){var r=void 0;n=o.linkUrl,i=o.picSrc,r=o.mediaId,n&&i&&g(t,n,i,r)}})["catch"](function(e){console.log(e)})}catch(o){console.log(o)}}n(244);var v=n(84).isLandScape,y=n(211).$getAuditResult,b=n(26).openUrl,x=n(66).perfectStr,w=n(245),k=void 0,S=void 0;e.exports={$img:i,$btn:o,modal:f,adModal:d,renderAd:m}},function(e,t){},function(e,t,n){e.exports=n.p+"images/success-1b220e.png"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function d(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:d(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)},c=n(247),l=n(248).formatTime,u=n(249).getServiceTime,p=function(e){function t(e,n){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return r(t,e),a(t,[{key:"getFtValue",value:function(e){var n=this.FtEditableProps;return e===n.time.time?this.getProp("endTime"):s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtValue",this).call(this,e)}},{key:"renderTime",value:function(e,n,i,o){var r=this,a=(new Date).getTime(),s=this.compJson.properties,c=s.endTime,p=s.arriveTips,d=s.arriveTipsContent;u().then(function(e){return a=e.obj},function(){return a=(new Date).getTime()}).then(function(a){var s=setInterval(function(){a+=1e3,r.$li||clearInterval(s),a>=c?(p?e.html(d||t.defaultArriveTipsContent):e.html(l(a,a,n,i,o)),clearInterval(s)):e.html(l(c,a,n,i,o))},1e3)})}}]),t}(c);p.defaultArriveTipsContent="开始啦!",e.exports=p},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function u(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:u(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)},c=n(101),l=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{fontFamily:!1,fontSize:!0,fontColor:!0,bgColor:!0},functionStyle:{timer:!0},advanceStyle:{"function":!0}},trigger:{self:!1},sound:!1,link:!1}),r}return r(t,e),a(t,[{key:"getFtEditableProps",value:function(){var e=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtEditableProps",this).call(this),n=this.FtEditableProps;return e.concat([n.time.time])}},{key:"create$context",value:function(){var e=document.createElement("div");e.id=this.compJson.id,e.setAttribute("ctype",this.compJson.type),e.setAttribute("class","element comp_paragraph editable-text");var t=this.compJson.css.fontSize,n=this.compJson.css.fontFamily;return t&&(e.style.fontSize=t),n&&(e.style.fontFamily=n),this.renderTime($(e),this.compJson.properties.order,this.compJson.properties.split,this.compJson.properties.mode),$(e)}},{key:"renderTime",value:function(e,t){
return null}}]),t}(c);e.exports=l},function(e,t){"use strict";function n(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"cn",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1,1,1],s=e-t,c=Math.floor(s/864e5),l=s%864e5,u=Math.floor(l/36e5),p=l%36e5,d=Math.floor(p/6e4),h=p%6e4,f=Math.round(h/1e3),g=o(a,4),m=g[0],v=g[1],y=g[2],b=g[3];switch(m||v||y||b||(m=1,v=1,y=1,b=1),!m||v||y||b?m||!v||y||b?m&&!v&&y&&!b&&(d=d||1):u=u||1:c=c||1,u=m?u:u+24*c,d=v?d:d+60*u,f=y?f:f+60*d,r){case"cn":return n?(m?i(c)+"天":"")+(v?i(u)+"小时":"")+(y?i(d)+"分钟":"")+(b?i(f)+"秒":""):(b?i(f)+"秒":"")+(y?i(d)+"分钟":"")+(v?i(u)+"小时":"")+(m?i(c)+"天":"");case"en":return n?(m?i(c)+" days, ":"")+(v?i(u)+" hours, ":"")+(y?i(d)+" minutes, ":"")+(b?i(f)+" seconds":""):(b?i(f)+" seconds, ":"")+(y?i(d)+" minutes, ":"")+(v?i(u)+" hours, ":"")+(m?i(c)+" days":"");case"char":return n?(m?i(c)+"天 ":"")+(v?i(u):"")+(v&&y?":":"")+(y?i(d):"")+((v||y)&&b?":":"")+(b?i(f):""):(b?i(f):"")+(b&&y?":":"")+(y?i(d):"")+((b||y)&&v?":":"")+(v?i(u):"")+(m?" "+i(c)+"天":"")}}function i(e){return e=e.toString(),e.length<2?"0"+e:e}var o=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(c){o=!0,r=c}finally{try{!i&&s["return"]&&s["return"]()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.exports={formatTime:n}},function(e,t,n){"use strict";function i(){var e=new Date,t="eqs/s/serviceTime/get?time="+e.getTime();return o({type:"GET",url:r.SERVER_1+t})}var o=n(23).ajax,r=n(24);e.exports={getServiceTime:i}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function d(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:d(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)},c=n(247),l=n(248).formatTime,u=n(249).getServiceTime,p=function(e){function t(e,n){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return r(t,e),a(t,[{key:"getFtValue",value:function(e){var n=this.FtEditableProps;return e===n.time.time?this.getProp("startTime"):s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtValue",this).call(this,e)}},{key:"renderTime",value:function(e,n,i,o){var r=this,a=(new Date).getTime(),s=this.compJson.properties,c=s.startTime,p=s.arriveTips,d=s.arriveTipsContent;u().then(function(e){return a=e.obj},function(){return a=(new Date).getTime()}).then(function(a){var s=setInterval(function(){a+=1e3,r.$li||clearInterval(s),a<=c?p?e.html(d||t.defaultArriveTipsContent):e.html(l(a,a,n,i,o)):e.html(l(a,c,n,i,o))},1e3)})}}]),t}(c);p.defaultArriveTipsContent="还没开始!",e.exports=p},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(118).BG_CROP_TYPE,a=n(27).mobilecheck,s=n(252),c=n(253),l=n(254),u=n(255),p=n(256),d=n(257),h=n(36).parse,f=n(71),g=f.qiniuZoom,m=f.loadImg,v=f.getBase64ImageBySrc,y=f.initEffectImgPath,b=n(120).ANIMATION_TYPE,x=n(258),w=x.getItemByUser;n(17);var k=function(){function e(t,n){i(this,e),this.compJson=t,this.eqxPage=n,this.eqxScene=n.eqxScene}return o(e,[{key:"updateBgHeight",value:function(e){a()||"edit"!==this.eqxScene.config.mode||"100%"==e||(e=parseInt(e)+(this.eqxPage.isLongPage()?this.diffHeight:2*this.diffHeight)+"px");var t={height:e};this.eqxScene.getOrientation().isLandScape()&&(t={width:e}),this.$bgEleContent.css(t),""!==this.compJson.properties.bgColor&&($(this.$bgEle).find(".eqx-bg-color").parent().css(t),$(this.$bgEle).find(".eqx-bg-color").css(t))}},{key:"updateVeinCss",value:function(e){this.$bgEle&&this.$bgEle.find(".new-bg-img").length>0&&this.$bgEle.find(".eqx-bg-img").css(e)}},{key:"updateBgTile",value:function(e){this.$bgEle&&this.$bgEle.find(".new-bg-img").length>0&&this.$bgEle.find(".eqx-bg-img").css({"background-size":e+"%"})}},{key:"updateBlur",value:function(e){if(this.$bgEle&&this.$bgEle.find(".eqx-bg").length>0){var t=this.$bgEle.find(".eqx-bg");t.css({filter:"blur("+e+"px)"})}}},{key:"updateTextureSize",value:function(e){if(this.$bgEle&&this.$bgEle.find(".new-bg-img").length>0){var t=this.$bgEle.find(".eqx-bg-img"),n=this.compJson.properties.textureCss.colorSwitch,i=this.compJson.properties.textureCss.svgAutoSrc,o="auto"===this.compJson.properties.textureCss.pathFrom;i&&o?t.css({"-webkit-mask-size":e+"%"}):"false"===n?t.css({"background-size":e+"%"}):"open"===n&&t.css({"-webkit-mask-size":e+"%"})}}},{key:"updateTextureColor",value:function(e){if(this.$bgEle&&this.$bgEle.find(".new-bg-img").length>0){var t=this.$bgEle.find(".eqx-bg-img");t.css({"background-color":e})}}},{key:"updateBgOpacity",value:function(e){this.$bgEle&&this.$bgEle.css({opacity:e})}},{key:"updateBgFilter",value:function(e){this.$bgEle&&this.$bgEle.css({filter:e})}},{key:"updateBgArea",value:function(e){"edit"===this.eqxScene.config.mode&&!this.eqxPage.isLongPage()&&this.$bgEle&&(e?this.$bgEle.css({overflow:"hidden"}):this.$bgEle.css({overflow:"visible"}))}},{key:"create$newBg",value:function(e,t,i){var o=this;this.$container=e;var s=this.compJson,u=s.id,f=s.css,m=f.opacity,b=f.filter,x=s.properties,k=x.veinCss,S=x.textureCss,I=x.superposition,T=void 0===I?"image":I,E=x.bgColor,P=x.croptype,_=x.imgSrc,C=x.pageLength,A=x.fileName,O=x.blur,q="100%",L="100%",M=/\.(gif)$/.test(A),R="view"===this.eqxScene.config.mode&&this.eqxScene.getOrientation().isLandScape(),j="edit"===this.eqxScene.config.mode&&this.eqxScene.getOrientation().isLandScape();if(this.middleBoxHeight=588,this.diffHeight=parseInt((this.middleBoxHeight-486)/2),E||(E="rgba(0,0,0,0)"),O||(O=0),this.$bgEle&&this.$bgEle.remove(),this.$bgEle=$('<div class="bg-wrap" style="width: 100%; height: 100%; position: absolute;z-index: -1;"><div class="bg-content" style="width: 100%; height: 100%;position: absolute;z-index: -1;"></div></div>'),this.$bgEleContent=this.$bgEle.find(".bg-content"),!a()&&"edit"===this.eqxScene.config.mode){var F=w("showPhone",this.eqxScene.meta.createUser);void 0===F&&(F=!0),!this.eqxPage.isLongPage()&&F&&(j?this.$bgEle.css({width:"486px",overflow:"hidden"}):this.$bgEle.css({height:"486px",overflow:"hidden"}));var B=this.eqxPage.isLongPage()?this.eqxPage.getPageHeight()+this.diffHeight:this.eqxPage.getPageHeight()+2*this.diffHeight;j?this.$bgEleContent.css({width:B,overflow:"hidden",left:"-"+this.diffHeight+"px"}):this.$bgEleContent.css({height:B,overflow:"hidden",top:"-"+this.diffHeight+"px"})}if(E){if(C&&(L=(C<10?486*C:C)-486+(a()?$(document).height():486)+"px"),this.eqxPage.pageJson&&this.eqxPage.pageJson.properties.longPage){var D=this.eqxPage.pageJson.properties.longPage;L=D>50?D+"px":D+486+"px"}var J=void 0;a()||"edit"!==this.eqxScene.config.mode||"100%"==L||(L=parseInt(L)+(this.eqxPage.isLongPage()?this.diffHeight:2*this.diffHeight)+"px"),J=j?$(h(c,{id:u,bgColor:E,width:L,height:"320px"})):$(h(c,{id:u,bgColor:E,width:q,height:L})),this.$bgEleContent.prepend(J),this.$context=J.find(".eqx-bg-img"),this.animate(),this.updateBgOpacity(m)}if(k||S){if("texture"===T){var N=this.compJson.properties,O=N.blur,z=N.textureCss,W=z.num;z.textureSize,z.colorSwitch,z.color;if(S){if(!S||W==-1)return this.$container.prepend(this.$bgEle);_="auto"===S.pathFrom?S.autoSrc:n(259)("./wl"+W+".svg")}}if("image"===T&&k){var H=this.compJson.properties,O=H.blur,Y=H.veinCss,U=Y.backgroundPositionX,X=(Y.tileSize,Y.type,this.compJson.properties.veinCss.imgSrc);X&&(_=y(X))}var G=y(_),Q=void 0;P===r["全屏背景模式"]?(L=(C<10?486*C:C)-486+(a()?$(document).height():486)+"px",G=g(G,320,L,M),Q=L):R?G=g(G,320,588,M):(L=a()?"100%":"486px",G=g(G,320,588,M));var V=function(e){var t;if(L=e,a()||"edit"!==o.eqxScene.config.mode||(L=o.eqxPage.isLongPage()?"100%":parseInt(L)+(o.eqxPage.isLongPage()?o.diffHeight:2*o.diffHeight)+"px"),a()&&o.eqxPage.isLongPage()&&o.eqxPage.pageJson.properties&&o.eqxPage.pageJson.properties.longPage&&(L=o.eqxPage.pageJson.properties.longPage+"px"),"texture"===T){var n=o.compJson.properties.textureCss,i=o.compJson.properties,r=i.blur,s=i.textureCss,c=s.num,f=s.textureSize,g=s.colorSwitch,v=s.color;if(n){var y=p;"false"===g&&(y=d),"auto"===n.pathFrom&&/.svg/.test(G)&&(y=p),t=j?Promise.resolve($(h(y,{textureSize:f+"%",bgColor:E,color:v,num:c,id:u,src:G,blur:r,width:q,height:"320px"}))):Promise.resolve($(h(y,{textureSize:f+"%",bgColor:E,color:v,num:c,id:u,src:G,blur:r,width:q,height:L})))}}if("image"===T){var x=o.compJson.properties.veinCss;if(x){var w=o.compJson.properties,r=w.blur,k=w.veinCss,S=k.backgroundPositionX,I=void 0===S?"50%":S,P=k.tileSize,_=k.type;if(X){var C="cover";switch(j&&(C="100% 320px"),R&&(C="100% 100%"),_){case"tile":C=P+"%",I="0%"}t=j?Promise.resolve($(h(l,{backgroundPositionX:I,bgColor:E,id:u,src:G,sketch:C,blur:r,width:q,height:"320px"}))):Promise.resolve($(h(l,{backgroundPositionX:I,bgColor:E,id:u,src:G,sketch:C,blur:r,width:q,height:L})))}}}t&&t.then(function(e){o.$bgEleContent.prepend(e),o.animate(),o.updateBgOpacity(m),b&&o.updateBgFilter(b)})};if(R)G?v(G,90).then(function(e){G=e,V(Q?Q:L)}):V(Q?Q:L);else{var K=L;V(K)}}this.$container.prepend(this.$bgEle)}},{key:"create$bg",value:function(e,t,n){this.$container=e;var i=this.compJson.properties,o=i.version,r=i.veinCss,a=i.superposition;"2.0"===o&&("texture"===a||r&&r.imgSrc)?this.create$newBg(e,t,n):this.create$oldBg(e,t,n)}},{key:"create$oldBg",value:function(e,t,n){var i=this,o=this.compJson,l=o.id,p=o.css,d=p.opacity,f=p.filter,b=o.properties,x=b.bgColor,k=b.croptype,S=b.imgSrc,I=b.pageLength,T=b.fileName,E=b.blur,P="100%",_="100%",C=/\.(gif)$/.test(T),A="view"===this.eqxScene.config.mode&&this.eqxScene.getOrientation().isLandScape(),O="edit"===this.eqxScene.config.mode&&this.eqxScene.getOrientation().isLandScape();if(this.middleBoxHeight=588,this.diffHeight=parseInt((this.middleBoxHeight-486)/2),x||S||(x="rgba(0,0,0,0)"),E||(E=0),this.$bgEle&&this.$bgEle.remove(),this.$bgEle=$('<div class="bg-wrap" style="width: 100%; height: 100%; position: absolute;z-index: -1;"><div class="bg-content" style="width: 100%; height: 100%;position: absolute;z-index: -1;"></div></div>'),this.$bgEleContent=this.$bgEle.find(".bg-content"),!a()&&"edit"===this.eqxScene.config.mode){var q=w("showPhone",this.eqxScene.meta.createUser);void 0===q&&(q=!0),!this.eqxPage.isLongPage()&&q&&(O?this.$bgEle.css({width:"486px",overflow:"hidden"}):this.$bgEle.css({height:"486px",overflow:"hidden"}));var L=this.eqxPage.isLongPage()?this.eqxPage.getPageHeight()+this.diffHeight:this.eqxPage.getPageHeight()+2*this.diffHeight;O?this.$bgEleContent.css({width:L,overflow:"hidden",left:"-"+this.diffHeight+"px"}):this.$bgEleContent.css({height:L,overflow:"hidden",top:"-"+this.diffHeight+"px"})}if(x){if(I&&(_=(I<10?486*I:I)-486+(a()?$(document).height():486)+"px"),this.eqxPage.pageJson&&this.eqxPage.pageJson.properties.longPage){var M=this.eqxPage.pageJson.properties.longPage;_=M>50?M+"px":M+486+"px"}var R=void 0;a()||"edit"!==this.eqxScene.config.mode||"100%"==_||(_=parseInt(_)+(this.eqxPage.isLongPage()?this.diffHeight:2*this.diffHeight)+"px"),R=O?$(h(c,{id:l,bgColor:x,width:_,height:"320px"})):$(h(c,{id:l,bgColor:x,width:P,height:_})),this.$bgEleContent.prepend(R),this.$context=R.find(".eqx-bg-img"),this.animate(),this.updateBgOpacity(d)}if(S){var j=y(S),F=void 0;k===r["全屏背景模式"]?(_=(I<10?486*I:I)-486+(a()?$(document).height():486)+"px",j=g(j,320,_,C),F=_):A?(_="100%",j=g(j,320,588,C)):(_=a()?"100%":"486px",j=g(j,320,588,C));var B=function(e){if(_=e,/\.gif/.test(S))var o=m(j).then(function(e){var o,s={};if(t=a()?document.documentElement.clientWidth||document.body.clientWidth:t||i.eqxPage.getPageWidth(),n=a()?document.documentElement.clientHeight||document.body.clientHeight:n||i.eqxPage.getPageHeight(),a()||"edit"!==i.eqxScene.config.mode||(i.eqxScene.getOrientation().isLandScape()?t=parseInt(t)+(i.eqxPage.isLongPage()?i.diffHeight:2*i.diffHeight):n=parseInt(n)+(i.eqxPage.isLongPage()?i.diffHeight:2*i.diffHeight)),k===r["全屏背景模式"]){var c=parseInt(_);a()||"edit"!==i.eqxScene.config.mode||(c+=i.diffHeight),e.width/e.height>=t/c?(s.width=e.width*(c/e.height),s.height=c,s.marginLeft=-(s.width-t)/2):(s.width=t,s.height=e.height*(t/e.width),s.marginTop=-(s.height-c)/2)}else e.width/e.height>=t/n?(s.width=e.width*(n/e.height),s.height=n,s.marginLeft=-(s.width-t)/2):(s.width=t,s.height=e.height*(t/e.width),s.marginTop=-(s.height-n)/2);return o=O?$(h(u,{id:l,src:j,blur:E,width:_,height:"320px"})):$(h(u,{id:l,src:j,blur:E,width:P,height:_})),o.css(s),o});else a()||"edit"!==i.eqxScene.config.mode||(_=parseInt(_)+(i.eqxPage.isLongPage()?i.diffHeight:2*i.diffHeight)+"px"),o=O?Promise.resolve($(h(s,{id:l,src:j,blur:E,width:_,height:"320px"}))):Promise.resolve($(h(s,{id:l,src:j,blur:E,width:P,height:_})));o.then(function(e){i.$bgEleContent.prepend(e),i.animate(),i.updateBgOpacity(d),f&&i.updateBgFilter(f),!/\.gif/.test(S)&&!a()&&!A&&i.updateBgHeight(i.eqxPage.getPageHeight())})};A?v(j,90).then(function(e){j=e,F?B(F):(_="100%",B(_))}):B(_)}this.$container.prepend(this.$bgEle)}},{key:"eleShow",value:function(){var e=this.compJson.properties.imgSrc;if(e&&/.gif/.test(e)&&this.$bgEle){var t=this.$bgEle.find("img")[0];if(t){var n=t.src;setTimeout(function(){t.src=n},200)}}}},{key:"animate",value:function(){var e=this.compJson.effect;e=void 0===e?{}:e;var t=e.type,n=e.duration,i=void 0===n?1:n;if(this.$bgEle&&(t||0==t)&&t!=-1){var o=this.$bgEle.find(".eqx-bg");o.css({animation:"none"}),setTimeout(function(){if("scaleUp"===t)o.css({animation:"scaleUp "+i+"s ease 1s","animation-fill-mode":"both"});else if("scaleDown"===t)o.css({animation:"scaleDown "+i+"s ease 1s","animation-fill-mode":"both"});else{var e=b[t];o.css({"animation-name":"","animation-duration":"","animation-timing-function":"","animation-delay":"","animation-iteration-count":""}),o.css({"animation-name":e[0],"animation-duration":i+"s","animation-timing-function":"liner","animation-delay":"1s","animation-iteration-count":1,"animation-direction":"both","animation-fill-mode":"both","animation-play-state":"initial"})}},0)}}},{key:"delete$bg",value:function(){this.$bgEle&&this.$bgEle.remove()}},{key:"update$bg",value:function(){}}]),e}();e.exports=k},function(e,t){e.exports='<div class="new-bg-img-container" style="width: #{width}; height: #{height}; overflow: hidden; position: absolute;z-index: 0"><div id="wrapper-background#{id}" class="eqx-bg new-bg-img eqx-bg-img" style="width: #{width}; height: #{height};\n         background-image: url(\'#{src}\');\n         background-size: cover; background-position: 50% 50%;\n         background-origin: content-box;\n         filter: blur(#{blur}px)"></div></div>'},function(e,t){e.exports='<div style="width: #{width}; height: #{height}; overflow: hidden; position: absolute; z-index: -1"><div id="wrapper-background#{id}" class="eqx-bg eqx-bg-color" style="width: 100%; height: #{height}; background: #{bgColor}"></div></div>'},function(e,t){e.exports='<div class="new-bg-img-container" style="width: #{width}; height: #{height}; overflow: hidden; position: absolute;z-index: 0"><div id="wrapper-background#{id}" class="eqx-bg new-bg-img eqx-bg-img" style="width: 100%; height: 100%;\n         background-position-x: #{backgroundPositionX};\n         background-position-y: 0%;\n         background-origin: content-box;\n         filter: blur(#{blur}px);\n         background-image: url(#{src});\n         background-size: #{sketch}"></div><div class="new-bg-color-wrap" style="width: 100%; height: 100%; z-index: -2;\n         background-color: #{bgColor}; top: 0; left: 0; position: absolute"></div></div>'},function(e,t){e.exports='<div style="width: #{width}; height: #{height}; overflow: hidden; position: absolute;z-index: 0;filter: blur(#{blur}px)"><img id="wrapper-background#{id}" src="#{src}" style="z-index: -1; width: 100%; position: absolute"></div>'},function(e,t){e.exports='<div class="new-bg-texture-container" style="width: #{width}; height: #{height}; overflow: hidden; position: absolute;z-index: 0"><div id="wrapper-background#{id}" class="eqx-bg new-bg-img eqx-bg-img" style="width: 100%; height: 100%;\n         background-position-x: 0%;\n         background-position-y: 0%;\n         background-origin: content-box;\n         background-color: #{color};\n         filter: blur(#{blur}px);\n         -webkit-mask-image: url(#{src});\n         -webkit-mask-size: #{textureSize}"></div><div class="new-bg-color-wrap" style="width: 100%; height: 100%; z-index: -2;\n         background-color: #{bgColor}; background: #{bgColor}; top: 0; left: 0; position: absolute"></div></div>'},function(e,t){e.exports='<div class="new-bg-texture-container" style="width: #{width}; height: #{height}; overflow: hidden; position: absolute;z-index: 0"><div id="wrapper-background#{id}" class="eqx-bg new-bg-img eqx-bg-img" style="width: 100%; height: 100%;\n         background-position-x: 0%;\n         background-position-y: 0%;\n         background-origin: content-box;\n         filter: blur(#{blur}px);\n         background-image: url(#{src});\n         background-size: #{textureSize}"></div><div class="new-bg-color-wrap" style="width: 100%; height: 100%; z-index: -2;\n         background-color: #{bgColor}; top: 0; left: 0; position: absolute"></div></div>'},function(e,t){"use strict";function n(){function e(e){var t=window.localStorage.getItem(e);if("string"==typeof t)try{return t=JSON.parse(t),n(t),t}catch(i){console.warn(i)}}function t(e,t){return n(t),window.localStorage.setItem(e,JSON.stringify(t)),t}function n(e){Array.isArray(e)?e.forEach(o):"object"===("undefined"==typeof e?"undefined":i(e))&&o(e)}function o(e){delete e.$$hashKey}function r(t,n){var i=e(t)||{};return i[n]}return{getItem:e,setItem:t,getItemByUser:r}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=n()},function(e,t,n){function i(e){return n(o(e))}function o(e){return r[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var r={"./wl1.svg":260,"./wl10.svg":261,"./wl1000.svg":262,"./wl1001.svg":263,"./wl1002.svg":264,"./wl1003.svg":265,"./wl1004.svg":266,"./wl1005.svg":267,"./wl1006.svg":268,"./wl1007.svg":269,"./wl1008.svg":270,"./wl1009.svg":271,"./wl1010.svg":272,"./wl1011.svg":273,"./wl1012.svg":274,"./wl11.svg":275,"./wl12.svg":276,"./wl13.svg":277,"./wl14.svg":278,"./wl15.svg":279,"./wl16.svg":280,"./wl17.svg":281,"./wl18.svg":282,"./wl19.svg":283,"./wl2.svg":284,"./wl20.svg":285,"./wl21.svg":286,"./wl22.svg":287,"./wl3.svg":288,"./wl4.svg":289,"./wl5.svg":290,"./wl6.svg":291,"./wl7.svg":292,"./wl8.svg":293,"./wl9.svg":294};i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=259},function(e,t,n){e.exports=n.p+"images/wl1-c9e24d.svg"},function(e,t,n){e.exports=n.p+"images/wl10-859a8c.svg"},function(e,t,n){e.exports=n.p+"images/wl1000-ca5d25.svg"},function(e,t,n){e.exports=n.p+"images/wl1001-f805e6.svg"},function(e,t,n){e.exports=n.p+"images/wl1002-a47298.svg"},function(e,t,n){e.exports=n.p+"images/wl1003-d082f6.svg"},function(e,t,n){e.exports=n.p+"images/wl1004-d30fed.svg"},function(e,t,n){e.exports=n.p+"images/wl1005-92d49b.svg"},function(e,t,n){e.exports=n.p+"images/wl1006-80b197.svg"},function(e,t,n){e.exports=n.p+"images/wl1007-356953.svg"},function(e,t,n){e.exports=n.p+"images/wl1008-cbf81a.svg"},function(e,t,n){e.exports=n.p+"images/wl1009-a30b04.svg"},function(e,t,n){e.exports=n.p+"images/wl1010-f918aa.svg"},function(e,t,n){e.exports=n.p+"images/wl1011-5139e4.svg"},function(e,t,n){e.exports=n.p+"images/wl1012-63ad8a.svg"},function(e,t,n){e.exports=n.p+"images/wl11-21df8a.svg"},function(e,t,n){e.exports=n.p+"images/wl12-8f3c8f.svg"},function(e,t,n){e.exports=n.p+"images/wl13-73e047.svg"},function(e,t,n){e.exports=n.p+"images/wl14-65b1d1.svg"},function(e,t,n){e.exports=n.p+"images/wl15-198238.svg"},function(e,t,n){e.exports=n.p+"images/wl16-6064b4.svg"},function(e,t,n){e.exports=n.p+"images/wl17-4883e4.svg"},function(e,t,n){e.exports=n.p+"images/wl18-acc4bb.svg"},function(e,t,n){e.exports=n.p+"images/wl19-9f1075.svg"},function(e,t,n){e.exports=n.p+"images/wl2-079c50.svg"},function(e,t,n){e.exports=n.p+"images/wl20-6b4994.svg"},function(e,t,n){e.exports=n.p+"images/wl21-2aeda9.svg"},function(e,t,n){e.exports=n.p+"images/wl22-9a4455.svg"},function(e,t,n){e.exports=n.p+"images/wl3-44d3a8.svg"},function(e,t,n){e.exports=n.p+"images/wl4-34d505.svg"},function(e,t,n){e.exports=n.p+"images/wl5-c5e535.svg"},function(e,t,n){e.exports=n.p+"images/wl6-1932ca.svg"},function(e,t,n){e.exports=n.p+"images/wl7-f2d575.svg"},function(e,t,n){e.exports=n.p+"images/wl8-eeaa09.svg"},function(e,t,n){e.exports=n.p+"images/wl9-6fa97a.svg"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(101),c=n(296),l=n(36).parse,u=n(297),p=n(27).isWeixin,d=(n(80).$getUserWxInfo,n(69).hrefToWxAuth,n(69).setWeChatUser,n(298).$unifiedOrder),h=n(22).wxPay,f=n(69).getWeChatUser,g=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{self:!1,fontFamily:!1}},trigger:{self:!1},sound:!1,link:!1}),r}return r(t,e),a(t,[{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.properties,o=i.title,r=void 0===o?"打赏":o,a=i.amount,s=void 0===a?"2":a;return $(l(c,{id:t,type:n,title:r,amount:s}))}},{key:"updateCompTitle",value:function(){var e=this.compJson.properties;this.$context.html(e.title+e.amount+"元")}},{key:"bindAfterRenderEvent",value:function(){var e=this;this.$li.click(function(){var t=Math.round(100*parseFloat(e.compJson.properties.amount));if(!p())return void u.modal("该组件仅能在微信中使用。",e.$li);var n=f();return d(t,n.openid,e.compJson.sceneId).then(function(e){return e.obj&&h(e.obj)})["catch"](function(t){t.msg&&u.modal(t.msg,e.$li)})})}}]),t}(s);e.exports=g},function(e,t){e.exports='<a id="#{id}" ctype="#{type}" class="element comp-reward" style="cursor: pointer;width: 100%;height: 100%;display: block">#{title}#{amount}元</a>'},function(e,t){"use strict";function n(e,t){var n=$('<div class="feedback-box">\n                      <div class="feedback-form">\n                        <div class="feedback-content">'+e+'</div>\n                        <div class="feedback-btn">\n                          <a class="feedback-close">关闭</a>\n                        </div>\n                      </div>\n                    </div>'),i=n.find(".feedback-form");i.css("margin-top",-Number.parseInt(i.height()+80)/2),n.insertBefore(t.parent().parent()),n.find(".feedback-close").on("click",function(){n.animate({opacity:0},{duration:300,complete:function(e){return n.remove()}})})}e.exports={modal:n}},function(e,t,n){"use strict";function i(e,t,n){return u({type:"POST",url:l.SERVER_1+"eqs/s/wx/unifiedorder",data:{money:e,openid:t,sceneId:n}})}function o(e){var t=e.sceneId,n=e.moduleId,i=e.sceneCreateUser;return u({type:"GET",url:l.SERVER_1+"eqs/s/get/give/reward/count",data:{sceneId:t,moduleId:n,sceneCreateUser:i}})}function r(e){return u({type:"POST",url:l.SERVER_1+"eqs/wx/get-jsapiconfig",data:{prepayId:e}})}function a(e){var t=e.sceneId,n=e.sceneCreateUser,i=e.moduleId,o=e.giveRewardMoney,r=e.openId,a=e.rewardUserName,s=e.stayMessage,c=e.giftName,p=e.rewardType,d=e.giftImg;return u({type:"POST",url:l.SERVER_1+"eqs/s/create/give/reward",data:{sceneId:t,sceneCreateUser:n,moduleId:i,giveRewardMoney:o,openId:r,rewardUserName:a,stayMessage:s,giftName:c,rewardType:p,giftImg:d}})}function s(e){var t=e.sceneId,n=e.sceneCreateUser,i=e.pageNo,o=e.pageSize,r=void 0===o?20:o;return u({type:"GET",url:l.SERVER_1+"eqs/s/query/give/reward/data",data:{sceneId:t,pageNo:i,pageSize:r,sceneCreateUser:n}})}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return p[e]?Promise.resolve(p[e]):u({type:"GET",url:l.SERVER_1+"eqs/s/get/reward/style?styleType="+e}).then(function(t){return 2==e?p[e]=t.list.filter(function(e){return 0!=e.ptype}).map(function(e){return e.path=""+l.FILE+e.path,e}):p[e]=t.list,p[e]})}var l=n(24),u=n(23).ajax,p={};e.exports={$unifiedOrder:i,$getJsApiConfig:r,$getWxPayParams:a,$getRawaryRecord:s,$getCompRewardPeoNum:o,$getRewardStyle:c}},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(""===e)return"";switch(e.length){case 1:return e;case 2:return e;case 3:var t="";return t+=e[0],t+="<br>",t+=e[1],t+=e[2];case 4:var n="";return n+=e[0],n+=e[1],n+="<br>",n+=e[2],n+=e[3]}}function c(e,t){var i=2==t.rewardType?"送"+t.giftName:"打赏￥"+(t.totalMoney||0)/100,o=t.wxHeadUrl||n(237),r=(t.rewardUserName||t.wxName||"").slice(0,6);2==t.rewardType?(e.addClass("gift-reward"),e.find(".gift-img").attr("src",""+q.FILE+t.giftImg)):e.removeClass("gift-reward"),e.find(".logo-img").attr("src",o),t.stayMessage?(e.find(".reward-info").removeClass("oneline").addClass("twoline"),e.find(".stay-msg").text(""+(t.stayMessage||"").slice(0,20))):(e.find(".reward-info").removeClass("twoline").addClass("oneline"),e.find(".stay-msg").text("")),e.find(".user-name").text(r),e.find(".reward-text").text(i)}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function R(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:R(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)};n(300);var p=n(301),d=n(101),h=n(302),f=n(303),g=n(36).parse,m=n(304),v=n(27),y=v.isWeixin,b=v.isWxwork,x=n(80).$getUserWxInfo,w=n(69).hrefToWxAuth,k=n(69).setWeChatUser,S=n(69).initWeChat,I=n(298),T=I.$getCompRewardPeoNum,E=I.$getRewardStyle,P=n(69).getWeChatUser,_=n(236),C=n(317).getSize,A=n(27),O=A.mobilecheck,q=n(24),L=n(121).RAW_EVENT,M=function(e){function t(e,n){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.initBulletScreen(),$.extend(!0,i.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{self:!1,fontFamily:!1}},trigger:{self:!0,click:!1,shake:!1,taphold:!1,slide:!1,mediaCanplay:!1,mediaEnded:!1,mediaPlaying:!1,animStart:!1,animIteration:!1,animEnd:!1,exceptionSuc:!0},sound:!1,link:!1}),i}return a(t,e),l(t,[{key:"initBulletScreen",value:function(){var e=this,t=this.compJson.properties;if("view"===this.eqxScene.config.mode&&t.showBulletScreen){var n=t.bulletScreenStyle||1;if(this.isBulletScreenPlaying=!1,this.rewards=[],this.exceptionManager=this.eqxScene.exceptionManager,this.exceptionManager){this.exceptionManager.register(this);var i=this.exceptionManager.getRewards();i.length?(this.rewards=JSON.parse(JSON.stringify(i)),this.getRewardsPromise=Promise.resolve()):this.getRewardsPromise=this.exceptionManager.loadInitRewards(50).then(function(){var t=e.exceptionManager.getRewards();e.rewards=JSON.parse(JSON.stringify(t))})}switch(n){case 1:this.Barrage=new _,this.$bulletScreenCanvas=this.getBulletScreenCanvas();break;case 2:this.Barrage=new _,this.$bulletScreenCanvas=this.getBulletScreenCanvas();break;case 3:this.$bulletScreenType3Ct=this.getBulletScreenType3Ct();break;case 4:this.$bulletScreenType4Ct=this.getBulletScreenType4Ct()}}}},{key:"getBulletScreenCanvas",value:function(){var e=$('<canvas class="comp-exception-bullet-screen"></canvas>');e.css({"pointer-events":"none",position:"absolute",top:0,left:0,"z-index":1,width:"100%",height:"100%"});var t=window.devicePixelRatio||1,n=O()?C().width:320,i=O()?C().height:486;return e[0].width=n*t,e[0].height=i*t,e}},{key:"getBulletScreenType3Ct",value:function(){return $('<div class="comp-exception-bullet-screen-3"></div>')}},{key:"getBulletScreenType4Ct",value:function(){return $('<div class="comp-exception-bullet-screen-4"></div>')}},{key:"updateRewards",value:function(){if(this.exceptionManager){var e=this.exceptionManager.getRewards();this.rewards=JSON.parse(JSON.stringify(e));var t=this.compJson.properties;t.showBulletScreen&&this.updateBulletScreenScroll()}}},{key:"playBulletScreenScroll",value:function(){var e=this;this.getRewardsPromise&&this.getRewardsPromise.then(function(){if(!e.isBulletScreenPlaying&&e.rewards.length){e.isBulletScreenPlaying=!0;var t=e.compJson.properties,n=t.bulletScreenStyle||1;switch(n){case 1:e.Barrage.renderBulletScreen(e.$bulletScreenCanvas[0],e.rewards,n);break;case 2:e.Barrage.renderBulletScreen(e.$bulletScreenCanvas[0],e.rewards,n);break;case 3:e.playBulletScreenType3();break;case 4:e.playBulletScreenType4()}}})}},{key:"stopBulletScreenScroll",value:function(){if(this.isBulletScreenPlaying){this.isBulletScreenPlaying=!1;var e=this.compJson.properties,t=e.bulletScreenStyle||1;switch(t){case 1:this.Barrage&&this.Barrage.stop();break;case 2:this.Barrage&&this.Barrage.stop();break;case 3:this.stopBulletScreenType3();break;case 4:this.stopBulletScreenType4()}}}},{key:"updateBulletScreenScroll",value:function(){this.isBulletScreenPlaying&&(this.stopBulletScreenScroll(),this.playBulletScreenScroll())}},{key:"playBulletScreenType3",value:function(){function e(){var t=this;this.active$barrages.forEach(function(n){
!n.hasClass("animate-play")&&n.addClass("animate-play"),n.off("animationend webkitAnimationEnd").on("animationend webkitAnimationEnd",function(n){"barrageVerticalStay1"==n.originalEvent.animationName&&(t.active$barrages.push(t.$barrages.shift()),e.call(t)),"barrageVerticalMoveOut"==n.originalEvent.animationName&&($(this).off("animationend webkitAnimationEnd"),$(this).removeClass("animate-play"),t.$barrages.push(t.active$barrages.shift()))})}),c(this.$barrages[0],this.queues[0]),this.queues.push(this.queues.shift())}var t=this;this.$bulletScreenType3Ct.empty(),this.queues=[].concat(i(this.rewards)),this.$barrages=Array.from({length:4}).map(function(){var e=$('<div class="bullent-screen-3-item">\n                                    <div class="logo-box">\n                                        <img src="" alt="" class="logo-img">\n                                    </div>\n                                    <div class="reward-info">\n                                        <div class="reward-content">\n                                            <span class="user-name"></span>\n                                            <span class="reward-text"></span>\n                                            <img src="" alt="" class="gift-img">\n                                        </div>\n                                        <div class="stay-msg"></div>\n                                    </div>\n                                </div>');return t.$bulletScreenType3Ct.append(e),e}),this.active$barrages=[],this.active$barrages.push(this.$barrages.shift()),c(this.active$barrages[0],this.queues[0]),this.queues.push(this.queues.shift()),setTimeout(function(){e.call(t)},400)}},{key:"stopBulletScreenType3",value:function(){this.active$barrages.forEach(function(e){e.removeClass("animate-play"),e.off("animationend webkitAnimationEnd")}),this.active$barrages=[],this.$bulletScreenType3Ct.empty()}},{key:"playBulletScreenType4",value:function(){function e(){var t=this;this.active$barrage.addClass("animate-play"),this.active$barrage.on("animationend webkitAnimationEnd",function(n){"barrageTopMoveFadeOut"==n.originalEvent.animationName&&(t.active$barrage.removeClass("animate-play"),t.active$barrage.off("animationend webkitAnimationEnd"),t.$barrages.push(t.active$barrage),t.active$barrage=t.$barrages.shift(),e.call(t))}),c(this.$barrages[0],this.queues[0]),this.queues.push(this.queues.shift())}var t=this;this.$bulletScreenType4Ct.empty(),this.queues=[].concat(i(this.rewards)),this.$barrages=Array.from({length:2}).map(function(){var e=$('<div class="bullent-screen-4-item">\n                        <div class="logo-box">\n                            <img src="" alt="" class="logo-img">\n                        </div>\n                        <div class="reward-info">\n                            <div class="reward-content">\n                                <span class="user-name"></span>\n                                <span class="reward-text"></span>\n                                <img src="" alt="" class="gift-img">\n                            </div>\n                            <div class="stay-msg"></div>\n                        </div>\n                    </div>');return t.$bulletScreenType4Ct.append(e),e}),this.active$barrage=this.$barrages.shift(),c(this.active$barrage,this.queues[0]),this.queues.push(this.queues.shift()),e.call(this)}},{key:"stopBulletScreenType4",value:function(){this.active$barrage.removeClass("animate-play"),this.active$barrage.off("animationend webkitAnimationEnd"),this.$bulletScreenType4Ct.empty()}},{key:"updateAmount",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=this.compJson.id;setTimeout(function(){T({sceneId:window.scene.id,moduleId:n,sceneCreateUser:window.scene.userId}).then(function(t){var n=t.obj||0;e.$li.find(".exception-amount").text(n)})},t)}},{key:"create$context",value:function(){var e=this,t=this.compJson,n=t.id,i=t.type,o=t.properties,r=o.title,a=void 0===r?"打赏":r,c=o.ptype,l=void 0===c?1:c,u=o.hideAmount,p=o.detailConfig,d=u?"none":"flex",m=p.content||"",v="{X}";if("view"===this.eqxScene.config.mode){var y=window.scene;v=0;var b=this.$li;T({sceneId:y.id,moduleId:this.compJson.id,sceneCreateUser:y.userId}).then(function(e){var t=e.obj||0;b.find(".exception-amount").text(t)}),this.$bulletScreenCanvas&&this.eqxPage.$section.append(this.$bulletScreenCanvas),this.$bulletScreenType3Ct&&this.eqxPage.$section.append(this.$bulletScreenType3Ct),this.$bulletScreenType4Ct&&this.eqxPage.$section.append(this.$bulletScreenType4Ct),this.hasExceptionSucTrigger=this.eqxPage.pageJson.properties.triggerGroup&&this.eqxPage.pageJson.properties.triggerGroup.some(function(e){return e.eventType===L.exceptionSuc&&e.sourceId===t.id})}if(m=m.replace(/{[xX]}/g,'<span class="exception-amount" style="color: '+p.color+"; margin: '0 2px 0 2px'\">"+v+"</span>"),0===l){var x=t.properties.config,w=x.bg,k=x.color,S=x.content,I=x.hideContent,P="inline-block";return I&&(P="none"),$(g(h,{id:n,type:i,title:a,detail:m,bg:w,amountDisplay:d,detailOtherColor:p.detailOtherColor,color:k,content:s(S),display:P}))}var _=void 0;return l==-1?_=this.compJson.properties.config.src:(_="",E().then(function(t){var n=t.find(function(e){return e.ptype==l}).path;e.$context.find(".expection-icon img").attr("src",n)})),$(g(f,{id:n,type:i,title:a,detailOtherColor:p.detailOtherColor,detail:m,src:_,amountDisplay:d}))}},{key:"updateOtherDetailContentColor",value:function(e){var t=e.color;this.$context.find(".expection-detail").css("color",t)}},{key:"updateDetailContent",value:function(e){var t=this.compJson.properties.detailConfig,n=e.replace(/{[xX]}/g,'<span class="exception-amount" style="color: '+t.color+"; margin: '0 2px 0 2px'\">{X}</span>");this.$context.find(".amount-box").html(n)}},{key:"updateExContent",value:function(e){this.$context.find(".expectioin-default-content").html(s(e))}},{key:"updateAmountColor",value:function(e){var t=e.color;this.$context.find(".exception-amount").css("color",t)}},{key:"updateDefaultColor",value:function(e){var t=e.color;this.$context.find(".expection-style-default").css("color",t)}},{key:"toggleExcePContent",value:function(){this.compJson.properties.config&&this.compJson.properties.config.hideContent?this.$context.find(".expectioin-default-content").css("display","none"):this.$context.find(".expectioin-default-content").css("display","flex")}},{key:"toggleExceAmountContent",value:function(){this.compJson.properties&&this.compJson.properties.hideAmount?this.$context.find(".expection-detail").css("display","none"):this.$context.find(".expection-detail").css("display","flex")}},{key:"update$context",value:function(){var e=this.compJson.properties.ptype,t=this.$context.find(".expection-icon")[0];if(0==e)return $(t).html('\n                <div class="expection-style-default"><span class="expectioin-default-content">赏</span></div>\n            ');if(e==-1){var n=this.compJson.properties.config.src;return $(t).html('\n                <div class="expection-style-img"><img src='+n+"></div>\n            ")}E().then(function(n){var i=n.find(function(t){return t.ptype==e}).path;return $(t).html('\n                    <div class="expection-style-img"><img src='+i+"></div>\n                ")})}},{key:"updateCompTitle",value:function(){var e=this.compJson.properties;this.$context.html(e.title+e.amount+"元")}},{key:"updateDefaultBg",value:function(e){var t=e.bg;this.$context.find(".expection-style-default").css("background",t)}},{key:"bindAfterRenderEvent",value:function(){var e=this;if("view"===this.eqxScene.config.mode)if(scene&&"4a2d8af948b198210148fcae52bc0083"===scene.userId){var t={position:"absolute",width:"100%"},n=document.createElement("img");n.src=p,n.className="no-activityTip",n.onload=function(){var i=Math.floor((e.compJson.css.width+"").replace(/[^\d]/,"")),o=n.width,r=n.height,a=i/o*r;console.log(a);var s=$(n);t.top=-a,e.$li.append(s),s.css(t)}}else this.$li.click(function(){if(b())return w(null,null,e.eqxScene.meta);if(y()){if(Date.now()-window.scene.createTime-15768e7>0)return m.$toast({content:"活动已结束",$li:e.$li,status:3,eqxComp:e}),!1;var t=P(),n=e.eqxScene.meta;console.log(n);var i=void 0;i=t.openid?Promise.resolve():x(n.userId,n).then(function(e){return e.obj?(k(e.obj),S({obj:n},location.href.split("#")[0]),t=P(),void 0):(w(null,null,n),Promise.reject(new Error))}),i.then(function(){var t=e.compJson.properties.rewardType||1;switch(t){case 1:e.cashReward();break;case 2:e.giftReward()}})}else m.$toast({content:"请到微信环境中进行打赏操作",$li:e.$li,status:1,eqxComp:e})})}},{key:"cashReward",value:function(){var e=this.compJson.properties.amountConfig,t=["1.00","5.00","10.00","20.00","50.00","100.00"];e&&e.amounts&&(t=e.amounts);var n=P();m.$showException({eqxComp:this,amounts:t,$li:this.$li,moduleId:this.compJson.id,sceneCreateUser:window.scene.userId,sceneId:window.scene.id,wxInfo:n,successFun:this.exceptionSucCallback.bind(this)})}},{key:"giftReward",value:function(){var e=P(),t=this.compJson.properties.giftRewardConfig||[];t=t.filter(function(e){return Number(e.money)&&e.name&&e.src}),m.$showGiftException({giftRewardConfig:t,eqxComp:this,wxInfo:e,successFun:this.exceptionSucCallback.bind(this)})}},{key:"exceptionSucCallback",value:function(e){var t=this.compJson.properties;if(this.updateAmount(5e3),t.showBulletScreen&&this.exceptionManager){var n=void 0;this.rewards&&this.rewards.length||(n=!0),this.exceptionManager.addReward(e.rewardRecord),this.exceptionManager.publish(),n&&this.playBulletScreenScroll()}}},{key:"eleShow",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleShow",this).call(this);var e=this.compJson.properties;"view"===this.eqxScene.config.mode&&e.showBulletScreen&&this.playBulletScreenScroll()}},{key:"eleHide",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleHide",this).call(this);var e=this.compJson.properties;"view"===this.eqxScene.config.mode&&e.showBulletScreen&&this.stopBulletScreenScroll(),this.triggerTimer&&(clearInterval(this.triggerTimer),this.triggerTimer=null),this.$exceptionModal&&(this.$exceptionModal.remove(),this.$exceptionModal=null)}}]),t}(d);e.exports=M},function(e,t){},function(e,t,n){e.exports=n.p+"images/noActivityTip-5dc4fd.png"},function(e,t){e.exports='<div id="#{id}" ctype="#{type}" class="element comp-exception" style="cursor: pointer;width: 100%;height: 100%;display: block"><div class="expection-icon"><div class="expection-style-default" style="color: #{color}; background: #{bg}"><span class="expectioin-default-content" style="display: #{display}">#{content}</span></div></div><div class="expection-detail" style="color: #{detailOtherColor}; display: #{amountDisplay}"><span class="amount-box">#{detail}</span></div></div>'},function(e,t){e.exports='<div id="#{id}" ctype="#{type}" class="element comp-exception" style="cursor: pointer;width: 100%;height: 100%;display: block"><div class="expection-icon"><div class="expection-style-img"><img src="#{src}"></div></div><div class="expection-detail" style="color: #{detailOtherColor}; display: #{amountDisplay}"><span class="amount-box">#{detail}</span></div></div>'},function(e,t,n){"use strict";function i(e){var t={giftImg:null,giftName:null,id:null,moduleId:null,rewardType:null,rewardUserName:null,sceneCreateUser:null,sceneId:null,stayMessage:null,totalMoney:null,wxHeadUrl:"",wxName:"",wxOpenId:"",createTime:Date.now()};return Object.assign({},t,e)}function o(e){return new Promise(function(t){g(e).then(function(e){var n=[],i=!0;e&&e.list&&(n=e.list),e&&e.map&&(i=e.map.end),t({list:n,end:i})})["catch"](function(){t({list:[]})})})}function r(){return new Promise(function(e){if(w)return e(),!0;var t=document.createElement("script");t.type="text/javascript",t.src="//lib.eqh5.com/iScroll/5.2.1/iscroll.min.js",document.body.appendChild(t),t.onload=function(){w=!0,e()}})}function a(e){var t=e.moduleId,n=e.sceneId,i=e.sceneCreateUser,o=e.openId,r=e.giveRewardMoney,a=e.rewardUserName,s=e.stayMessage,c=e.giftName,l=e.rewardType,u=e.giftImg;return T?Promise.reject({msg:"busy"}):(T=!0,f({moduleId:t,sceneId:n,sceneCreateUser:i,openId:o,giveRewardMoney:r,rewardUserName:a,stayMessage:s,giftName:c,rewardType:l,giftImg:u}).then(function(e){if(console.log(e),console.log("获取微信支付"),e&&e.map){var t=e.map;return m(t).then(function(){T=!1})}return Promise.reject(e)})["catch"](function(e){return T=!1,Promise.reject(e)}))}function s(e){var t="",i=n(312);return e.length&&e.forEach(function(e){t+='<div class="record-list-item">\n                <div class="list-item-left">\n                    <img src = '+(e.wxHeadUrl||i)+">\n                    <span>"+(e.wxName||"神秘人")+'</span>\n                </div>\n                <div class="list-item-right">\n                    <span>'+(e.totalMoney/100||0)+"</span>元\n                </div>\n            </div>"}),t}function c(){var e="",t=n(313);return e+='\n            <div class="nodata-img"><img src = '+t+'></div>\n            <div class="nodata-content">还没有人打赏哦</div>\n        '}function l(e){function t(){var e=q.find(".record-detail-part").get(0),t={mouseWheel:!0,scrollbars:!1,interactiveScrollbars:!1,probeType:2,bounce:!1,disableMouse:!1,disableTouch:!1,preventDefault:!1,disablePointer:!0,wheelMoveStopPropagation:!0};return new window.IScroll(e,t)}function n(){r().then(function(){var e=t();window.recordPartIscroll=e,q.find(".record-detail-part .record-detail-part-child").on("touchend",function(){e.y-e.maxScrollY<10&&!I&&o({sceneId:g,sceneCreateUser:m,pageNo:w}).then(function(n){I=n.end;var i=q.find(".record-detail-part .record-detail-part-child");i.find(".wx-record-bottom-note").remove();var o=i.html(),r=s(n.list);I?1!=w&&(r+='<div class="wx-record-bottom-note">已经到底啦</div>'):(w++,r+='<div class="wx-record-bottom-note">努力加载中...</div>'),o+=r,i.html(o),e=t()})})})}function l(){q.animate({opacity:0},{duration:0,complete:function(e){return q.remove()}})}var u=e.eqxComp,p=e.amounts,d=e.$li,f=e.moduleId,g=e.sceneId,m=e.sceneCreateUser,v=e.wxInfo,b=e.successFun,w=1,I=!1,T="";p.forEach(function(e,t){T+='<div class="amout-item '+(0==t?"active":"")+'" data-money='+e+'><span class="unit">￥</span><span class="num">'+e+"</span></div>"});var E=1;k=d;var P=S[p.length],_=u.compJson.properties,C=_.showBulletScreen,A=_.commentPlaceholder,O=C?'<div class="comment-input-box">\n                                        <span class="comment-length">0/20</span>\n                                        <input class="comment-input" type="text" maxlength="20" placeholder="'+(A||"请输入留言")+'">\n                                    </div>':"",q=$('\n        <div class="v-exception-black">\n            <div class="wx-exce-box">\n                <div class="record-box">\n                    <div class="record-title">\n                        <em class="eqf-left"></em>\n                        <span>打赏记录</span>\n                    </div>\n                    <div class="record-detail-part"><div class="record-detail-part-child"></div></div>\n                </div>\n                <div class="amounts-reward-box">\n                    <em class="eqf-no close"></em>\n                    <div class="wx-exce-title">我要打赏</div>\n                    <div class="suggest-amount-box">\n                        <div class="amount-list-ct '+P+'">'+T+'</div>\n                        <div class="handle-amount" style="margin-top: 15px; margin-bottom: 23px;">\n                            <div class="wt-exce-record">打赏记录</div>\n                            <div class="wx-other">其他金额</div>\n                        </div>\n                        '+O+'\n                    </div>\n                    <div class="other-amounts-box">\n                        <div class="input-box">\n                            <span class="rmb-icon">¥</span>\n                            <input class="other-amount-input" type="text" placeholder="请输入打赏金额">\n                        </div>\n                        '+O+'\n                        <div class="'+(C?"handle-amount":"handle-no-comment-amount")+'">\n                            <div class="wt-exce-record">打赏记录</div>\n                            <div class="wx-other">返回建议规格</div>\n                        </div>\n                    </div>\n                    <div class="other-amount-box">\n                        <span class="other-amount-btn">确定支付</span>\n                    </div>\n                    <div class="disclamier">\n                    易企秀仅提供技术支持，请确认付款信息，再进行打赏\n                    </div>\n                </div>\n            </div>\n        </div>\n    ');q.on("touchstart mousedown",function(e){e.stopPropagation()}),q.find("."+P).on("touchend",".amout-item",function(e){$(this).addClass("active").siblings().removeClass("active")}),q.find(".other-amount-btn").on("touchend",function(e){var t=1==E?Number(q.find(".amount-list-ct .amout-item.active")[0].dataset.money):Number(q.find(".other-amount-input").val()),n=q.find(".comment-input-box input").val()||void 0;if(t){var o=Promise.resolve();n&&(o=y({text:n}).then(function(e){return 200!=e.code?Promise.reject("留言校验失败"):e.map&&e.map.resultWordsMessage&&e.map.resultWordsMessage.length>0?(x.show(void 0,{top:document.documentElement.scrollTop+30+"px",width:"248px","border-radius":"4px",left:"50%",transform:"translateX(-50%)"}),q.find(".comment-input-box input").addClass("err"),q.find(".other-amount-btn").addClass("disable"),Promise.reject("留言校验不通过")):void 0})),o.then(function(){a({moduleId:f,sceneId:g,sceneCreateUser:m,openId:v.openid,giveRewardMoney:t,stayMessage:n,rewardType:1}).then(function(){var e=i({moduleId:f,rewardType:1,sceneCreateUser:m,sceneId:g,stayMessage:n,totalMoney:100*t,wxHeadUrl:v.headimgurl,wxName:v.nickname,wxOpenId:v.openid});b&&b({rewardRecord:e}),h({$li:k,content:"打赏成功",status:2,eqxComp:u}),l()})})}});var L=!1;q.find(".comment-input-box .comment-input").on("compositionstart",function(){L=!0}),q.find(".comment-input-box .comment-input").on("compositionend",function(){L=!1}),q.find(".comment-input-box input").on("input",function(e){setTimeout(function(){if(!L){var t=e.target.value;t&&t.length>20&&(t=t.slice(0,20)),q.find(".comment-input-box .comment-length").text(t.length+"/20"),q.find(".comment-input-box input").val(t),t?y({text:t}).then(function(e){200==e.code&&(e.map&&e.map.resultWordsMessage&&e.map.resultWordsMessage.length>0?(x.show(void 0,{top:document.documentElement.scrollTop+30+"px",width:"248px","border-radius":"4px",left:"50%",transform:"translateX(-50%)"}),q.find(".comment-input-box input").addClass("err"),q.find(".other-amount-btn").addClass("disable")):(q.find(".comment-input-box input").removeClass("err"),q.find(".other-amount-btn").removeClass("disable")))}):(q.find(".comment-input-box input").removeClass("err"),q.find(".other-amount-btn").removeClass("disable"))}},0)}),q.find(".record-title em").on("click",function(){q.find(".record-box").hide(),q.find(".amounts-reward-box").show(),w=1,I=!1,q.find(".record-detail-part .record-detail-part-child").html(""),q.find(".record-detail-part").scrollTop(0)}),q.find(".other-amount-input").on("input",function(e){if(""!==e.target.value){var t=e.target.value.replace(/[^\d.]/g,"").replace(/\.{2,}/g,".").replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3");Math.ceil(t)<1&&(t="1.00"),Math.ceil(t)>3e3&&(t="3000.00"),e.target.value=t}}),q.find(".wt-exce-record").on("touchend",function(){return q.find(".amounts-reward-box").hide(),q.find(".record-box").css("display","flex"),!I&&void o({sceneId:g,sceneCreateUser:m,pageNo:w}).then(function(e){if(e.list&&e.list.length){var t=q.find(".record-detail-part .record-detail-part-child");if(1===w){var i=s(e.list);I=e.end,I?1!=w&&(i+='<div class="wx-record-bottom-note">已经到底啦</div>'):(w++,i+='<div class="wx-record-bottom-note">努力加载中...</div>'),t.html(i)}setTimeout(n,100)}else{var o=c();q.find(".record-detail-part .record-detail-part-child").html(o)}})}),q.find(".wx-other").on("touchend",function(){1==E?(q.find(".suggest-amount-box").hide(),q.find(".other-amounts-box").show(),E=2):(q.find(".suggest-amount-box").show(),q.find(".other-amounts-box").hide(),E=1)}),$(".main-page.z-current").not(".editor-section").prepend(q),q.find(".eqf-no").on("click",function(){q.animate({opacity:0},{duration:300,complete:function(e){return q.remove()}})}),$(".v-exception-black").on("touchend",function(){q.animate({opacity:0},{duration:300,complete:function(e){return q.remove()}})}),q.find(".wx-exce-box").on("touchend",function(e){return e.stopPropagation()})}function u(e){var t=e.giftRewardConfig,n=e.eqxComp,o=e.wxInfo,r=e.successFun,s="";t.forEach(function(e,t){s+='<div class="gift-item '+(0==t?"active":"")+'" data-img='+e.src+" data-name="+e.name+" data-money="+e.money+'>\n                            <div class="gift-img-box">\n                                <img class="gift-img" src="'+v.FILE+e.src+'">\n                            </div>\n                            <div class="gift-name">\n                                '+e.name+'\n                            </div>\n                            <div class="gift-money">\n                                ￥'+e.money+"\n                            </div>\n                        </div>"});var c=I[t.length],l=n.compJson.properties,u=l.showBulletScreen,p=l.commentPlaceholder,d=u?'<div class="comment-input-box">\n                                        <span class="comment-length">0/20</span>\n                                        <input class="comment-input" type="text" maxlength="20" placeholder="'+(p||"请输入留言")+'">\n                                    </div>':"",h=3,f="礼物已送至作者易企秀账户";n.hasExceptionSucTrigger&&(f="赠送礼物成功，"+h+"秒后自动跳转");var g=$('\n        <div class="v-exception-black">\n            <div class="wx-exce-box">\n                <div class="gift-select-box">\n                    <div class="header">\n                        <span>选择礼物</span>\n                        <em class="eqf-no close-icon"></em>\n                    </div>\n                    <div class="tip-box">\n                        <span class="eqf-info-l tip-icon"></span>\n                        <span class="tip-text">礼物金额将实时转入作者易企秀账户</span>\n                    </div>\n                    <div class="gift-list-box '+c+'">\n                        '+s+'\n                    </div>\n                    <div class="gift-selected-btn">赠送</div>\n                </div>\n                <div class="gift-reward-box">\n                    <em class="eqf-left back-icon"></em>\n                    <div class="'+(u?"gift-info":"gift-info-no-comment")+'">\n                        <img class="selected-gift-img" src="">\n                        <div class="selected-gift-other-info">送出<span class="selected-gift-name"></span><span class="selected-gift-money"></span></div>\n                    </div>\n                    <div class="reward-user-input-box">\n                        <span class="reward-user-length">0/6</span>\n                        <input class="reward-user-input" type="text" maxlength="6" placeholder="请输入你的姓名">\n                    </div>\n                    '+d+'\n                    <div class="reward-gift-btn">赠送礼物</div>\n                    <div class="disclamier">易企秀仅提供技术支持，请确认付款信息，再进行打赏</div>\n                </div>\n                <div class="gift-reward-success-box">\n                    <div class="header">\n                        <span>赠送礼物成功</span>\n                        <em class="eqf-no close-icon"></em>\n                    </div>\n                    <div class="rewarded-gift-info">\n                        <img class="rewarded-gift-img" src="">\n                        <div class="rewarded-gift-other-info">送出<span class="rewarded-gift-name"></span><span class="rewarded-gift-money"></span></div>\n                    </div>\n                    <div class="rewarded-gift-tip">'+f+'</div>\n                    <div class="gift-rewarded-handle '+(n.hasExceptionSucTrigger?"has-suc-trigger":"")+'">\n                        <span class="reward-again-btn">继续送礼</span>\n                        <span class="finish-btn">完成</span>\n                        <span class="exception-trigger-btn">立即查看</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    ');g.on("touchstart mousedown",function(e){e.stopPropagation()}),g.find(".gift-list-box").on("touchend",".gift-item",function(e){$(this).addClass("active").siblings().removeClass("active")}),g.find(".gift-selected-btn").on("touchend",function(){var e=g.find(".gift-list-box .gift-item.active"),t=e[0].dataset.name,n=e[0].dataset.img,i=e[0].dataset.money;g.find(".gift-reward-box .selected-gift-img").attr("src",""+v.FILE+n),g.find(".gift-reward-box .selected-gift-name").text(t),g.find(".gift-reward-box .selected-gift-money").text("￥"+i),g.find(".gift-select-box").hide(),g.find(".gift-reward-box").show()});var m=!1;g.find(".reward-user-input-box input").on("compositionstart",function(){m=!0}),g.find(".reward-user-input-box input").on("compositionend",function(){m=!1}),g.find(".reward-user-input-box input").on("input",function(e){setTimeout(function(){if(!m){var t=e.target.value;t&&t.length>6&&(t=t.slice(0,6)),g.find(".reward-user-input-box .reward-user-length").text(t.length+"/6"),g.find(".reward-user-input-box input").val(t),t?y({text:t}).then(function(e){200==e.code&&(e.map&&e.map.resultWordsMessage&&e.map.resultWordsMessage.length>0?(x.show(void 0,{top:document.documentElement.scrollTop+30+"px",width:"248px","border-radius":"4px",left:"50%",transform:"translateX(-50%)"}),g.find(".reward-user-input-box input").addClass("err"),g.find(".gift-reward-box .reward-gift-btn").addClass("reward-user-input-err")):(g.find(".reward-user-input-box input").removeClass("err"),g.find(".gift-reward-box .reward-gift-btn").removeClass("reward-user-input-err")))}):(g.find(".reward-user-input-box input").removeClass("err"),g.find(".gift-reward-box .reward-gift-btn").removeClass("reward-user-input-err"))}},0)});var b=!1;g.find(".comment-input-box .comment-input").on("compositionstart",function(){b=!0}),g.find(".comment-input-box .comment-input").on("compositionend",function(){b=!1}),g.find(".comment-input-box .comment-input").on("input",function(e){setTimeout(function(){if(!b){var t=e.target.value;t&&t.length>20&&(t=t.slice(0,20)),g.find(".comment-input-box .comment-length").text(t.length+"/20"),g.find(".comment-input-box input").val(t),t?y({text:t}).then(function(e){200==e.code&&(e.map&&e.map.resultWordsMessage&&e.map.resultWordsMessage.length>0?(x.show(void 0,{top:document.documentElement.scrollTop+30+"px",width:"248px","border-radius":"4px",left:"50%",transform:"translateX(-50%)"}),g.find(".comment-input-box input").addClass("err"),g.find(".gift-reward-box .reward-gift-btn").addClass("comment-input-err")):(g.find(".comment-input-box input").removeClass("err"),g.find(".gift-reward-box .reward-gift-btn").removeClass("comment-input-err")))}):(g.find(".comment-input-box input").removeClass("err"),g.find(".gift-reward-box .reward-gift-btn").removeClass("comment-input-err"))}},0)}),g.find(".gift-reward-box .back-icon").on("touchend",function(){g.find(".gift-reward-box").hide(),g.find(".gift-select-box").show()}),g.find(".gift-reward-box .reward-gift-btn").on("touchend",function(){var e=g.find(".gift-list-box .gift-item.active"),t=e[0].dataset.name,s=e[0].dataset.img,c=e[0].dataset.money,l=g.find(".reward-user-input-box .reward-user-input").val()||void 0,u=g.find(".comment-input-box .comment-input").val()||void 0,p=function(){g.find(".gift-reward-success-box .rewarded-gift-img").attr("src",""+v.FILE+s),g.find(".gift-reward-success-box .rewarded-gift-name").text(t),g.find(".gift-reward-success-box .rewarded-gift-money").text("￥"+c),g.find(".gift-reward-box").hide(),g.find(".gift-reward-success-box").show(),n.hasExceptionSucTrigger&&(n.triggerTimer=setInterval(function(){h--,0==h?(clearInterval(n.triggerTimer),n.triggerTimer=null,g.remove(),n.$exceptionModal=null,n.$li.trigger("exception-success",[!1])):g.find(".rewarded-gift-tip").text("赠送礼物成功，"+h+"秒后自动跳转")},1e3))},d=[];l&&d.push(y({text:l}).then(function(e){return 200!=e.code?Promise.reject("用户姓名校验失败"):e.map&&e.map.resultWordsMessage&&e.map.resultWordsMessage.length>0?(x.show(void 0,{top:document.documentElement.scrollTop+30+"px",width:"248px","border-radius":"4px",left:"50%",transform:"translateX(-50%)"}),g.find(".reward-user-input-box input").addClass("err"),g.find(".gift-reward-box .reward-gift-btn").addClass("reward-user-input-err"),Promise.reject("用户姓名校验不通过")):void 0})),u&&d.push(y({text:u}).then(function(e){return 200!=e.code?Promise.reject("留言校验失败"):e.map&&e.map.resultWordsMessage&&e.map.resultWordsMessage.length>0?(x.show(void 0,{top:document.documentElement.scrollTop+30+"px",width:"248px","border-radius":"4px",left:"50%",transform:"translateX(-50%)"}),g.find(".comment-input-box input").addClass("err"),g.find(".gift-reward-box .reward-gift-btn").addClass("comment-input-err"),Promise.reject("留言校验不通过")):void 0})),Promise.all(d).then(function(){a({moduleId:n.compJson.id,sceneId:n.eqxScene.meta.id,sceneCreateUser:n.eqxScene.meta.userId,openId:o.openid,giveRewardMoney:Number(c),rewardUserName:l,stayMessage:u,giftName:t,rewardType:2,giftImg:s}).then(function(){var e=i({giftImg:s,giftName:t,moduleId:n.compJson.id,rewardType:2,rewardUserName:l,sceneCreateUser:n.eqxScene.meta.userId,sceneId:n.eqxScene.meta.id,stayMessage:u,totalMoney:100*Number(c),wxHeadUrl:o.headimgurl,wxName:o.nickname,wxOpenId:o.openid});r&&r({rewardRecord:e}),p()})["catch"](function(e){try{e&&"chooseWXPay:cancel"==e.errMsg&&g.fadeOut(300,function(){g.remove()})}catch(t){console.log(t)}})})}),g.find(".gift-reward-success-box .reward-again-btn").on("touchend",function(){g.find(".gift-reward-success-box").hide(),g.find(".gift-select-box").show()}),g.find(".close-icon, .gift-reward-success-box .finish-btn").on("touchend",function(){n.triggerTimer&&(clearInterval(n.triggerTimer),n.triggerTimer=null),g.fadeOut(300,function(){g.remove(),n.$exceptionModal=null})}),g.find(".gift-reward-success-box .exception-trigger-btn").on("touchend",function(){clearInterval(n.triggerTimer),n.triggerTimer=null,g.fadeOut(300,function(){g.remove(),n.$exceptionModal=null,n.$li.trigger("exception-success",[!0])})}),g.on("touchend",function(){n.triggerTimer&&(clearInterval(n.triggerTimer),n.triggerTimer=null),g.fadeOut(300,function(){g.remove(),n.$exceptionModal=null})}),g.find(".wx-exce-box").on("touchend",function(e){e.stopPropagation()}),$(".main-page.z-current").not(".editor-section").prepend(g),n.$exceptionModal=g}function p(e,t){var n=$('<div class="feedback-box">\n                      <div class="feedback-form">\n                        <div class="feedback-content">'+e+'</div>\n                        <div class="feedback-btn">\n                          <a class="feedback-close">关闭</a>\n                        </div>\n                      </div>\n                    </div>'),i=n.find(".feedback-form");i.css("margin-top",-Number.parseInt(i.height()+80)/2),n.insertBefore(t.parent().parent()),n.find(".feedback-close").on("touchend",function(){n.animate({opacity:0},{duration:300,complete:function(e){return n.remove()}})})}function d(e){var t=e.content,i=(e.$li,e.status),o=e.eqxComp,r=null,a="知道了",s=3;switch(i){case 1:r=n(314);break;case 2:r=n(315),o.hasExceptionSucTrigger&&(a="立即查看",t="打赏成功，"+s+"秒后自动跳转");break;case 3:r=n(316)}var c=$('\n        <div class="v-exception-black">\n            <div class="v-exception-box">\n                <div class="v-toast-content">'+t+'</div>\n                <div class="v-toast-btn">\n                    <span class="y-close-btn">'+a+"</span>\n                </div>\n            </div>\n        </div>\n    "),l=c.find(".v-exception-box");l.css("margin-top",-Number.parseInt(l.height()+80)/2),c.on("touchstart mousedown",function(e){e.stopPropagation()}),$(".main-page.z-current").not(".editor-section").prepend(c),c.find(".y-close-btn").on("click",function(){o.triggerTimer&&(clearInterval(o.triggerTimer),o.triggerTimer=null),c.fadeOut(300,function(){
c.remove(),o.$exceptionModal=null})}),c.find(".v-exception-box").on("click",function(e){e.stopPropagation()}),c.on("click",function(){o.triggerTimer&&(clearInterval(o.triggerTimer),o.triggerTimer=null),c.fadeOut(300,function(){c.remove(),o.$exceptionModal=null})})}function h(e){var t=e.content,i=(e.$li,e.status),o=e.eqxComp,r=null,a="知道了",s=3;switch(i){case 1:r=n(314);break;case 2:r=n(315),o.hasExceptionSucTrigger&&(a="立即查看",t="打赏成功，"+s+"秒后自动跳转");break;case 3:r=n(316)}var c=$('\n        <div class="v-exception-black">\n            <div class="v-exception-box">\n                <div class="v-icon-box"><img src='+r+'></div>\n                <div class="v-toast-content">'+t+'</div>\n                <div class="v-toast-btn">\n                    <span class="v-close-btn">'+a+"</span>\n                </div>\n            </div>\n        </div>\n    "),l=c.find(".v-exception-box");l.css("margin-top",-Number.parseInt(l.height()+80)/2),c.on("touchstart mousedown",function(e){e.stopPropagation()}),$(".main-page.z-current").not(".editor-section").prepend(c),2==i&&(o.hasExceptionSucTrigger&&(o.triggerTimer=setInterval(function(){s--,0==s?(clearInterval(o.triggerTimer),o.triggerTimer=null,c.remove(),o.$exceptionModal=null,o.$li.trigger("exception-success",[!1])):c.find(".v-toast-content").text("打赏成功，"+s+"秒后自动跳转")},1e3)),o.$exceptionModal=c),c.find(".v-close-btn").on("click",function(){o.triggerTimer&&(clearInterval(o.triggerTimer),o.triggerTimer=null),c.fadeOut(300,function(){c.remove(),o.$exceptionModal=null,2==i&&o.hasExceptionSucTrigger&&o.$li.trigger("exception-success",[!0])})}),c.find(".v-exception-box").on("click",function(e){e.stopPropagation()}),c.on("click",function(){o.triggerTimer&&(clearInterval(o.triggerTimer),o.triggerTimer=null),c.fadeOut(300,function(){c.remove(),o.$exceptionModal=null})})}n(305);var f=n(298).$getWxPayParams,g=n(298).$getRawaryRecord,m=n(22).wxPay3,v=n(24),y=n(306).$textCheck,b=n(307),x=new b({msg:"内容异常，暂无法展示"});e.exports={modal:p,$toast:h,$tip:d,$showException:l,$showGiftException:u};var w=!1,k=void 0,S=["amounts-box","amounts-box-1","amounts-box-2","amounts-box-3","amounts-box-4","amounts-box-5","amounts-box-6"],I=["","gift-list-1","gift-list-2","gift-list-3","gift-list-4","gift-list-5","gift-list-6","gift-list-7","gift-list-8"],T=!1},function(e,t){},function(e,t,n){"use strict";function i(e){var t=e.text,n=e.sendType,i=void 0===n?[2,6]:n;return r({type:"POST",url:o.SERVER_0+"m/notice/message/fresh/check",data:{text:t,sendType:i.join(",")}})}var o=n(24),r=n(23).ajax;e.exports={$textCheck:i}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(308);n(309);var a=n(310),s=n(311),c={warning:{backgroundColor:"rgba(255, 246, 229, 1)",color:"rgba(245, 166, 35, 1)",icon:a},success:{backgroundColor:"rgba(208, 238, 255, 1)",color:"#1261FF",icon:s}},l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.msg=t.msg,this.duration=t.duration||3e3,this.toastType=t.toastType||"warning",this.$context=null}return o(e,[{key:"show",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"body",n=arguments[1];this.$context=$(r);var i=c[this.toastType];return this.msg&&this.$context.find(".msg").html(this.msg),$(t).append(this.$context),this.$context.css({backgroundColor:i.backgroundColor,color:i.color}),n&&this.$context.css(n),this.$context.find(".warn-icon").attr("src",i.icon),setTimeout(function(){e.hide()},this.duration),this.$context}},{key:"hide",value:function(){var e=$(".view-toast");e&&e.remove()}}]),e}();e.exports=l},function(e,t){e.exports='<div class="view-toast"><div class="msg-box"><img class="warn-icon eqf-alert-f"/> <span class="msg"></span></div></div>'},function(e,t){},function(e,t,n){e.exports=n.p+"images/alert-f-7c3030.png"},function(e,t,n){e.exports=n.p+"images/yes-f-0c9bb8.png"},function(e,t,n){e.exports=n.p+"images/svg_default_ava-e12da1.svg"},function(e,t,n){e.exports=n.p+"images/img_nodata-9300de.png"},function(e,t,n){e.exports=n.p+"images/icon_wx-e2ccc6.png"},function(e,t,n){e.exports=n.p+"images/icon_su-b5c123.png"},function(e,t,n){e.exports=n.p+"images/icon_timeout-0cae64.png"},function(e,t){"use strict";function n(){var e=document.documentElement.clientWidth||document.body.clientWidth,t=document.documentElement.clientHeight||document.body.clientHeight;return{width:e,height:t}}e.exports={getSize:n}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(101),c=n(319),l=n(36).parse,u=n(27).isWeixin,p=n(320),d=n(164).$robRedPacket,h=(n(80).$getUserWxInfo,n(69).hrefToWxAuth,n(69).getWeChatUser),f=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!1},compFont:{self:!1,fontFamily:!1}},trigger:{self:!1},sound:!1,link:!1}),r}return r(t,e),a(t,[{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.properties.title;return this.$context=$(l(c,{id:t,type:n,title:i})),this.$context}},{key:"bindAfterRenderEvent",value:function(){var e=this;this.$li.click(function(){if(!u())return void p.modal("该组件仅能在微信中使用。",e.$li);var t=h();d(e.eqxScene.meta.id,e.compJson.id,t.openid).then(function(t){200===t.code&&p.modal("恭喜您成功抢到一个红包，请去服务通知下领取红包！",e.$li)})["catch"](function(t){t.msg&&p.modal(t.msg,e.$li)})})}}]),t}(s);e.exports=f},function(e,t){e.exports='<a id="#{id}" ctype="#{type}" class="element eqx-red-packet" style="cursor: default;width: 100%;height: 100%">#{title}</a>'},function(e,t){"use strict";function n(e,t){var n=$('<div class="feedback-box">\n                      <div class="feedback-form">\n                        <div class="feedback-content">'+e+'</div>\n                        <div class="feedback-btn">\n                          <a class="feedback-close">关闭</a>\n                        </div>\n                      </div>\n                    </div>'),i=n.find(".feedback-form");i.css("margin-top",-Number.parseInt(i.height()+80)/2),n.insertBefore(t.parent().parent()),n.find(".feedback-close").on("click",function(){n.animate({opacity:0},{duration:300,complete:function(e){return n.remove()}})})}e.exports={modal:n}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var n="",i=d.getWeChatUser();if(i.headimgurl)o=p(t,8*e,i.headimgurl).then(function(e){return e.list.forEach(function(e,t){t<24&&(h[t]=e)}),h});else var o=Promise.resolve(h);return o.then(function(){for(var t=0;t<8*e;t++){var i='<img src="'+h[t]+'">',o='<img src="'+h[t]+'" style="margin-right:0;">';n+=(t+1)%8==0?o:i}return n})}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(322);var c=n(101),l=n(323),u=n(36).parse,p=n(324).$getPhotoWallPhotos,d=n(69),h=[n(325),n(326),n(327),n(328),n(329),n(330),n(331),n(332),n(333),n(334),n(335),n(336),n(337),n(338),n(339),n(340),n(341),n(342),n(343),n(344),n(345),n(346),n(347),n(348)],f=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{self:!0,fontFamily:!1,fontColor:!1,baseStyle:!1,lineHeight:!1,letterSpacing:!1}},trigger:{self:!0},sound:!1,link:!1}),r}return r(t,e),s(t,[{key:"create$context",value:function(){var e=this,t=this.compJson,n=t.id,i=t.type;return this.$context=$(u(l,{id:n,type:i})),a(parseInt(t.properties.line),t.sceneId).then(function(n){var i=$(n);e.$context.append(i),e.$context.find("img").css({borderWidth:t.properties.ownerCss.borderWidth,borderStyle:t.properties.ownerCss.borderStyle,borderColor:t.properties.ownerCss.borderColor,boxShadow:t.properties.ownerCss.boxShadow,boxShadowDirection:t.properties.ownerCss.boxShadowDirection,boxShadowSize:t.properties.ownerCss.boxShadowSize})}),this.$context}},{key:"changePhotoWallLine",value:function(){this.$context.remove(),this.$context=this.create$context(),this.$contentsDiv.append(this.$context)}},{key:"changeBorderStyle",value:function(e){this.$context.find("img").css({borderStyle:e})}},{key:"changeBorderColor",value:function(e){this.$context.find("img").css({borderColor:e})}},{key:"changeBorderWidth",value:function(e){this.$context.find("img").css({borderWidth:e})}},{key:"changeBoxshadowColor",value:function(e){this.$context.find("img").css({boxShadow:e})}}]),t}(c);e.exports=f},function(e,t){},function(e,t){e.exports='<div class="photowall" id="#{id}" ctype="#{type}"></div>'},function(e,t,n){"use strict";function i(e,t,n){return o({type:"GET",url:r.WX_API+"eqs/s/wx/photo/list",data:$.param({sceneId:e,photoNum:t,photoPath:n})})}var o=n(23).ajax,r=n(24);e.exports={$getPhotoWallPhotos:i}},function(e,t,n){e.exports=n.p+"images/photoWall-1-2cbac2.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-2-746422.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-3-3d665c.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-4-3c7ce3.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-5-26a180.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-6-91bb95.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-7-98a3a6.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-8-a97166.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-9-0b3d68.png"},function(e,t,n){e.exports=n.p+"images/photoWall-10-68faf7.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-11-487873.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-12-382a38.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-13-3bc7ad.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-14-686474.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-15-38d83b.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-16-27e1e0.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-17-7762e5.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-18-a06b05.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-19-016ef7.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-20-bc9344.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-21-d6c339.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-22-b04a01.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-23-e7744a.jpg"},function(e,t,n){e.exports=n.p+"images/photoWall-24-7cd4a4.jpg"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return new Promise(function(t){console.log(e,"eqxPage1111");var n=$(e.section),i=e.pageJson.properties.longPage,o=Math.abs(e.touchPos),r=n.height(),a=e.currentLayer.eqxItems;a.forEach(function(e){e.stopAnimation()});var u=e.$section.clone(!0),p=Array.from(u.find('li[ctype = "32"]'));p.length&&p.forEach(function(e){var t=Array.from($(e).find(".img-group-items-box").find(".img-group-item"));t.forEach(function(e){$(e).find(".img-group-item-box").css({animation:"none"})})});var d=Array.from(n.find(".u-arrow-bottom")),h=[];d.forEach(function(e){var t=$(e),n=t.css("display");h.push(function(e){return t.css("display",n)}),t.hide()});var m=n.siblings(".bgm-btn-wraper");m.length&&e.bgm&&e.bgm.hide();var v=Array.from(u.find(".u-arrow-bottom"));v.length&&v.forEach(function(e){$(e).remove()});var b=Array.from(u.find('li[ctype = "24"]'));b.length&&b.forEach(function(e){$(e).remove()});var x=e.$section.find('li[ctype = "u"]');if(x.length){var w=x.find("canvas"),k=u.find('li[ctype = "u"]').find("canvas");k.each(function(e,t){var n=t.parentNode;$(n).find(".board-pen").remove();var i=null;w.each(function(t,n){e===t&&(i=f(n))}),n.removeChild(t),n.appendChild(i)})}var S=e.$section.find('li[ctype = "m"]');S.length;var I=a.filter(function(e){return"o"==e.type});I.length&&I.forEach(function(e,t){c(e,u.find('li[id = "inside_'+e.id+'"]'))});var T=Array.from(n.find('li[ctype = "501"], li[ctype="502"], li[ctype="503"], li[ctype="504"]').find("textarea")),E=Array.from(u.find('li[ctype = "501"], li[ctype="502"], li[ctype="503"], li[ctype="504"]').find("textarea"));E.forEach(function(e){var t=$(e).attr("id"),n=T.find(function(e){return $(e).attr("id")===t});$(e).attr("val",$(n).val())});var P=Array.from(n.find('li[ctype = "r"]').find(".comp_radio .options")),_=Array.from(u.find('li[ctype = "r"]').find(".comp_radio .options"));P.forEach(function(e,t){$(_[t]).attr("val",$(e).find($("input[type='radio']:checked")).val())});var C=Array.from(n.find('li[ctype = "c"]').find(".comp_radio .options")),A=Array.from(u.find('li[ctype = "c"]').find(".comp_radio .options"));C.forEach(function(e,t){var n=[];$(e).find($("input[type=checkbox]:checked")).each(function(){n.push($(this).val())});var i=n.join("&$");$(A[t]).attr("val",i)});var O=Array.from(n.find('li[ctype = "z"]').find("select")),q=Array.from(u.find('li[ctype = "z"]').find("select"));O.forEach(function(e,t){$(q[t]).attr("val",$(e).val())});var L=Array.from(n.find('li[ctype = "12"]').find(".comp_sms")),M=Array.from(u.find('li[ctype = "12"]').find(".comp_sms"));L.forEach(function(e,t){var n=[];$(e).find('input[type = "tel"]').val()&&n.push(JSON.stringify({name:"tel",value:$(e).find('input[type = "tel"]').val()})),$(e).find('input[type = "number"]').val()&&n.push(JSON.stringify({name:"number",value:$(e).find('input[type = "number"]').val()}));var i=n.join("&$");$(M[t]).attr("val",i)});var R=Array.from(n.find('li[ctype = "t"]').find(".create-chart")),j=Array.from(u.find('li[ctype = "t"]').find(".create-chart"));R.forEach(function(e,t){var n=$(e).find("canvas"),i=l(n[0],n.width(),n.height()),o=document.createElement("img");o.width=n.width(),o.height=n.height(),o.src=i,$(j[t]).find("canvas").after($(o)),$(j[t]).find("canvas").remove()});var F=e.$section.find('li[ctype = "26"]');if(F.length){var B=Array.from(F),D=Array.from(u.find('li[ctype = "26"]'));B.forEach(function(e,t){var n=$(e).find(".speech-size-control"),i=n.find(".speech-bg-video").length;if(i){var o=$(e).find("video");o[0]&&o[0].pause();var r=$('<canvas width="'+o.width()+'" height="'+o.height()+'" style="width:'+o.width()+"px;height:"+o.height()+'px;"></canvas>')[0],a=r.getContext("2d");a.drawImage(o[0],0,0,o.width(),o.height());var s=r.toDataURL("image/png");o[0].play();var c=document.createElement("img");$(c).css({width:o.width()+"px",height:o.height()+"px"});var l=$(D[t]).find("video"),u=l[0].parentNode;u.removeChild(l[0]),$(D[t]).find(".speech-play")&&$(D[t]).find(".speech-play").hide(),c.src=s,u.appendChild(c),$(u).css({display:"flex","align-items":"center","justify-content":"center"})}})}var J=Array.from(e.$section.find('.element[ctype = "7"]')),N=e.eqxScene.meta.userId;console.log("userId",N),J.length?y(N).then(function(e){return e.list=e.list.filter(function(e){return!(!e.id&&!e.productId)}),e.list}).then(function(n){var a=document.createElement("style");a.type="text/css",J.forEach(function(e){var t=Array.from($(e).find("span,div,p"));t.forEach(function(e){var t=$(e).css("font-family");t&&n.forEach(function(e){e.fontFamily===t&&a.appendChild(document.createTextNode("@font-face{font-family:'"+e.fontFamily+"';src: url('"+g.FILE+e.woffPath+"') format('woff'), url('"+g.FILE+e.ttfPath+"') format('truetype');}"))})})}),u.prepend(a),s(u,h,i,r,o,e).then(function(e){t(e)})})["catch"](function(n){console.log("getMyFontFamily error",n),s(u,h,i,r,o,e).then(function(e){t(e)})}):s(u,h,i,r,o,e).then(function(e){t(e)})})}function s(e,t,n,i,o,r){return new Promise(function(a,s){var c='\n            <div id="loading_html" style="z-index:10; width:100%;height:100%;position: absolute; left:0;top:0;background:rgba(0, 0, 0, 0.8);display:flex;align-items:center;justify-content:center">    \n                <img style="width:75px;" src="data:image/gif;base64,R0lGODlhjABUAPYFABWT/5vbQpTXTJbYShea/5DVUiWc6Syg35vfSX3LbEuws5rhU5/dPpnaRRWU/3XHeTqny4rSWxad/3/Sd5LfYm29b2vCiRSU/IPQZ2OkXRJ2zpfZSCmk7hKM7p3cQGK9k1W2pTKj10yXelG7uVCyrFy6nYbQYA6P/xGR/w+Q/0Cqw0StuhKB2xyX9BSR+Dyw1p/jSRSa+RJ81pncShaU+SCZ8DSLoROS8RWh/xKW9hSO8BSL7RGI4RKJ7RmV+R2e/RKO50WnqCudyRSJ6BKF4hWR/RF/3iiXzRSN8hKT+wWM/xOG5hSW+xKZ/hCD5Red/yCBvA+T/w5zxxOU7ROb+wFuywWP+guJ9BGY8xeb/xWc/x+Q3JraQwSO8wWL+gyU+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJBAAFACwAAAgAjABEAAAH/4AFgoOEhYYFV4mKi4yNjopOh5KTkkCPl5iLMpScnYc3BAQOo6SlAAClqaqpoZ6uBQASq7Okp7aos00xr7yGsrfAwcLDwA4EOr2fosTMzcUEyb2yDs7VzaMS0YM01NbexK3anL/f5cHG2tzd5uyoLOKTEqjt9AREyTwE8/Ts2fCGO9bxY/ckmbyB9Pz9G6QPYT1eLgQ6/AZtoSBuE9s54EUuYzmF/xp6NJfF1bSR5RzsWHiQ3wWEozyJzPjymwOQ0WTMvBaqp09jPntKZFZynLdRQZMC9Xm0oraTzIDK0EC1qtWrVXtI2HnrAoqaOCgFrGYMANazV3Uuc+Y0mQ5qQ/9vxQwZ7MIFHzTy0mjra1QzAjf+MYkbDOerluByWCyA+EKLDwkiR37wQpLfZoa1AeEajMCmXmuHjUK2uIDIEyUYNFi92gMFSZyBZRbHIvatsKDZlmYIIMUBA\n                QMECBeOIMIh27YcDNnNuJZo0iZ1My+QxMEFCwGGD19wyAjyU7P/dRSGzhWRy8RwT78AYUBw7Q0SHEJMnm9pjFHtS8Kxb5j+xTs80IB2wHFnSH+i0TDdIPQJ818h+InmABMLDjLBgMMNsEAG80V1U4WCdEDYLeHxFlWJFgWBgHYDGGdIhKItByJjzjjAAyUNnrPEjIJcuB2HhnwXC4+CCKmeId45g2L/aQsENwAGh4xoCwHvEBmaaEhIMp6DRA5igQcaHjKElOB1WSSZmb0l5YdmFjABAhUcp2SbBcBYny/XLMlcC5UZQiYqgdGZIzB8XUkedHR2iFmiBYyZJyFGMipJDGxVmeigyRFghCA1RXWjpIXUNieoyFHjz596drllZ5uCiukp6EREDCmRgEqIiGtuZKtpHhqB6q6EvHrKg20aek41qfIYA5kOIAoqevwkO6OwABDbJrQJAVsADmTao20B2J4TLqHAsjDuLda2uapcPYArHaj8/fUZsBFJWREuzKQLoqweftuclP4Ace6Uro6q7VsIFtOuINQSoAGj1Krk73dsmsiM/7SLCZlZDk0kauc5zhpbTAeC1rhwIRJgvJDGil7cpoiPBklKse8WsuyaF5gpJAFSyFmtmTDnF8/AP1vJrIJ92aJyNOuiS8l5BoPIsiFOoBeDpRWO1QwVRv3VaoU4dCqucofECysARy7YNMGdTL2gDL8aQuk5U4C47DWKdUI0KrsseHe+WFtM7oL51Nx1vguq+ddxhJXHHMX6DnIDs5HzIoq9sCHOXA/M6nqY4St33jIxS+Po4dI7l9ZE3IaYPSvSFlHcbDQiyzavOHujUqvPJ8ZeY+k0skXAjtEAkMWfaFNSO6Ge9wLEVmSRrA3CZBGQ8vUSPKH99tynvPzgOCJvTNL23JePffYpI18mPGvLJZf63qR9iNYonV1N5ZNMAX/9w0bHf1MWkcf+RuKAJLxCSP/r32Lal8CiucJ1DSRP3yySO/4RYHf+i6AwgKclDZ4Ddq/4WAOpoSnmTM6DtygI01AIq7kwh1sRvAwHoRJD/PViCY2pH1JC5w2xCcOH6LJ\n                hNHCgD7ucwogAQKISa7LEc0jAWeLAAvSY8RK7MNGKSbQiE3HBwWQQQAtf/KIWwDhGMo5RjGZMo/W8FziLGGErEmhCyuSIvTCe8Y52FGMoUiaOQAAAIfkEBQQACAAsAAAIAIwARAAAB/+ACIKDhIWGCA4OAIuMjY6PiygHKpQqQYeYmZhTipCen45EmqOkhx0EDheqAKoXKIutKBcARa+uRQAoJxAFG75cGwslpcQISQStrqu1i8y3sq7NtihFswAOOcXahhKdoN/NNAlcAuXlvi9X24c3qODvoA4E69vd3vCeKCQB5v0BCQ600BtE4x6+g40IzBs4qhvCTycMRNjQr18DBSkWrito8CFCBywYZpJwzSMkFB/4VTQ3wEQLAqK28SBQ0qRJCSIP7eho8wINExRXmgsA4QTObThsKl10NOcgmksfPVApdICAECkAaCzlgmdUeFtzFvzK6EIKCAOsCg1gwZoDbQ7/yXpsmhOq3FYWGggVUODACUZhRyaS69HBDqckl1qD1cpAr5UMQPxl5CBJKbt3P9KlJwPzN1SgFYqWFxrVBRABuARYHYABhhaLFwXmhi+RaIWkR99WWHt2MXvfSMvQQLy48ePFd4x4YOGBcwsGXj3CoWnnO3kAkGs/3tkdON+ldCjyuiiRU5qqUsROqAk4KAI3cjIh32jz7+/ZnCJIHM/34G/2DQSEZ5AQIMM63nmSiA76DUIfU5gQ+EiADLEgoSPUbXMhew0+Fc9bhmxI2RAdCmIPeQ4weN9nJQ7SlYIBGiEihC3uR588xRDx3ycZ1phgIykewp+C4In1II6lJEVf/5E59cBTgBccSUONgwzpCZOCjPVJIkxQWSWQWoVE25YOUNhgBw8CYKaH8ayp3xD/JQJiIVpuSaKXJoLjAA/t6bkEnl+W59uMagLKJig9GiIjOG52CJV5hux4pZiG/giJA0hgEtcnWHYoZ4BwPtioo6IeIt6No3bYjYqF0CSpI6k2WCeRY24Za4M3BPjqIw7EZ2ghVhbY6pGs/toQo8YWAmdwdBGaaLKYxPAdpdDuFxwBRgiy3qV8VouJhaV6e\n                +ilhSKCrLhC7ppQtuha2x8CLyqYiBPtFoKmuuXN2a6IiRiR5q2ABvtIp5Ue+Q7AXsZAbL0Opnkww4G+B7Eg+CKEcP+NODwI08SIHFmxbBCz8LFWHNsYTw/mslhvUp8dOHFXSwpyTcztxktmye55chQQIxNco8CwlixeTZeinOdnGogLNJCHcTxjma2eWy2hAebQhLezXlosApby2kG1S1NmNLAXi0S1kFL/iiazh6ACqbGE+qbwjRckG7cUbYNs7Nrvavqxz2ZLmS4jZdejsSY6pu3l2YY4sWMM1FJp3TdUHPsZu17isC1lidxZCMvlAfDsz4eTwjiVMvx7iLS8ToGnwsHlN8rIDsSQsMaRC3Ih4NrM9N2KEtd4qsrD0urjtdrccCTvl/0dYfAlOhmcvqWErTep06MNYIthJ3Jx3B02ofrxIaBvOWWDTweJ4L8uizTyNfQ+z/Z5ehZuvWwE/EkPAFk4PDohXSsQ9YoBBAkQ6hpfG8jQrkMACTjwgU+IoAQn6MAACqshDpOHBCbIwSc80IEe3JTi1iHCLQHJYQf5XyEmRxgwvYN5huBECz1CsPvNkFcwpA0Kb1iZYhzwhoBR1Q5nCLjyATEetmvQ+4BIgPgB74ifKJymoGi+jQzxK4rAVouUR0VIPGEgNiSMnKiUsS7WRyQ5oyKSqLSEMC5ljQyxYAsV8isc/JCGEtgaQ7BgwCNCDVpdUIIgB0nIQhrykIP0QhVqVAUrIPKRkCRkFxgSCAAh+QQFBAAJACwjAAgAGAANAAAGhUCAEHAoGhPIIcChQzqdH0FhWhA8ThfUJSskOJ6JVWBALjNKF6WS8MQ0BPD4oGBIq4VOUCDOFzAsKXZ3KQcRb31wSBAnd3gkDIhxSBaCdwp7kQKTjI1CJoeIZCEpnUgroH0BH6SlSA+YfAMRda1IIQsICLi5MCNYjWAJIhnExSJIEgR3TkEAIfkECQQABQAsGQAIAC8ALQAABrtAgHBILBYLyKRyyWwiDwmTNGJKhACX7AWFyjq/YGSCMdiYB56E72IUht9KRUBArwsCpFPbDX9HBnZ1AxEGbG19YS\n                VzgXRIHyl7AIhfERuMjUgGKHuTTQaVlwJJB5uHnUwfi5cFFi6Rp0yfgKsHhkawTSSqdgElepy4TBMwCAgLxTAmPwTMzc3BTTYZ09QZNhrY2dnQ3N3e3+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7/94IAACH5BAUEAAoALBAACAA9AC4AAAf/gAqCg4IOABcAiYqLjI2MOoSRkpOEQRMPmJgrJxedniiIRSiHKEWhowCihxcEDpSvki8ICA21AQEDISeOvL2JDgRIsMMYDQLHyAEPoL7Niw7QEsOUJAHI1wINm87cisDTkQYRA9jIDRgtiN3cBETggyUe5dcBJLvr3NLvChbW88cBStzD1+zbOxXk/gnYEAIVwWYE9vGTNy+AhYG91OFjte9AgYTYChhwqEjjqofQaOyLRw4kAxCsgBGYOVOmTJqt1ul7lwDXgA0DEDz4IUOD0aNIkx7tIYFANxwSIUidKpGSU2cRqwpKoZWSBHZWoXWtetXXTklix0os6yit2reDr1wY4nV2EAu4Xdk+gzTJFV6JO+YyqisIADS/f99JEJyIwF1JhBNPG8LYLSEaiCXv+2oYQFZJTjVrdXq4ryHRVaEBiEw5Eeqqi/lGWuz69b4bkVXXtv2W9m7eXWMwBj6WhV7iXTkvQl61A+PfzKcp55U5eiThjqyDm75cOywcvby/YvG8u3hJ4MOfjyTX1/rZzd4P4t62h3y9jaqLp9/o83nnzkRmXSvlLeLfevpNEwgAIfkECQQABQAsCwAIAEIALQAAB/+ABYKDhIMAh4iJiouMDoWPkJGPHQQOF5eYKBcARSgAFyhFm52HpKCil5Kqq4ISDoywsbKHBDqstwUOr7O8vbisu73Cso6/kQDBssbLzMPMz7jO0NOS0tTXhcPawssGFgng4A8hsJuI5tuMyxYMAQ3vDR4YiwT1DvX2+PrFuLoErDgkQBgwQIDBgx5IHLr3D5vDBA0OShwQwQANfg6vKQggsWMDC18yXtMFAEPEjgcRVBCJ7VCEgigFDKDAMuMHjjERZKjp0ECEDTFp8hSE8ZaijSg\n                XDH1GUlECjgQFNJiw1JCioqtCvDwotGrPEGAhHPGajWxNcw3Nkk2r1iGAtnAp48qdS7eu3bt46b7NS2gv37+AAwsmhHWw4V+6DkPbobix42ls+frFFQgAIfkECQQAEQAsBQAIAEgALgAAB/+AEYKDhIWCDg4AiouMjY6PDkiGk5SVkx0EDhebAJsXKIpFoJ9FFwCiip6cqBeZlq+wERKJj7W2tw4EOrG8hLO0t8HCAIgSvbyzw8rKBMevEsTL0ratRM6UO8DT247G14YE3OKOud+ENNqNiOPM5oPh7PGKzebQ0qby5EzfMvDDuZkICBSYC+BAgsrKPTP0KxhAGRoiSpxIUWIPCf6C4bCUzV\n                CidOocuHs3jB6lWYaEEcgx0pcwhR4RpbSFaFdLQhlreQOnaKYtkzdJ0hTJs2ehW0CDCnIBctFOQkb8+Xy0UWmhnIsc2Cxkz2gECA8wJBiLwQKjpFYjZHv0dFCSRoP/THhoQJcuA7OI9qXlCgwRARaTuhotEUCA4cMDBoRw0HZvhCHaZBpC10jCgQIDDmsO8MDBEscMz1LCSsBCYc2bR4CeBE9yoaYhBGRGfRiBiNUxATR+vK4RhNm0ZVPAHVhX4GiOEjQILmAB8Uk3dvd+9Bt47QTPewl+ZBr1gOHZY8Voyuhyg8SGEVQID4sF1kcKNH9nD2v7LQMhQhwIcYS+pQ7kBbObf4PYp8yABI7nkE4EnqQSgw0WgoNKRNSCFoEsBEgMY5MsciF9OGiYiwwdzhPhUhpuSIloESaDVCVnadCggersACMjCOL2XmWWqNOBfy7WgkgPPfLIHoAO5RgBDTkXsLcjiyfGAsA1gQAAIfkEBQQABQAsAAAIAE0ALgAAB/+ABYKDhIWGBQ4OAIuMjY6PkAA6h5SVlpQdBA4XnJwAKBeLKEWhRSiLnaAApgAXo6Gal7KzgxKKkbi5kQSTtL6Gtre6w8MOEr/IBbbEzMQOBMm0EgDCzdaQBETRlzvV19+Ox9uVBODmj8/jhzTe5+bQ6oXl7vSL8PHK9bntkQ5M+DLmOSNAUJPBggcL8oskzlJDSsF0GSMgQ4PFixgzXuwhQaAuHJa6WdKhaOGiTfg84rp3aJrDYQRy4BM0DSYlTQDImaTmoNfMAiohPSQ0j5zNn4OCNkpnSCDEo0gFuTA5VJARp4aIJPoYlWg/n4RqLjqEg1oull27CT30yBC7ff7/uhYSy4gAi0Mqm0qs2nVItUTr2oYttkQusFtM9TqSN4yvYU2JHBzaupjQTgBoDQ+KzNcvpEI7jWmG2LMlv0L7HI++wZey4EH7wI6eRbdyAQUJMCTInaBEI5CzfcUwKSjEgAADGjRIzkDBSR7BabFQykjQgwACsmvfEGGR6uhzdblQgV27+QAlHDgBL6vDZQcJGpg3P0AAB/ayaqMDUX/++Q/4WYL\n                TPh9s4J95MFgQYCX6PULAARH0519yLyxIFkxagVCefwE8kNmCLLi2yyAYyDdffSFgZiEhZe3EEnkDxCgjAx/Ys6JUl1FTyAf+JdDIh+A16MiHB4RgpJFDamChNZAnUbMDJbp8pxl1J4kG5T4dBLjMPj1U0hh+7l0GpCAionMBe1TyNCZNZQ4J3oC4OECDIYEAACH5BAUEAAYALAAAJAATABYAAAaJQIMQQCwShcikwcgEKJNN41PoiEqfVqNEmdVyu8Qt1HopowjY5sXRak+XxlQoYYiYIpNnlXipmYQDAw0LU0UnIEICigIDFIUnBgUbi4sLGW8WAZSLjVMHm5sIFU8hjKCVUw+apwIeJaSmoAMRbx+rmwEkb3UBgb4BdLsqEQIFxgImIbtIB83NRkEAIfkECQQAHgAsBQArAEAAGAAABaMgII6i5J1oqq5s674oCcB0bbeySNx8z+Y6n9AHDA6PsKJOg2zilCan9KQUOTpTabWUlTqqjku36fjmDCLOuHl+RN6RyRopszA2g80GUZkPSRADAwKEhBR+RyIJDYWFDRiIQwoBjY0LkUIJlJWEG5CYPIuchAMLGaA3k6OEAXKoNqKceRCvNoGDlQEWtTd2gr+MB7w2Bg8FEcfHCsM8Bs7OzCwhACH5BAUEAAgALAEAHwBOAC0AAAf/gAiCg4SFhoeIiYqCAACKjQ4OiY6LlZaXjJiIlJqdngSTnoWcoqWmp6ipqqupja6vrg6wsJGstqeSt7qGuYlLu6W9iDTCwLays67GuzGWN8u3oJ7JABLQljizl9TS14ksyK+LkdSNTd6JOOTJtbzlAN3ohC7h1MWE7/HyCBLU2+UENOwT1O+doB6T3lkbSKAcIxyP3jnosK9guXu86tFa6K2DxlkOOCL6+CoSxl0N35FKZLGcSGMpJZ4kRIRkyZcoL6jUJ+hXoZbcjCzLpnLmIaDJcLKSYfOV0kTrLjZj1rQRz0pIZ11NhaQqgJCebniFpysmwFJZYW01RcBrO1Fmx2FdSHEhCqsLUdk9vdR2lk4DgA1wgJKqb1EnqIBecGGhgGPHFD4MKQVv\n                LACIqHTUO6EggAABA0IPYKDggoTTT1I/Qa1a9WnDKslWWnnU1YUaET7r/jwgQgud7Cy/w1zJKIIpyFCU8Lxbd4ASJ2JLT7aW16ULIQpsaL67wIELu5jsWs59N4MSA1GVYFDeOfr0pg4UaA/aO/xTIJhzf34fFYYG3DUQQX+ovMBAAxskOEADHqxAICojUBCBCRFU+N6DqUxxHIaGBAIAIfkEBQQABQAsEAA+ABgADgAAB4aABYIFAIUAEjKDiouLhoYEBIySgo6VTRYLmZoLFByKlYYnEAgIAqanHg+DoIUXLgkNp7ICAyqsoQqCs6cNCbcAFwAJurumAba/wwXFxhC/KBDEu72UrMEPsbsDG9HVoCchtLsBFooStykfDAPs7AECB4s4BLcWEREm+SYrkwVK/wADCgQYCAAh+QQFBAANACwaAEAAGAALAAAGbcBGgyApGoucyWLJXEyEQoB0Ok2VGAiBVjvwgKBU6uUw2JoFg4ghLL5YGmdz4MOengzQ+Lawrl/wQnoCGxF1UxcfcIIMJYZSKAYRgoRghicKAXoBClANhhcuCQwDAxukHgmObAcJESauEQkcU0EAIfkEBQQABAAsIwA+ABgADQAAB4aABIKDhIUHBwaHhYuLIBQCBZACCYUSTxKYT5oSTS8bGwOhoR4WhACnqKcXDg8BAq+woSGCqbUnK66wugEPtLWqLSYEusQBK7+oFyuDxLC8yKcnKszNArwE0AA0lNUCAxvT2ScQoNXXvsgXFrm6AwIHpukGBQGf9gwlhdkEKhgm/yYwlBIUCAAh+QQFBAAWACwtADEAFwAaAAAGj0CLcEgkjkhIRXG5pHgCUE+CSa0gBFisB0RdLgZZ7KBg6A4njXA28DELr2rxIGSmxMPbrgh+HzQgXQYRYHcBD24KAX0CdG4JaWoebW4WEAMMUFERZZSVH5+gB1QEDgCmnUMApKasqKussJ2ws6dmtLRut7hUurMOXb2wv8DBAMO8xZS9DsfEt822rMwOEpRBACH5BAUEAAgALDYAJAAXABoAAAaaQIRwSBRaHkikxVBsDjOLRmAaYDycT\n                spAwO02VFhiZdMtNzDh4aLMDpDSkwa7PIiktfPulhN+BPJcAVdhIQJbcwMFL2kIH39zAR+MQhFyZhF8kysCDRsDAw0DI5NDBxCnpwdhBACtAKREEg6urbAIHQ6ztK+krLuukwS6v7xpvsS1YTjItGEyw8xhMdDEjMytDpPXpMzZ3NWMQQAh+QQFBAAJACw/ABYAFgAbAAAGm8CEcEgUGg5IzqHIJJYEhWhB8GgyX4iBduv5WImYhmBMHgg438QoQG4LGlWrIbJxlzcq69reRlisK2x8YwgVX2GDAhRpKmJ8CBlpCQ+CbRsYkgkHAgFbGw0wmUIrGCYRpRFeoqsxDgCvsKIsBLC1ohKutbFpHbm6r5ISv7pfrcO2VsLHsARWy8xfz6/N0cvUaccODpnHEqu/25JBACH5BAUEAAgALEcACQAXABoAAAepgAiCg4SDJCMkiQqFjIQQCx4BkgEMD42NEw0Cm5wBi5eDIwGcpAMRoIIcJpqknSWoJR6tpBsFB6AJrLObnqAfsrsCAwMhoAYFA8EBFqgIIKOzA7bNCBi6rtQIKg2Tkh4Y2YIqH+TkJbeMDgDr6+GCBOzx4fDx8tT09ezNEvn1qEnq+rFzAIqfQAAOHEgAFfCggyGoDq5bGPEgARbUDlJsJnBjxnoOblALBAAh+QQFBAAJACxQAAkAGAANAAAGgMCEMOEiXI6XoYEEajZDQ+GN4ABYr0IMI8DlCqBDR/V6PZU8grQ68AiTyRdDYaCuN1YJwhtuCdTtGAljeykQQn91ASB7ZSCHiGlsjFYnhgmQkSWTVhcWaJADEUKbFwdzkAEKQ5MOKSUwCAgLsQswE1GsQhm7vLs2UQl7BDfAxUJBACH5BAUEABEALEQACQAvADEAAAa5wIhwSCwaiZekMjlUlEDP0upIrRYB2Kz2wwh4Ax5PyUo2as8pyGAgaLfZh7L8rL0AHgG33mORl+lZJyt5em5rEH5VgFgXLSaEhW0NCYlUiwAocRGRhgUGlWaLjRiQkZOgR5cpKw2ckiqooaJ4nA0PsakODgS8BLsXIQsIwsMIw5q4RRrLzM0iGdD\n                RGSLJ1dbX2Nna29zd3t/g4eLj5OXm5+jp6uvs7e7v8PHy8/T19vf4+fr7/H4s7UEAIfkEBQQABwAsZAAJABkADQAABoXAg/BwKRovQ1VpyRw6AdCoVBWoeqoBjPMg7V5amIZgTPaMnt3oCRQguwUFjjAdRRkGb3fgM6cDUB9ieWQzIX5QFwlCg2MeCi2HJyWCjAIhXH4XBhF4g3tDfg4nCm15GxEGQwSrrKwONAmUZAEkWxq3uLcyBC8CAQ0NVopbxFshIMjIJFJBACH5BAkEAAcALEsACQA3ACUAAAa9wINwSCwaj8jhZXkBOHLJqHRaBFivTgJ1yyViv9quOPotO8boahnrOKff6/U7HS/P0fXl9Y4vp5YoKHx9WBcrFoiJIYNdWCcqQwGSHhEGjFsEDgAXLRhCAqCgAR+XWw4EJwcBoawDAoulVBwFrLUND7FUIjC1thC5UxQbvaEeJMBTC8QCrrDISRjLo89TM70DldRSFQi1AcfaUhQekgEMuOFSNiMr7Svp8PHy8/T19vf4+fr7/P3+/0lkAAwCACH5BAkEAAoALEsACQA8ACUAAAf/gAqCg4MuBBeIFyiJjIwoRY2IKACNDg45hJmamjcEDgCgoaKjpKWlDgSbqoQ0lqUnpgApsRctpqipq5qtphe0sQCwwA4suoQ8BL+mwqWTwKASxoM4n6Wzvbamzs8A0cYu1a+x26W+3AC5uhLhpMyktbHuz96q6+zvsdflBucADjurkj0z1+uWMFexHNDLJOGcg1mWCEj0dGiiRYkOaIC6RwqVph0cTyXTQLKkyZMlZWAMOSrdoIYsQxG4Ic0YL24LFcQMlbOmKiACgblUgNOnTxZBY2V65mCIUZ/2Yi4F1vPpqnXApoq0avSmKa0daXA12jAUiQdo06oYdErhWKMdraqtCNAgAF27Ag4IuuX0LVRQERoIGEw4gIW9par6DQgiAOHHAxpAwFGKQLHFPjkUGPD4cYMEIRVjVrWgc+cAK0iJHr0pAQLThBmAGOWAJmujpWEPKBBi1OrbmipsgB3gQ8vLwH1SML0hAj9Rv5NnyvCa8AAPJF\n                oakf6UQoMN4Bs8oC2W+9MXENJDIDXUvDRPt2y794mQ/fyn9UURIHLfaH6Z/ZEVkgwB1gROSIEAACH5BAUEAAgALEcACQBFACwAAAf/gAiCg4SDLgQXiRcoio2NKEWOiSgAjg4OOYWam5yENwQOAKKjpKWmp6cOBJ2snTSXpyeoACmzFy2oqqutvAivqBe2swCyww4svaw8BMKoxaeUw6ISyZ04oae1wLio0dIA1NWFLtixs96nwd8Au+KDEuWmz6a3s/PS4e7w8fSz2ukG1gFwsMMdAmbS1AHLVQzWLAf5kklY56DWJQIYQSHKyBGjAxqi+JlSVW2HyFTMNKhcybLlShkeT5Zqx2uizFEEbhgs9OtbRFY3R/3cKQgIwmEEZPTySZQTi6OzcCw1NqQpp303Hejghc9qJ3jGaHJ6KNYroZ5kWz2kYfbrt7KF6lJBbNupQ9BprHJVpXv1mwMenVAN5UsIKiqpY00RQEaYEyhpDgKbGtx40ONhkklRriwILarMIXVydos5sdDRrIYEBb0YNauJo0okwJBgdgIFmzS7boVwhYcGwBsMCNAAgiacRna/FmWigYDn0BskOD6QrXJWBEoEgM5dQIMVcdldb8WhwIDu0AeYiOtA9HhOH7ajhx6AxMz3rCzIny+AAQhSBBCBXycQDHDefAMUcACAA36lH38elFCIUg1qQs4B5qE3QAQcVFgNCAwYKOIADODmYTUPoGfBie6E4KKLB7Ao44w0NiVFjQYFAgAh+QQJBAAMACx5ACQAEwAVAAAHlYAMgoOCAIaHhoSKDIiNAIuDjoiQjJKHDosEDpaGmIoOm5ybn6Gcj4RRF6oonIocHAYHBgAXjZ6DDwICgxYutYcEijMbAgODJCeThAkNus66Br+LC8/OAR/JixED1c8hixUI3dYfixTjzh4likfb6AMFHIskHugB65DM3Q0mlAwqDRoMGDhggwcF/hiAiGCCYUN8iwIBACH5BAUEAAwALHUAJAAXAB4AAAfPgAyCgwwSAIeIiYcERoSOBIqRABKOhIaSiQSVhAQOmIcOjZsMnZ8Op6MMp5+IqausA\n                K6vkqijErORDj2jLriRmra+ipSbOp6emLqjkKwOxJU0yKY6y7CT1bDAlR3SydqOLyriKpjfhAkIG+oNGAaRVKMLAwL0Ah4WiuaDERv19AMbQiBykGNTBQT+6gV4kGoQhYT1BgRY0bBCAIgKGaZagFHhh4YJGnQcUOBAQwgb5kEMAKKhIAsXEzYw4VLQgQIeAujcSbEmAwgPggpV4DMQACH5BAUEAAcALG8ANQATABYAAAaVwINwSJQAjgCikrhzIJFLpfF5jA5pTmo1yiNooVFC9ptU9sbkpcSBpjqWp1NK/n0PR6B8HnLREiceHgEBQxApT0QgHgKMAkMJLn1bBwYFA42YAQonkwcfAZiYAxFLIQKXoY0BJUoKi6mNDQlKIQOosAEfS5+wAg0RHEsGEQ24IFYkr5gNGFZCCQyD0gsvzpQgJdnZzkEAIfkEBQQABgAsZQA+ABgADQAAB4OABoKDhIQEAIiJhYuDRxKHiZGEHBQLlpcwDwAXkZKDHw0CoqMCDSsnnZ4hAwOkowMmLZypiQ8BrqOCIKi0AKutuAKCsbOpB6zBAqwmPsWpFrfJASApvYcHBcCuDRHNtA6DJdGuASq8neCEJgGs7Qya6AAEBIUQCRERJvgPB6kOEoQCAQAh+QQFBAAGACxcAD8AFwANAAAHhIAGgoOEhYVAhB8Li4wLFhKQEgSREg6DIQMIApubCAgqKQCio6OCDw2cqQ0JPhekpAYrqKmpBiShr6IOCbO0AoM1rrkOBQO+m4MHwq8ODwHHyAktuaMh0MgqKNQAgh/PvgEPF8uvgxG9m8YhJ9uEKxsB8QENASUG29yEQisqQf1ChgIGAgAh+QQFBAAEACxSAD8AGAANAAAHiIAAggAQhRAvIQSKi4yNBAcRGwKTAwglEpiZmo0PDAIDoJ8NISeDpoKLKw2TrJQPNBeng4sYA62tDQqlsoIpIAG3uCY1sbw1CavBAosqKbyCD8DKywQQzrzVttMCD8+oBBbSt7Yh17KLBgXKAR/m54sjMAEN9A0BEQbF74wiFf7/QpQIHEhwYCAAIfkEBQQABQAsSgAyABYAG\n                gAAB4iABY\n                KDL4OGh4iCGBshiY6GCw0Jj48UAwIBK5SIFQgCAg0mm4cUn58BIKOCCZemAQ+qBQumpyWqGK2fobGztAEKqpa0krEUHgHIHgMQsQUlJSDPzM2bANYABA6x19wOBKrc4QDV4tzk5deP6OHq6+aJ7u+I8daU9JQODuujEgToqlWsKBlIkGAgACH5BAUEAAEALEgAMQAMAA4AAAdDgAGCg4Iqg1uEgxQciY0rjYkQkIMPAACTASEpl5Afm5aQBheWnIIPFiGjpIMEABeqoIMOr6SxARK1q4M4ubaCrb0AgQAh+QQFBAABACxLAC0ABwANAAAHKIBQAYOEhYaHiIU5hxIShQQODo8AAIQSlIRLDpiDOJuEMZSVgwScAYEAOw==">\n            </div>\n            \n        ';r.$section.append($(c));var l=x(1e17),u={pageHtml:e.html(),sceneUrl:g.VIEW_HOST+"s/xbWLewKN?requestId="+l,uuid:l,viewPort:JSON.stringify({deviceScaleFactor:2,width:r.$section.width(),height:r.$section.height()})};v(u).then(function(e){if($("#loading_html").remove(),t.forEach(function(e){
return e()}),console.log("res111111111111",e),200===e.code&&e.map&&e.map.imageBase64){var s=$(new Image);s.attr("src","data:image/png;base64,"+e.map.imageBase64);var c=void 0;n&&(c=i/n,r&&r.orientation.isLandScape()?s.css({transform:"scale("+.9*c+")"}):s.css({transform:"scale("+.4*c+")"})),a({$img:s,scrol:c,touchPos:o,initPageHeight:i})}})["catch"](function(e){console.log(e),$("#loading_html").remove()})})}function c(e,t){var n=e.$video;e.isPlayBeforeScreenShot=!n[0].paused,n[0].pause();var i=n[0].played.length;if(i){var o=n[0].videoWidth,r=n[0].videoHeight;o>640&&(r=parseInt(640/o*r),o=640);var a=l(n[0],o,r),s=document.createElement("img");$(s).css({width:"100%",height:"100%","object-fit":"contain"});var c=t.find("video"),u=c[0].parentNode;u.removeChild(c[0]),a&&(s.src=a,u.appendChild(s))}}function l(e,t,n){e.setAttribute("crossOrigin","anonymous");var i=$('<canvas width="'+t+'" height="'+n+'" style="width:'+t+"px;height:"+n+'px;"></canvas>')[0],o=i.getContext("2d");return o.drawImage(e,0,0,t,n),i.toDataURL("image/png")}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=function k(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:k(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)};n(350);var d=n(101),h=n(351),f=n(71).canvasToImage,g=n(24),m=n(352),v=m.$saveDom,y=m.getMyFontFamily,b=n(227),x=b.random,w=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.compJson=e,$.extend(!0,r.$ability,{style:{},link:!1}),r}return r(t,e),u(t,[{key:"create$context",value:function(){var e=this,t="0",n=e.compJson,i=n.id,o=n.type,r=n.properties,a=n.css,s=""+g.FILE+r.styleImgSrc,c=r.styleImgSrc?h.$img({id:i,type:o,src:s,css:{width:a.width,height:a.height},padding:t}):h.$btn({id:i,type:o,properties:r,css:{width:a.width,height:a.height,lineHeight:a.lineHeight,backgroundColor:a.backgroundColor}});return this.renderDetail(c),c}},{key:"bindAfterRenderEvent",value:function(e,t){var n=this;e.click(function(){console.log("this",n),a(n.eqxPage).then(function(t){var i=t.$img,o=t.scrol,r=t.touchPos,a=t.initPageHeight;h.modal(i,e,o,r,a,n.eqxPage,!0)})})}},{key:"adjustHeight",value:function(){this.$li.css({height:""}),this.$context.css({height:""});var e=this.$boxDiv.height();this.update$li({height:e}),this.$context.css({height:e})}},{key:"updateBtnTitle",value:function(e){1!==this.compJson.properties.style&&this.$context.find(".long-touch-save-label").text(e)}},{key:"deleteImage",value:function(){this.compJson.properties.styleImgSrc||(this.$context[0].innerText="")}},{key:"switchStyle",value:function(e,t){var n=this,i="0",o=n.compJson,r=o.id,a=o.type,s=o.properties,c=o.css,l=""+g.FILE+s.styleImgSrc,u=void 0;u=1===s.style?h.$img({id:r,type:a,src:l,css:{width:c.width,height:c.height},padding:i}):h.$btn({id:r,type:a,properties:s,css:{width:c.width,height:c.height,lineHeight:c.lineHeight,backgroundColor:c.backgroundColor}}),u&&(this.$context&&this.$context.replaceWith(u),this.$context=u),this.update$boxDiv({boxShadow:t.boxShadow}),this.updateSize(null,t)}},{key:"updateSize",value:function(e,n){p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSize",this).call(this,e,n),this.renderDetail()}},{key:"renderDetail",value:function(e){var t=e||this.$context,n=this.compJson,i=n.css,o=n.properties.style,r=i.height,a=parseInt(r)/2;if(0===o)t.css({lineHeight:r+"px",fontSize:r/30*16+"px"});else if(2===o)t.css({lineHeight:r-10+"px",fontSize:r/42*16+"px"}).find(".long-touch-save-style2-inner").css({borderColor:i.borderColor,borderWidth:i.borderWidth,borderRadius:a}).find(".long-touch-save-icon").css({width:20/42*r,height:20/42*r});else if(3===o)t.css({lineHeight:r-6+"px",fontSize:r/36*16+"px"});else if(4===o){var s=r-8+"px";t.find(".long-touch-save-icon").css({width:s,height:s,lineHeight:s}),t.css({lineHeight:r-8+"px",fontSize:r/44*16+"px"})}else if(5===o)t.css({lineHeight:r+"px",fontSize:r/36*16+"px"});else if(6===o){this.compJson.css.borderRadius=a;var c=Math.round(23/68*r)+"px",l=Math.round(23/68*r)+"px";t.css({fontSize:r/68*20+"px"}).find(".long-touch-save-style6-content").css({height:r/68*46+"px"}).find(".long-touch-icon").css({height:c,lineHeight:c}).next().css({height:l,lineHeight:l,fontSize:12/68*r+"px"})}[2,3,4,6].includes(o)?this.update$boxDiv({borderRadius:a}):5===o&&this.update$boxDiv({borderRadius:i.borderRadius})}}]),t}(d);e.exports=w},function(e,t){},function(e,t){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.properties.style,n=void 0;switch(t){case 0:n=i(e);break;case 2:n=o(e);break;case 3:n=r(e);break;case 4:n=a(e);break;case 5:n=s(e);break;case 6:n=c(e)}return n}function i(e){var t=e.id,n=e.type,i=e.css.lineHeight,o=e.properties.title;return $('<div id="'+t+'" \n                ctype="'+n+'" \n                style="line-height: '+i+';"\n                class="elementSave long-touch-save-style0 eqf-cutpic"\n               >\n                <span class="long-touch-save-label">'+o+"</span>\n                </div>")}function o(e){var t=e.id,n=e.type,i=e.css.lineHeight,o=e.properties.title;return $('<div id="'+t+'" \n                ctype="'+n+'" \n                style="line-height: '+i+';"\n                class="elementSave long-touch-save-style2"\n               >\n                    <div class="long-touch-save-style2-inner">\n                        <span class="long-touch-save-icon eqf-cutpic"></span>\n                        <span class="long-touch-save-label">'+o+"</span>\n                    </div>\n                </div>\n             ")}function r(e){var t=e.id,n=e.type,i=e.css.lineHeight,o=e.properties.title;return $('<div id="'+t+'" \n                ctype="'+n+'" \n                style="line-height: '+i+';"\n                class="elementSave long-touch-save-style3 eqf-cutpic"\n               >\n                    <span class="long-touch-save-label">'+o+"</span>\n                </div>")}function a(e){var t=e.id,n=e.type,i=e.css.backgroundColor,o=e.properties.title;return $('<div id="'+t+'" \n                ctype="'+n+'" \n                class="elementSave long-touch-save-style4"\n               >\n                    <span class="long-touch-save-icon eqf-cutpic" style="color: '+i+'"></span>\n                    <span class="long-touch-save-label">'+o+"</span>\n                </div>")}function s(e){var t=e.id,n=e.type,i=e.css.lineHeight,o=e.properties.title;return $('<div id="'+t+'" \n                ctype="'+n+'" \n                style="line-height: '+i+';"\n                class="elementSave long-touch-save-style5 eqf-cutpic"\n               >\n                <span class="long-touch-save-label">'+o+"</span>\n                </div>")}function c(e){var t=e.id,n=e.type,i=e.css.lineHeight,o=e.properties.title;return $('<div id="'+t+'" \n                ctype="'+n+'" \n                style="line-height: '+i+';"\n                class="elementSave long-touch-save-style6"\n               >\n                    <div class="long-touch-save-style6-content">\n                        <div class="long-touch-icon eqf-cutpic"></div>\n                        <div class="long-touch-save-label">'+o+"</div>\n                    </di>\n                </div>")}function l(e){var t=e.id,n=e.type,i=e.src,o=e.padding,r='<button style="display: block;width: 100%;height: 100%; padding: '+o+';" data-event="11201"\n                        id="'+t+'" ctype="'+n+'" class="element comp_button editable-text" >\n                    <img style="width: 100%; height: 100%;" src="'+i+'" />\n                </button>';return $(r)}function u(e){var t=$('<div class="feedback-content"></div>'),n=$('<div class="feedback-close-btn eqf-no-l"></div>'),i=$('<div class="box"></div>');return i.append(e),i.append(n),t.append(i),$('<div class="feedback-box">').append(t)}function p(e,t,n,i,o,r){var a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=u(e);r.$section.append(s);var c=s.find(".feedback-close-btn"),l=r.currentLayer.eqxItems.filter(function(e){return"o"==e.type});s.css({top:"0px"}),n&&n<1&&i>0&&s.find(".box").css({height:o,top:i+"px"}),r&&r.orientation.isLandScape()&&(s.find(".box").css({width:320,height:o}),c.css({top:"unset",bottom:"20px"}),n&&n<1&&i>0&&(s.css({top:i+"px"}),s.find(".box").css({height:o,top:0}))),s.click(function(e){"IMG"!==e.target.tagName&&(a&&l.length&&l.forEach(function(e){e.isPlayBeforeScreenShot&&e.$video[0].play()}),a&&$(r.section).siblings(".bgm-btn-wraper").length&&r.bgm&&r.bgm.show(),s.animate({opacity:0},{duration:300,complete:function(e){return s.remove()}}))}),c.on("click",function(){a&&l.length&&l.forEach(function(e){e.isPlayBeforeScreenShot&&e.$video[0].play()}),a&&$(r.section).siblings(".bgm-btn-wraper").length&&r.bgm&&r.bgm.show(),s.animate({opacity:0},{duration:300,complete:function(e){return s.remove()}})})}e.exports={$img:l,$btn:n,modal:p}},function(e,t,n){"use strict";function i(e){var t="https://lpservice.eqxiu.com/capture/screenshot/generate";return a({type:"POST",url:t,data:e})}function o(e){return a({type:"GET",url:"https://lpservice.eqxiu.com/capture/screenshot/get",data:{requestId:e}})}function r(e){var t=s.SERVER_0+"m/e/font/my",n={freshUserId:e};return a({withCredentials:!0,method:"GET",url:t,data:n})}var a=n(23).ajax,s=n(24);e.exports={$saveDom:i,$getDom:o,getMyFontFamily:r}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=e.fontFamily,n=e.mode,i=e.compId;"view"===n&&y({fontFamily:t,textContent:"0123456789,.",compId:i})}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function x(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:x(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)},l=n(354),u=n(355),p=n(36).parse;n(356);var d=n(101),h=n(357),f=n(359),g=n(360),m=g.dynamicNumberTypeObj,v=n(165),y=v.getFontFamilyStyle,b=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compFont:{self:!0,fontFamily:!0,fontSize:!0,fontColor:!0,bgColor:!0}},flexLine:"n,s,w,e,r"}),r}return r(t,e),s(t,[{key:"create$context",value:function(){var e=this.compJson;this.compJson.properties.settingParams||(this.compJson.properties.settingParams={animDuration:4,dynamicNumberType:"numberChange",endNum:100,endOrder:"left",isEndRandom:!1,isShowThousandSeparator:!1,startNum:0});var t=e.id,n=e.type,i=e.properties,o=e.css.fontFamily;if(o&&a({mode:this.eqxScene.config.mode,fontFamily:o,compId:t}),i.settingParams.dynamicNumberType===m.numberChange){var r=this.updateStartNum();return $(p(l,{id:t,type:n,content:r})).css({fontFamily:o})}if(i.settingParams.dynamicNumberType===m.numberScroll){var s=this.getAnimScrollHtml();return $(p(u,{id:t,type:n,htmlContent:s})).css({fontFamily:o})}}},{key:"update$context",value:function(){var e=this.compJson.properties.settingParams;if(e.dynamicNumberType===m.numberChange){var t=this.updateStartNum();this.$context.find(".anim-number-change-container").length?this.$context.find(".anim-number-change-container").text(t):this.$context.html('<div class="anim-number-change-container" style="width: 100%;height: 100%; display: flex; align-items: center; justify-content: center;">'+t+"</div>")}else if(e.dynamicNumberType===m.numberScroll){var n=this.getAnimScrollHtml();this.$context.find(".anim-number-scroll-container").length?this.$context.find(".anim-number-scroll-container").html(n):this.$context.html('<div class="anim-number-scroll-container">'+n+"</div>")}}},{key:"update$li",value:function(e){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update$li",this).call(this,e),this.$li.data("isNumberAnimPlayed")&&(this.clearTimer(),this.update$context(),this.$li.data("isNumberAnimPlayed",!1))}},{key:"update$boxDiv",value:function(e){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update$boxDiv",this).call(this,e),this.$li.data("isNumberAnimPlayed")&&(this.clearTimer(),this.update$context(),this.$li.data("isNumberAnimPlayed",!1))}},{key:"getAnimScrollHtml",value:function(){for(var e=this.updateStartNum(),t='<div class="anim-number-scroll-startNum">',n=0;n<e.length;n++)","!==e.charAt(n)&&"."!==e.charAt(n)?t+='<div class="anim-number-items-startNum">\n                                        <span>'+e.charAt(n)+"</span>\n                                    </div>":","===e.charAt(n)?t+='<div class="anim-number-dot-startNum">\n                                        <span>,</span>\n                                  </div>':"."===e.charAt(n)&&(t+='<div class="anim-number-dot-startNum">\n                                        <span>.</span>\n                                  </div>');return t+="</div>"}},{key:"updateStartNum",value:function(){var e=this.compJson.properties.settingParams,t=e.startNum.toString();if(e.isShowThousandSeparator)for(;/^(\d+)(\d{3})/.test(t);)t=t.replace(/(\d+)(\d{3})/,"$1,$2");return t}},{key:"clearTimer",value:function(){var e=this.$context.find(".anim-number-change-container"),t=this.$context.find(".anim-number-scroll-container");e.length&&e.data("timer")?(clearInterval(e.data("timer")[0]),e.data("timer",null)):t.length&&t.data("timer")&&(t.data("timer").forEach(function(e){clearTimeout(e)}),t.data("timer",null))}},{key:"playDynamicNumberAnim",value:function(){var e=this,t=this.compJson.properties.settingParams,n=t.dynamicNumberType,i=t.startNum,o=t.endNum,r=t.isShowThousandSeparator,a=t.animDuration,s=t.endOrder,c=t.isEndRandom;n===m.numberChange?h(i,o,a,r,this.$context.find(".anim-number-change-container")).then(function(){"edit"===e.eqxScene.config.mode&&e.update$context()}):n===m.numberScroll&&f(i,o,a,s,r,c,this.$context.find(".anim-number-scroll-container")).then(function(){"edit"===e.eqxScene.config.mode&&e.update$context()})}},{key:"eleShow",value:function(){var e=this;if(c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleShow",this).call(this),"view"===this.eqxScene.config.mode){var n=this.compJson.properties.anim;if(n&&n.length>0){var i=1;this.$li.on("animationend webkitAnimationEnd",function(){i===n.length?(e.playDynamicNumberAnim(),i=1):i++})}else this.playDynamicNumberAnim()}}},{key:"eleHide",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleHide",this).call(this),this.clearTimer(),this.update$context(),this.$li.off("animationend webkitAnimationEnd")}}]),t}(d);e.exports=b},function(e,t){e.exports='<div id="#{id}" ctype="#{type}" class="element anim-number" style="width: 100%;height: 100%"><div class="anim-number-change-container" style="width: 100%;height: 100%; display: flex; align-items: center; justify-content: center">#{content}</div></div>'},function(e,t){e.exports='<div id="#{id}" ctype="#{type}" class="element anim-number" style="width: 100%;height: 100%"><div class="anim-number-scroll-container">#{htmlContent}</div></div>'},function(e,t){},function(e,t,n){"use strict";function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments[4];return new Promise(function(a){if(e===t)return void a();var s=[],c=(e.toString().split(".")[1]||"").length,l=(t.toString().split(".")[1]||"").length,u=Math.max(c,l),p=Math.abs(e.toString().split(".")[0].length-t.toString().split(".")[0].length),d=Math.abs(e-t),h=40,f=1e3*n/h,g=void 0,m=[],v=0,y=Math.min(e,t);if(d>1e3&&p>1){for(var b=1;b<f;b++)u?(g=parseFloat(d*Math.pow(b/f,10)+y),g=(g>=y+b?g:g-parseInt(g)+y+b).toFixed(u)):(g=parseInt(d*Math.pow(b/f,10))+y,g=g>=y+b?g:y+b),i&&(g=o(g)),m.push(g);e>t&&m.reverse(),i&&(t=o(t)),m.push(t)}else{for(var x=1;x<f;x++)g=e<t?u?(parseFloat(d/f*x)+e).toFixed(u):parseInt(Math.round(d/f*x))+e:u?(e-parseFloat(d/f*x)).toFixed(u):e-parseInt(Math.round(d/f*x)),i&&(g=o(g)),m.push(g);i&&(t=o(t)),m.push(t)}var w=setInterval(function(){v<m.length?(r.text(m[v]),v++):(clearInterval(w),a())},h);s.push(w),r.data("timer",s)})}var o=n(358).showThousandSeparator;e.exports=i},function(e,t){"use strict";function n(e){for(;/^(\d+)(\d{3})/.test(e.toString());)e=e.toString().replace(/(\d+)(\d{3})/,"$1,$2");return e}e.exports={showThousandSeparator:n}},function(e,t,n){"use strict";function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"left",r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments[6];return new Promise(function(c){if(e===t)return void c();var l=[],u=(e.toString().split(".")[1]||"").length,p=(t.toString().split(".")[1]||"").length,d=Math.max(u,p);a&&(t=e>t?Math.random()*(e-t)+t:Math.random()*(t-e)+e),d?(e=e.toFixed(d),t=t.toFixed(d)):(e=e.toString(),t=a?t.toFixed(0):t.toString());var h=e.length>t.length?e.length:t.length,f=void 0;if("same"===i){f=[],r?f.push(o(e.padStart(h,"0")),o(t.padStart(h,"0"))):f.push(e.padStart(h,"0"),t.padStart(h,"0"));for(var g=void 0,m=15,v=Math.abs(parseFloat(e)-parseFloat(t)),y=1;y<=m;y++)g=parseFloat(e)<parseFloat(t)?d?(v/(m+1)*y+parseFloat(e)).toFixed(d):parseInt(Math.round(v/(m+1)*y))+parseFloat(e):d?(parseFloat(e)-v/(m+1)*y).toFixed(d):parseFloat(e)-parseInt(Math.round(v/(m+1)*y)),g=g.toString().padStart(h,"0"),r&&(g=o(g)),f.indexOf(g)===-1&&f.splice(f.length-1,0,g)}else"left"!==i&&"right"!==i||(e=e.padStart(h,"0"),t=t.padStart(h,"0"),r&&(e=o(e),t=o(t)));var b='<div class="anim-number-scroll">';if("same"===i)for(var x=0;x<f[0].length;x++)if(","!==f[0].charAt(x)&&"."!==f[0].charAt(x)){b+='<div class="anim-number-items">';for(var w=0;w<f.length;w++)b+='<span class="anim-number-item">'+f[w].charAt(x)+"</span>";b+="</div>"}else","===f[0].charAt(x)?b+='<div class="anim-number-dot">\n                                            <span class="anim-number-thousandSeparator">,</span>\n                                    </div>':"."===f[0].charAt(x)&&(b+='<div class="anim-number-dot">\n                                            <span class="anim-number-point">.</span>\n                                    </div>');else if("left"===i||"right"===i)for(var k=0;k<e.length;k++)if(","!==e.charAt(k)&&"."!==e.charAt(k)){b+='<div class="anim-number-items" data-number-origin="'+e.charAt(k)+'" data-number-target="'+t.charAt(k)+'">\n                                            <span class="anim-number-item">'+e.charAt(k)+"</span>";for(var S=1;S<20;S++)b+='<span class="anim-number-item">'+(parseInt(e.charAt(k))+S>=10?(parseInt(e.charAt(k))+S)%10:parseInt(e.charAt(k))+S)+"</span>";b+="</div>"}else","===e.charAt(k)?b+='<div class="anim-number-dot">\n                                            <span class="anim-number-thousandSeparator">,</span>\n                                    </div>':"."===e.charAt(k)&&(b+='<div class="anim-number-dot">\n                                            <span class="anim-number-point">.</span>\n                                    </div>');b+="</div>";var I=$(b),T=parseInt(s.css("font-size"))+10+"px";I.css({"text-align":"center",height:T,overflow:"hidden",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",display:"flex","flex-wrap":"nowrap"}),I.find(".anim-number-items").css({"padding-left":"3px","padding-right":"3px",display:"flex","flex-direction":"column","margin-top":"0px"}),I.find(".anim-number-item, .anim-number-thousandSeparator, .anim-number-point").css({"line-height":T}),s.html(I);var E=[];if("same"===i)I.find(".anim-number-items").css("transition","margin-top "+n+"s ease-in-out"),I.find(".anim-number-items").each(function(e){var t=this,n=setTimeout(function(){$(t).css("margin-top","-"+(f.length-1)*parseInt(T)+"px")},0);l.push(n),E.push(new Promise(function(e){$(t).on("transitionend webkitTransitionEnd",function(){e()})}))});else if("left"===i||"right"===i){var P=5,_=parseInt(1e3*n/(I.find(".anim-number-items").length-1+P));_=_>100?100:_,I.find(".anim-number-items").css("transition","margin-top "+(1e3*n-(I.find(".anim-number-items").length-1)*_)+"ms ease-in-out"),I.find(".anim-number-items").each(function(e){var t=this,n=parseInt($(this).attr("data-number-origin")),o=parseInt($(this).attr("data-number-target")),r=o+10-n<10?o+20-n:o+10-n,a=void 0;"left"===i?a=e*_:"right"===i&&(a=(s.find(".anim-number-items").length-1-e)*_);var c=setTimeout(function(){$(t).css("margin-top","-"+r*parseInt(T)+"px")},a);l.push(c),E.push(new Promise(function(e){$(t).on("transitionend webkitTransitionEnd",function(){e()})}))})}s.data("timer",l),Promise.all(E).then(function(){c()})})}var o=n(358).showThousandSeparator;e.exports=i},function(e,t){"use strict";var n={numberChange:"numberChange",numberScroll:"numberScroll"},i={left:"left",right:"right",same:"same"},o={dynamicNumberTypeObj:n,endOrderObj:i};e.exports=o},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function v(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:v(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)},l=n(36).parse,u=n(362),p=n(101),d=n(363),h=n(366),f=h.getCssData,g=h.filterTempEle,m=function(e){function t(e,n){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,i.$ability,{anim:!1,trigger:{self:!1},sound:!1}),i.items=[],i.selectedItem=null,i}return a(t,e),s(t,[{key:"create$context",value:function(){var e=this,t=this.compJson,n=t.id,i=t.type,o=t.properties.propData,r=$(l(u,{id:n,type:i}));return o.items.forEach(function(t,n){t.id||(t.id=e.id+"-"+(n+1)),e.items.push(new d(t,e))}),this.items.forEach(function(e){r.find(".img-group-items-box").append(e.render())}),this.addEvent(),r}},{key:"addEvent",value:function(){var e=this;"edit"===this.eqxScene.config.mode&&this.$li.click(function(t){e.selectedItem=e.items.find(function(e){return t.target.id==e.compJson.id})})}},{key:"addItemSelectCss",value:function(){var e=this;this.items.forEach(function(t){e.selectedItem==t?t.$li.addClass("item-select-box"):t.$li.removeClass("item-select-box")})}},{key:"removeItemSelectCss",value:function(){this.items.forEach(function(e){e.$li.removeClass("item-select-box")})}},{key:"updateItems",value:function(){var e=this;this.$context.find(".img-group-items-box").empty(),this.items.splice(0),this.compJson.properties.propData.items.forEach(function(t,n){t.id||(t.id=e.id+"-"+(n+1)),e.items.push(new d(t,e))}),this.items.forEach(function(t,n){e.$context.find(".img-group-items-box").append(t.render()),(e.oldUploadedImgItems[n]||e.compJson.properties.propData.autoFill)&&t.uploadImgFromItem(e.oldUploadedImgItems[n]||e.getRandomItem(e.oldUploadedImgItems)),t.startAnimation()}),this.selectedItem=null}},{key:"changeTemp",value:function(e){var t;this.compJson.tplPC=e.tempPrice?1:0;var n=this.compJson.properties.propData;n.tempId=e.id;var o=f(e),r=o.width,a=o.height,s=o.absolutePos;this.oldUploadedImgItems=this.items.sort(function(e,t){return e.compJson.css.zIndex-t.compJson.css.zIndex}).filter(function(e){return e.compJson.uploadImg});var c=g(e).sort(function(e,t){return e.css.zIndex-t.css.zIndex}).map(function(e,t){return e.type="3201",e.id=null,e.pageId=null,e.sceneId=null,e.name=e.name.replace("形状","拼图模块"),e.maskSvgSrc=e.properties.src,e.css.top=Math.round(e.css.top-s.top)/a*100+"%",e.css.left=Math.round(e.css.left-s.left)/r*100+"%",e.css.width=e.css.width/r*100+"%",e.css.height=e.css.height/a*100+"%",e.uploadImg=!1,e.properties.src="",delete e.properties.type,e});n.items.splice(0),(t=n.items).push.apply(t,i(c)),this.update$li({height:Math.round(this.$li.width()*a/r)+"px"}),this.updateItems()}},{key:"autoFill",value:function(){var e=this,t=this.items.filter(function(e){return e.compJson.uploadImg}),n=this.items.filter(function(e){return!e.compJson.uploadImg});t.length&&n.length&&n.forEach(function(n){n.uploadImgFromItem(e.getRandomItem(t))})}},{key:"getRandomItem",value:function(e){return e[Math.floor(Math.random()*e.length)]}},{key:"eleShow",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleShow",this).call(this),this.items.forEach(function(e){e.startAnimation()})}},{key:"eleHide",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleHide",this).call(this),this.items.forEach(function(e){e.stopAnimation()})}},{key:"updateImgPayCount",value:function(){var e=0;this.items.forEach(function(t){t.compJson.price&&e++}),this.compJson.imgPC=e}}]),t}(p);e.exports=m},function(e,t){e.exports='<div id="#{id}" ctype="#{type}" class="element img-group" style="width: 100%;height: 100%"><ul class="img-group-items-box" style="width: 100%;height: 100%; position: relative"></ul></div>'},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(36).parse,a=n(125),s=n(364),c=n(24);n(365);var l=function(){function e(t,n){i(this,e),this.compJson=t,this.parent=n}return o(e,[{key:"render",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.uploadImg,o=e.maskSvgSrc,a=e.css,l=e.properties,u=l.anim,p=l.src;return p=p.replace(/\/crop\//i,"/cut/"),this.anim=u||[],this.$li=$(r(s,{id:t,type:n})),this.$boxDiv=this.$li.find(".img-group-item-box"),this.$boxDivContent=this.$boxDiv.find(".img-group-item-box-content"),this.$boxDivContent.css({"-webkit-mask-box-image-source":"url("+c.FILE+o+")","-webkit-mask-repeat":"no-repeat","-webkit-mask-position":"center","mask-box-image-source":"url("+c.FILE+o+")","mask-repeat":"no-repeat","mask-position":"center"}),i?(this.$context=$('<img src="" alt="" style="width: 100%; height: 100%; vertical-align: top;">'),this.$context.attr({src:""+c.FILE+p}),this.$boxDivContent.append(this.$context)):this.$boxDivContent.css({backgroundColor:this.compJson.properties.items[0].fill}),this.$li.css({width:a.width,height:a.height,top:a.top,left:a.left,zIndex:a.zIndex,opacity:a.opacity}),this.$boxDiv.css({borderColor:a.borderColor,borderWidth:a.borderWidth+"px",borderStyle:"solid"}),this.addAnimationClass(),this.$li}},{key:"update$liCss",value:function(e){this.$li.css(e)}},{key:"update$boxDivCss",value:function(e){this.$boxDiv.css(e)}},{key:"uploadImg",value:function(e,t){var n=this.compJson.properties;e.src=e.src.replace(/\/crop\//i,"/cut/"),Object.assign(n,e),this.compJson.price=t,this.parent.updateImgPayCount(),this.compJson.uploadImg?this.$context.attr({src:""+c.FILE+n.src}):(this.$context=$('<img src="" alt="" style="width: 100%; height: 100%; vertical-align: top;">'),this.$context.attr({src:""+c.FILE+n.src}),this.$boxDivContent.append(this.$context),this.$boxDivContent.css({backgroundColor:""}),this.compJson.uploadImg=!0)}},{key:"uploadImgFromItem",value:function(e){var t=e.compJson.properties,n=t.src,i=t.originSrc,o=void 0,r=void 0,a=void 0,s=void 0;if(!/\?imageMogr2.+\/crop\/!.+?$/.test(n))return void this.uploadImg({src:n,originSrc:i},e.compJson.price||0);var c=n.match(/\?imageMogr2.+\/crop\/!(.+?)$/)[1];a=parseInt(c.split(/[xa]/)[0]),s=parseInt(c.split(/[xa]/)[1]),o=parseInt(c.split(/[xa]/)[2]),r=parseInt(c.split(/[xa]/)[3]);var l=this.$li.width()/this.$li.height(),u=a/s;if(l==u)return void this.uploadImg({src:n,originSrc:i},e.compJson.price||0);var p=void 0;if(l<u){var d=Math.round(s*l);o+=Math.round((a-d)/2),p="/crop/!"+d+"x"+s+"a"+o+"a"+r}else if(l>u){var h=Math.round(a/l);r+=Math.round((s-h)/2),p="/crop/!"+a+"x"+h+"a"+o+"a"+r}n=n.replace(/\/crop\/.+?$/,p),this.uploadImg({src:n,originSrc:i},e.compJson.price||0)}},{key:"addAnimationClass",value:function(){this.eqxCompAnim=new a(this,{}),this.eqxCompAnim.addAnimClassify()}},{key:"stopAnimation",value:function(){this.eqxCompAnim.stopAnimation()}},{key:"startAnimation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.index,n=e.maxCount;if(e.reset)var i=this,o=function(){i.stopAnimation()};this.eqxCompAnim.startAnimation({animIndex:t,maxCount:n,callback:o})}}]),e}();e.exports=l},function(e,t){e.exports='<li id="#{id}" ctype="#{type}" class="img-group-item" style="position: absolute; pointer-events: auto" title="双击更换图片"><div class="img-group-item-box" style="width: 100%; height: 100%; pointer-events: none"><div class="img-group-item-box-content" style="width: 100%; height: 100%"></div></div></li>'},function(e,t){},function(e,t,n){"use strict";function i(e){var t=o(e),n=e.groups[0],i=new r(n,{eqxPage:{eqxScene:{}}});t.forEach(function(e){i.addEqxItem(new a(e,{eqxPage:{eqxScene:{}}}))});var s=i.getAbsolutePos();return{absolutePos:s,width:Math.round(s.width),height:Math.round(s.height),left:(320-Math.round(s.width))/2}}function o(e){return e.elements.filter(function(t){return e.groups[0].compIds.includes(t.id)})}var r=n(367),a=n(212);e.exports={getCssData:i,filterTempEle:o}},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),
Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function g(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:g(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)},l=n(109),u=n(112),p=n(113),d=n(110),h=n(368),f=function(e){function t(e,n){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.eqxLayer=n,i.eqxPage=i.eqxLayer.eqxPage,i.eqxScene=i.eqxPage.eqxScene,i.id=e.id,i.itemIds=e.compIds||[],i.css=e.css||{},i.eqxItems=[],i.$group=null,i.displayed="1",i.locked=!1,i.tag=!1,i.visited=!1,i.json=e,i.$ability={flexLine:"n,ne,e,se,s,sw,w,nw,r"},i}return a(t,e),s(t,[{key:"isFunTemplate",value:function(){if(1===this.json.type)return!0}},{key:"isEleTemplate",value:function(){if(1===this.json.type&&this.json.eleType)return!0}},{key:"destroy",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.eqxLayer=null,this.eqxPage=null,this.eqxScene=null,this.$group&&(this.$group.remove(),this.$group=null,this.$groupBox=null,this.$ul=null)}},{key:"removeEqxItem",value:function(e){var t=this.eqxItems.findIndex(function(t){return t===e});t>-1&&this.eqxItems.splice(t,1),e.destroy()}},{key:"isPropCanEdit",value:function(e){var t=this.FtEditableProps;return[t.addGroup.addGroup,t.deleteGroup.deleteGroup,t.moveGroup.moveGroup].includes(e)}},{key:"getFtValue",value:function(){return 10}},{key:"updateTop",value:function(e){this.getAllSubEqxComps().forEach(function(t){t.updateCss({top:t.css.top+e})}),this.autoSize()}},{key:"getFtEditableProps",value:function(){var e=this.FtEditableProps;return c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtEditableProps",this).call(this).concat([e.addGroup.addGroup,e.deleteGroup.deleteGroup,e.moveGroup.moveGroup])}},{key:"hasGroupItem",value:function(){for(var e=0;e<this.eqxItems.length;e++)if(this.eqxItems[e].isGroupItem())return this.eqxItems[e];return null}},{key:"getAllSubEqxComps",value:function(){for(var e=[],t=0;t<this.eqxItems.length;t++){var n=this.eqxItems[t];n.isGroupItem()?e.push.apply(e,i(n.getAllSubEqxComps())):e.push(n)}return e}},{key:"getAllSubEqxItems",value:function(){function e(t,n){n=n||[],t.eqxItems.forEach(function(t){t.isGroupItem()?(n.push(t),e(t,n)):n.push(t)})}var t=[];return e(this,t),t}},{key:"hasSubItemsLocked",value:function(){for(var e=this.getAllSubEqxItems(),t=0;t<e.length;t++)if(e[t].isEditLocked)return!0;return!1}},{key:"_initGroupIndex",value:function(){return Math.max.apply(Math,i(this.eqxItems.map(function(e){return e.zIndex})))}},{key:"canMove",value:function(){return!this.isEditLocked&&!this.hasSubItemsLocked()}},{key:"onMoveBefore",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onMoveBefore",this).call(this),this.eqxItems.forEach(function(e){return e.onMoveBefore()})}},{key:"onMoveEnd",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onMoveEnd",this).call(this),this.eqxItems.forEach(function(e){return e.onMoveEnd()})}},{key:"instantMove",value:function(e,t){!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.canMove()&&(this.getAllSubEqxComps().forEach(function(n){n.instantMove(e,t,!1)}),this.autoSize())}},{key:"getTransform",value:function(){return this.css.transform||"rotateZ(0)"}},{key:"onResizeStart",value:function(){return this.eqxItems.forEach(function(e){return e.onResizeStart()}),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onResizeStart",this).call(this)}},{key:"onResize",value:function(e,t,n,i,o,r,a,s,c){function l(e,t,n,i,o,r,a,s,c,l){for(var h=0;h<e.length;h++){var m=e[h];if(!m.isEditLocked){var v=m.oldAbsolutePosition,y=v.left,b=v.top,x=v.width,w=v.height,k=v.transform,S=d.parseTransform(k).rotate,I=new u(y,b,x,w),T=p(I,l),$=g(t,n,i,T,o,(S-l+360)%360,r,a,s,c),E=f($,l);m.updateSize({},{top:E.top,left:E.left,width:E.width,height:E.height})}}return e}function p(e,t){if(!t)return e;var n=e.rotate(t).p1.transform2RotateCoord(t);return new u(n,e.width,e.height)}function f(e,t){if(!t)return e;e instanceof u||(e=new u(e));var n=e.p1.transform2RotateCoord(-t),i=e.p2.transform2RotateCoord(-t),o=new u(n,i,t).rotate(-t),r=o.p1,a=r.x,s=r.y,c=o.width,l=o.height;return{width:c,height:l,left:a,top:s}}function g(e,t,n,i,o,r,a,s,c,l){if(r)return v(e,i,r,o);var u=0,p=0,d=0,h=0,f=i.p1.x,g=i.p1.y,m=i.width,y=i.height,b=m,x=y;if("nw"===o){var w=a.distance2Point(i.p2),k=s.distance2Point(i.p1);u=-w*t/(w+b+k),p=-b*t/(w+b+k);var S=c.distance2Point(i.p2),I=l.distance2Point(i.p1);return d=-S*n/(S+x+I),h=-x*n/(S+x+I),{left:f-u-p,width:m+p,top:g-d-h,height:y+h}}if("ne"===o){var T=a.distance2Point(i.p1),$=s.distance2Point(i.p2);u=T*t/(T+b+$),p=b*t/(T+b+$);var E=c.distance2Point(i.p2),P=l.distance2Point(i.p1);return d=-E*n/(E+x+P),h=-x*n/(E+x+P),{left:f+u,width:m+p,top:g-d-h,height:y+h}}if("se"===o){var _=a.distance2Point(i.p1),C=s.distance2Point(i.p2);u=_*t/(_+b+C),p=b*t/(_+b+C);var A=c.distance2Point(i.p1),O=l.distance2Point(i.p2);return d=A*n/(A+x+O),h=x*n/(A+x+O),{left:f+u,width:m+p,top:g+d,height:y+h}}if("sw"===o){var q=a.distance2Point(i.p2),L=s.distance2Point(i.p1);u=-q*t/(q+b+L),p=-b*t/(q+b+L);var M=c.distance2Point(i.p1),R=l.distance2Point(i.p2);return d=M*n/(M+x+R),h=x*n/(M+x+R),{left:f-u-p,width:m+p,top:g+d,height:y+h}}}function m(e,t){var n=[e.nw,e.ne,e.se,e.sw],i=Number.MAX_SAFE_INTEGER,o=0;return n.forEach(function(e,n){var r=e.distance2Point(t);i>r&&(i=r,o=n)}),o}function v(e,t,n,i){var o=["nw","ne","se","sw"],r=y.oldAbsolutePosition,a=r.left,s=r.top,c=r.width,l=r.height,p=r.transform,f=d.parseTransform(p).rotate,g=new u(a,s,c,l).rotate(f),v=new u(g.p1.transform2RotateCoord(f),c,l),b=u.getBoundingRect(v,n),x=new u(b.p1.transform2RotateCoord(n),b.width,b.height),w=new u(t.rotate(n).p1.transform2RotateCoord(n),t.width,t.height),k=m(x,g[i].transform2RotateCoord(f+n)),S=o[k],I=x[S],T=o[(k+2)%4],$=x[T],E=e.weight(f+n),P=E.x,_=E.y;if("nw"===S)var C=new h($,x[o[(k+1)%4]]),A=new h(I,x[o[(k+3)%4]]),O=new h($,x[o[(k+3)%4]]),q=new h(I,x[o[(k+1)%4]]);else"ne"===S?(C=new h($,x[o[(k+3)%4]]),A=new h(I,x[o[(k+1)%4]]),O=new h($,x[o[(k+1)%4]]),q=new h(I,x[o[(k+3)%4]])):"se"===S?(C=new h($,x[o[(k+1)%4]]),A=new h(I,x[o[(k+3)%4]]),O=new h($,x[o[(k+3)%4]]),q=new h(I,x[o[(k+1)%4]])):"sw"===S&&(C=new h($,x[o[(k+3)%4]]),A=new h(I,x[o[(k+1)%4]]),O=new h($,x[o[(k+1)%4]]),q=new h(I,x[o[(k+3)%4]]));var L=0,M=0,R=0,j=0,F=null,B=w.width,D=w.height;if("nw"===S){var J=C.distance2Point(w.p2),N=A.distance2Point(w.p1);L=-J*P/(J+B+N),M=-B*P/(J+B+N);var z=O.distance2Point(w.p2),W=q.distance2Point(w.p1);R=-z*_/(z+D+W),j=-D*_/(z+D+W),F={left:w.p1.x-L-M,width:w.width+M,top:w.p1.y-R-j,height:w.height+j}}else if("ne"===S){var H=C.distance2Point(w.p1),Y=A.distance2Point(w.p2);L=H*P/(H+B+Y),M=B*P/(H+B+Y);var U=O.distance2Point(w.p2),X=q.distance2Point(w.p1);R=-U*_/(U+D+X),j=-D*_/(U+D+X),F={left:w.p1.x+L,width:w.width+M,top:w.p1.y-R-j,height:w.height+j}}else if("se"===S){var G=C.distance2Point(w.p1),Q=A.distance2Point(w.p2);L=G*P/(G+B+Q),M=B*P/(G+B+Q);var V=O.distance2Point(w.p1),K=q.distance2Point(w.p2);R=V*_/(V+D+K),j=D*_/(V+D+K),F={left:w.p1.x+L,width:w.width+M,top:w.p1.y+R,height:w.height+j}}else if("sw"===S){var Z=C.distance2Point(w.p2),ee=A.distance2Point(w.p1);L=-Z*P/(Z+B+ee),M=-B*P/(Z+B+ee);var te=O.distance2Point(w.p1),ne=q.distance2Point(w.p2);R=te*_/(te+D+ne),j=D*_/(te+D+ne),F={left:w.p1.x-L-M,width:w.width+M,top:w.p1.y+R,height:w.height+j}}return new u(new u(F).rotate(-n).p1.transform2RotateCoord(-n),F.width,F.height)}var y=this,b=y.getAllSubEqxComps();l(b,e,t,n,i,o,r,a,s,c),y.autoSize()}},{key:"onResizeEnd",value:function(){this.eqxItems.forEach(function(e){return e.onResizeEnd()}),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onResizeEnd",this).call(this)}},{key:"onRotateStart",value:function(){return this.eqxItems.forEach(function(e){return e.onRotateStart()}),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onRotateStart",this).call(this)}},{key:"onRotateEnd",value:function(){this.eqxItems.forEach(function(e){return e.onRotateEnd()}),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onRotateEnd",this).call(this)}},{key:"onRotate",value:function(e){function n(e,t){e.eqxItems.forEach(function(e){e.isGroupItem()&&(t.push(e),n(e,t))})}function i(e,t){e.eqxItems.forEach(function(e){e.isGroupItem()?i(e,t):t.push(e)})}function o(e,t){var n=d.parseTransform(e.oldTransform).rotate;e.updateCss({transform:"rotateZ("+(n+t)+"deg)"})}function r(e,t,n){if(!e.isEditLocked){var i=d.parseTransform(e.oldTransform).rotate,o=d.parseTransform(e.getTransform()).rotate,r=e.getAbsolutePos(),a=r.width,s=r.height,c=r.top,l=r.left,p=new u(l,c,a,s),h=p.center(),f=h.pointRotate2Point(n,i+t-o),g=f.x-h.x,m=f.y-h.y;p.move(g,m),e.updateCss({top:p.p1.y,left:p.p1.x,transform:"rotateZ("+(i+t)+"deg)"})}}var a=[],s=[],l=this.getAbsolutePos(),p=l.width,h=l.height,f=l.top,g=l.left,m=new u(g,f,p,h),v=m.center(),y=d.parseTransform(this.oldTransform).rotate;i(this,a),n(this,s),a.forEach(function(t){return r(t,(e-y+360)%360,v)}),s.forEach(function(t){return o(t,(e-y+360)%360)}),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onRotate",this).call(this,"rotateZ("+(e+360)%360+"deg)",{type:"rotate",source:this})}},{key:"updateTransform",value:function(e){this.css.transform=e,this.$item.css({transform:e})}},{key:"updateCss",value:function(e){var t=this;Object.keys(e).forEach(function(n){t.css[n]=e[n]})}},{key:"updateLeftTop",value:function(e,t){this.eqxItems.forEach(function(n){n.updateLeftTop(e,t)})}},{key:"isGroupItem",value:function(){return!0}},{key:"getName",value:function(){return this.name||"组合"}},{key:"toJson",value:function(){var e=this.css.transform,t={id:this.id,name:this.name,compIds:this.eqxItems.map(function(e){return e.id})};return e&&(t.css={transform:e}),this.isFunTemplate()&&(t.type=1),this.isEleTemplate()&&(t.eleType=this.json.eleType),t}},{key:"autoSizeTopDown",value:function(e){this._updateSize(),e&&"rotate"===e.type&&e.source===this&&!this.hasSubItemsLocked()||this.eqxItems.forEach(function(t){return t.autoSizeTopDown(e)}),this.fire("autoSizeTopDown.after")}},{key:"getAbsolutePos",value:function(){function e(e,t){var n=[];e.eqxItems.forEach(function(e){var t=e.getAbsolutePos(),i=t.top,o=t.left,r=t.width,a=t.height,s=t.transform,c=d.parseTransform(s).rotate,l=new u(o,i,r,a).rotate(c),p=l.nw,h=l.ne,f=l.sw,g=l.se;n.push.apply(n,[p,h,f,g])});for(var i=n[0].transform2RotateCoord(t),o=i,r=i,a=i,s=i,c=1;c<n.length;c++)i=n[c].transform2RotateCoord(t),i.x<s.x&&(s=i),i.x>r.x&&(r=i),i.y<o.y&&(o=i),i.y>a.y&&(a=i);var l=Number.MIN_SAFE_INTEGER,h=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER,g=Number.MAX_SAFE_INTEGER;[o,r,a,s].forEach(function(e){e.x>l&&(l=e.x),e.x<h&&(h=e.x),e.y>f&&(f=e.y),e.y<g&&(g=e.y)});var m=new p(h,g).transform2RotateCoord(-t),v=new p(l,f).transform2RotateCoord(-t),y=new u(m,v,t).rotate(-t);return{top:y.p1.y,left:y.p1.x,width:y.width,height:y.height,transform:e.getTransform()}}if(!this.eqxItems.length)return{top:0,left:0,width:0,height:0,transform:""};var t=d.parseTransform(this.getTransform()).rotate;return e(this,t)}},{key:"render",value:function(){return this.rendered?this.$group:(this.$group=$('<li class="item item-group" id="'+this.id+'">\n                <div class="group-box">\n                    <ul class="group-items"></ul>\n                </div>\n            </li>'),this._updateSize().autoZIndex().$group.attr("eqx-id",this.id),this.$groupBox=this.$group.find(".group-box"),this.$ul=this.$groupBox.find("ul"),this.$ul.append(this.eqxItems.map(function(e){return e.render()})),this.rendered=!0,this.$group)}},{key:"getZIndex",value:function(){for(var e=-1,t=0;t<this.eqxItems.length;t++){var n=this.eqxItems[t];e=Math.max(n.getZIndex(),e)}return e}},{key:"autoZIndex",value:function(){return this.eqxItems.forEach(function(e){return e.autoZIndex()}),this.$item&&this.$item.css({zIndex:this.getZIndex()}),this}},{key:"addEqxItems",value:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];n.forEach(function(t){e.addEqxItem(t)})}},{key:"addEqxItem",value:function(e){e&&!this.eqxItems.includes(e)&&(this.eqxItems.push(e),e.group=this,e.parent=this)}},{key:"isEditLocked",get:function(){return this.eqxItems.every(function(e){return e.isEditLocked})},set:function(e){this.getAllSubEqxComps().forEach(function(t){t.isEditLocked=e})}},{key:"$item",get:function(){return this.$group}},{key:"zIndex",get:function(){return this.css.zIndex||this._initGroupIndex()},set:function(e){this.css.zIndex=e}},{key:"name",get:function(){return this.json.name},set:function(e){this.json.name=e}}]),t}(l);e.exports=f},function(e,t,n){"use strict";function i(){switch(arguments.length){case 2:this.p1=arguments[0],this.p2=arguments[1],this.A=this.p1.y-this.p2.y,this.B=this.p2.x-this.p1.x,this.C=this.p1.x*this.p2.y-this.p2.x*this.p1.y;break;case 3:this.A=arguments[0],this.B=arguments[1],this.C=arguments[2];break;default:throw new Error("Invalid arguments for Line")}}var o=n(113);i.prototype.toString=function(){},i.prototype.distanceTo=function(e){if(e instanceof o)return this.distance2Point(e);if(e instanceof i)return this.distance2Line(e);throw new Error("Unknown geo type")},i.prototype.whichSide=function(e){return this.A*e.x+this.B*e.y+this.C},i.prototype.distance2Point=function(e){return Math.abs(this.A*e.x+this.B*e.y+this.C)/Math.sqrt(this.A*this.A+this.B*this.B)},i.prototype.distance2Line=function(e){return Math.abs(this.C-e.C)/Math.sqrt(this.A*this.A+this.B*this.B)},i.prototype.slope=function(){return-(this.A/this.B)},i.getIncludedAngle=function(e,t){var n=e.slope(),i=t.slope(),o=Math.abs((i-n)/(1+n*i));return 180*Math.atan(o)/Math.PI},window.Line=i,e.exports=i},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function F(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:F(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)};n(370);var c=n(36).parse,l=n(371),u=n(101),p=n(372),d=n(24),h=n(373),f=n(374),g=n(375),m=n(376),v=n(377),y=n(378),b=n(380),x=n(54),w=x.$initQiniuUpload,k=x.$initTencentUpload,S=n(307),I=n(388).changeAge,T=n(389),E=n(391),P=n(27),_=P.isWeixin,C=P.isAndroidPhone,A=n(392),O=A.uploadTencent,q=n(71),L=q.dataURItoBlob,M=n(388).getBenefit,R=n(71).getImgInfo,j=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{anim:!0,trigger:{self:!1},sound:!1,flexLine:"r"}),r.items=[],r.selectedItem=null,r.uploadImg=null,r.btnLongMode=!1,r.$uploadLoading=$('\n                    <div class="upload-loading">\n                        <img src='+E+">\n                        <span>图片上传中...</span>\n                    </div>\n                "),r.saveShow=!1,r.handling=!1,r}return r(t,e),a(t,[{key:"confirmFn",value:function(e){this.changeAge(e)}},{key:"create$context",value:function(){var e=this,t=this.compJson,n=t.id,i=t.type,o=t.properties,r=o.defaultImg?d.FILE+o.defaultImg:p;this.properties=o;var a=$(c(l,{id:n,type:i}));return a.find(".change-btn span").html(t.properties.btnTitle),this.btnLongMode=t.properties.btnTitle.length>6,a.find(".change-btn").click(function(t){t.stopPropagation(),e.getBenefit().then(function(t){if(t){if(!e.uploadImg){var n=new S({msg:"请先上传图片"});return void n.show(".preview-content")}if(1==o.changeType)e.changeAge(o.targetAge);else{$("#nr").data("selectRollOpen",!0);var i=Array.from({length:15},function(e,t){return 10+5*t});i.splice(2,0,18),$(".preview-content").append(y(i,18,e.confirmFn.bind(e)))}}})}),a.find(".cover-img").css({backgroundImage:"url("+r+")"}),this.$context=a,this.changeStyle(o.styleType),this.updateBtnTextColor({color:o.textColor}),this.updateBtnBgColor({color:o.btnColor}),this.updateBgColor({color:o.bgColor}),this.$button=this.$context.find(".img-box"),this.buttonId="img-box-"+Math.random().toString().slice(-6)+"-"+n,this.$button.attr("id",this.buttonId),a}},{key:"getBenefit",value:function(){return M({categoryId:92,userId:this.eqxScene.meta.createUser||this.eqxScene.meta.userId}).then(function(e){if(e.success&&200==e.code)return!0;var t=new S({msg:"权益校验失败"});return t.show(".preview-content"),!1})["catch"](function(e){if(10058==e.code){var t=new S({msg:"作者流量被用光啦，一会再来吧..."});return t.show(".preview-content"),!1}var n=new S({msg:"权益校验失败"});return n.show(".preview-content"),!1})}},{key:"updateBtnTitle",value:function(e){this.$li.find(".change-btn span").html(e)}},{key:"updateDefaultImg",value:function(e){this.$context.find(".cover-img").css({backgroundImage:"url("+(d.FILE+e)+")"})}},{key:"recovery",value:function(){this.$context.find(".cover-img").css({backgroundImage:"url("+p+")"})}},{key:"changeStyle",value:function(e){this.$context.find("#styleBox").attr("class",e);var t=void 0;switch(e){case"normal":t={height:424,width:280},this.$context.find(".cover-img").css({"-webkit-mask-box-image-source":"none","mask-box-image-source":"none"});break;case"geek":t={height:410,width:305},this.$context.find(".border-img").attr("src",g),this.$context.find(".cover-img").css({"-webkit-mask-box-image-source":"url("+h+")","mask-position":"center","mask-repeat":"no-repeat","mask-box-image-source":"url("+h+")","-webkit-mask-position":"center","-webkit-mask-repeat":"no-repeat"});break;case"cute":t={height:384,width:273},this.$context.find(".border-img").attr("src",m),this.$context.find(".cover-img").css({"-webkit-mask-box-image-source":"url("+f+")","mask-position":"center","mask-repeat":"no-repeat","mask-box-image-source":"url("+f+")","-webkit-mask-position":"center","-webkit-mask-repeat":"no-repeat"});break;case"easy":t={height:438,width:278},this.$context.find(".border-img").attr("src",v),this.$context.find(".cover-img").css({"-webkit-mask-box-image-source":"none","mask-box-image-source":"none"})}this.update$li(t)}},{key:"updateBtnTextColor",value:function(e){var t=e.color;this.$context.find(".change-btn").find("span").css({color:t}),this.$context.find(".save-btn").find("span").css({color:t})}},{key:"updateBgColor",value:function(e){var t=e.color;this.$context.css({backgroundColor:t})}},{key:"updateBtnBgColor",value:function(e){var t=e.color;this.$context.find(".change-btn").css({backgroundColor:t}),this.$context.find(".save-btn").css({backgroundColor:t})}},{key:"initQiniuUpload",value:function(e){var t=this;return w(e).then(function(e){return t.uploader=e,t.uploader})}},{key:"validateFileSizeAndType",value:function(e){return new Promise(function(t,n){var i=e.size/1024/1024,o=e.type;if(i>5){var r=new S({msg:"上传失败，请上传不超过5M的图片"});r.show(".preview-content"),n(new Error("size_too_large"))}else if(!["image/jpeg","image/png","image/jpg","image/bmp"].includes(o)){var a=new S({msg:"上传失败，请上传PNG、JPG格式图片"});a.show(".preview-content"),n(new Error("type_not_match"))}t()})}},{key:"fileFinishUpload",value:function(e){var t=e.target_name;t=t.replace(/\.(JPEG|JPG|PNG|BMG)/g,function(e){return e.toLowerCase()}),this.uploadImg=d.FILE+t,$("#"+this.buttonId).find(".cover-img").css({backgroundImage:"url("+this.uploadImg+")"}),$("#"+this.buttonId).find(".tip-box").html("点击重新上传"),this.$uploadLoading.remove()}},{key:"eleShow",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleShow",this).call(this);var n=this.eqxScene.config.mode;if("view"===n&&(this.getQrcodeP=this.getQP(),!this.uploader&&!this.handling)){this.handling=!0;var i=this,o=document.createElement("input");o.type="file",o.accept="image/jpeg,image/gif,image/png",this.$context.on("click",".img-box",function(){$(o).trigger("click")}),k().then(function(t){e.cos=t;var n=t.eqxOptions&&t.eqxOptions.credentials;$(o).on("change",function(r,a){var s=o.files.item(0);if(s)s.target_name=(window.scene.userId||window.devScene.meta.createUser)+"/h5/image/"+Math.random().toString(36).slice(-10),e.validateFileSizeAndType(s).then(function(){e.$uploadLoading.find("span").html("图片上传中..."),$(".preview-content").append(e.$uploadLoading),t.putObject({Bucket:n.bucket+"-"+n.appId,Region:n.region,Key:s.target_name,Body:s},function(e,t){e?new S({msg:e.error&&e.error.Message||"上传失败！",toastType:"success"}):R(s.target_name).then(function(e){i.fileFinishUpload(s)})})})["catch"](function(e){console.error(e),$(o).val("")});else{var c=new S({msg:"上传失败，请上传不超过5M的图片"});c.show(".preview-content")}})}).then(function(t){e.handling=!1})["catch"](function(e){console.error(e);var t=new S({msg:"上传失败"});t.show(".preview-content")})}}},{key:"changeAge",value:function(e){var t=this,n=new b({gapTime:15});n.render(".preview-content");var i={pictureUrl:this.uploadImg,age:e,userId:this.eqxScene.meta.createUser||this.eqxScene.meta.userId};I(i).then(function(e){if(200==e.code){t.changedImg="data:image/jpg;base64,"+e.obj.resultImage,$("#"+t.buttonId).find(".cover-img").css({backgroundImage:"url(data:image/jpg;base64,"+e.obj.resultImage+")"});var n=new S({msg:"生成成功",toastType:"success"});n.show(".preview-content"),t.showSaveBtn()}})["catch"](function(e){if(9110==e.code){var t=new S({msg:"生成失败，请尝试上传另一张照片"});t.show(".preview-content")}else if(10058==e.code){var n=new S({msg:"作者流量被用光啦，一会再来吧..."});n.show(".preview-content")}}).then(function(){n.hide()})}},{key:"showSaveBtn",value:function(){var e=this;this.saveShow||(this.saveShow=!0,this.$context.find(".save-hidden").removeClass("save-hidden").addClass("save-show"),this.$context.find(".save-show").addClass(""+(this.btnLongMode?"long-mode":"short-mode")),this.$context.find(".save-btn").click(function(t){e.$uploadLoading.find("span").html("图片生成中..."),$(".preview-content").append(e.$uploadLoading),e.getQrcodeP.then(function(){var t=new T({meta:e.eqxPage.eqxScene.meta,img:e.changedImg,qrcodeSrc:e.qrcodeSrc,shareType:e.properties.shareType,title:"title"==e.properties.shareTitleType?e.eqxPage.eqxScene.meta.name:e.properties.shareTitleText});t.getSaveImg("ageChange")})}))}},{key:"getQP",value:function(){var e=this;return console.log("getQP"),new Promise(function(t){var n=d.VIEW_HOST+"s/"+e.eqxPage.eqxScene.meta.code,i=function(n){var i=n.data;if("h2"===i.source){var r=i.value[0];e.qrcodeSrc=d.FILE+r.url,console.log("onMessage"),$(o).remove(),t()}};window.addEventListener("message",i.bind(e),!1);var o=document.createElement("iframe");o.src=d.HOST+"h2/create.html?tid="+e.properties.tid+"&qrcodeUrl="+n+"&type=4&num=1",$(o).css({display:"none"}),$("body").append($(o))})}},{key:"openBrowserPicSelector",value:function(){}},{key:"uploadFileToQiNiu",value:function(e){var t=this,n=L(e);this.validateFileSizeAndType(n).then(function(){t.$uploadLoading.find("span").html("图片上传中..."),$(".preview-content").append(t.$uploadLoading),n&&O(n,0).then(function(e){if(e.error)return Promise.resolve(e);var n=Object.assign({},e);n.target_name=n.key,t.fileFinishUpload(n)})})["catch"](function(e){t.$uploadLoading.remove(),console.log(e)})}},{key:"bindAfterRenderEvent",value:function(e,t){var n=this.eqxScene.config.mode,i=this;_()&&"view"===n&&!C()&&this.$context.find(".img-box").on("click",function(){wx.chooseImage({count:1,sizeType:["original"],sourceType:["album","camera"],success:function(e){var t=e.localIds;wx.getLocalImgData({localId:t[0],success:function(e){var t=e.localData;i.uploadFileToQiNiu(t)}})},fail:function(){this.openBrowserPicSelector()}})})}}]),t}(u);e.exports=j},function(e,t){},function(e,t){e.exports='<div id="#{id}" ctype="#{type}" style="width: 100%;height: 100%" class="age-change-box"><div id="styleBox" class="normal"><div class="img-box" id="img-box"><img class="border-img" src="xxxHTMLLINKxxx0.50948075673629530.12445184526625153xxx" alt=""><div class="cover-img"><span class="tip-box">请传清晰人脸照片，同张可变化3人</span></div></div><div class="save-hidden"><div class="change-btn operate-btn"><span></span></div><div class="save-btn operate-btn"><span>保存图片</span></div></div></div></div>'},function(e,t,n){e.exports=n.p+"images/default-cover-a9be6a.png"},function(e,t,n){e.exports=n.p+"images/style-geek-088269.svg"},function(e,t,n){e.exports=n.p+"images/style-cute-fca192.svg"},function(e,t,n){e.exports=n.p+"images/style-geek-893b76.png"},function(e,t,n){e.exports=n.p+"images/style-cute-d600d6.png"},function(e,t,n){e.exports=n.p+"images/style-easy-203925.png"},function(e,t,n){"use strict";n(379);var i=n(191).getEvent,o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e[0],n=arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"年龄选择",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"开始改变",a=$('\n        <div class="select-roll">\n            <div class="select-roll-shadow"></div>\n            <div class="select-roll-content-box">\n                <div class="title-box">\n                    <span class="btn-cancel">取消</span>\n                    <span class="title">'+o+'</span>\n                    <span class="btn-confirm">'+r+'</span>\n                </div>\n                <div class="roll-box">\n                    <div class="vague-zone-top"></div>\n                    <div class="select-zone"></div>\n                    <div class="option-box">\n\n                    </div>\n                    <div class="vague-zone-bottom"></div>\n                </div>\n            </div>\n        </div>'),s=t,c=a.find(".option-box"),l=$(".preview-content");return e.forEach(function(e){var n=$('<span class="option-item">'+e+"</span>");a.find(".option-box").append(n),e==t&&n.addClass("option-item-selected")}),c.on("mousedown touchstart",function(t){t.stopPropagation(),t.preventDefault();var n=i(t),o=c.offset().top,r=$(".select-roll-content-box").offset().top,a=$(".select-zone").offset().top,l=o-r-46,u=n.pageY,p=void 0;$(".select-roll").on("mousemove touchmove",function(t){t.stopPropagation(),t.preventDefault();var n=i(t),o=n.pageY-u,r=c.offset().top;r>=a&&o>0||r+c.height()<=a+36&&o<0||(c.css({top:l+o+"px"}),p=Math.abs(parseInt((r-a-15)/29)),$(".option-item-selected").removeClass("option-item-selected"),$(".option-item:nth-child("+(p+1)+")").addClass("option-item-selected"),s=e[p])}),$(".select-roll").on("mouseup touchend mouseleave",function(e){$(".select-roll").off("mousemove touchmove mouseup touchend mouseleave"),c.css({top:29*-p+88+"px"})})}),a.find(".btn-cancel").click(function(){l.data("selectRollOpen",!1),a.remove()}),a.find(".btn-confirm").click(function(){n(s),l.data("selectRollOpen",!1),a.remove()}),a};e.exports=o},function(e,t){},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(381);n(387);var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.msg=t.msg,this.cusProgress=!1,this.progress=0,this.$context=null,this.gapTime=t.gapTime||100}return o(e,[{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"body";return this.$context=$(r),this.msg&&this.$context.find("#loadingDesc").html(this.msg),$(e).append(this.$context),this.initProgress(),$(".view-loading").on("mousemove touchmove",function(e){e.stopPropagation(),e.preventDefault()}),this.$context}},{key:"initProgress",value:function(){var e=this;this.$context.find("#loading_progress").html(this.progress),this.cusProgress||this.progress<99&&(this.initTimeout=setTimeout(function(){e.progress+=1,e.$context.find("#loading_progress").html(e.progress),e.initProgress()},this.gapTime))}},{key:"updateProgress",value:function(e){this.$context.find("#loading_progress").html(e)}},{key:"hide",value:function(){clearTimeout(this.initTimeout),this.updateProgress(100),setTimeout(function(){var e=$(".view-loading");e&&e.remove()},300)}}]),e}();e.exports=a},function(e,t,n){e.exports='<div class="view-loading"><div class="loading__layer"></div><div class="loading_container"><div><img class="light" src="'+n(382)+'" alt=""><div class="inner_wrapper"><img class="grid" src="'+n(383)+'" alt=""><div class="outer_circle"><img src="'+n(384)+'" alt=""></div><img class="inner_circle" src="'+n(385)+'" alt=""><div class="scan_wrapper"><img class="scan_line" src="'+n(386)+'" alt=""><div class="scan"></div></div><div class="persent"><span id="loading_progress">0</span>%</div></div></div></div><div class="desc" id="loadingDesc">加载中…</div></div>'},function(e,t,n){e.exports=n.p+"images/light-ec0b3b.png"},function(e,t,n){e.exports=n.p+"images/grid-d7ee84.png"},function(e,t,n){e.exports=n.p+"images/circle-outer-a60c1d.png"},function(e,t,n){e.exports=n.p+"images/circle-inner-89dd7c.png"},function(e,t,n){e.exports=n.p+"images/line-scan-a6cc99.png"},function(e,t){},function(e,t,n){"use strict";function i(e){return s({type:"POST",url:c.SERVER_1+"eqs/s/change/age",data:e})}function o(e,t){return s({type:"POST",url:c.SERVER_1+"eqs/s/detect/face?userId="+t,data:JSON.stringify(e),contentType:"application/json"})}function r(e){return s({type:"POST",url:c.SERVER_1+"eqs/s/face/fusion",data:e})}function a(e){var t=c.SERVER_1+"eqs/s/get/benefit?categoryId="+e.categoryId+"&userId="+e.userId;return s({type:"GET",url:t})}var s=n(23).ajax,c=n(24);e.exports={changeAge:i,checkFace:o,faceFusion:r,getBenefit:a}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(390);var r=n(25).$loadHtml2Canvas,a="http://asset.eqh5.com/FnGsxESiWCYLOH3muNUqN55McTs-?imageMogr2/auto-orient",s="http://asset.eqh5.com/FiDDKKCZnMbbbPbUYNz7oobfMzHe?imageMogr2/auto-orient",c="http://asset.eqh5.com/Fnj5-uJVTBCx9iYcX7duq5yJnwnU?imageMogr2/auto-orient",l="http://asset.eqh5.com/FkAEjY3aLiAvlp2c3k3Gcd5FeeJo?imageMogr2/auto-orient",u=288,p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch(i(this,e),this.meta=t.meta,this.uploadImg=t.img,this.uploadImg&&(this.tempImg=new Image,this.tempImg.src=this.uploadImg),this.drawBubbleFunc=t.drawBubble,this.qrcodeSrc=t.qrcodeSrc,this.shareType=t.shareType,this.title=t.title,this.$ele=t.$ele,this.shareType){case 0:this.footerBg=a;break;case 1:this.footerBg=s;break;case 2:this.footerBg=c;break;case 3:this.footerBg=l}}return o(e,[{key:"getSaveImg",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ageChange";this.$saveBox=$('\n            <div class="save-img-box">\n                <div class="save-content">\n                    <div class="share-preview-info type'+this.shareType+'">\n                        <img class="save-footer-img-background" src="'+this.footerBg+'">\n                        <div class="preview-footer">\n                            <img class="qrcode" src="'+this.qrcodeSrc+'" alt="">\n                            <div class="info-box">\n                                <p class="info-title">'+this.title+'</p>\n                                <p class="info-tip">长按或扫描二维码查看</p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        '),
"faceMerge"==t?(this.$saveBox.find(".save-content").prepend(this.$ele),$("body").append(this.$saveBox),this.coverHeight=u*this.$ele.height()/this.$ele.width(),this.transform2Image()):this.tempImg.onload=function(){e.coverWidth=u,e.coverHeight=u*e.tempImg.height/e.tempImg.width;var n='<div class="img-content">\n                    <img src="'+e.uploadImg+'" id="uploadImg" alt="">\n                </div>';e.$saveBox.find(".save-content").prepend(n),e.$saveBox.find("#uploadImg").css({height:2*e.coverHeight+"px",width:2*e.coverWidth+"px"}),$("body").append(e.$saveBox),"faceCheck"==t?e.drawBubble=e.drawBubbleFunc:e.drawBubble=function(){return Promise.resolve()},e.drawBubble(2*e.coverWidth,2*e.coverHeight)["finally"](function(){e.transform2Image()})}}},{key:"transform2Image",value:function(){var e=this;console.log("transform2Image");var t=2==this.shareType?116:88;r().then(function(){new Promise(function(n,i){console.log("$loadHtml2Canvas");var o=$('<canvas width="576" height="'+2*(e.coverHeight+t)+'" style="width:'+u+"px;height:"+(e.coverHeight+t)+';"></canvas>');html2canvas(e.$saveBox,{useCORS:!0,canvas:o[0],height:e.coverHeight,removeContainer:!1,x:100,y:100,onrendered:function(i){console.log("onrendered");var o=i.toDataURL("image"),r=$(new Image);r.attr("src",o);var a=$(".preview-content").height(),s=32;e.visibleW=u,e.coverHeight+t>a-20-s?(e.visibleW=(a-20-s)*u/(e.coverHeight+t),r.attr("width",e.visibleW),r.attr("height",a-20-s)):(r.attr("width",u),r.attr("height",r.height/2)),$(".html2canvas-container").remove(),e.$saveBox.remove(),n({$img:r})}})["catch"](function(e){console.log("err",e)})}).then(function(t){var n=t.$img,i=$('\n                    <div class="save-img-box-show">\n                    </div>\n                '),o=$('\n                    <p class="box-title" style="transform:scale('+e.visibleW/288+');transform-origin:top left">长按保存图片</p>\n                ');i.append(n),i.append(o),i.css({width:e.visibleW+"px"}),$(".preview-content").find(".z-current").append(i);var r=$('<div class="save-img-box-shadow"></div>');r.on("click",function(e){e.stopPropagation(),e.preventDefault(),i.remove(),r.remove()}),$(".preview-content").find(".z-current").append(r),$(".upload-loading").remove()})["catch"](function(e){console.log("err",e)})})}}]),e}();e.exports=p},function(e,t){},function(e,t,n){e.exports=n.p+"images/eqx_loading-ae5060.svg"},function(e,t,n){"use strict";function i(e,t){return e?new Promise(function(t){o.$initTencentUpload().then(function(n){if(n){var i=n.eqxOptions&&n.eqxOptions.credentials,o=(window.scene.userId||window.devScene.meta.createUser)+"/h5/image/"+Math.random().toString(36).slice(-10);n.uploadFile({Bucket:i.bucket+"-"+i.appId,Region:i.region,Key:o,Body:e,SliceSize:5242880,onProgress:function(e){console.log(JSON.stringify(e))},onFileFinish:function(n,i,a){console.log(a.Key+"上传"+(n?"失败":"完成")),r(o).then(function(n){t({h:Number(n.height),key:o,name:e.name,size:Number(n.size),w:Number(n.width)})})}},function(e,t){console.log(e||t)})}})}):Promise.resolve(null)}var o=n(54),r=n(71).getImgInfo;e.exports={uploadTencent:i}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function j(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:j(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)};n(370),n(394);var c=n(36).parse,l=n(395),u=n(101),p=n(372),d=n(24),h=n(373),f=n(374),g=n(375),m=n(376),v=n(377),y=n(380),b=n(54),x=b.$initQiniuUpload,w=b.$initTencentUpload,k=n(307),S=n(388).checkFace,I=n(389),T=n(391),E=n(27),P=E.isWeixin,_=E.isAndroidPhone,C=n(392),A=C.uploadTencent,O=n(71),q=O.dataURItoBlob,L=n(388).getBenefit,M=n(71).getImgInfo,R=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{anim:!0,trigger:{self:!1},sound:!1,flexLine:"r"}),r.items=[],r.selectedItem=null,r.btnLongMode=!1,r.$uploadLoading=$('\n                    <div class="upload-loading">\n                        <img src='+T+">\n                        <span>图片上传中...</span>\n                    </div>\n                "),r.saveShow=!1,r.handling=!1,r.checked=!1,r}return r(t,e),a(t,[{key:"create$context",value:function(){var e=this,t=this.compJson,n=t.id,i=t.type,o=t.properties;this.properties=o;var r=o.defaultImg?d.FILE+o.defaultImg:p,a=$(c(l,{id:n,type:i}));return a.find(".change-btn span").html(t.properties.btnTitle),this.btnLongMode=t.properties.btnTitle.length>6,this.identifyOption=o.identifyOption,a.find(".change-btn").click(function(t){t.stopPropagation(),e.getBenefit().then(function(t){if(t){if(!e.uploadImg){var n=new k({msg:"请先上传图片"});return void n.show(".preview-content")}e.clearBubble(),e.checkFace(o.targetAge)}})}),a.find(".cover-img").css({backgroundImage:"url("+r+")"}),this.$context=a,this.changeStyle(o.styleType),this.updateBtnTextColor({color:o.textColor}),this.updateBtnBgColor({color:o.btnColor}),this.updateBgColor({color:o.bgColor}),this.$button=this.$context.find(".img-box"),this.buttonId="img-box-"+Math.random().toString().slice(-6),this.$button.attr("id",this.buttonId),a}},{key:"getBenefit",value:function(){return L({categoryId:93,userId:this.eqxScene.meta.createUser||this.eqxScene.meta.userId}).then(function(e){if(e.success&&200==e.code)return!0;var t=new k({msg:"权益校验失败"});return t.show(".preview-content"),!1})["catch"](function(e){if(10058==e.code){var t=new k({msg:"作者流量被用光啦，一会再来吧..."});return t.show(".preview-content"),!1}var n=new k({msg:"权益校验失败"});return n.show(".preview-content"),!1})}},{key:"updateBtnTitle",value:function(e){this.$li.find(".change-btn span").html(e)}},{key:"updateDefaultImg",value:function(e){this.$context.find(".cover-img").css({backgroundImage:"url("+(d.FILE+e)+")"})}},{key:"recovery",value:function(){this.$context.find(".cover-img").css({backgroundImage:"url("+p+")"})}},{key:"changeStyle",value:function(e){this.style=e,this.$context.find("#styleBox").attr("class",e);var t=void 0;switch(e){case"normal":t={height:424,width:280},this.$context.find(".cover-img").css({"-webkit-mask-box-image-source":"none","mask-box-image-source":"none"});break;case"geek":t={height:410,width:305},this.$context.find(".border-img").attr("src",g),this.$context.find(".cover-img").css({"-webkit-mask-box-image-source":"url("+h+")","mask-position":"center","mask-repeat":"no-repeat","mask-box-image-source":"url("+h+")","-webkit-mask-position":"center","-webkit-mask-repeat":"no-repeat"});break;case"cute":t={height:384,width:273},this.$context.find(".border-img").attr("src",m),this.$context.find(".cover-img").css({"-webkit-mask-box-image-source":"url("+f+")","mask-position":"center","mask-repeat":"no-repeat","mask-box-image-source":"url("+f+")","-webkit-mask-position":"center","-webkit-mask-repeat":"no-repeat"});break;case"easy":t={height:438,width:278},this.$context.find(".border-img").attr("src",v),this.$context.find(".cover-img").css({"-webkit-mask-box-image-source":"none","mask-box-image-source":"none"})}this.update$li(t)}},{key:"updateBtnTextColor",value:function(e){var t=e.color;this.$context.find(".change-btn").find("span").css({color:t}),this.$context.find(".save-btn").find("span").css({color:t})}},{key:"updateBgColor",value:function(e){var t=e.color;this.$context.css({backgroundColor:t})}},{key:"updateBtnBgColor",value:function(e){var t=e.color;this.$context.find(".change-btn").css({backgroundColor:t}),this.$context.find(".save-btn").css({backgroundColor:t})}},{key:"initQiniuUpload",value:function(e){var t=this;return x(e).then(function(e){return t.uploader=e,t.uploader})}},{key:"validateFileSizeAndType",value:function(e){return new Promise(function(t,n){var i=e.size/1024/1024,o=e.type;if(i>5){var r=new k({msg:"上传失败，请上传不超过5M的图片"});r.show(".preview-content"),n(new Error("size_too_large"))}else if(!["image/jpeg","image/png","image/jpg","image/bmp"].includes(o)){var a=new k({msg:"上传失败，请上传PNG、JPG格式图片"});a.show(".preview-content"),n(new Error("type_not_match"))}t()})}},{key:"fileFinishUpload",value:function(e){var t=e.target_name;t=t.replace(/\.(JPEG|JPG|PNG|BMG)/g,function(e){return e.toLowerCase()}),this.uploadImg=d.FILE+t,$("#"+this.buttonId).find(".cover-img").css({backgroundImage:"url("+this.uploadImg+")"}),$("#"+this.buttonId).find(".tip-box").html("点击重新上传"),this.$uploadLoading.remove(),this.clearBubble(),this.checked=!1}},{key:"eleShow",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleShow",this).call(this);var n=this.eqxScene.config.mode;if("view"===n&&(this.getQrcodeP=this.getQP(),!this.uploader&&!this.handling)){this.handling=!0;var i=this,o=document.createElement("input");o.type="file",o.accept="image/jpeg,image/gif,image/png",this.$context.on("click",function(){$(o).trigger("click")}),w().then(function(t){e.cos=t;var n=t.eqxOptions&&t.eqxOptions.credentials;$(o).on("change",function(r,a){var s=o.files.item(0);if(s)s.target_name=(window.scene.userId||window.devScene.meta.createUser)+"/h5/image/"+Math.random().toString(36).slice(-10),e.validateFileSizeAndType(s).then(function(){e.$uploadLoading.find("span").html("图片上传中..."),$(".preview-content").append(e.$uploadLoading),t.putObject({Bucket:n.bucket+"-"+n.appId,Region:n.region,Key:s.target_name,Body:s},function(e,t){e?new k({msg:e.error&&e.error.Message||"上传失败！",toastType:"success"}):M(s.target_name).then(function(e){i.fileFinishUpload(s)})})})["catch"](function(e){console.error(e),$(o).val("")});else{var c=new k({msg:"上传失败，请上传不超过5M的图片"});c.show(".preview-content")}})}).then(function(t){e.handling=!1})["catch"](function(e){console.error(e);var t=new k({msg:"上传失败"});t.show(".preview-content")})}}},{key:"checkFace",value:function(){var e=this,t=new y({gapTime:15});t.render(".preview-content");var n={Url:this.uploadImg,NeedFaceAttributes:1,NeedQualityDetection:1},i=this.eqxScene.meta.createUser||this.eqxScene.meta.userId;S(n,i).then(function(t){if(console.log("checkFaceAPI",t),200==t.code){e.faceInfos=t.obj.faceInfos,e.drawCheckInfo();var n=new k({msg:"生成成功",toastType:"success"});n.show(".preview-content"),e.showSaveBtn(),e.checked=!0}})["catch"](function(e){if(9110==e.code){var t=new k({msg:"识别失败，请尝试上传另一张照片"});t.show(".preview-content")}else if(10058==e.code){var n=new k({msg:"作者流量被用光啦，一会再来吧..."});n.show(".preview-content")}}).then(function(){t.hide()})}},{key:"showSaveBtn",value:function(){var e=this;this.saveShow||(this.saveShow=!0,this.$context.find(".save-hidden").removeClass("save-hidden").addClass("save-show"),this.$context.find(".save-show").addClass(""+(this.btnLongMode?"long-mode":"short-mode")),this.$context.find(".save-btn").click(function(t){e.$uploadLoading.find("span").html("图片生成中..."),$(".preview-content").append(e.$uploadLoading),e.getQrcodeP.then(function(){var t=new I({meta:e.eqxPage.eqxScene.meta,img:e.uploadImg,qrcodeSrc:e.qrcodeSrc,shareType:e.properties.shareType,drawBubble:e.drawSaveBubble.bind(e),title:"title"==e.properties.shareTitleType?e.eqxPage.eqxScene.meta.name:e.properties.shareTitleText});t.getSaveImg("faceCheck")})}))}},{key:"getQP",value:function(){var e=this;return console.log("getQP"),new Promise(function(t){var n=d.VIEW_HOST+"s/"+e.eqxPage.eqxScene.meta.code,i=function(n){var i=n.data;if("h2"===i.source){var r=i.value[0];e.qrcodeSrc=d.FILE+r.url,console.log("onMessage"),$(o).remove(),t()}};window.addEventListener("message",i.bind(e),!1);var o=document.createElement("iframe");o.src=d.HOST+"h2/create.html?tid="+e.properties.tid+"&qrcodeUrl="+n+"&type=4&num=1",console.log(o.src),$(o).css({display:"none"}),$("body").append($(o))})}},{key:"calcPos",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"preview",i=arguments[3],o=arguments[4],r=this.tempImg.width,a=this.tempImg.height,s=void 0,c=void 0,l=288,u=0,p=0,d=void 0,h=void 0;if("save"==n){var f=(2*l-i)/2;return h=i*e/r+f,d=o*t/a,{renderX:h,renderY:d}}switch(this.style){case"normal":s=373,c=280;break;case"geek":s=280,c=210,u=40,p=50;break;case"cute":s=292,c=221,u=22,p=25;break;case"easy":s=280,c=210,u=43,p=34}if(r/a-.75>0){var g=a*c/r,m=r*g/a,v=(s-g)/2;return d=g*t/a+v+u,h=m*e/r+p,{renderX:h,renderY:d}}if(r/a-.75<0){var y=r*s/a,b=a*y/r,x=(c-y)/2;return h=y*e/r+x+p,d=b*t/a+u,{renderX:h,renderY:d}}var w=r*s/a,k=a*c/r;return h=w*e/r+p,d=k*t/a+u,{renderX:h,renderY:d}}},{key:"drawCheckInfo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"preview",t=this,n=arguments[1],i=arguments[2];this.tempImg=new Image,this.tempImg.src=this.uploadImg;var o=new Promise(function(o){setTimeout(function(){var r=[],a=["pink","grey","orange","blue","yellow"];t.faceInfos.forEach(function(o){if("preview"==e){var a={pos:t.calcPos(o.x+o.width/2,o.y),info:o.faceAttributesInfo};r.push(a)}else{var s={pos:t.calcPos(o.x+o.width/2,o.y,"save",n,i),info:o.faceAttributesInfo};r.push(s)}}),r.forEach(function(n){var i=a.splice(0,1),o=$('\n                        <div class="info-bubble '+i+'-bubble" style="top:'+n.pos.renderY+"px;left:"+n.pos.renderX+'px">\n                            <div class="info-bubble-content">\n                                <p style="display:'+(t.identifyOption.age?"block":"none")+'">年龄:&nbsp'+n.info.age+'</p>\n                                <p style="display:'+(t.identifyOption.beauty?"block":"none")+'">颜值:&nbsp'+n.info.beauty+'</p>\n                            </div>\n                            <div class="info-bubble-circle">\n                                <div class="info-bubble-circle-inside"></div>\n                            </div>\n                        </div>\n                        ');"preview"==e?t.$context.find(".img-box").append(o):(o.addClass("info-bubble-save"),$(".save-img-box").find(".img-content").append(o))}),o()},300)});return o}},{key:"drawSaveBubble",value:function(e,t){return this.checked?this.drawCheckInfo("save",e,t):Promise.reject()}},{key:"clearBubble",value:function(){this.$context.find(".info-bubble").remove()}},{key:"uploadFileToQiNiu",value:function(e){var t=this,n=q(e);this.validateFileSizeAndType(n).then(function(){t.$uploadLoading.find("span").html("图片上传中..."),$(".preview-content").append(t.$uploadLoading),n&&A(n,0).then(function(e){if(e.error)return Promise.resolve(e);var n=Object.assign({},e);n.target_name=n.key,t.fileFinishUpload(n)})})["catch"](function(e){t.$uploadLoading.remove(),console.log(e)})}},{key:"bindAfterRenderEvent",value:function(e,t){var n=this.eqxScene.config.mode,i=this;P()&&"view"===n&&!_()&&this.$context.find(".img-box").on("click",function(){wx.chooseImage({count:1,sizeType:["original"],sourceType:["album","camera"],success:function(e){var t=e.localIds;wx.getLocalImgData({localId:t[0],success:function(e){var t=e.localData;i.uploadFileToQiNiu(t)}})},fail:function(){this.openBrowserPicSelector()}})})}}]),t}(u);e.exports=R},function(e,t){},function(e,t){e.exports='<div id="#{id}" ctype="#{type}" style="width: 100%;height: 100%" class="age-change-box"><div id="styleBox" class="normal"><div class="img-box" id="img-box"><img class="border-img" src="xxxHTMLLINKxxx0.97846544204704420.09410645128499007xxx" alt=""><div class="cover-img"><span class="tip-box">请传清晰人脸照片，同张可识别5人</span></div></div><div class="save-hidden"><div class="change-btn operate-btn"><span></span></div><div class="save-btn operate-btn"><span>保存图片</span></div></div></div></div>'},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function P(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:P(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)};n(390);var c=n(36).parse,l=n(397),u=n(101),p=n(24),d=n(380),h=n(54),f=h.$initQiniuUpload,g=h.$initTencentUpload,m=n(307),v=n(388).faceFusion,y=n(389),b=n(391),x=n(392),w=x.uploadTencent,k=n(71),S=k.dataURItoBlob,I=n(388).getBenefit,T=n(71).getImgInfo,E=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{anim:!0,trigger:{self:!1},sound:!1,flexLine:"ne,se,sw,nw,r"}),r.btnLongMode=!1,r.$uploadLoading=$('\n                    <div class="upload-loading">\n                        <img src='+b+">\n                        <span>图片上传中...</span>\n                    </div>\n                "),r.saveBtnShow=!1,r.handling=!1,r}return r(t,e),a(t,[{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.properties;this.properties=i;var o=i.templateInfo,r=o.bgInfo,a=o.childrenInfo,s=a.face,u=a.body,d=a.portrait,h=$(c(l,{id:t,type:n}));h.find(".merge-content").css({backgroundImage:"url("+(p.FILE+r.src)+")"});var f=this.$face=h.find(".portraits-face"),g=this.$body=h.find(".portraits-body"),m=h.find(".portraits-content");return this.$portraits=m,f.attr("src",p.FILE+s.src),g.attr("src",p.FILE+u.src),m.css({height:d.height,width:d.width,top:d.top,left:d.left}),f.css({height:""+s.height,width:""+s.width,top:""+(s.top||0),left:""+s.left}),g.css({height:""+u.height,width:""+u.width,left:0,top:""+u.top}),this.$context=h,this.$button=this.$context.find(".merge-content"),this.buttonId="merge-content-"+Math.random().toString().slice(-6),this.$button.attr("id",this.buttonId),h}},{key:"getBenefit",value:function(){return I({categoryId:94,userId:this.eqxScene.meta.createUser||this.eqxScene.meta.userId}).then(function(e){if(e.success&&200==e.code)return!0;var t=new m({msg:"权益校验失败"});return t.show(".preview-content"),!1})["catch"](function(e){if(10058==e.code){var t=new m({msg:"作者流量被用光啦，一会再来吧..."});return t.show(".preview-content"),!1}var n=new m({msg:"权益校验失败"});return n.show(".preview-content"),!1})}},{key:"changeTemplate",value:function(e){var t=this.getTemplateInfo(e.elements);this.properties.materialId=e.materialId,this.properties.activeId=e.activeId,this.properties.sourceId=e.sourceId,this.properties.templateInfo=t;var n=this.properties.templateInfo.childrenInfo,i=n.face,o=n.body,r=n.portrait;this.$face.attr("src",p.FILE+i.src),this.$body.attr("src",p.FILE+o.src),this.$portraits.css({height:r.height,width:r.width,top:r.top,left:r.left}),this.$face.css({height:""+i.height,width:""+i.width,top:""+(i.top||0),left:""+i.left}),this.$body.css({height:""+o.height,width:""+o.width,left:0,top:""+o.top}),this.changeBg(p.FILE+this.properties.templateInfo.bgInfo.src)}},{key:"getTemplateInfo",value:function(e){var t={},n={};e.forEach(function(e){var i=e.css;"background"===e.name?(t=e,t={top:i.top,left:i.left,height:i.height,width:i.width,src:e.properties.src}):n[e.name]={top:i.top-=t.top,left:i.left-=t.left,height:i.height,width:i.width,src:e.properties.src}});var i=n.face,o=n.body,r=n.portrait,a=JSON.parse(JSON.stringify(i)),s=JSON.parse(JSON.stringify(o)),c=JSON.parse(JSON.stringify(r));return o.left=0,o.top=(s.top-c.top)/c.height*100+"%",o.width="100%",o.height=s.height/c.height*100+"%",i.left=(a.left-c.left)/s.width*100+"%",i.top=(a.top-c.top)/c.height*100+"%",i.width=a.width/s.width*100+"%",i.height=a.height/c.height*100+"%",r.left=c.left/t.width*100+"%",r.top=c.top/t.height*100+"%",r.width=c.width/t.width*100+"%",r.height=c.height/t.height*100+"%",{bgInfo:t,childrenInfo:n}}},{key:"changeBg",value:function(e){this.$context.find(".merge-content").css({backgroundImage:"url("+e+")"})}},{key:"updatePortraitPos",value:function(e){this.$portraits.css({height:e.height,width:e.width,top:e.top,left:e.left})}},{key:"initQiniuUpload",value:function(e){var t=this;return f(e).then(function(e){return t.uploader=e,t.uploader})}},{key:"validateBenefitAndFileSizeType",value:function(e){return this.getBenefit().then(function(t){if(!t)return Promise.reject(new Error("no_benefit"));var n=e.size/1024/1024,i=e.type;if(n>5){var o=new m({msg:"上传失败，请上传不超过5M的图片"});return o.show(".preview-content"),Promise.reject(new Error("size_too_large"))}if(!["image/jpeg","image/png","image/jpg","image/bmp"].includes(i)){var r=new m({msg:"上传失败，请上传PNG、JPG格式图片"});return r.show(".preview-content"),Promise.reject(new Error("type_not_match"))}})}},{key:"fileFinishUpload",value:function(e){var t=e.target_name;t=t.replace(/\.(JPEG|JPG|PNG|BMG)/g,function(e){return e.toLowerCase()}),this.uploadImg=p.FILE+t,this.$uploadLoading.remove(),this.$context.find(".shadow-tip").remove(),this.mergeFace()}},{key:"eleShow",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleShow",this).call(this);var n=this.eqxScene.config.mode;if("view"===n&&(this.$context.find(".shadow-tip").css({display:"block"}),this.getQrcodeP=this.getQP(),!this.uploader&&!this.handling)){this.handling=!0;var i=this,o=document.createElement("input");o.type="file",o.accept="image/jpeg,image/gif,image/png",this.$context.on("click",function(){$(o).trigger("click")}),g().then(function(t){e.cos=t;var n=t.eqxOptions&&t.eqxOptions.credentials;$(o).on("change",function(r,a){var s=o.files.item(0);if(s)s.target_name=(window.scene.userId||window.devScene.meta.createUser)+"/h5/image/"+Math.random().toString(36).slice(-10),e.validateBenefitAndFileSizeType(s).then(function(){e.$uploadLoading.find("span").html("图片上传中..."),$(".preview-content").append(e.$uploadLoading),t.putObject({Bucket:n.bucket+"-"+n.appId,Region:n.region,Key:s.target_name,Body:s},function(e,t){e?new m({msg:e.error&&e.error.Message||"上传失败！",toastType:"success"}):T(s.target_name).then(function(e){i.fileFinishUpload(s)})})})["catch"](function(e){console.error(e),$(o).val("")});else{var c=new m({msg:"上传失败，请上传不超过5M的图片"});c.show(".preview-content")}})}).then(function(t){e.handling=!1})["catch"](function(e){console.error(e);var t=new m({msg:"上传失败"});t.show(".preview-content")})}}},{key:"mergeFace",value:function(){var e=this,t=new d({gapTime:15});t.render(".preview-content");var n={imageUrl:this.uploadImg,modelId:this.properties.materialId,userId:this.eqxScene.meta.createUser||this.eqxScene.meta.userId};this.properties.activeId&&(n.projectId=this.properties.activeId),v(n).then(function(t){if(200==t.code){e.mergedImg=t.obj.image,e.$context.find(".portraits-face").attr("src",e.mergedImg);var n=new m({msg:"生成成功",toastType:"success"});n.show(".preview-content"),!e.saveBtnShow&&e.showSaveBtn()}})["catch"](function(e){if(9110==e.code){var t=new m({msg:"冲洗失败，请上传正面无遮挡人脸照片"});t.show(".preview-content")}else if(10058==e.code){var n=new m({msg:"作者流量被用光啦，一会再来吧..."});n.show(".preview-content")}}).then(function(){t.hide()})}},{key:"showSaveBtn",value:function(){var e=this,t=this.$context.width(),n=280,i=t/n;this.saveBtnShow=!0;var o=this.$context.find(".save-btn");o.css({display:"block",transform:"translateX(-50%) scale("+i+")"}),o.addClass("type"+this.properties.shareType),o.click(function(t){t.stopPropagation(),e.$uploadLoading.find("span").html("图片生成中..."),$(".preview-content").append(e.$uploadLoading);var n=e.$context.find(".merge-content").clone(),i=e.$context.find(".merge-content").height(),o=e.$context.find(".merge-content").width(),r=576;n.find(".save-btn").remove(),n.css({height:i*r/o+"px"}),e.getQrcodeP.then(function(){var t=new y({meta:e.eqxPage.eqxScene.meta,qrcodeSrc:e.qrcodeSrc,shareType:e.properties.shareType,title:"title"==e.properties.shareTitleType?e.eqxPage.eqxScene.meta.name:e.properties.shareTitleText,$ele:n});t.getSaveImg("faceMerge")})})}},{key:"getQP",value:function(){var e=this;return console.log("getQP"),new Promise(function(t){var n=p.VIEW_HOST+"s/"+e.eqxPage.eqxScene.meta.code,i=function(n){var i=n.data;if("h2"===i.source){var r=i.value[0];e.qrcodeSrc=p.FILE+r.url,console.log("onMessage"),$(o).remove(),t()}};window.addEventListener("message",i.bind(e),!1);var o=document.createElement("iframe");o.src=p.HOST+"h2/create.html?tid="+e.properties.tid+"&qrcodeUrl="+n+"&type=4&num=1",$(o).css({display:"none"}),$("body").append($(o))})}},{key:"uploadFileToQiNiu",value:function(e){var t=this,n=S(e);this.validateBenefitAndFileSizeType(n).then(function(){$(".preview-content").append(t.$uploadLoading),n&&w(n,0).then(function(e){if(e.error)return Promise.resolve(e);var n=Object.assign({},e);n.target_name=n.key,t.fileFinishUpload(n)})})["catch"](function(e){console.log(e)})}}]),t}(u);e.exports=E},function(e,t){e.exports='<div id="#{id}" ctype="#{type}" style="width: 100%;height: 100%" class="face-merge-box"><div class="merge-content"><div class="shadow-tip"><span>请点击下方区域上传正面清晰人脸照</span></div><div class="portraits-content"><img src="xxxHTMLLINKxxx0.442084702196470670.061683173011652936xxx" class="portraits-face"> <img src="xxxHTMLLINKxxx0.385414924959842860.3990954860273257xxx" class="portraits-body"></div><div class="save-btn">点击保存图片</div></div></div>'},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function k(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:k(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)},c=n(399),l=n(36).parse,u=n(400),p=u.getWidthOfDynamicCreateDom,d=n(27),h=d.isWeixin,f=n(70),g=f.getAddressByAMap,m=f.getLocationByQQMap;n(401);var v=n(101),y=n(165),b=y.getFontFamilyStyle,x={left:"flex-start",right:"flex-end",center:"space-evenly",justify:"stretch"},w=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compFont:{self:!0,fontFamily:!0,fontSize:!0,fontColor:!0,bgColor:!0,baseStyle:!0,lineHeight:!0,letterSpacing:!0},advanceStyle:{variable:!1,"function":!0},functionStyle:{variableText:!1,adjustMode:!1,replace:!1}},link:!0,flexLine:"n,s,w,e,r"}),r.addressComponents=null,r.location$el="",r.rafId=-1,r}return r(t,e),a(t,[{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.css,o=void 0===i?{}:i,r=o.fontFamily,a=o.letterSpacing,s=t+"_addressComponentsInfo";this.location$el="#"+s;var u=$(l(c,{id:t,type:n,elId:s}));u.css({fontFamily:r});var p=parseFloat(a||0)+"em";u.css({letterSpacing:p});var d=o.textAlign;return d&&this.updateContainerTextAlign(u,d),this.addCompTopRightTip(u),this.generateContent(u),u}},{key:"addCompTopRightTip",value:function(e){if("edit"===this.eqxScene.config.mode){var t=$('<span class="eqf-address-l eqx-comp__top-right-tip"></span>');e.append(t)}}},{key:"getAddressComponentsSetting",value:function(){var e=this.compJson;return e.properties.addressComponents}},{key:"generateContent",value:function(e){this.addressComponents?this.updateContent(this.addressComponents,e):this.setLocationInfo(e)}},{key:"updateContent",value:function(e,t){var n=t;t||(n=this.$context);var i=n.find(this.location$el),o=this.getAddressComponentsSetting(),r=Object.keys(o),a=[],s="";r.forEach(function(t){o[t]&&a.push(e[t])}),1===a.length?s=a[0]:a.length>1&&(s=a.join("-")),this.addFontFamily.bind(this)(s),t.attr("data-location",s),i&&i.html(s),"view"===this.eqxScene.config.mode&&this.handleScroll(t)}},{key:"handleScroll",value:function(e){var t=parseInt(this.compJson.css.width),n={letterSpacing:parseFloat(this.compJson.css.letterSpacing||0)+"em",fontFamily:this.compJson.css.fontFamily,fontSize:this.compJson.css.fontSize},i=p(e.find(".eqx-location__container").html(),n),o=15;i>t-2*o?(this.translateLeft=t-o,this.translateRight=-i,this.translateLeftCurr=0,this.doTransform(e)):cancelAnimationFrame(this.rafId)}},{key:"doTransform",value:function(e){var t=this.translateLeftCurr,n=this.translateLeft,i=this.translateRight,o=e.find(this.location$el);t<i&&(this.translateLeftCurr=n),o.css("transform","translate("+t+"px,0px)"),this.translateLeftCurr=this.translateLeftCurr-.5,this.rafId=requestAnimationFrame(this.doTransform.bind(this))}},{key:"setLocationInfo",value:function(e){var t=this;return window.ADDRESS_COMPONENTS?void this.updateContent(window.ADDRESS_COMPONENTS,e):void this.getLocationInfo().then(function(n){t.addressComponents=n,window.ADDRESS_COMPONENTS=n,t.updateContent(n,e)})}},{key:"getLocationInfo",value:function(){return h()?m():g()}},{key:"updateLocation",value:function(){this.generateContent(this.$context)}},{key:"updateCss",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateCss",this).call(this,e),e&&e.textAlign&&this.updateContainerTextAlign(this.$context,e.textAlign)}},{key:"updateContainerTextAlign",value:function(e,t){e.find(".eqx-location__container").css({"justify-content":x[t]})}},{key:"autoAdjustSize",value:function(){var e=this.$context,t=this.$context.children(),n=parseInt(e.css("padding")),i=t.height(),o={height:i+2*n};return this.update$li(o),{height:parseInt(this.$li.css("height")),width:parseInt(this.$li.css("width"))}}},{key:"addFontFamily",value:function(e){var t=this.compJson,n=t.id,i=t.css,o=void 0===i?{}:i,r=o.fontFamily,a=this.eqxScene.config.mode;"view"===a&&window.scene&&b({fontFamily:r,textContent:e,compId:n})}},{key:"eleShow",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleShow",this).call(this),this.generateContent(this.$context)}}]),t}(v);e.exports=w},function(e,t){e.exports='<div id="#{id}" ctype="#{type}" class="element eqx-location"><div class="eqx-location__container"><span style="display: block" id="#{elId}"></span></div></div>'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){var t=e.getBoundingClientRect(),n=document.body,i=document.documentElement,o=window.pageYOffset||i.scrollTop||n.scrollTop,r=window.pageXOffset||i.scrollLeft||n.scrollLeft,a=i.clientTop||n.clientTop,s=i.clientLeft||n.clientLeft,c=t.top+o-a,l=t.left+r-s;return{top:Math.round(c),left:Math.round(l)}},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n(66),o=i.perfectStr,r=$(o("<div>"+e+"</div>")).css({position:"fixed",left:"-10000px",
top:"0"}).css(t);$("body").append(r);var a=r.width();return r.remove(),a};t.getOffsetRect=i,t.getWidthOfDynamicCreateDom=o},function(e,t){},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function S(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:S(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)};n(403);var c=n(404),l=n(405),u=n(406),p=n(407),d=n(101),h=n(36).parse,f=n(165),g=f.getFontFamilyStyle,m=n(24),v=n(35),y=v.dateFormat,b=n(66),x=b.getSafeStr,w=b.perfectStr,k=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{self:!0,fontFamily:!0,fontSize:!0,fontColor:!0,bgColor:!1},currentAssembly:e.multiLevelCurrent,functionStyle:{required:!0},advanceStyle:{"function":!1,opacity:!1}},trigger:{self:!1},link:!1}),r}return r(t,e),a(t,[{key:"$compDiv",value:function(e){var t=e.id,n=e.type,i=(e.pageId,e.required),o=void 0===i?null:i;return $(h(c,{id:t,type:n})).attr({required:o})}},{key:"$multi",value:function(e){var t=e.htmlName,n=e.jumpPage,i=e.index,o=e.name,r=e.level,a=e.compId,s=e.imgUrl,c=e.time,l=x(w(o)),u=""+i;return $(h(t,{jumpPage:n,index:i,name:l,level:r,compId:a,id:u,imgUrl:s,time:c}))}},{key:"updateDom",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";for(var o in e)n?(i&&e.eq(o).find(""+n).removeClass(i),e.eq(o).find(""+n).addClass(t)):e.eq(o).addClass(t)}},{key:"updateListCss",value:function(e,t){var n=this.compJson.properties.multiLevel;for(var i in e)e.eq(i).css(n[t]),e.eq(i).find(".dashed").css({borderBottomColor:n[t].color})}},{key:"editArr",value:function(e,t,n){for(var i=[],o=t;o<n.length;)if("oneLevel"==e){if(!n[o]||"oneLevel"==n[o].level)return i;i.push(o),o++}else{if(n[o]&&"threeLevel"!=n[o].level)return i;i.push(o),o++}return i}},{key:"switchAddClick",value:function(e){var t=this,n=this.compJson.properties.multiLevelList;for(var i in e)e.eq(i).find(".switch").on("click",function(e){e.stopPropagation();var i=$(this).attr("id");if($(this).hasClass("eqf-down")){$(this).removeClass("eqf-down"),$(this).addClass("eqf-up");var o=$(this).parent().attr("id"),r=t.editArr(o,Number(i)+1,n);for(var a in r)t.$multis.find(".multi-group").eq(r[a]).css({display:"block"})}else{var s=$(this).parent().attr("id");$(this).removeClass("eqf-up"),$(this).addClass("eqf-down");var c=t.editArr(s,Number(i)+1,n);for(var l in c)t.$multis.find(".multi-group").eq(c[l]).css({display:"none"})}})}},{key:"toolBarAddClick",value:function(){var e=this,t=this.compJson.properties.multiLevelList,n=this.compJson.properties.editCatalougeSetting,i="";"multiLevelDirectory"==this.compJson.properties.tab?(this.$context.find(".time-axis-line").css({display:"none"}),i=this.$context.find(".multi-group")):"singleLevelDirectory"==this.compJson.properties.tab&&1==this.compJson.properties.styleChooseId?(i=this.$context.find(".picture-group"),this.$context.find(".time-axis-line").css({display:"none"})):(i=this.$context.find(".time-axis-group"),this.$context.find(".time-axis-line").css({display:"block"}));for(var o=function(o){$(i[o]).find("#add-catalogue").on("click",function(i){i.stopPropagation();var r=y(new Date,"yyyy.MM.dd hh:mm"),a=e.eqxPage.pageJson.id;t.splice(o+1,0,{level:"oneLevel",name:"目录标题",jumpPage:a,imgUrl:"",time:r}),e.update$context(),n.key&&(n.key=0,n.currentEdit=""),setTimeout(function(){n.key=1,n.currentEdit=o+1})}),$(i[o]).find("#edit-catalogue").on("click",function(e){e.stopPropagation(),n.key&&(n.key=0,n.currentEdit=""),setTimeout(function(){n.key=1,n.currentEdit=o})}),0==o?$(i[o]).find("#delete-catalogue").css({visibility:"hidden"}):$(i[o]).find("#delete-catalogue").on("click",function(i){i.stopPropagation(),n.key=0,n.currentEdit="",t.splice(o,1),e.update$context()})},r=0;r<i.length;r++)o(r)}},{key:"updateListStyle",value:function(){if("multiLevelDirectory"==this.compJson.properties.tab){var e=this.$context.find("[id=oneLevel]"),t=this.$context.find("[id=twoLevel]"),n=this.$context.find("[id=threeLevel]");this.updateListCss(e,"oneLevel"),this.updateListCss(t,"twoLevel"),this.updateListCss(n,"threeLevel")}else this.$context.find(".name").css(this.compJson.properties.multiLevel.oneLevel)}},{key:"picChangeLevelStyle",value:function(){"singleLevelDirectory"==this.compJson.properties.tab&&1==this.compJson.properties.styleChooseId?this.compJson.properties.multiLevelList.length%2==0?(this.$context.find(".multi-level-list").removeClass("time-axis-style"),this.$context.find(".multi-level-list").removeClass("pic-level-list"),this.$context.find(".multi-level-list").addClass("pic-double-list")):(this.$context.find(".multi-level-list").removeClass("time-axis-style"),this.$context.find(".multi-level-list").removeClass("pic-double-list"),this.$context.find(".multi-level-list").addClass("pic-level-list")):"singleLevelDirectory"==this.compJson.properties.tab&&2==this.compJson.properties.styleChooseId?(this.$context.find(".multi-level-list").removeClass("pic-level-list"),this.$context.find(".multi-level-list").removeClass("pic-double-list"),this.$context.find(".multi-level-list").addClass("time-axis-style")):(this.$context.find(".multi-level-list").removeClass("pic-level-list"),this.$context.find(".multi-level-list").removeClass("pic-double-list"),this.$context.find(".multi-level-list").removeClass("time-axis-style"))}},{key:"timeAxisNodeColor",value:function(){"singleLevelDirectory"==this.compJson.properties.tab&&2==this.compJson.properties.styleChooseId?(this.$context.find(".time-node").css({backgroundColor:this.compJson.properties.nodeColor}),this.$context.find(".time-axis-line").css({backgroundColor:this.compJson.properties.nodeColor})):this.$context.find(".time-axis-line").css({display:"none"})}},{key:"swichCatalogueOpen",value:function(){var e=this,t=this.compJson.properties.multiLevelList;if("multiLevelDirectory"==this.compJson.properties.tab){var n=this.$context.find("[id=oneLevel]"),i=this.$context.find("[id=twoLevel]");if(this.compJson.properties.switchCatalogueOpen){for(var o in t)if("oneLevel"==t[o].level){var r=e.editArr("oneLevel",Number(o)+1,t);for(var a in r)e.$multis.find(".multi-group").eq(r[a]).css({display:"none"})}else if("twoLevel"==t[o].level){var s=e.editArr("twoLevel",Number(o)+1,t);for(var c in s)e.$multis.find(".multi-group").eq(s[c]).css({display:"none"})}this.updateDom(n,"eqf-down",".switch","eqf-up"),this.updateDom(i,"eqf-down",".switch","eqf-up")}}}},{key:"swichOpOrDown",value:function(){var e=this,t=this.compJson.properties.multiLevelList;for(var n in t)if("oneLevel"==t[n].level){var i=e.editArr("oneLevel",Number(n)+1,t);i.length?e.$multis.find(".multi-group").eq(n).find(".switch").css({visibility:"visible"}):e.$multis.find(".multi-group").eq(n).find(".switch").css({visibility:"hidden"})}else if("twoLevel"==t[n].level){var o=e.editArr("twoLevel",Number(n)+1,t);o.length?e.$multis.find(".multi-group").eq(n).find(".switch").css({visibility:"visible"}):e.$multis.find(".multi-group").eq(n).find(".switch").css({visibility:"hidden"})}}},{key:"update$context",value:function(){if(this.$context.find(".multi-level-list").innerHTML="",this.picChangeLevelStyle(),this.$context.find(".multi-level-list").html(this.create$multi()),"multiLevelDirectory"==this.compJson.properties.tab){var e=this.$context.find("[id=oneLevel]"),t=this.$context.find("[id=twoLevel]"),n=this.$context.find("[id=threeLevel]");this.updateDom(e,"multi-group-one-level"),this.updateDom(t,"multi-group-two-level"),this.updateDom(n,"multi-group-three-level")}this.toolBarAddClick(),this.swichCatalogueOpen(),this.timeAxisNodeColor(),this.updateListStyle(),this.swichOpOrDown()}},{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.pageId,o=e.properties,r=o.multiLevel,a=o.multiLevelList;this.multiLevel=r,this.multiLevelList=a;var s=this.$compDiv({id:t,type:n,pageId:i});this.compJson.properties.editCatalougeSetting.key=0,this.compJson.properties.editCatalougeSetting.currentEdit="",this.$context=s;var c=this.$multis=s.find(".multi-level-list");return c.html(this.create$multi()),"multiLevelDirectory"==this.compJson.properties.tab&&(s.find("#oneLevel").addClass("multi-group-one-level"),s.find("#twoLevel").addClass("multi-group-two-level"),s.find("#threeLevel").addClass("multi-group-three-level"),s.find("#oneLevel").css(r.oneLevel),s.find("#oneLevel").find(".dashed").css({borderBottomColor:r.oneLevel.color}),s.find("#twoLevel").css(r.twoLevel),s.find("#twoLevel").find(".dashed").css({borderBottomColor:r.twoLevel.color}),s.find("#threeLevel").css(r.threeLevel),s.find("#threeLevel").find(".dashed").css({borderBottomColor:r.threeLevel.color})),this.picChangeLevelStyle(),this.timeAxisNodeColor(),this.updateListStyle(),this.swichCatalogueOpen(),this.swichOpOrDown(),"view"==this.eqxPage.eqxScene.config.mode?(this.$multis.find(".multi-group").removeClass("multi-group-edit"),this.$multis.find(".picture-group").removeClass("multi-group-edit"),this.$multis.find(".time-axis-group").removeClass("multi-group-edit")):this.toolBarAddClick(),s}},{key:"addFontFamily",value:function(e){var t=e.fontFamily,n=e.textContent,i=e.compId;g({fontFamily:t,textContent:n,compId:i})}},{key:"bindAfterRenderEvent",value:function(){var e=this,t=this.$context.find("[id=oneLevel]"),n=this.$context.find("[id=twoLevel]");this.switchAddClick(t),this.switchAddClick(n);var i=this.compJson.properties.multiLevelList,o=this.compJson.properties.multiLevel,r="0123456789",a="0123456789",s="0123456789";i.forEach(function(e,t){"oneLevel"==e.level?r+=e.name:"twoLevel"==e.level?a+=e.name:s+=e.name});var c=this.compJson.id;for(var l in o){var u="oneLevel"==l?r:"twoLevel"==l?a:s;e.addFontFamily({fontFamily:o[l].fontFamily,compId:c,textContent:u})}this.timeAxisNodeColor(),this.updateListStyle();var p="";p="multiLevelDirectory"==this.compJson.properties.tab?this.$multis.find(".multi-group"):"singleLevelDirectory"==this.compJson.properties.tab&&1==this.compJson.properties.styleChooseId?this.$multis.find(".picture-group"):this.$multis.find(".time-axis-group");for(var d=function(t){$(p[t]).on("click",function(n){n.stopPropagation();var i=e.multiLevelList[t].jumpPage,o=e.eqxPage.eqxScene.eqxPageList,r=o.findIndex(function(e){return e.pageJson.id==i});e.eqxPage.eqxScene.renderPage(r);var a=!0;e.eqxPage.eqxScene.pageScroll.goToPageById(i,void 0,a)})},h=0;h<p.length;h++)d(h)}},{key:"create$multi",value:function(){var e=this,t=this.compJson,i=t.id,o=t.properties.multiLevelList;this.multiLevelList=o,"string"==typeof o&&(o=JSON.parse(o));var r=this.eqxPage.pageJson.id;o.forEach(function(e,t){e.jumpPage||(e.jumpPage=r)});var a=this.eqxPage.eqxScene.eqxPageList,s=$("<div>");return o.forEach(function(t,o){var r=a.findIndex(function(e){return e.pageJson.id==t.jumpPage});r<0&&(r=0);var c="";c="multiLevelDirectory"==e.compJson.properties.tab?l:"singleLevelDirectory"==e.compJson.properties.tab&&1==e.compJson.properties.styleChooseId?u:p;var d="";d=t.imgUrl?m.FILE+t.imgUrl:n(408)("./"+(o%8+1)+".png");var h=e.$multi({htmlName:c,jumpPage:r+1,index:o,name:t.name,level:t.level,compId:i,imgUrl:d,time:t.time});s.append(h)}),s.html()}},{key:"updateCss",value:function(e){var n=this.compJson.properties.multiLevelCurrent,i=this.compJson.properties.multiLevel,o=Object.keys(i[n]).indexOf(Object.keys(e)[0]);o>=0&&(i[n]=Object.assign(i[n],e),this.updateListStyle()),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateCss",this).call(this,e)}}]),t}(d);e.exports=k},function(e,t){},function(e,t){e.exports='<div id="#{id}" ctype="#{type}" class="element catalogue-style" style="width: 100%;height: 100%"><div class="catalogue-change-container" style="width: 100%;height: 100%; display: flex; align-items: center; justify-content: center"><div class="multi-level-list"></div><div class="time-axis-line"></div></div></div>'},function(e,t){e.exports='<div class="multi-group multi-group-edit" style="pointer-events: auto" id="#{id}"><div for="#{id}" id="#{level}"><span class="eqf-up icon-open-off switch" id="#{id}"></span> <span class="name">#{name}</span> <span class="dashed"></span> <span class="jump-page">#{jumpPage}</span></div><div class="catalogue-bar"><span id="add-catalogue">添加</span> <span id="edit-catalogue">编辑</span> <span id="delete-catalogue">删除</span></div></div>'},function(e,t){e.exports='<div class="picture-group multi-group-edit" style="pointer-events: auto" id="#{id}"><div class="picture-group-every" for="#{id}" id="#{level}"><img class="pic-style" src="#{imgUrl}" id="#{id}" alt=""> <span class="name"><span class="name-text">#{name}</span></span></div><div class="catalogue-bar catalogue-pic-bar"><span id="add-catalogue">添加</span> <span id="edit-catalogue">编辑</span> <span id="delete-catalogue">删除</span></div></div>'},function(e,t){e.exports='<div class="time-axis-group multi-group-edit" style="pointer-events: auto" id="#{id}"><div class="time-group-every" for="#{id}" id="#{level}"><div class="name">#{name}</div><div class="time" id="#{id}" alt="">#{time}</div></div><div class="catalogue-bar catalogue-time-bar"><span id="add-catalogue">添加</span> <span id="edit-catalogue">编辑</span> <span id="delete-catalogue">删除</span></div><div class="time-node"></div></div>'},function(e,t,n){function i(e){return n(o(e))}function o(e){return r[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var r={"./1.png":409,"./2.png":410,"./3.png":411,"./4.png":412,"./5.png":413,"./6.png":414,"./7.png":415,"./8.png":416};i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=408},function(e,t,n){e.exports=n.p+"images/1-c5bd6b.png"},function(e,t,n){e.exports=n.p+"images/2-0ddd81.png"},function(e,t,n){e.exports=n.p+"images/3-7d067b.png"},function(e,t,n){e.exports=n.p+"images/4-d85ddf.png"},function(e,t,n){e.exports=n.p+"images/5-0a7794.png"},function(e,t,n){e.exports=n.p+"images/6-ce1a82.png"},function(e,t,n){e.exports=n.p+"images/7-5ea978.png"},function(e,t,n){e.exports=n.p+"images/8-c57ffe.png"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function T(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:T(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)};n(418);var c=n(36).parse,l=n(419),u=n(101),p=n(24),d=n(420),h=d.weatherMap,f=n(165),g=f.getFontFamilyByContent,m=n(27),v=m.isEditorView,y=n(70),b=y.getLocationByQQMap,x=n(451).getWeatherInfo,w=n(452),k=w.compSizeMap,S={weatherId:"00",temperature:"26~30",location:"北京市海淀区"},I=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{advanceStyle:{opacity:!1}},trigger:{self:!1}}),r}return r(t,e),a(t,[{key:"create$context",value:function(){var e=this,t=this.compJson,n=t.id,i=t.type,o=t.properties,r=void 0,a=void 0;"edit"===this.eqxScene.config.mode?(r=this.get$contextContent(S),a=Promise.resolve()):a=this.getWeatherJson().then(function(t){r=e.get$contextContent(t)});var s=$(c(l,{id:n,type:i}));return o.bgImg&&s.css({background:"url("+p.FILE+o.bgImg.src.replace(/\/crop\//i,"/cut/")+") center center / cover no-repeat"}),a.then(function(){s.append(r)}),s}},{key:"get$contextContent",value:function(e){var t=this.compJson.properties.styleType;switch(e=JSON.parse(JSON.stringify(e)),e.location.length>6&&(e.location=e.location.slice(0,5)+"..."),t){case 1:return $('<div class="comp-style-type style-type-1">\n                            <div class="left">\n                                <div class="temprature">\n                                    <span class="num">'+e.temperature+'</span>\n                                    <span class="unit" style="margin-top: 2px;">°</span>\n                                    <span class="unit" style="margin-top: 4px;">C</span>\n                                </div>\n                                <div class="location">'+e.location+'</div>\n                            </div>\n                            <div class="right">\n                                <img src='+this.getWeatherDataById(e.weatherId,"icon")+' alt="天气icon">\n                                <span class="weather">'+this.getWeatherDataById(e.weatherId,"_weather")+"</span>\n                            </div>\n                        </div>");case 2:return $('<div class="comp-style-type style-type-2">\n                            <div class="temprature">\n                                <span class="num">'+e.temperature+'</span><span class="unit">°</span>\n                            </div>\n                            <span class="weather">'+this.getWeatherDataById(e.weatherId,"_weather")+'</span>\n                            <span class="line">|</span>\n                            <div class="location">'+e.location+"</div>\n                        </div>");case 3:return $('<div class="comp-style-type style-type-3">\n                            <div class="top">\n                                <div class="temprature">\n                                    <span class="num">'+e.temperature+'</span><span class="unit">°</span>\n                                </div>\n                                <span class="weather">'+this.getWeatherDataById(e.weatherId,"_weather")+'</span>\n                            </div>\n                            <div class="location">'+e.location+"</div>\n                        </div>");case 4:return $('<div class="comp-style-type style-type-4">\n                            <div class="temprature">\n                                <span class="num">'+e.temperature+'</span><span class="unit">°</span>\n                            </div>\n                            <div class="location">'+e.location+"</div>\n                            <img src="+this.getWeatherDataById(e.weatherId,"cartoonIcon")+' alt="天气icon">\n                        </div>');case 5:var n=e.temperature+"°"+e.location+(v()?S.temperature+S.location:"");return g({fontFamily:"Zhankukuaileti",textContent:n,compId:this.compJson.id}),$('<div class="comp-style-type style-type-5">\n                            <div class="temprature">\n                                <span class="num">'+e.temperature+'</span><span class="unit">°</span>\n                            </div>\n                            <span class="location-icon eqf-address-f"></span><span class="location-name">'+e.location+"</span>\n                            <img src="+this.getWeatherDataById(e.weatherId,"cartoonIcon")+" >\n                        </div>");case 6:return $('<div class="comp-style-type style-type-6">\n                            <div class="wrapper">\n                                <div class="left">\n                                    <div class="temprature">\n                                        <span class="num">'+e.temperature+'</span><span class="unit">°</span>\n                                    </div>\n                                    <span class="weather">'+this.getWeatherDataById(e.weatherId,"_weather")+'</span>\n                                </div>\n                                <div class="right">\n                                    <span class="location-icon eqf-address-f"></span>\n                                    <span class="location-name">'+e.location+"</span>\n                                </div>\n                            </div>   \n                        </div>");default:return""}}},{key:"getWeatherDataById",value:function(e,t){return h[e]?h[e][t]:h["00"][t]}},{key:"getLocationInfo",value:function(){return b()}},{key:"getWeatherInfo",value:function(e){return x({city:e.city.replace(/[省市]$/,"")})}},{key:"getWeatherJson",value:function(){function e(e){var t=(new Date).getHours(),i=t<6||t>18?e.weather.obj.wid.night:e.weather.obj.wid.day;return{weatherId:i,temperature:e.weather.obj.temperature.replace("/","~").slice(0,-1)||n.temperature,location:e.address&&e.address.city||n.location.city}}var t=this,n=this.compJson.properties;return window.COMP_WEATHER_INFO?Promise.resolve(e(window.COMP_WEATHER_INFO)):this.getLocationInfo().then(function(n){return t.address=n,t.getWeatherInfo(n).then(function(n){return n.success&&200==n.code?(window.COMP_WEATHER_INFO={weather:n,address:t.address},e(window.COMP_WEATHER_INFO)):Promise.reject()})})["catch"](function(e){return console.error("天气组件获取数据失败",e),{weatherId:"",temperature:n.temperature,location:n.location.city}})}},{key:"changeStyleType",value:function(e){var t=this.compJson.properties;t.styleType=e,this.$context.empty(),this.update$li(k[e]),this.$context.append(this.get$contextContent(S))}},{key:"updateBgImg",value:function(){var e=this.compJson.properties;this.$context.css({background:e.bgImg?"url("+p.FILE+e.bgImg.src.replace(/\/crop\//i,"/cut/")+") center center / cover no-repeat":""})}},{key:"eleShow",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleShow",this).call(this)}},{key:"eleHide",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleHide",this).call(this)}}]),t}(u);e.exports=I},function(e,t){},function(e,t){e.exports='<div id="#{id}" ctype="#{type}" class="element comp-weather" style="width: 100%;height: 100%"></div>'},function(e,t,n){"use strict";var i={"00":{weather:"晴",_weather:"晴",icon:n(421),cartoonIcon:n(422)},"01":{weather:"多云",_weather:"多云",icon:n(423),cartoonIcon:n(424)},"02":{weather:"阴",_weather:"阴",icon:n(425),cartoonIcon:n(426)},"03":{weather:"阵雨",_weather:"阵雨",icon:n(427),cartoonIcon:n(428)},"04":{weather:"雷阵雨",_weather:"雷阵雨",icon:n(429),cartoonIcon:n(430)},"05":{weather:"雷阵雨伴有冰雹",_weather:"雷阵雨",icon:n(431),cartoonIcon:n(432)},"06":{weather:"雨夹雪",_weather:"雨夹雪",icon:n(427),cartoonIcon:n(428)},"07":{weather:"小雨",_weather:"小雨",icon:n(433),cartoonIcon:n(434)},"08":{weather:"中雨",_weather:"中雨",icon:n(427),cartoonIcon:n(428)},"09":{weather:"大雨",_weather:"大雨",icon:n(435),cartoonIcon:n(436)},10:{weather:"暴雨",_weather:"暴雨",icon:n(435),cartoonIcon:n(436)},11:{weather:"大暴雨",_weather:"大暴雨",icon:n(435),cartoonIcon:n(436)},12:{weather:"特大暴雨",_weather:"大暴雨",icon:n(435),cartoonIcon:n(436)},13:{weather:"阵雪",_weather:"阵雪",icon:n(437),cartoonIcon:n(438)},14:{weather:"小雪",_weather:"小雪",icon:n(439),cartoonIcon:n(440)},15:{weather:"中雪",_weather:"中雪",icon:n(437),cartoonIcon:n(438)},16:{weather:"大雪",_weather:"大雪",icon:n(441),cartoonIcon:n(442)},17:{weather:"暴雪",_weather:"暴雪",icon:n(441),cartoonIcon:n(442)},18:{weather:"雾",_weather:"雾",icon:n(443),cartoonIcon:n(444)},19:{weather:"冻雨",_weather:"冻雨",icon:n(427),cartoonIcon:n(428)},20:{weather:"沙尘暴",_weather:"沙尘暴",icon:n(445),cartoonIcon:n(446)},21:{weather:"小到中雨",_weather:"中雨",icon:n(427),cartoonIcon:n(428)},22:{weather:"中到大雨",_weather:"大雨",icon:n(435),cartoonIcon:n(436)},23:{weather:"大到暴雨",_weather:"暴雨",icon:n(435),cartoonIcon:n(436)},24:{weather:"暴雨到大暴雨",_weather:"大暴雨",icon:n(435),cartoonIcon:n(436)},25:{weather:"大暴雨到特大暴雨",_weather:"大暴雨",icon:n(435),cartoonIcon:n(436)},26:{weather:"小到中雪",_weather:"中雪",icon:n(437),cartoonIcon:n(438)},27:{weather:"中到大雪",_weather:"大雪",icon:n(441),cartoonIcon:n(442)},28:{weather:"大到暴雪",_weather:"暴雪",icon:n(441),cartoonIcon:n(442)},29:{weather:"浮尘",_weather:"浮尘",icon:n(447),cartoonIcon:n(448)},30:{weather:"扬沙",_weather:"扬沙",icon:n(449),cartoonIcon:n(450)},31:{weather:"强沙尘暴",_weather:"沙尘暴",icon:n(445),cartoonIcon:n(446)},53:{weather:"霾",_weather:"霾",icon:n(443),cartoonIcon:n(444)}};e.exports={weatherMap:i}},function(e,t,n){e.exports=n.p+"images/sun-c71108.png"},function(e,t,n){e.exports=n.p+"images/sun_cartoon-c35424.png"},function(e,t,n){e.exports=n.p+"images/cloudy-b84d50.png"},function(e,t,n){e.exports=n.p+"images/cloudy_cartoon-2d946b.png"},function(e,t,n){e.exports=n.p+"images/shady-222869.png"},function(e,t,n){e.exports=n.p+"images/shady_cartoon-c1a810.png"},function(e,t,n){e.exports=n.p+"images/middleRain-dd17ad.png"},function(e,t,n){e.exports=n.p+"images/middleRain_cartoon-48ec91.png"},function(e,t,n){e.exports=n.p+"images/thunderstorm-5ddb8b.png"},function(e,t,n){e.exports=n.p+"images/thunderstorm_cartoon-e059c8.png"},function(e,t,n){e.exports=n.p+"images/hail-7f3d94.svg"},function(e,t,n){e.exports=n.p+"images/hail_cartoon-c57fab.png"},function(e,t,n){e.exports=n.p+"images/smallRain-75bc96.png"},function(e,t,n){e.exports=n.p+"images/smallRain_cartoon-aa381c.png"},function(e,t,n){e.exports=n.p+"images/heavyRain-bd937a.png"},function(e,t,n){e.exports=n.p+"images/heavyRain_cartoon-b56b76.png"},function(e,t,n){e.exports=n.p+"images/middleSnow-8ecb2d.png"},function(e,t,n){e.exports=n.p+"images/middleSnow_cartoon-a0465a.png"},function(e,t,n){e.exports=n.p+"images/lightSnow-893eda.png"},function(e,t,n){e.exports=n.p+"images/lightSnow_cartoon-726f3d.png"},function(e,t,n){e.exports=n.p+"images/heavySnow-303a20.png"},function(e,t,n){e.exports=n.p+"images/heavySnow_cartoon-b6f987.png"},function(e,t,n){e.exports=n.p+"images/haze-a4b5e9.png"},function(e,t,n){e.exports=n.p+"images/haze_cartoon-f52f0f.png"},function(e,t,n){e.exports=n.p+"images/sandstorm-ee2e74.svg"},function(e,t,n){e.exports=n.p+"images/sandstorm_cartoon-b24408.png"},function(e,t,n){e.exports=n.p+"images/ash-27b616.png"},function(e,t,n){e.exports=n.p+"images/ash_cartoon-5e63e4.png"},function(e,t,n){e.exports=n.p+"images/wind-072751.png"},function(e,t,n){e.exports=n.p+"images/wind_cartoon-63772e.png"},function(e,t,n){"use strict";function i(e){return o({type:"GET",url:r.SERVER_1+"eqs/s/weather/get",data:e})}var o=n(23).ajax,r=n(24);e.exports={getWeatherInfo:i}},function(e,t){"use strict";var n={1:{width:"320px",height:"98px"},2:{width:"227px",height:"60px"},3:{width:"230px",height:"110px"},4:{width:"222px",height:"136px"},5:{width:"320px",height:"84px"},6:{width:"320px",height:"88px"}};e.exports={compSizeMap:n}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function f(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:f(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)};n(454);var c=n(455),l=n(36).parse,u=n(24),p=n(456),d=n(101),h=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{self:!0,compFont:{self:!1,fontFamily:!1,fontSize:!1,fontColor:!1,baseStyle:!1,lineHeight:!1,letterSpacing:!1},compStyle:{self:!0},functionStyle:{self:!0},advanceStyle:{self:!0,"function":!1,border:!0,shadow:!0,sizePos:!0,paddingTop:!0,borderWidth:!0,borderRadius:!0,borderStyle:!0,borderColor:!0,boxShadowSize:!0,boxShadowBlur:!0,boxShadowColor:!0,boxShadowDirection:!0,variable:!1,size:!0,position:!0,rotate:!0,opacity:!0,align:!0},lock:!0},anim:!0,trigger:!1,removeComp:!0,copyComp:!0,sound:!0,link:!1,flexLine:"n,ne,e,se,s,sw,w,nw,r"}),r}return r(t,e),a(t,[{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.properties,o=i.customerLink,r=i.customerImg,a=i.styleType,s=0==a?u.FILE+r.src:p[a],d=$(l(c,{id:t,type:n,customerLink:o,customerImgSrc:s}));return d}},{key:"changeStyleType",value:function(e){var t=this.compJson.properties;t.styleType=e,this.$context.empty(),this.$context.append(this.create$context())}},{key:"updateComp",value:function(){this.$context.empty(),this.$context.append(this.create$context())}},{key:"eleShow",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleShow",this).call(this)}},{key:"eleHide",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleHide",this).call(this)}}]),t}(d);e.exports=h},function(e,t){},function(e,t){e.exports='<div id="#{id}" ctype="#{type}" style="width: 100%;height: 100%" class="customer-care-box"><a class="customer-link" href="#{customerLink}" target="_blank"><img class="customer-img" src="#{customerImgSrc}" alt="客服按钮图片"></a></div>'},function(e,t,n){"use strict";e.exports={1:n(457),2:n(458),3:n(459)}},function(e,t,n){e.exports=n.p+"images/customer1-7c6640.png"},function(e,t,n){e.exports=n.p+"images/customer2-00bb48.png"},function(e,t,n){e.exports=n.p+"images/customer3-d538c6.gif"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=e.id,n=e.type,i=e.css,o=e.content,r=void 0===o?"":o;return i.cursor="default",i.fontSize&&(i.fontSize=u(i.fontSize)),i.minHeight="inherit",$(g(h,{id:t,type:n,content:r})).css(i)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function P(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:P(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)};n(461);var l=(n(24),n(166)),u=(l.addGlobalStyle,l.addSuffixPx),p=n(165),d=p.addFontStyle,h=(p.getFontFamilyByContent,
n(462)),f=n(101),g=n(36).parse,m=n(26),v=m.openUrl,y=m.extYqcLimit,b=n(84).isNewScene,x=n(67).getForbiddenTexts,w=n(66),k=w.perfectStr,S=w.getDangerousStr,I=n(205),T=I.openWxMiniPath,E=function(e){function t(e,n){i(this,t),e.content=k(S(e.content));var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!0,color:!0}},link:!1}),r}return r(t,e),s(t,[{key:"getFtEditableProps",value:function(){return[]}},{key:"getFtValue",value:function(e){var n=this.FtEditableProps;return e===n.content.content?this.compJson.content:c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtValue",this).call(this,e)}},{key:"updateContent",value:function(e){this.compJson.content=e;var t=this.create$context();this.$context.replaceWith(t),this.$context=t}},{key:"update$ContentCss",value:function(e){this.$context.css(e)}},{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.content,o=e.sceneId,r=(e.publishTime,e.css),s=r.fontSize,c=r.writingMode,l=e.properties.anim,u=void 0===l?[]:l,p={fontSize:s};b(this.eqxScene.meta)&&(p.fontFamily="HT"),this.$boxDiv.css("minHeight",""),this.$boxDiv.css("minWidth",""),c&&(p["-webkit-writing-mode"]=c,p.writingMode=c,"vertical-rl"===c&&(p.textRendering="optimizeLegibility")),i&&(i.length>4e3&&(i=i.substr(0,4e3)),i=i.replace(/(eval|script|atob)/g,""));var h=x();h.length>0&&i&&h.forEach(function(e){var t=new RegExp(e);i=i.replace(t,"")});var f=a({id:t,type:n,content:i,css:p});return c&&"vertical-rl"===c&&f.css("padding","15px 0.3em"),d({mode:this.eqxScene.config.mode,sceneId:o,publishTime:this.eqxScene.meta.publishTime}),u[0]&&"typer"===u[0].type&&f.css({opacity:0}),f}},{key:"bindAfterRenderEvent",value:function(e,t){var n=this,i=t.pageId;return"x"===t.type&&t.properties.url?$(e).click(function(){var e=t.properties.url;Number.isInteger(+e)?n.eqxScene.pageScroll.goToPageById(e):v(e,i)}):$(e).find("a[href]").toArray().forEach(function(e){var o=$(e).attr("href");if(2!=t.type||!o||t.properties&&t.properties.isBrand){var r=$(e).attr("data-go-straight"),a=$(e).attr("data-mini-naviagte"),s=$(e).attr("data-not-limit");$(e).removeAttr("href").css("cursor","pointer").click(function(){if(/eqs\/link\?id=\d+&url=(.*)/.exec(o)&&(o=/eqs\/link\?id=\d+&url=(.*)/.exec(o)[1]),Number.isInteger(+o))n.eqxScene.pageScroll.goToPageById(+o);else if(a)T({url:o});else{var t=$(e).find("font"),c="尾页链接跳转点击";if(t&&t.length>0&&t[0].innerText&&(c=t[0].innerText),n.eqxScene.trackManager.lastPageClickTrack({scene_id:n.eqxScene.meta.id,product:"h5",e_t:"element_click",b_t:"h5_last_page",cat:"",act:c}),r){if(!s&&y())return;return void $(e).attr("href",o)}v(o,i,s)}})}}),!0}},{key:"addClassToLi",value:function(e){e.addClass("wsite-text")}},{key:"clearRichText",value:function(){this.compJson.content=this.$context.text(),this.compJson.css.writingMode="horizontal-tb",this.$context.html(this.compJson.content),this.$context.css("writingMode","horizontal-tb")}},{key:"settingGroupStyle",value:function(e){Object.assign(this.compJson.css,e),this.update$boxDiv(e)}},{key:"adjustHeight",value:function(){this.$li.css({height:"",width:""}),this.$context.css({height:"",width:""});var e=this.$boxDiv.height(),t=this.$boxDiv.width();this.update$li({height:e,width:t}),this.$context.css({height:e,width:t})}}]),t}(f);e.exports=E},function(e,t){},function(e,t){e.exports='<div id="#{id}" ctype="#{type}" class="element comp_paragraph editable-text" style="cursor: default; -webkit-user-select: auto">#{content}</div>'},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function u(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:u(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)},c=n(460),l=function(e){function t(e,n){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return r(t,e),a(t,[{key:"create$context",value:function(){var e=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"create$context",this).call(this);return e&&e.find("a.deepShareHref")[0]&&e.find("a.deepShareHref")[0].setAttribute("href","http://click.hm.baidu.com/app.gif?ap=62563&ch=45774"),e}}]),t}(c);e.exports=l},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=1;if(!e){var n=document.documentElement.clientWidth||320,i=document.documentElement.clientHeight||486;t=n/i>=320/486?i/486:n/320}var o="width=320, initial-scale="+t+", maximum-scale="+t+", user-scalable=no";document.getElementById("viewport").setAttribute("content",o)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function w(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:w(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)};n(465);var l=n(466).$getReportOptions,u=n(467),p=n(460),d=n(36).parse,h=n(66),f=h.perfectStr,g=h.getDangerousStr,m=n(30),v=n(31).delayLoadJSAndCSS,y=[],b=[{id:14258,name:"内容涉及违规",value:1},{id:14259,name:"诱导浏览者分享",value:2},{id:14260,name:"场景内容侵权",value:3},{id:14302,name:"内容夸大宣传",value:4},{id:14303,name:"违背易企秀用户协议",value:5},{id:14304,name:"其它原因",value:6}],x=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.show=!r.eqxPage.eqxScene.config.disableReport,r.$report=null,v(m.reportJs,"js"),r}return r(t,e),s(t,[{key:"eleHide",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleHide",this).call(this),this.hide()}},{key:"eleShow",value:function(){return this.show?c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleShow",this).call(this):this}},{key:"hide",value:function(){this.$report&&this.$report.hide()}},{key:"addClassToLi",value:function(e){this.show||this.$li.css("display","none")}},{key:"bindAfterRenderEvent",value:function(e,t){var n=this;$(e).on("click",function(e){e.stopPropagation(),n.openReportModal()})}},{key:"openReportModal",value:function(){window.handleReport({appKey:"eqxiu",title:window.scene.title,productKey:"h5_page",sceneId:window.scene.id,sceneCode:window.scene.code,onShow:function(){a(1),$("body").find(".ui-dialog-container").css("background-color","#000000")},onRemove:function(){a(),$("body").find(".ui-dialog-container").css("background-color","rgba(25, 28, 34, 0.88)")}})}},{key:"getSelectOption",value:function(){return new Promise(function(e,t){return y.length?e(y):l().then(function(n){y=n.list,y.length?e(y):t()})["catch"](function(){return y=b,e(y)})})}},{key:"reportPanel",value:function(e){var t=e.imgSrc,n=e.reasonList,i=n.map(function(e,t){var n=e.id,i=e.name,o=(e.value,0==t?'class="active"':"");return'<li value="'+n+'" '+o+"><span>"+i+"</span></li>"}).join(""),o="";return this.eqxPage.eqxScene.getOrientation().isLandScape()&&(o="report_landscape"),$(d(u,{imgSrc:t,reasons:f(g(i)),customClass:o}))}}]),t}(p);e.exports=x},function(e,t){},function(e,t,n){"use strict";function i(){var e=a.SERVER_2+"eqs/class/expose_types";return r({type:"GET",url:e,xhrFields:{withCredentials:!1}})}function o(e){var t=e.sceneId,n=e.type;return r({type:"POST",url:a.SERVER_1+"eqs/s/expose",data:{sceneId:t,type:n}})}var r=n(23).ajax,a=n(24);e.exports={$getReportOptions:i,$postReport:o}},function(e,t,n){e.exports='<div id="report0" class="#{customClass}"><div id="report1"><div id="report2"><p><img src="'+n(468)+'" width="50px;"></p><h1>请选择举报原因</h1></div><div id="report3"><ul id="reportList">#{reasons}</ul></div><div id="report4"><a id="reportSubmit" data-event="11203">提交举报</a></div></div></div>'},function(e,t,n){e.exports=n.p+"images/jubao_03-db9a15.png"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=e.id,n=e.html,i=e.type,o=e.marginTop,r=e.marginBottom,a=e.css,s=e.content,c=void 0===s?"":s;return a.cursor="default",a.minHeight="inherit",a.fontSize&&(a.fontSize=p(a.fontSize)),$(m(n,{id:t,type:i,content:c,marginTop:o,marginBottom:r})).css(a)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function k(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:k(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)},l=n(101),u=n(166),p=u.addSuffixPx,d=n(165),h=d.addFontStyle,f=n(470),g=n(471),m=n(36).parse,v=n(67).getForbiddenTexts,y=n(66),b=y.perfectStr,x=y.getDangerousStr,w=function(e){function t(e,n){i(this,t),e.content=b(x(e.content));var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compFont:{self:!0,fontFamily:!0,fontSize:!0,fontColor:!0,bgColor:!0,baseStyle:!0,lineHeight:!0,letterSpacing:!0},compStyle:{backgroundColor:!0},advanceStyle:{variable:!0,"function":!0},functionStyle:{variableText:!0,adjustMode:!0,replace:!1}},link:!0,flexLine:"n,s,w,e,r"}),r}return r(t,e),s(t,[{key:"getFtEditableProps",value:function(){var e=c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtEditableProps",this).call(this),n=this.FtEditableProps;return[n.content.content,n.color.color].concat(e,[n.link.url,n.internalLink.internalLink,n.telephone.number])}},{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.content,o=e.sceneId,r=e.css,s=r.letterSpacing,c=void 0===s?0:s,l=r.fontFamily,u=r.fontSize,p=r.writingMode,d=r.marginTop,m=void 0===d?"0px":d,y=r.marginBottom,b=void 0===y?"0px":y,x=e.properties.anim,w=void 0===x?[]:x;e.properties.isReplace=e.properties.isReplace||!1,i&&(i.length>4e4&&(i=i.substr(0,4e4)),i=i.replace(/(eval|script|atob)/g,""),i=i.replace(/<\/?a.*?>/g,""),i=i.replace(/<\/?(?!span|br|div|ul|ol|p|li\b)\w+\b[^<>]*>/g,"")),i=i||"双击编辑文本";var k=v();k.length>0&&i&&k.forEach(function(e){var t=new RegExp(e);i=i.replace(t,"")});var S=f;/<span|ol|ul|div.*?>/.test(i)&&(S=g);var I=a({html:S,id:t,type:n,content:i,marginTop:m,marginBottom:b,css:{fontFamily:l,fontSize:u,writingMode:p}});return h({mode:this.eqxScene.config.mode,fontFamily:l,sceneId:o,publishTime:this.eqxScene.meta.publishTime}),11===(e.id+"").length&&this.$li.attr("_tracker_data_",JSON.stringify({id:e.id})),w[0]&&"typer"===w[0].type&&I.css({opacity:0}),I.css({letterSpacing:parseFloat(c||0)+"em"}),I}},{key:"create$liBack",value:function(){return this.$liBack=this.$li.clone().css("opacity",0),this.$li.parent().append(this.$liBack),this.$liBack}},{key:"getNewHeightWidth",value:function(e,t){var n=JSON.parse(JSON.stringify(this.compJson.css));Object.assign(n,t,{opacity:0,zIndex:-1}),this.$liBack.css(n);var i=t.width,o=t.height,r=this.$liBack.find("#"+this.compJson.id),a=this.$liBack.find("span"),s=parseInt(r.css("padding")),c=a.height()+2*s;return e.width===t.width&&e.height===t.height?o=this.$li.height():e.width!==t.width?(o=this.$li.height(),c>=o&&(o=c)):e.height!==t.height&&o<c&&(o=c),{height:o,width:i}}},{key:"remove$liBack",value:function(){this.$liBack&&this.$liBack.remove()}},{key:"updateContent",value:function(e){this.compJson.content=e;var t=this.create$context();this.$context.replaceWith(t),this.$context=t}},{key:"update$ContentCss",value:function(e){this.$context.css(e)}},{key:"autoAdjustSize",value:function(){function e(e){var t=e.$context,n=e.$context.children(),i=parseInt(t.css("padding")),o=n.height(),r={height:o+2*i};return"vertical-rl"==e.compJson.css.writingMode&&(r={width:n.width()+2*i}),e.update$li(r),{height:parseInt(e.$li.css("height")),width:parseInt(e.$li.css("width"))}}function t(t,n){if(void 0!==n&&null!==n){var r=320,a=t.$context,s=t.$context.children(),c=o(s);if(c<a.width()){var l={width:c+2*parseInt(a.css("padding"))};t.update$li(l),t.update$boxDiv(l),a.css(l)}else if(c>=a.width())for(var u=s.height(),p=a.height(),d=a.width();u>p&&d<r;)i(t),u=s.height(),p=a.height(),d=a.width();return e(t)}}function n(t,n){if(void 0!==n&&null!==n){var i=t.$context,o=t.$context.children();if(1===n){for(;r(i,o,n)&&a(i)>l;)s(t);if(r(i,o,n)&&a(i)<=l)return e(t)}else{if(0!==n)return e(t);for(;r(i,o,n)&&a(i)<u;)c(t);r(i,o,n)||s(t)}return{height:parseInt(t.$li.css("height")),width:parseInt(t.$li.css("width"))}}}function i(e){var t=e.$context,n=parseFloat(t.css("width"))+1,i={width:n+"px"};e.update$li(i),e.update$boxDiv(i),t.css(i)}function o(e){var t=e.css("display","inline").width();return e.css("display","block"),t}function r(e,t,n){return n?t.height()>e.height():t.height()<e.height()}function a(e){return parseInt(e.css("font-size"))}function s(e){function t(e,t,n,i){t=parseFloat(t);var o=null;return o=t<5?parseInt(i/(t*n)):parseInt(i/t),o*e}var n=e.$context,i=e.$context.children(),o=e.compJson.content,r=a(n),s=i.width(),c=e.compJson.css.lineHeight,u=e.compJson.css.height;if(s=t(s,c,r,u),r>l&&s<o.length*r+2){for(var p=r-1;s<o.length*p+2;)p-=1;var d={fontSize:p+"px"};e.update$li(d),e.update$boxDiv(d),n.css(d)}}function c(e){var t=e.$context,n=a(t);if(n<u){var i={fontSize:n+1+"px"};e.update$li(i),e.update$boxDiv(i),t.css(i)}}var l=12,u=96,p=this.compJson.properties,d=p.adjustWHMode,h=p.adjustFSMode,f=arguments.length?arguments[0]:null;return arguments.length&&arguments[1]&&(d=!0),d?n(this,f):h?t(this,f):e(this)}}]),t}(l);e.exports=w},function(e,t){e.exports='<div id="#{id}" ctype="#{type}" class="element flexo-new-text-comp" style="padding: 5px;width: 100%;height: 100%"><span style="display: block;margin-top: #{marginTop};margin-bottom: #{marginBottom};color: inherit;-ms-word-wrap:break-word;word-wrap: break-word; -webkit-user-select: auto">#{content}</span></div>'},function(e,t){e.exports='<div id="#{id}" ctype="#{type}" class="element flexo-new-text-comp" style="cursor: default; -webkit-user-select: auto;padding: 5px;width: 100%;height: 100%">#{content}</div>'},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(469),s=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{base:{self:!1},border:{self:!1},boxShadow:{self:!1},compFont:{self:!0,fontFamily:!0,fontSize:!0,fontColor:!0,baseStyle:!0,lineHeight:!0,letterSpacing:!0},compStyle:{backgroundColor:!0},advanceStyle:{variable:!0}},link:!0,flexLine:"w,e,r"}),r}return r(t,e),t}(a);e.exports=s},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=e.id,n=e.type,i=e.marginTop,o=e.marginBottom,r=e.css,a=e.content,s=void 0===a?"":a;return r.cursor="default",r.minHeight="inherit",r.fontSize&&(r.fontSize=d(r.fontSize)),$(m(g,{id:t,type:n,content:s,marginTop:i,marginBottom:o})).css(r)}function s(e){return Math.floor(Math.random()*e)}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function y(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:y(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)},u=n(101),p=n(166),d=p.addSuffixPx,h=n(165),f=h.addFontFamily,g=n(474),m=n(36).parse,v=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),a=e.properties.contentType;return"t"===a?$.extend(!0,r.$ability,{style:{compFont:{self:!0,fontFamily:!0,fontSize:!0,fontColor:!0,bgColor:!0,baseStyle:!0,lineHeight:!0,letterSpacing:!0},compStyle:{backgroundColor:!0},advanceStyle:{"function":!0}},link:!0}):"i"===a&&$.extend(!0,r.$ability,{style:{base:{lineHeight:!1,color:!1,paddingTop:!1},compStyle:{backgroundColor:!1},imageStyle:!0}}),r}return r(t,e),c(t,[{key:"getFtEditableProps",value:function(){var e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtEditableProps",this).call(this),n=this.FtEditableProps,i=this.compJson.properties.contentType;return"t"===i?e.concat([n.tRandom.tRandom]):"i"===i?e.concat([n.iRandom.iRandom]):e}},{key:"getFtValue",value:function(e){var n=this.FtEditableProps;return e===n.tRandom.tRandom?this.getProp("texts"):e===n.iRandom.iRandom?this.getProp("imgs"):l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtValue",this).call(this,e)}},{key:"create$context",value:function(){var e=this.compJson,t=e.properties.contentType;if("t"===t){var n=e.id,i=e.type,o=e.sceneId,r=e.css,c=r.fontFamily,l=r.fontSize,u=r.writingMode,p=r.marginTop,d=void 0===p?"0px":p,h=r.marginBottom,g=void 0===h?"0px":h,m=e.properties,v=m.anim,y=void 0===v?[]:v,b=m.texts,x=void 0===b?[]:b,w="view"===this.eqxScene.config.mode?s(x.length):0,k=x[w]||"双击编辑文本",S=a({id:n,type:i,content:k,marginTop:d,marginBottom:g,css:{fontFamily:c,fontSize:l,writingMode:u}});return f({mode:this.eqxScene.config.mode,fontFamily:c,sceneId:o}),y[0]&&"typer"===y[0].type&&S.css({opacity:0}),S}if("i"===t){var I=e.id,T=e.type,E=e.properties;E=void 0===E?{}:E;var P=E.imgs,_=void 0===P?[]:P,C=E.bgColor,A=e.css,O=A.width,q=A.height,L="view"===this.eqxScene.config.mode?s(_.length):0,M=this.getImgSrc(_[L].src,{width:O,height:q}),R=$('<div id="'+I+'" \n                                   class="random-content element" \n                                   ctype="'+T+'"\n                                   style="width: 100%;height: 100%;"></div>').css("background-color",C),j=this.$img=$('<div class="random-content-image"\n                                           style="width: 100%;height: 100%;">').css({backgroundImage:"url('"+M+"')",backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"center"});return R.append(j),R}}},{key:"updateContent",value:function(e){this.$context.children().html(e)}},{key:"updateImg",value:function(e){var t=this.compJson.css,n=t.width,i=t.height,o=this.getImgSrc(e,{width:n,height:i});this.$img.css("background-image","url('"+o+"')")}},{key:"updateTurnOver",value:function(e){this.$boxContentDiv.css("transform",e)}},{key:"autoAdjustSize",value:function(){var e=this.$context,t=this.$context.children(),n=parseInt(e.css("padding")),i=t.height(),o={height:i+2*n};return this.update$li(o),{height:parseInt(this.$li.css("height")),width:parseInt(this.$li.css("width"))}}}]),t}(u);e.exports=v},function(e,t){e.exports='<div id="#{id}" ctype="#{type}" class="element" style="padding: 5px;width: 100%;height: 100%"><span style="display: block;\n                 margin-top: #{marginTop};\n                 margin-bottom: #{marginBottom};\n                 color: inherit;\n                 word-break: break-all">#{content}</span></div>'},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(476),c=n(101),l=n(27).isIOS,u=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{self:!0,backgroundColor:!0},functionStyle:{self:!0,required:!0},compFont:{fontColor:!0},advanceStyle:{"function":!0}},trigger:{self:!1},sound:!1,link:!1}),r.eqxScene.formManager.add(r),r}return r(t,e),a(t,[{key:"check",value:function(){var e=this.$select.find("option:selected").text(),t=this.compJson.properties.required,n=Number(this.$select.val()),i={success:!0,pageId:this.pageId,key:this.name,value:e};return t&&!n&&(i.success=!1,i.message="下拉框 '"+e+"' 为必选项"),i}},{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.pageId,i=e.type,o=e.required,r=e.css,a=r.borderWidth,c=r.backgroundColor;a||(e.css.borderWidth=0,e.css.borderColor="rgba(8, 161, 239, 1)",this.$boxDiv.css("borderWidth","0"),this.$boxDiv.css("borderColor","rgba(8, 161, 239, 1)")),c||(e.css.backgroundColor="#ffffff",this.$boxDiv.css("backgroundColor","#ffffff"));var l=e.choices||{},u=l.options||[];this.name="eq[f_"+t+"]",this.required=o,this.pageId=n;var p=s.$compDiv({id:t,type:i,required:o}),d=this.$select=p.find("select"),h=u.map(function(e){return s.$option({selected:e.selected,value:e.value,label:e.label})});return d.append(h),p}},{key:"changeOption",value:function(){var e=this.compJson.choices.options||[],t=e.map(function(e){return s.$option({selected:e.selected,value:e.value,label:e.label})});this.$select.empty(),this.$select.append(t)}},{key:"bindAfterRenderEvent",value:function(){return this.eqxPage.pageJson.properties.longPage||this.$li.bind("touchstart mousedown",function(e){e.stopPropagation()}),l()&&this.$select.on("blur change",function(){var e=document.documentElement.scrollTop||document.body.scrollTop;window.scrollTo(0,0,e)}),!0}}]),t}(c);e.exports=u},function(e,t,n){"use strict";function i(e){var t=e.id,n=e.type,i=e.required,o=void 0===i?null:i,s=$(a(r,{id:t,type:n}));return s.find("#"+t).attr("required",o),s}function o(e){var t=e.selected,n=void 0===t?null:t,i=e.value,o=e.label;i&&(i=c(i)),o&&(o=c(o));var r=$('<option  class="comp_select_option" value="'+i+'">'+o+"</option>").attr("selected",n);return r}var r=n(477);n(478);var a=n(36).parse,s=n(66),c=s.perfectStr;e.exports={$compDiv:i,$option:o}},function(e,t){e.exports='<div class="comp_drop_down" style="width:100%;height:100%" id="#{id}" ctype="#{type}"><select style="width:100%;height:100%" name="eq[f_#{id}]" class="comp_drop_down_select" ctype="#{type}"></select></div>'},function(e,t){},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function g(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:g(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)},c=n(27).mobilecheck,l=n(27).isAndroidPhone,u=n(101),p=n(480),d=n(36).parse;n(481);var h=n(27).isIOS,f=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{fontColor:!0},functionStyle:{required:!0},advanceStyle:{"function":!0}},trigger:{self:!1},link:!1}),r.eqxScene.formManager.add(r),r.variablesValue="",r}return r(t,e),a(t,[{key:"getFtEditableProps",value:function(){var e=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtEditableProps",this).call(this),n=this.FtEditableProps;return e.concat([n.input.input])}},{key:"getFtValue",value:function(e){var n=this.FtEditableProps;return e===n.input.input?this.compJson.type:s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtValue",this).call(this,e)}},{key:"check",value:function(){var e=this.$li.find("#"+this.id).val(),t={success:!0,pageId:this.pageId,key:this.name,value:e,type:this.type};return this.required&&!e&&(t.success=!1,t.message=this.placeholder+" 为必填项"),t}},{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.pageId,i=e.type,o=e.properties,r=o.required,a=void 0===r?null:r,s=o.placeholder,c=void 0===s?null:s;this.required=a,this.name="eq[f_"+t+"]",this.pageId=n,this.placeholder=c,this.id=t;var l=$(d(p,{id:t,type:i}));return l.filter("textarea").attr({required:a,placeholder:c}),l}},{key:"setInputTitle",value:function(e){this.$context.filter("textarea").attr("placeholder",e)}},{key:"update$context",value:function(){var e=this.compJson.type;"505"==e?(this.$context.filter("textarea").attr({readonly:"readonly"}),this.$context.filter(".date-icon").removeClass("hide-date")):(this.$context.filter("textarea").removeAttr("readonly"),this.$context.filter(".date-icon").addClass("hide-date"))}},{key:"bindAfterRenderEvent",value:function(e,n){var i=c();return this.eqxPage.pageJson.properties.longPage||t.touchStartMouseDownStopPropagation($(e).find("textarea")),this.onFocusBlurWhenFlip($(e).find("textarea")),this.onChangeTriggerVar($(e).find("textarea")),this.onFocusInTrigger($(e).find("textarea")),i&&parseFloat(n.css.top)>=200&&l()&&$(e).find("textarea").focus(function(e){setTimeout(function(){e.target.scrollIntoViewIfNeeded()},500)}).blur(function(){var e=$(this).parents(".m-img");e.css("position","fixed"),setTimeout(function(){e.css("position","")},100)}),!0}},{key:"onFocusBlurWhenFlip",value:function(e){var t=this;e.focus(function(){t.eqxScene.pageScroll.pauseAutoFlip()}).blur(function(){h()&&(window.scrollTo(0,0),t.eqxPage.$editDiv.offset()),t.eqxScene.pageScroll.canAutoFlip&&t.eqxScene.pageScroll.startAutoFlip()})}},{key:"onChangeTriggerVar",value:function(e){var t=this;e.on("change input",function(){var n=e.val();t.variablesValue=n;var i=t.variables;i&&i.length&&i.forEach(function(e){if("7"===e.type.toString()){var t=e.compJson.content||"";if(/<span/.test(t)){var i=e.compJson.id;e.$li.find("#"+i+" span").text(n)}else e.updateContent(n)}}),t.id.toString().indexOf("_mask")>-1&&t.eqxScene.eventManager.publish("inputChangeMask",{id:t.id,value:n})}),this.eqxScene.eventManager.subscribe("inputChangeMask",{update:function(n){var i=n.data.id;if(t.id+"_mask"===i){e.val(n.data.value),t.variablesValue=n.data.value;var o=t.variables;o&&o.length&&o.forEach(function(e){"7"===e.type.toString()&&e.updateContent(n.data.value)})}}})}},{key:"addClassToLi",value:function(e){e.addClass("wsite-input")}},{key:"onFocusInTrigger",value:function(e){var t=this;c()&&this.eqxScene.getOrientation().isLandScape()&&e.on("focusin",function(e){t.eqxPage===t.eqxScene.currentPage&&(t.eqxScene.eventManager.publish("formMask",{comp:t}),$(e.currentTarget).blur(),e.preventDefault())})}}],[{key:"touchStartMouseDownStopPropagation",value:function(e){$(e).bind("touchstart mousedown",function(e){e.stopPropagation()})}}]),t}(u);e.exports=f},function(e,t){e.exports='<textarea id="#{id}" ctype="#{type}" class="element comp_input editable-text" maxlength="300" name="eq[f_#{id}]" style="width: 100%;height:100%;box-sizing:border-box;-webkit-overflow-scrolling:touch;user-select: none">\n</textarea><div class="date-icon hide-date"><span class="eqf-calendar-f"></span></div>'},function(e,t){},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function p(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)},c=n(479),l=n(483).isEmail,u=function(e){function t(e,n){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return r(t,e),a(t,[{key:"check",value:function(){var e=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"check",this).call(this);
return e.success?(e.value&&!l(e.value)&&(e.success=!1,e.message=this.placeholder+" 格式不对"),e):e}}]),t}(c);e.exports=u},function(e,t){"use strict";function n(e){var t=/(\d{11})|^((\d{7,8})|(\d{4}|\d{3})-(\d{7,8})|(\d{4}|\d{3})-(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1})|(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1}))$/;return t.test(e)}function i(e){var t=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;return t.test(e)}e.exports={isPhoneNumber:n,isEmail:i}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function p(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)},c=n(479),l=n(483).isPhoneNumber,u=function(e){function t(e,n){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return r(t,e),a(t,[{key:"check",value:function(){var e=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"check",this).call(this);return e.success?(e.value&&!l(e.value)&&(e.success=!1,e.message=this.placeholder+" 格式不对"),e):e}}]),t}(c);e.exports=u},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function f(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:f(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)},c=n(479),l=n(27).mobilecheck,u=n(30),p=n(31),d=n(25).$loaderLayDate,h=function(e){function t(e,n){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return r(t,e),a(t,[{key:"create$context",value:function(){var e=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"create$context",this).call(this);if(e.filter("textarea").attr({readonly:"readonly"}),e.filter(".date-icon").removeClass("hide-date"),"view"===this.eqxScene.config.mode){var n=this;Promise.all([d(),p.delayLoadJSAndCSS(u.laydateCss,"css")]).then(function(){laydate.render({elem:e.filter("textarea")[0],min:"1900-1-1",max:"2050-12-31",trigger:"click",done:function(e,t,i){n.$li.find("textarea").trigger("change")}})})}return e}},{key:"bindAfterRenderEvent",value:function(e,n){return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"bindAfterRenderEvent",this).call(this,e,n),l()||($(e).find("textarea").on("click",function(e){e.stopPropagation()}),setTimeout(function(){var t=$(e.parents(".nr")[0]);t.off("click.laydate").on("click.laydate",function(e){var t=$(".layui-laydate");t.length&&t.remove()})})),!0}},{key:"eleHide",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleHide",this).call(this);var e=$(".layui-laydate");e.length&&e.remove()}}]),t}(c);e.exports=h},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(487),c=n(101),l=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{self:!1,fontFamily:!1},functionStyle:{required:!0},advanceStyle:{"function":!0}},trigger:{self:!1},sound:!1,link:!1}),r.eqxScene.formManager.add(r),r}return r(t,e),a(t,[{key:"check",value:function(){var e=this.$score.val(),t={success:!0,pageId:this.pageId,key:this.name,value:e};return this.required&&!e&&(t.success=!1,t.message="评分项: "+this.title+" 为必填项"),t}},{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.pageId,i=e.type,o=e.title,r=e.properties,a=r.required,c=r.icon,l=r.size,u=r.color,p=s.$compDiv({id:t,type:i,required:a,title:o});this.required=a,this.title=o,this.name="eq[f_"+t+"]",this.pageId=n;var d=[1,2,3,4,5].map(function(){return s.icon({icon:c,size:l})});return p.find(".rating-icons").append(d).css({color:u}),this.$score=p.find('input[type="hidden"]'),this.$titleDiv=p.find(".rating-title"),p}},{key:"update$iconColor",value:function(e){this.$context.find(".rating-icons").css({color:e})}},{key:"update$titleDiv",value:function(e){this.$titleDiv.text(e)}},{key:"updateAttrRequire",value:function(e){this.$context.attr("required",e)}},{key:"update$icon",value:function(e,t){this.$context.find("i").removeClass().addClass(e+" "+t)}},{key:"bindAfterRenderEvent",value:function(e,t){function n(e){o.each(function(t,n){$(n).removeClass(s+"-f").addClass(s+"-l"),t<=e&&$(n).removeClass(s+"-l").addClass(s+"-f")})}var i=$(e),o=i.find("i"),r=i.find("input"),a=t.properties.icon.split("-"),s=a[0]+"-"+a[1];o.each(function(e,t){$(t).attr("data-event","11211"),$(t).bind("click",function(){n(e),r.val(e+1)}).bind("mouseenter",function(){return n(e)})});var c=!1;return this.eqxPage.pageJson.properties.longPage||(c=!0),i.find(".rating-icons").bind("mouseleave",function(){return n(~~r.val()-1)}).bind("touchstart mousedown",function(e){c&&e.stopPropagation()}),!0}}]),t}(c);e.exports=l},function(e,t,n){"use strict";function i(e){var t=e.id,n=e.type,i=e.title,o=e.required,s=void 0===o?null:o;return $(a(r,{id:t,type:n,title:i})).attr("required",s)}function o(e){var t=e.icon,n=e.size;return'<i class="'+n+" "+t+'"></i>'}n(488);var r=n(489),a=n(36).parse;e.exports={$compDiv:i,icon:o}},function(e,t){},function(e,t){e.exports='<div class="element comp_rating editable-text" style="width: 100%;height:100%" id="#{id}" ctype="#{type}" title="#{title}" name="eq[f_#{id}]"><div class="rating-title">#{title}</div><div class="rating-icons"></div><input type="hidden" name="eq[f_#{id}]" value=""></div>'},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function u(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:u(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)},c=n(491),l=function(e){function t(e,n){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return r(t,e),a(t,[{key:"$compDiv",value:function(e){return e.title+="(可多选)",s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"$compDiv",this).call(this,e)}},{key:"$option",value:function(e){return e.inputType="checkbox",s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"$option",this).call(this,e)}},{key:"updateTitle",value:function(){var e=this.compJson.title+"(可多选)";return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateTitle",this).call(this,e)}}]),t}(c);e.exports=l},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(492);var s=n(101),c=n(493),l=n(494),u=n(36).parse,p=n(66),d=p.perfectStr,h=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!1},compFont:{self:!1,fontFamily:!1},functionStyle:{required:!0},advanceStyle:{"function":!0}},trigger:{self:!1},sound:!1,link:!1}),r.eqxScene.formManager.add(r),r}return r(t,e),a(t,[{key:"check",value:function(){var e=this.$options.find("input.option[name]").toArray().filter(function(e){return e.checked}).map(function(e){return $(e).val()}).filter(function(e){return!!e}).join(","),t={success:!0,pageId:this.pageId,key:this.name,value:e};return this.required&&!e&&(t.success=!1,t.message=this.title+" 为必填项"),t}},{key:"$compDiv",value:function(e){var t=e.id,n=e.required,i=void 0===n?null:n,o=e.title,r=void 0===o?"标题":o,a=e.type,s=e.css;return $(u(l,{id:t,title:r,type:a,css:s})).attr({required:i})}},{key:"$option",value:function(e){var t=e.compId,n=e.index,i=e.optionId,o=e.optionLabel,r=e.inputType,a=void 0===r?"radio":r,s=""+t+n;return $(u(c,{id:s,inputType:a,compId:t,optionId:i,optionLabel:o}))}},{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.pageId,i=e.type,o=e.properties,r=o.required,a=o.titleStyle,s=void 0===a?{}:a,c=e.title,l=e.css.height;this.title=c,this.pageId=n,this.name="eq[f_"+t+"]",this.required=r;var u=this.$compDiv({id:t,required:r,title:c,type:i,css:{height:l,width:"100%"}});u.find(".radio-title").css(s),s.backgroundColor=s.backgroundColor||"#1261FF";var p=this.$options=u.find(".options");return p.html(this.create$options()),this.updateHeadBgColor(s.backgroundColor),u}},{key:"create$options",value:function(){var e=this,t=this.compJson,n=t.id,i=(t.properties.optionStyle,t.choices);"string"==typeof i&&(i=JSON.parse(i));var o=$("<div>");i.options.length-1;return i.options.forEach(function(t,i){var r=e.$option({compId:n,index:i,optionId:t.id,optionLabel:t.label});o.append(r)}),o.html()}},{key:"bindAfterRenderEvent",value:function(){return this.$li.find("label").bind("touchstart mousedown",function(e){e.stopPropagation()}),!0}},{key:"updateTitle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.compJson.title;this.$li.find(".radio-title").text(e)}},{key:"updateOptions",value:function(){var e=this.create$options();this.$options.html(e),this.$li.css({height:""}),this.update$li({height:this.$li.height()})}},{key:"updateOptionsLabel",value:function(){var e=this.$li.find(".option-label").find("span"),t=this.compJson.choices;"string"==typeof t&&(t=JSON.parse(t)),t&&t.options&&t.options.forEach(function(t,n){var i=d(t.label);t.label=i,$(e[n]).text(i)})}},{key:"updateOptionsType",value:function(){var e="c"===this.compJson.type,t=e?"checkbox":"radio";this.$li.find("input").attr("type",t),e?this.updateTitle(this.compJson.title+"(可多选)"):this.updateTitle()}},{key:"updateHeadBgColor",value:function(e){this.$li.find(".radio-title").css("backgroundColor",e),this.$li.find(".element-box").css("borderColor",e),this.$options.find(".option-group").css("borderBottomColor",e)}},{key:"updateHeadFontColor",value:function(e){this.$li.find(".radio-title").css("color",e)}}]),t}(s);e.exports=h},function(e,t){},function(e,t){e.exports='<div class="option-group"><label class="option-label" for="#{id}" data-event="11208"><input class="option" id="#{id}" type="#{inputType}" name="eq[f_#{compId}]" value="#{optionId}"> <span>#{optionLabel}</span></label></div>'},function(e,t){e.exports='<div class="element comp_radio editable-text" id="#{id}" ctype="#{type}" title="#{title}" name="eq[f_#{id}]" style="width: 100%;height: 100%"><div class="radio-title">#{title}</div><div class="options"></div></div>'},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(496).$postForm,c=n(24),l=n(243),u=n(101),p=n(69).hrefToWxAuth,d=n(27),h=d.isWeixin,f=d.isWxwork,g=n(71).qiniuZoom,m=n(497),v=n(82).popUpModal,y=n(28).isXiuTui,b=n(28).xtPostForm,x=n(28).workPostForm,w=n(28).getNickname,k=n(28).getCoverImg,S=n(69).getWeChatUser,I=n(498).createSpecialRedPacket,T=n(561),E=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!1},compFont:{self:!0,fontFamily:!1,fontColor:!0},functionStyle:{commitSetting:!0,repeatSubmit:!0,blockingTimeSubmit:!0},advanceStyle:{"function":!0}},trigger:{self:!1},sound:!1,link:!1}),r}return r(t,e),a(t,[{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.pageId,i=e.type,o=e.properties,r=o.title,a=o.styleImgSrc,s=e.css,u=s.width,p=s.height,d=!1;"view"===this.eqxScene.config.mode&&f()&&(r="请到微信中提交",d=!0,a=null);var h=""+c.FILE+a,g="0";return this.pageId=n,this.$context=a?l.$img({id:t,type:i,src:h,css:{width:u,height:p},padding:g}):l.$btn({id:t,type:i,title:r,inWxwork:d,css:{width:u,height:p}}),this.$context}},{key:"addClassToLi",value:function(e){e.addClass("wsite-input")}},{key:"bindAfterRenderEvent",value:function(e,t){var n=this,i=!0,o=this;$(e).click(function(){if(f())return void p(null,null,n.eqxScene.meta);var r=n.eqxScene.formManager,a=r.check(),c=t.sceneId,u=t.id,d=t.pageId,$=t.properties,E=$.layout,P=void 0===E?"rating-l":E,_=$.imgSrc,C=$.text,A=$.link,O=$.checkedLink,q=$.clickFarmer,L=$.endTime,M=$.linkText,R=new Promise(function(){});if(n.eqxScene.getOrientation().isLandScape()){u=u.toString().replace("_mask","");var j=Object.keys(a.form||{});j.forEach(function(e){e.indexOf("_mask")>-1&&delete a.form[e]})}if(r.submited)R=Promise.reject({code:120505});else if(L&&L<Date.now())R=Promise.reject({code:120602});else if(q&&!h())R=Promise.reject({code:120504});else if(a.success){if(i){var F=void 0;F=a.isDataSensitive||n.eqxScene.formManager.checkSceneSensitiveWord(n.eqxScene)?T({isLandScape:n.eqxScene.getOrientation().isLandScape()}):Promise.resolve(),R=F.then(function(){return n.eqxScene.config.disableSubmit?Promise.resolve():(L&&(a.form.endTime=L),y()?s(a.form,c,d,u,!0).then(function(e){return b(c,e.obj).then(function(){var t=w(),n=k();return x({sceneId:c,formId:e.obj,sceneOwnerUserId:window.scene.userId,origin:1,nickName:t,headImgUrl:n}),{}})}):s(a.form,c,d,u,!0).then(function(e){if(h()){var t=S();x(t.nickname&&t.headimgurl?{sceneId:c,formId:e.obj,sceneOwnerUserId:window.scene.userId,origin:2,nickName:t.nickname,headImgUrl:t.headimgurl}:{sceneId:c,formId:e.obj,sceneOwnerUserId:window.scene.userId,origin:2})}else x({sceneId:c,formId:e.obj,sceneOwnerUserId:window.scene.userId,origin:2});return e}))}),i=!1}}else if(a.pageId&&n.pageId!=a.pageId){var B=confirm(a.message+" 是否前往修改？");B&&n.eqxScene.pageScroll.goToPageById(a.pageId)}else R=Promise.reject({msg:a.message});R.then(function(){r.submited=!0,i=!0;var t=!!O,a=_?g(_,240):m;C=C?C.trim():"谢谢您的参与！";var s=o.eqxPage,c=s.$editDiv.css("transform")||"",u=c.match(/matrix.*, (.*)\)/),p=u?u[1]:0;window._tracker_api_&&window._tracker_api_.report({product:"h5",b_t:"point",point_need:1,c_p:"PC",u_i:window.scene?window.scene.userId:"",e_t:"submit",scene_id:window.scene?window.scene.id:"",scene_c_u:window.scene?window.scene.userId:""}),M||(M="查看详情");var d=l.modal(e,P,t,a,C,A,M,p,function(){n.id.toString().indexOf("_mask")>-1&&n.eqxScene.currentPage._formMaskPage.hide()});a===m&&"rating-l"==P&&(n.eqxScene.meta.property.adBagSwitch||0==n.eqxScene.meta.property.eqAdType||l.renderAd(n.eqxScene,d)),I(2,n.eqxScene).then(function(e){n.eqxScene.formRedPacket=e})})["catch"](function(e){i=!0,120505===e.code||120603===e.code?v("请不要重复提交！"):120504===e.code?v("请到微信中打开使用！"):120602===e.code||120604===e.code?v("当前表单已截止提交！"):e.msg?"cancle-submit"!==e.msg&&v(e.msg):v("file:"===window.location.protocol?"请发布后再提交！":"表单提交失败！")})}),this.eqxScene.formManager.checkSceneSensitiveWord(this.eqxScene)}},{key:"updateBtnTitle",value:function(e){this.compJson.properties.styleImgSrc||(this.$context[0].innerText=e)}},{key:"updateBtnStyle",value:function(e){this.update$li(e)}},{key:"deleteImage",value:function(){this.compJson.properties.styleImgSrc||(this.$context[0].innerText="",this.updateBtnTitle(this.compJson.properties.title))}}]),t}(u);e.exports=E},function(e,t,n){"use strict";function i(e,t,n,i,o){var r=localStorage.getItem("wxUserResForH5"),c=window.scene||{},l=c.code,u=a.SERVER_1+"eqs/s/r/"+t+"/"+n+"/"+i;return l&&(u=u+"?code="+l+"&openid="+r),o&&(u+=/\?code=/.test(u)?"&isSync=true":"?isSync=true"),s({type:"POST",url:u,data:e})}function o(e,t,n){return s({type:"POST",url:a.SERVER_1+"eqs/promotion/order/data/r/"+e+"/"+n,data:t})}function r(e,t){return s({type:"GET",url:a.SERVER_1+"eqs/s/valid/send-validcode",data:{phone:e,userId:t}})}var a=n(24),s=n(23).ajax;e.exports={$postForm:i,$submitXiuForm:o,$getSmsCode:r}},function(e,t,n){e.exports=n.p+"images/ok-941be2.svg"},function(e,t,n){"use strict";function i(e,t){if(c()){var n=t.meta;return s(n.id,e).then(function(e){return{activityJson:e.map.activity||{},styleJson:e.map.packageStyle}})}var i=t.sceneJson,o=i.redpacketJson||{},r=o.activity||[],a=o.packageStyle||[];return Promise.resolve({activityJson:r.find(function(t){return t.redpackageType==e})||{},styleJson:a.find(function(t){return t.styleType==e})})}function o(e,t){return i(e,t).then(function(e){return e.activityJson.id?Date.now()<e.activityJson.startTime||Date.now()>e.activityJson.endTime?{msg:"不在红包活动时间范围内，不触发红包"}:u(t.meta.id,e.activityJson.id).then(function(n){return n.success&&n.obj?new r(e,t):{msg:"红包已抢光，不触发红包"}}):new r(e,t)})}var r=n(499),a=n(164),s=a.$getSpecialRedPacketJson,c=n(27).isEditorView,l=n(164),u=l.$checkRedPacket;e.exports={createSpecialRedPacket:o}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(500);var r=n(501),a=n(502),s=n(503),c=n(504),l=n(511),u=l.getRedPacketImg,p=n(27).isWeixin,d=n(28).isEqxWxMini,h=n(80).$getUserWxInfo,f=n(69),g=f.hrefToWxAuth,m=f.setWeChatUser,v=f.initWeChat,y=f.getWeChatUser,b=n(164),x=b.$grabRedPacket,w=n(512),k=w.animationTypeMap,S=n(554),I=n(555),T=function(){function e(t,n){i(this,e),t.styleJson&&(this.redPacketJson=t,this.eqxScene=n,this.eqxPage=n.currentPage,this.create$redPacket(),this.bindEvent())}return o(e,[{key:"createRedPacketRain",value:function(e){var t=this.redPacketJson.activityJson;if(!t.id){var n=$('<img src="'+r+'" alt="" style="width: 128px; height: 20px; position: absolute; top: 66px; left: 50%; transform: translateX(-50%); z-index: 2;">');this.$redPacketWrap.append(n)}this.$redPacketWrap.addClass("red-packet-rain"),this.$redPacket.addClass("red-packet-rain"),this.redPacketRain=new S({img:e,$ct:this.$redPacket})}},{key:"createRedPacketPandora",value:function(e){var t=this.redPacketJson.activityJson;if(!t.id){var n=$('<img src="'+r+'" alt="" style="width: 128px; height: 20px; position: absolute; top: 66px; left: 50%; transform: translateX(-50%); z-index: 2;">');this.$redPacketWrap.append(n)}var i=$('<img class="bg-top" src="'+a+'" alt="" >'),o=$('<img class="bg-bottom" src="'+s+'" alt="">');this.$redPacketWrap.append(i),this.$redPacketWrap.append(o),this.$redPacketWrap.addClass("red-packet-pandora"),this.$redPacket.addClass("red-packet-pandora"),this.redPacketPandora=new I({img:e,$ct:this.$redPacket,canClick:!!t.id})}},{key:"createStaticRedPacket",value:function(e){var t=this.redPacketJson.activityJson;if(!t.id){var n=$('<img src="'+r+'" alt="" style="width: 128px; height: 20px;">');this.$redPacket.append(n)}var i=$('<div class="special-red-packet__ct__content">\n                                <img class="red-packet" src="'+e+'" alt="">\n                            </div>');this.$redPacket.append(i)}},{key:"create$redPacket",value:function(){var e=this,t=this.redPacketJson.styleJson,n=this.$redPacketWrap=$('<div class="special-red-packet"></div>'),i=this.$redPacket=$('<div class="special-red-packet__ct"></div>'),o=u(t);switch(t.animationType){case k["static"]:this.createStaticRedPacket(o);break;case k.rain:this.createRedPacketRain(o);break;case k.pandora:this.createRedPacketPandora(o);break;default:this.createStaticRedPacket(o)}n.append(i);var r=$('<div class="special-red-packet__close-btn eqf-no"></div>');r.click(function(){e.close$Redpacket()}),n.append(r),$(".main-page.z-current").not(".editor-section").prepend(n)}},{key:"close$Redpacket",value:function(){this.$redPacketWrap.remove(),this.redPacketPandora&&this.redPacketPandora.destroy()}},{key:"bindEvent",value:function(){var e=this,t=this.redPacketJson,n=t.styleJson,i=t.activityJson;if(i.id){var o=!1;this.$redPacket.click(function(t){if((n.animationType!=k.rain||$(t.target).hasClass("red-packet-rain-item"))&&!o)if(o=!0,p()||d()){var r=y(),a=e.eqxScene.meta,s=void 0;s=p()&&!r.openid?h(a.userId,a).then(function(e){return e.obj?(m(e.obj),v({obj:a},location.href.split("#")[0]),r=y(),void 0):(g(null,null,a),Promise.reject(new Error))}):Promise.resolve(),s.then(function(){Date.now()<i.startTime?(e.redPacketReceive=new c({mode:"fail",failCode:120805}),e.close$Redpacket(),o=!1):Date.now()>i.endTime?(e.redPacketReceive=new c({mode:"fail",failCode:120806}),e.close$Redpacket(),o=!1):x(a.id,i.id,r.openid).then(function(t){200==t.code&&(e.redPacketReceive=new c({mode:"success",money:t.map.payAmount,congratulations:n.congratulations}),e.close$Redpacket()),o=!1})["catch"](function(t){console.log(t),e.redPacketReceive=new c({mode:"fail",failCode:t.code}),e.close$Redpacket(),o=!1})})["catch"](function(){o=!1})}else e.redPacketReceive=new c({mode:"fail",failCode:"noWxEnv"}),e.close$Redpacket(),o=!1})}}}]),e}();e.exports=T},function(e,t){},function(e,t,n){e.exports=n.p+"images/noActivityTip-5dc4fd.png"},function(e,t,n){e.exports=n.p+"images/redpacketPandoraBgTop-6af6f0.png"},function(e,t,n){e.exports=n.p+"images/redpacketPandoraBgBottom-bd1888.png"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(500);var r=n(505),a=n(506),s=n(507),c=n(508),l=n(509),u=n(510),p=function(){function e(t){i(this,e),this.config=t,this.init()}return o(e,[{key:"init",value:function(){switch(this.config.mode){case"fail":this.create$failContext();break;case"success":this.create$successContext()}}},{key:"create$failContext",value:function(){var e=this.getFailDescAndLogo(),t=e.desc,n=e.receiveFailLogo;if(t&&n){var i=this.$receiveResultWrap=$('<div class="red-packet-receive-fail"></div>');i.click(function(){i.remove()});var o=$('<div class="red-packet-receive-fail__content">\n                                <img src="'+n+'" alt="" class="receive-fail-logo">\n                                <p class="receive-fail-desc">'+t+"</p>\n                                </div>"),r=$('<div class="receive-fail-know-btn">知道了</div>');o.append(r),i.append(o),o.click(function(e){e.stopPropagation()}),r.click(function(){i.remove()}),$(".main-page.z-current").not(".editor-section").prepend(i)}}},{key:"getFailDescAndLogo",value:function(){var e=void 0,t=void 0;switch(""+this.config.failCode){case"noWxEnv":e="请在微信环境中领取",t=a;break;case"120801":e="很遗憾，没有抢到红包",t=r;break;case"120802":e="来晚了，都被别人抢光了",t=r;break;case"120803":e="今天领取次数用完了，明天再来吧",t=l;break;case"120804":e="当前红包领取次数已达上限",t=r;break;case"120805":e="红包活动还没开始呢",t=c;break;case"120806":e="红包活动已结束",t=s}return{desc:e,receiveFailLogo:t}}},{key:"create$successContext",value:function(){var e=this,t=this.getCongratulations(),n=this.$receiveResultWrap=$('<div class="red-packet-receive-success"></div>'),i=$('<div class="red-packet-receive-success__ct"></div>'),o=$('<div class="open-red-packet-content">\n                                    <p class="red-packet-congratulation"></p>\n                                    <div class="open-red-packet"></div>\n                                </div>');o.find(".red-packet-congratulation").text(t);var r=$('<div class="open-red-packet-close-btn eqf-no-l"></div>');i.append(o),i.append(r),n.append(i),o.click(function(t){n.empty().css("background","rgba(255, 255, 255, 1)"),n.append(e.create$receiveMoney())}),r.click(function(){n.remove()}),$(".main-page.z-current").not(".editor-section").prepend(n)}},{key:"create$receiveMoney",value:function(){var e=this,t=this.config.money,n=$('<div>\n                                <img src="'+u+'" class="receive-money-head-bg">\n                                <p class="receive-money-congratulation">恭喜您获得</p>\n                                <div class="receive-money-num"><span class="money-num">'+t+'</span><span class="unit">元</span></div>\n                                <p class="receive-tip">请您前往微信进行提现</p>\n                                </div>'),i=$('<div class="receive-money-know-btn">知道了</div>');return i.click(function(){e.$receiveResultWrap.remove()}),n.append(i),n}},{key:"getCongratulations",value:function(){var e=this.config.congratulations||[];if(Array.isArray(e)||(e=JSON.parse(e)),e=e.filter(function(e){return e}),e.length){var t=Math.floor(Math.random()*e.length);return e[t]}return"大吉大利，恭喜发财"}}]),e}();e.exports=p},function(e,t,n){e.exports=n.p+"images/sad-40ed11.png"},function(e,t,n){e.exports=n.p+"images/gift-a77242.png"},function(e,t,n){e.exports=n.p+"images/clockSleep-0cae64.png"},function(e,t,n){e.exports=n.p+"images/clockRing-d877e4.png"},function(e,t,n){e.exports=n.p+"images/cute-a3e2b5.png"},function(e,t,n){e.exports=n.p+"images/receiveMoneyBg-bb6e5e.png"},function(e,t,n){"use strict";function i(e){var t=void 0;switch(e.redpackageStyleType){case r.normal:t=s;break;case r.threeD:t=c;break;case r.luckyBag:t=l;break;case r.qixi:t=f;break;case r.chongyang:t=g;break;case r.midAutumn:t=m;break;case r.national:t=v;break;case r.christmas:t=u;break;case r.newYear:t=p;break;case r.springFestival:t=d;break;case r.nextYear:t=h;break;case r.christmas1:t=y;break;case r.christmas2:t=b;break;case r.christmas3:t=x;break;case r.newYear2:t=w;break;case r.newYear3:t=k;break;case r.springFestival1:t=S;break;case r.springFestival2:t=I;break;case r.springFestival3:t=T;break;case r.custom:t=e.styleImage?""+a.FILE+e.styleImage:s;break;default:t=s}return t}var o=n(512),r=o.redpackageStyleTypeMap,a=n(24),s=n(535),c=n(536),l=n(537),u=n(538),p=n(539),d=n(540),h=n(541),f=n(542),g=n(543),m=n(544),v=n(545),y=n(546),b=n(547),x=n(548),w=n(549),k=n(550),S=n(551),I=n(552),T=n(553);e.exports={getRedPacketImg:i}},function(e,t,n){"use strict";var i=n(513),o=n(514),r=n(515),a=n(516),s=n(517),c=n(518),l=n(519),u=n(520),p=n(521),d=n(522),h=n(523),f=n(524),g=n(525),m=n(526),v=n(527),y=n(528),b=n(529),x=n(530),w=n(531),k=n(532),S=n(533),I=n(534),T={"static":1,rain:2,pandora:3},$=[{value:T["static"],name:"静态红包",viewImg:i,isOpen:!0},{value:T.rain,name:"红包雨",viewImg:o,isOpen:!0},{value:T.pandora,name:"潘多拉红包",viewImg:r,isOpen:!0}],E={normal:1,threeD:2,luckyBag:3,christmas:4,newYear:5,springFestival:6,custom:7,nextYear:8,qixi:9,chongyang:10,midAutumn:11,national:12,christmas1:13,christmas2:14,christmas3:15,newYear2:16,newYear3:17,springFestival1:18,springFestival2:19,springFestival3:20},P=[{value:E.normal,name:"恭喜发财",viewImg:a,isFree:!0},{value:E.threeD,name:"大吉大利",viewImg:s,isFree:"limitFree"},{value:E.luckyBag,name:"福星高照",viewImg:c,isFree:"limitFree"},{value:E.nextYear,name:"万事顺意",viewImg:x,isFree:!0},{value:E.springFestival2,name:"恭祝新春",viewImg:y,isFree:!0},{value:E.springFestival1,name:"岁岁平安",viewImg:v,isFree:!1},{value:E.springFestival,name:"阖家欢乐",viewImg:m,isFree:!1},{value:E.springFestival3,name:"虎虎生威",viewImg:b,isFree:!1},{value:E.newYear2,name:"元旦样式1",viewImg:f,isFree:!1},{value:E.newYear3,name:"元旦样式2",viewImg:g,isFree:!1},{value:E.newYear,name:"元旦样式3",viewImg:h,isFree:!1},{value:E.christmas1,name:"圣诞\b样式1",viewImg:u,isFree:!1},{value:E.christmas3,name:"圣诞样式2",viewImg:d,isFree:!0},{value:E.christmas2,name:"圣诞样式3",viewImg:p,isFree:!1},{value:E.christmas,name:"圣诞样式4",viewImg:l,isFree:!1},{value:E.qixi,name:"七夕",viewImg:w,isFree:!1},{value:E.chongyang,name:"重阳",viewImg:k,isFree:!1},{value:E.midAutumn,name:"中秋",viewImg:S,isFree:!1},{value:E.national,name:"国庆",viewImg:I,isFree:!1},{value:E.custom,name:"自定义",viewImg:"",isFree:!0}],_="大吉大利，恭喜发财",C={animationType:T["static"],redpackageStyleType:E.normal,styleImage:"",congratulations:[_]};e.exports={animationTypeMap:T,animationTypes:$,redpackageStyleDefaultJson:C,redpackageStyleTypeMap:E,redpackageStyleTypes:P,congratulationDefault:_}},function(e,t,n){e.exports=n.p+"images/staticViewImg-69739f.png"},function(e,t,n){
e.exports=n.p+"images/rainViewImg-d8bb5a.gif"},function(e,t,n){e.exports=n.p+"images/pandoraViewImg-8ada12.gif"},function(e,t,n){e.exports=n.p+"images/normalStyle-f77484.png"},function(e,t,n){e.exports=n.p+"images/3DStyle-9deadb.png"},function(e,t,n){e.exports=n.p+"images/luckyBagStyle-0e65de.png"},function(e,t,n){e.exports=n.p+"images/christmasStyle-71745a.png"},function(e,t,n){e.exports=n.p+"images/christmasStyle1-f15ce3.png"},function(e,t,n){e.exports=n.p+"images/christmasStyle2-c1094f.png"},function(e,t,n){e.exports=n.p+"images/christmasStyle3-48b506.png"},function(e,t,n){e.exports=n.p+"images/newYearStyle-573652.png"},function(e,t,n){e.exports=n.p+"images/newYearStyle2-ddee5d.png"},function(e,t,n){e.exports=n.p+"images/newYearStyle3-2ec22b.png"},function(e,t,n){e.exports=n.p+"images/springFestivalStyle-987b26.png"},function(e,t,n){e.exports=n.p+"images/springFestivalStyle1-876a24.png"},function(e,t,n){e.exports=n.p+"images/springFestivalStyle2-558374.png"},function(e,t,n){e.exports=n.p+"images/springFestivalStyle3-7f3222.png"},function(e,t,n){e.exports=n.p+"images/nextYearStyle-50ecf9.png"},function(e,t,n){e.exports=n.p+"images/qixi-d69b09.png"},function(e,t,n){e.exports=n.p+"images/chongyang-5c5937.png"},function(e,t,n){e.exports=n.p+"images/midAutumn-eb1e13.png"},function(e,t,n){e.exports=n.p+"images/national-4de50d.png"},function(e,t,n){e.exports=n.p+"images/normalRedpacket-c99620.png"},function(e,t,n){e.exports=n.p+"images/3DRedpacket-96d2cf.png"},function(e,t,n){e.exports=n.p+"images/luckyBagRedpacket-2d8cc3.png"},function(e,t,n){e.exports=n.p+"images/christmasRedpacket-193ae8.png"},function(e,t,n){e.exports=n.p+"images/newYearRedpacket-5d040e.png"},function(e,t,n){e.exports=n.p+"images/springFestivalRedpacket-b9f4dd.png"},function(e,t,n){e.exports=n.p+"images/nextYearRedpacket-6fbf49.png"},function(e,t,n){e.exports=n.p+"images/qixi-d69b09.png"},function(e,t,n){e.exports=n.p+"images/chongyang-5c5937.png"},function(e,t,n){e.exports=n.p+"images/midAutumn-eb1e13.png"},function(e,t,n){e.exports=n.p+"images/national-4de50d.png"},function(e,t,n){e.exports=n.p+"images/christmasRedpacket1-f15ce3.png"},function(e,t,n){e.exports=n.p+"images/christmasRedpacket2-c1094f.png"},function(e,t,n){e.exports=n.p+"images/christmasRedpacket3-48b506.png"},function(e,t,n){e.exports=n.p+"images/newYearRedpacket2-ddee5d.png"},function(e,t,n){e.exports=n.p+"images/newYearRedpacket3-2ec22b.png"},function(e,t,n){e.exports=n.p+"images/springFestivalRedpacket1-876a24.png"},function(e,t,n){e.exports=n.p+"images/springFestivalRedpacket2-558374.png"},function(e,t,n){e.exports=n.p+"images/springFestivalRedpacket3-7f3222.png"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(500);var r=function(){function e(t){i(this,e),this.$ct=t.$ct,this.img=t.img,this.zIndex=0,this.rainItemNum=9,this.rainItemNormalSize=64,this.rainItemSmallSize=50,this.create$redpacketRain()}return o(e,[{key:"create$redpacketRain",value:function(){var e=this,t=document.createDocumentFragment();Array.from({length:this.rainItemNum}).forEach(function(){t.appendChild(e.create$RedPackageRainItem()[0])}),this.$ct.append(t)}},{key:"create$RedPackageRainItem",value:function(){var e=$('<img class="red-packet-rain-item" src="'+this.img+'" alt="">'),t=this.getRotateDeg(),n=this.getDelayTime(this.zIndex),i=8==this.zIndex;return e.css({position:"absolute",top:"-100px","max-width":(i?this.rainItemSmallSize:this.rainItemNormalSize)+"px","max-height":(i?this.rainItemSmallSize:this.rainItemNormalSize)+"px",width:"auto",height:"auto","z-index":this.zIndex++,left:this.getLeftPx()+"px",transform:"rotate("+t+"deg)",animation:"red-packet-rain-drop-"+(t<0?"left":"right")+"-rotate "+(i?2500:3500)+"ms linear "+n+"ms infinite"}),e}},{key:"getDelayTime",value:function(e){var t=[300,600,1200,1400,2e3,2500,2700,3500,1900];return t[e]}},{key:"getLeftPx",value:function(){var e=30,t=320-this.rainItemNormalSize-e;return this.getRandom(e,t)}},{key:"getRotateDeg",value:function(){var e=[-30,30];return e[this.getRandom(0,e.length-1)]}},{key:"getRandom",value:function(e,t){return Math.round(Math.random()*(t-e)+e)}},{key:"updateRedPacketImg",value:function(e){this.img=e,this.$ct.find(".red-packet-rain-item").attr("src",e)}}]),e}();e.exports=r},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(500);var r=n(556),a=n(557),s=n(558),c=n(559),l=n(25),u=l.$loadLottie,p=l.$loadTweenjs,d=n(560),h=function(){function e(t){i(this,e),this.$ct=t.$ct,this.img=t.img,this.canClick=t.canClick,this.clickLock=!1,this.create$redpacketPandora()}return o(e,[{key:"create$redpacketPandora",value:function(){var e=this.$contentWrapper=$('<div class="pandora-content-wrapper"></div>'),t=this.$light=$('<img class="pandora-light animate-pandora-light" src="'+r+'" alt="">'),n=this.$boxClose=$('<img class="pandora-box-close animate-pandora-box-close" src="'+a+'" alt="">'),i=this.$boxOpen=$('<img class="pandora-box-open animate-pandora-box-open" src="'+s+'" alt="">'),o=this.$strata_goldBox=$('<div class="pandora-strata-gold-lottie"></div>'),l=this.$boom=$('<img class="pandora-boom" src="'+c+'" alt="">'),u=this.$redPacketItemWrap=$('<div class="red-packet-item-wrap"></div>');e.append(t),e.append(n),e.append(i),e.append(o),e.append(l),e.append(u),this.create$strataGold(),this.create$RedPackageItem(),this.$ct.append(e),this.bindEvent()}},{key:"create$strataGold",value:function(){var e=this,t=window.lottie?Promise.resolve():u();t.then(function(t){window.lottie&&(e.$strataGoldAnim=window.lottie.loadAnimation({container:e.$strata_goldBox[0],renderer:"svg",loop:!0,autoplay:!1,animationData:d,assetsPath:"https://lib.eqh5.com/@eqxiu/editor-plugin/pandoraAnim/images/"}))})}},{key:"create$RedPackageItem",value:function(){var e=this;this.redPacketList=[{maxWidth:64,maxHeight:64,direction:"right",speedX:1.9,delay:0,rotateSpeed:.2,initRotate:30,pos:{y:0},endPos:{y:300},duration:2500,times:0},{maxWidth:64,maxHeight:64,direction:"right",speedX:1.9,delay:300,rotateSpeed:.2,initRotate:30,pos:{y:0},endPos:{y:300},duration:2500,times:0},{maxWidth:50,maxHeight:50,direction:"right",speedX:2,delay:600,rotateSpeed:.15,initRotate:45,pos:{y:0},endPos:{y:170},duration:2800,times:0},{maxWidth:50,maxHeight:50,direction:"right",speedX:2,delay:1e3,rotateSpeed:.15,initRotate:45,pos:{y:0},endPos:{y:170},duration:2800,times:0},{maxWidth:50,maxHeight:50,direction:"right",speedX:2,delay:1300,rotateSpeed:.15,initRotate:45,pos:{y:0},endPos:{y:170},duration:2800,times:0},{maxWidth:60,maxHeight:60,direction:"left",speedX:1.8,delay:400,rotateSpeed:-.25,initRotate:-25,pos:{y:0},endPos:{y:280},duration:2500,times:0},{maxWidth:60,maxHeight:60,direction:"left",speedX:1.8,delay:900,rotateSpeed:-.25,initRotate:-25,pos:{y:0},endPos:{y:280},duration:2500,times:0},{maxWidth:60,maxHeight:60,direction:"left",speedX:1.8,delay:1500,rotateSpeed:-.25,initRotate:-25,pos:{y:0},endPos:{y:280},duration:2500,times:0},{maxWidth:56,maxHeight:56,direction:"left",speedX:2,delay:700,rotateSpeed:-.15,initRotate:-40,pos:{y:0},endPos:{y:180},duration:2800,times:0},{maxWidth:56,maxHeight:56,direction:"left",speedX:2,delay:1500,rotateSpeed:-.15,initRotate:-40,pos:{y:0},endPos:{y:180},duration:2800,times:0}],p().then(function(t){e.TWEEN=new TWEEN.Group,e.redPacketList.forEach(function(t){t.$dom=$('<img class="red-packet-pandora-item" src="'+e.img+'" alt="">'),t.$dom.css({"max-width":t.maxWidth+"px","max-height":t.maxHeight+"px",transform:"translateX(-50%) rotate("+t.initRotate+"deg)"}),e.$redPacketItemWrap.append(t.$dom),t.tween=new TWEEN.Tween(t.pos,e.TWEEN).to(t.endPos,t.duration).easing(TWEEN.Easing.Back.Out).repeat(1/0).onUpdate(function(){t.times++,t.$dom.css({transform:"translate(calc(-50% "+("right"==t.direction?"+":"-")+" "+t.times*t.speedX+"px), "+-t.pos.y+"px) rotate("+Math.round(t.times*t.rotateSpeed+t.initRotate)+"deg)"})}).onRepeat(function(){t.times=0,t.pos.y=0,t.tween.delay(0)}).delay(t.delay)})})}},{key:"play$redPacketAnim",value:function(){function e(){this.animationId=requestAnimationFrame(e.bind(this));var t=this.TWEEN.update();t||cancelAnimationFrame(this.animationId)}this.redPacketList.forEach(function(e){e.tween&&e.tween.start()}),e.call(this)}},{key:"stop$redPacketAnim",value:function(){cancelAnimationFrame(this.animationId),this.TWEEN.removeAll()}},{key:"bindEvent",value:function(){var e=this;this.$light.on("animationend webkitAnimationEnd",function(e){$(this).removeClass("animate-pandora-light").css({transform:"scale(1) rotate(1080deg)",opacity:1})}),this.$boxClose.on("animationend webkitAnimationEnd",function(e){$(this).removeClass("animate-pandora-box-close")}),this.$boxOpen.on("animationend webkitAnimationEnd",function(t){$(this).removeClass("animate-pandora-box-open").css({transform:"scale(1)",opacity:1}),e.$strata_goldBox.show(),e.$strataGoldAnim.play(),e.play$redPacketAnim()}),this.$contentWrapper.on("click",function(e){e.stopPropagation()}),this.canClick&&(this.$redPacketItemWrap.on("mousedown touchend",function(t){if(!e.clickLock&&$(t.target).hasClass("red-packet-pandora-item")){e.clickLock=!0;var n=$(t.target).offset(),i=e.$contentWrapper.offset();$(t.target).hide(),e.$boom.css({top:n.top-i.top,left:n.left-i.left}).addClass("animate-pandora-boom")}}),this.$boom.on("animationend webkitAnimationEnd",function(t){e.$ct.trigger("click")}))}},{key:"destroy",value:function(){this.$strataGoldAnim.destroy(),this.stop$redPacketAnim()}},{key:"updateRedPacketImg",value:function(e){this.img=e,this.$ct.find(".red-packet-pandora-item").attr("src",e)}}]),e}();e.exports=h},function(e,t,n){e.exports=n.p+"images/light-e84d91.png"},function(e,t,n){e.exports=n.p+"images/boxClose-c9d58b.png"},function(e,t,n){e.exports=n.p+"images/boxOpen-9986f9.png"},function(e,t,n){e.exports=n.p+"images/boom-bdce2e.png"},function(e,t){"use strict";e.exports={v:"5.6.10",fr:25,ip:0,op:150,w:376,h:355,nm:"合成 1",ddd:0,assets:[{id:"image_0",w:88,h:98,u:"images/",p:"img_0.png",e:0},{id:"image_1",w:26,h:20,u:"images/",p:"img_1.png",e:0},{id:"image_2",w:40,h:40,u:"images/",p:"img_2.png",e:0},{id:"image_3",w:60,h:102,u:"images/",p:"img_3.png",e:0},{id:"image_4",w:64,h:66,u:"images/",p:"img_4.png",e:0},{id:"image_5",w:56,h:44,u:"images/",p:"img_5.png",e:0},{id:"image_6",w:46,h:46,u:"images/",p:"img_6.png",e:0},{id:"image_7",w:50,h:48,u:"images/",p:"img_7.png",e:0},{id:"image_8",w:752,h:710,u:"images/",p:"img_8.png",e:0}],layers:[{ddd:0,ind:1,ty:2,nm:"彩带1.png",cl:"png",refId:"image_0",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:114,s:[0]},{t:149,s:[120]}],ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:114,s:[170,383.5,0],to:[23.667,-75.667,0],ti:[-108,2.667,0]},{t:149,s:[420,241.5,0]}],ix:2},a:{a:0,k:[44,49,0],ix:1},s:{a:1,k:[{i:{x:[.833,.833,.833],y:[.833,.833,.833]},o:{x:[.167,.167,.167],y:[.167,.167,.167]},t:114,s:[30,30,100]},{t:149,s:[70,70,100]}],ix:6}},ao:0,ip:0,op:150,st:0,bm:0},{ddd:0,ind:2,ty:2,nm:"彩带3.png",cl:"png",refId:"image_1",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:100,s:[100]},{t:125,s:[0]}],ix:11},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:50,s:[0]},{t:125,s:[180]}],ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:50,s:[184,369.5,0],to:[6,-66,0],ti:[-126,90,0]},{t:125,s:[352,-14.5,0]}],ix:2},a:{a:0,k:[13,10,0],ix:1},s:{a:0,k:[50,50,100],ix:6}},ao:0,ip:0,op:150,st:0,bm:0},{ddd:0,ind:3,ty:2,nm:"彩带4.png",cl:"png",refId:"image_2",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[100]},{t:50,s:[0]}],ix:11},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[0]},{t:50,s:[100]}],ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:0,s:[160,383.5,0],to:[-6.333,-50.667,0],ti:[-209.667,78.667,0]},{t:50,s:[406,87.5,0]}],ix:2},a:{a:0,k:[20,20,0],ix:1},s:{a:1,k:[{i:{x:[.833,.833,.833],y:[.833,.833,.833]},o:{x:[.167,.167,.167],y:[.167,.167,.167]},t:0,s:[40,40,100]},{t:50,s:[50,50,100]}],ix:6}},ao:0,ip:0,op:150,st:0,bm:0},{ddd:0,ind:4,ty:2,nm:"彩带5.png",cl:"png",refId:"image_3",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:11,s:[100]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:39,s:[100]},{t:50,s:[0]}],ix:11},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:11,s:[0]},{t:50,s:[200]}],ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:11,s:[162,389.5,0],to:[15.667,-52.667,0],ti:[-105.667,68.667,0]},{t:50,s:[256,73.5,0]}],ix:2},a:{a:0,k:[30,51,0],ix:1},s:{a:0,k:[50,50,100],ix:6}},ao:0,ip:0,op:150,st:0,bm:0},{ddd:0,ind:5,ty:2,nm:"彩带6.png",cl:"png",refId:"image_4",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:87,s:[0]},{t:125,s:[180]}],ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:87,s:[176,373.5,0],to:[13.667,-43.333,0],ti:[-249.667,59.333,0]},{t:125,s:[402,139.5,0]}],ix:2},a:{a:0,k:[32,33,0],ix:1},s:{a:1,k:[{i:{x:[.833,.833,.833],y:[.833,.833,.833]},o:{x:[.167,.167,.167],y:[.167,.167,.167]},t:87,s:[40,40,100]},{t:125,s:[70,70,100]}],ix:6}},ao:0,ip:0,op:150,st:0,bm:0},{ddd:0,ind:6,ty:2,nm:"彩带6.png",cl:"png",refId:"image_4",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:75,s:[0]},{t:106,s:[120]}],ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:75,s:[176,373.5,0],to:[13.667,-43.333,0],ti:[116.333,23.333,0]},{t:106,s:[-42,197.5,0]}],ix:2},a:{a:0,k:[32,33,0],ix:1},s:{a:0,k:[50,50,100],ix:6}},ao:0,ip:0,op:150,st:0,bm:0},{ddd:0,ind:7,ty:2,nm:"彩带7.png",cl:"png",refId:"image_5",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:50,s:[0]},{t:75,s:[180]}],ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:50,s:[188,373.5,0],to:[-33.333,-31.667,0],ti:[159.333,47.667,0]},{t:75,s:[-12,183.5,0]}],ix:2},a:{a:0,k:[28,22,0],ix:1},s:{a:0,k:[50,50,100],ix:6}},ao:0,ip:0,op:150,st:0,bm:0},{ddd:0,ind:8,ty:2,nm:"金币1.png",cl:"png",refId:"image_6",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:24,s:[100]},{t:64,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:24,s:[188,381.5,0],to:[-4.667,-47.333,0],ti:[-63.333,36,0]},{t:64,s:[160,97.5,0]}],ix:2},a:{a:0,k:[23,23,0],ix:1},s:{a:0,k:[50,50,100],ix:6}},ao:0,ip:0,op:150,st:0,bm:0},{ddd:0,ind:9,ty:2,nm:"金币2.png",cl:"png",refId:"image_7",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[0]},{t:53,s:[120]}],ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:0,s:[178,373.5,0],to:[-23.333,-42,0],ti:[139.333,46.667,0]},{t:53,s:[-34,145.5,0]}],ix:2},a:{a:0,k:[25,24,0],ix:1},s:{a:0,k:[50,50,100],ix:6}},ao:0,ip:0,op:150,st:0,bm:0},{ddd:0,ind:10,ty:2,nm:"矩形.png",cl:"png",refId:"image_8",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[188,177.5,0],ix:2},a:{a:0,k:[376,355,0],ix:1},s:{a:0,k:[50,50,100],ix:6}},ao:0,ip:0,op:150,st:0,bm:0}],markers:[]}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){var t=e.isLandScape;return new Promise(function(e,n){new s({isLandScape:t,callback:{success:e,fail:n}})})}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(244);var a=n(562),s=function(){function e(t){i(this,e),this.isLandScape=t.isLandScape,this.callback=t.callback,this.create$dialog(),this.bindEvent()}return r(e,[{key:"create$dialog",value:function(){var e=this,t=this.$dialogCt=$('<div class="submit-confirm-dialog-ct">\n                                                <div class="submit-confirm-dialog">\n                                                    <div class="submit-confirm-dialog__header">\n                                                        <p class="title">信息确认</p>\n                                                        <div class="close-btn eqf-no"></div>\n                                                    </div>\n                                                    <div class="submit-confirm-dialog__content">\n                                                        <p class="confirm-tip">检测到您填写的信息可能涉及个人隐私，为保证您的隐私安全建议查看 <span class="privacy-policy">《隐私协议》</span> 后再提交。</p>\n                                                        <div class="privacy-policy-confirm">\n                                                            <div class="privacy-policy-checkbox-layout checkbox-checked"><span class="checked-icon eqf-yes"></span></div>\n                                                            <input type="checkbox" class="privacy-policy-checkbox" checked name="" value=""><span class="privacy-policy-checkbox-desc">我已知晓<span class="privacy-policy">《隐私协议》</span>并授权表单收集我的信息</span>\n                                                        </div>\n                                                    </div>\n                                                    <div class="submit-confirm-dialog__handle">\n                                                        <div class="handle-btn confirm-btn">提交</div>\n                                                        <div class="handle-btn cancle-btn">取消</div>\n                                                    </div>\n                                                </div>\n                                            </div>'),n=this.$dialog=t.find(".submit-confirm-dialog");this.isLandScape&&(n.addClass("landScape-scene"),n.css({width:$(".main-page.z-current").not(".editor-section").height(),height:$(".main-page.z-current").not(".editor-section").width()-32,left:-($(".main-page.z-current").not(".editor-section").width()-32)})),$(".main-page.z-current").not(".editor-section").prepend(t),this.$dialog.offset(),this.isLandScape?this.$dialog.animate({left:0},400,function(){e.$dialog.css({left:0})}):this.$dialog.animate({top:"56px",bottom:0},400,function(){e.$dialog.css({top:"56px",bottom:0})})}},{key:"bindEvent",value:function(){var e=this,t=void 0;t=this.isLandScape?{left:-($(".main-page.z-current").not(".editor-section").width()-32)}:{top:"100%",bottom:"-"+($(".main-page.z-current").not(".editor-section").height()-56)+"px"},this.$dialog.find(".privacy-policy-checkbox").change(function(t){e.$dialog.find(".confirm-btn").toggleClass("disale-submit"),e.$dialog.find(".privacy-policy-checkbox-layout").toggleClass("checkbox-checked")}),this.$dialog.find(".close-btn, .cancle-btn").click(function(){e.$dialog.animate(t,400,function(){e.$dialogCt.remove(),e.callback.fail({msg:"cancle-submit"})})}),this.$dialog.find(".confirm-btn").click(function(){e.$dialog.animate(t,400,function(){e.$dialogCt.remove(),e.callback.success()})}),this.$dialog.find(".privacy-policy").click(function(){a({isLandScape:e.isLandScape})})}}]),e}();e.exports=o},function(e,t,n){"use strict";function i(e){var t=e.isLandScape,n=$(o);t?(n.addClass("landScape-scene"),n.css({width:$(".main-page.z-current").not(".editor-section").height(),height:$(".main-page.z-current").not(".editor-section").width()-32})):n.css({height:$(".main-page.z-current").not(".editor-section").height()-56}),$(".main-page.z-current").not(".editor-section").prepend(n),n.slideDown(400),n.find(".return-btn").click(function(){n.slideUp(400,"linear",function(){n.remove()})}),n.on("touchstart",function(e){e.stopPropagation()})}n(563);var o=n(564);e.exports=i},function(e,t){},function(e,t){e.exports='<div class="privacy-policy-info"><div class="privacy-policy-info__header"><p class="title">隐私协议</p><div class="return-btn eqf-left"></div></div><div class="privacy-policy-info__content_ct"><div class="privacy-policy-info__content"><p class="headline">易企秀隐私权政策</p><div class="privacy-policy-main"><p class="bold-text">提示条款</p><p>您的信任对我们非常重要，我们深知个人信息对您的重要性，我们将按法律法规要求，采取相应安全保护措施，尽力保护您的个人信息安全可控。鉴于此，北京中易企秀企秀科技有限公司（简称“我们”或“易企秀”）制定本《易企秀隐私权政策》（下称“本政策/本隐私权政策”）并提醒您：</p><p class="line-wrap">本政策适用于易企秀提供的所有产品和服务。</p><p class="line-wrap"><span class="underline bold-text">在使用易企秀产品或服务前，请您务必仔细阅读并透彻理解本政策，特别是以粗体/粗体下划线标识的条款，您应重点阅读，在确认充分理解并同意后再开始使用。</span>如对本政策内容有任何疑问、意见或建议，您可通过易企秀官方客服与我们联系。本隐私权政策部分将帮助您了解以下内容：<br>一、我们如何收集和使用您的信息<br>二、我们如何使用Cookie或同类技术<br>三、我们如何共享、转让、公开披露您的信息<br>四、我们如何保护您的信息<br>五、您如何管理您的信息<br>六、我们如何处理未成年人的信息<br>七、通知和修订<br>八、如何联系我们<br></p><p class="bold-text">一、我们如何收集和使用您的信息</p><p>在您使用我们的产品及/或服务时，我们需要/可能需要收集和使用的您的个人信息包括如下两种：</p><p class="bold-text">1、为实现向您提供我们产品及/或服务的基本功能，您须授权我们收集、使用的必要的信息。如您拒绝提供相应信息，您将无法正常使用我们的产品及/或服务；</p><p class="bold-text">2、为实现向您提供我们产品及/或服务的附加功能，您可选择授权我们收集、使用的信息。如您拒绝提供，您将无法正常使用相关附加功能或无法达到我们拟达到的功能效果，但并不会影响您正常使用我们产品及/或服务的基本功能。</p><p class="underline bold-text">您理解并同意：</p><p class="bold-text">1、<span class="underline bold-text">我们致力于打造多样的产品和服务以满足您的需求。因我们向您提供的产品和服务种类众多，且不同用户选择使用的具体产品/服务范围存在差异，相应的，基本/附加功能及收集使用的个人信息类型、范围等会有所区别，请以具体的产品/服务功能为准；</span></p><p><span class="bold-text">2、<span class="underline">为给您带来更好的产品和服务体验，我们在持续努力改进我们的技术，随之我们可能会不时推出新的或优化后的功能，可能需要收集、使用新的个人信息或变更个人信息使用目的或方式。对此，我们将通过更新本政策、弹窗、页面提示等方式另行向您说明对应信息的收集目的、范围及使用方式，并为您提供自主选择同意的方式，且在征得您明示同意后收集、使用</span>。</span>在此过程中，如果您有任何疑问、意见或建议的，您可通过易企秀官方客服与我们联系，我们会尽快为您作出解答。</p><p>我们会为实现本政策下述的各项功能，收集和使用您的个人信息：</p><p class="bold-text">（一）用户注册</p><p>我们通过易企秀平台账户为您提供会员服务。为注册成为会员并使用我们的会员服务，您需要提供<span class="bold-text">手机号码/拟使用的会员名和密码</span>用于创建易企秀平台账户。如果您仅需使用浏览、搜索服务，您不需要注册成为我们的会员及提供上述信息。</p><p class="underline bold-text">对于需要通过易企秀平台账户才能使用的服务，我们可能会根据您提供的上述信息校验您的会员身份，确保我们是在为您本人提供服务。</p><p class="bold-text">（二）为您提供商品或服务信息展示</p><p class="underline bold-text">为了让您快速地找到您所需要的商品，我们可能会收集您使用我们的产品与/或服务的设备信息（包括设备名称、设备型号、操作系统）来为您提供商品信息展示的最优方式。我们也会为了不断改进和优化上述的功能来使用您的上述个人信息。</p><p>您也可以通过搜索来精准地找到您所需要的商品或服务。我们会保留您的搜索内容以方便您重复输入或为您展示与您搜索内容相关联的商品。<span class="underline bold-text">请您注意，您的搜索关键词信息无法单独识别您的身份，不属于您的个人信息，我们有权以任何的目的对其进行使用；只有当您的搜索关键词信息与您的其他信息相互结合使用并可以识别您的身份时，则在结合使用期间，我们会将您的搜索关键词信息作为您的个人信息，与您的搜索历史记录一同按照本隐私政策对其进行处理与保护。</span></p><p class="bold-text">（三）为您提供收藏、浏览、关注与分享功能</p><p>在您浏览我们网站的过程中，您可以选择对感兴趣的商品及/或服务进行收藏、通过我们提供的功能组件向其他第三方分享信息。在您使用上述功能的过程中，我们会收集包括您的收藏及分享历史在内等服务日志信息用于实现上述功能及其他我们明确告知的目的。</p><p class="bold-text">（四）帮助您完成支付</p><p>为完成订单支付，您需要选择付款方式，<span class="bold-text">我们会将您的易企秀平台账户会员名、对应的付款账户名、订单支付相关信息及其他法律法规要求的必要信息与付款账户共享。</span></p><p class="bold-text">（五）客服及争议处理</p><p>当您与我们联系或提出售中售后、争议纠纷处理申请时，为了保障您的账户及系统安全，<span class="underline bold-text">我们需要您提供必要的个人信息以核验您的会员身份。</span></p><p class="underline bold-text">为便于与您联系、尽快帮助您解决问题或记录相关问题的处理方案及结果，我们可能会保存您与我们的通信/通话记录及相关内容（包括账号信息、订单信息、您为了证明相关事实提供的其他信息，或您留下的联系方式信息），如果您针对具体订单进行咨询、投诉或提供建议的，我们会使用您的账号信息和订单信息。</p><p>为了提供服务及改进服务质量的合理需要，我们还可能使用的您的其他信息，包括您与客服联系时您提供的相关信息。</p><p class="bold-text">（六）为您提供评论、问答等信息公开发布功能</p><p>您可通过我们为您提供的评论、问答、论坛、及其他信息发布功能公开发布信息，包括作为会员可发布图文/视频内容、发表评价及问答内容。<br>我们可能会根据您的会员类型及网络日志信息判断您是否可享受对应功能权限（例如购买不同类型会员，享受不同的会员服务）。</p><p class="underline bold-text">请注意，您公开发布的信息中可能会涉及您或他人的个人信息甚至个人敏感信息，如您选择上传包含个人信息的图片，请您更加谨慎地考虑，是否在使用我们的服务时共享甚至公开分享相关信息。若您公开发布的信息中涉及儿童个人信息的，您需在发布前征得对应儿童监护人的同意。</p><p class="bold-text">（七）为您提供安全保障</p><p>为提高您使用我们提供服务的安全性，保护您或其他用户或公众的人身财产安全免遭侵害，更好地预防钓鱼网站、欺诈、网络漏洞、计算机病毒、网络攻击、网络侵入等安全风险，更准确地识别违反法律法规或易企秀相关协议规则的情况，我们可能使用或整合您的会员信息、交易信息、设备信息、服务日志信息或依据法律共享的信息，来综合判断您账户及交易风险、进行身份验证、检测及防范安全事件，并依法采取必要的记录、审计、分析、处置措施。</p><p class="bold-text">（八）向您提供商品或服务的信息展示和推送</p><p class="bold-text">（1）为您展示和推送商品或服务<br>基于您向我们提供的信息、我们可能收集的信息及我们通过间接方式收集到的您的信息（例如您的浏览及搜索记录、设备信息、订单信息），我们可能会基于用户行为分析及用户画像，用于提取您的浏览、搜索偏好、行为习惯、位置信息相关特征，以便向您提供更契合您需求的页面展示和推荐个性化内容。</p><p class="bold-text">（2）向您发出通知<br>我们可能在必需时（例如当我们由于系统维护而暂停某一单项服务、变更、终止提供某一单项服务时）向您发出与服务有关的通知。<br>如您不希望继续接收我们推送的消息，您可要求我们停止推送，例如：根据短信退订指引要求我们停止发送推广短信，或在移动端设备中进行设置，不再接收我们推送的消息；但我们依法律规定或发送消息的情形除外。</p><p class="bold-text">（九）其他</p><p class="underline bold-text">1、若你提供的信息中含有其他用户的个人信息，在向易企秀提供这些个人信息之前，您需确保您已经取得合法的授权。若其中涉及儿童个人信息的，您需在发布前取得对应儿童监护人的同意，前述情形下监护人有权通过官方电话联系我们，要求更正或删除涉及儿童个人信息的内容。</p><p class="underline bold-text">2、若我们将信息用于本政策未载明的其他用途，或者将基于特定目的收集而来的信息用于其他目的，或者我们主动从第三方处获取您的个人信息，均会事先获得您的同意。</p><p>3、征得授权同意的例外<br>您充分理解并同意，我们在以下情况下收集、使用您的个人信息无需您的授权同意，且我们可能不会响应您提出的更正/修改、删除、注销、撤回同意、索取信息的请求：<br>（1）与国家安全、国防安全有关的；<br>（2）与公共安全、公共卫生、重大公共利益有关的；<br>（3）与犯罪侦查、起诉、审判和判决执行等司法或行政执法有关的；<br>（4）出于维护您或其他个人的生命、财产等重大合法权益但又很难得到本人同意的；<br>（5）您自行向社会公众公开的个人信息；<br>（6）从合法公开披露的信息中收集个人信息的，如合法的新闻报道、政府信息公开等渠道。<br>（7）根据与您签订和履行相关协议或其他书面文件所必需的；<br>（8）用于维护所提供的产品及/或服务的安全稳定运行所必需的，例如发现、处置产品及/或服务的故障；<br>（9）为合法的新闻报道所必需的；<br>（10）学术研究机构基于公共利益开展统计或学术研究所必要，且对外提供学术研究或描述的结果时，对结果中所包含的个人信息进行去标识化处理的；<br>（11）法律法规规定的其他情形。</p><p>请知悉，根据适用的法律，若我们<span class="underline bold-text">对个人信息采取技术措施和其他必要措施进行处理，使得数据接收方无法重新识别特定个人且不能复原</span>，或我们可能会对收集的信息进行去标识化地研究、统计分析和预测，用于改善易企秀的内容和布局，为商业决策提供产品或服务支撑，以及改进我们的产品和服务（包括使用匿名数据进行机器学习或模型算法训练），<span class="underline bold-text">则此类处理后数据的使用无需另行向您通知并征得您的同意。</span></p><p>4、如我们停止运营易企秀产品或服务，我们将及时停止继续收集您个人信息的活动，将停止运营的通知以逐一送达或公告的形式通知您，并对我们所持有的与已关停业务相关的个人信息进行删除或匿名化处理。涉及儿童个人信息的，我们会并将停止运营的通知及时告知儿童监护人。</p><p class="bold-text">5、如果您拒绝表单创建者或者表单发布者收集、使用您的个人信息，请勿填写并并提交表格，我们严格遵守与您的约定，不会擅自使用您填写的表单信息。</p><p class="bold-text">二、我们如何使用Cookie或同类技术</p><p>为确保网站正常运转、为您获得更轻松的访问体验、向您推荐您可能感兴趣的内容，我们会在您的计算机或移动设备上存储Cookie、或浏览器（或关联应用程序）提供的其他通常包含标识符、站点名称以及一些号码和字符的本地存储（统称“Cookie”）。借助于 Cookie，网站能够存储您的偏好或购物车内的商品等数据。</p><p><span class="underline bold-text">如果您的浏览器或浏览器附加服务允许，您可修改对Cookie的接受程度或拒绝我们的Cookie。</span>但如果您这么做，在某些情况下可能会影响您安全访问我们的网站，且可能需要在每一次访问我们的网站时更改用户设置。</p><p class="bold-text">三、我们如何共享、转让、公开披露您的信息</p><p class="bold-text">（一）共享</p><p>我们不会与易企秀服务提供者以外的公司、组织和个人共享您的个人信息，但以下情况除外：</p><p>1、在法定情形下的共享：我们可能会根据法律法规规定、诉讼、争议解决需要，或按行政、司法机关依法提出的要求，对外共享您的个人信息。</p><p>2、在获取明确同意的情况下共享：获得您的明确同意后，我们会与其他方共享您的个人信息。</p><p>3、与授权合作伙伴共享：<span class="underline bold-text">我们可能委托授权合作伙伴为您提供某些服务或代表我们履行职能，</span>我们仅会出于本隐私权政策声明的合法、正当、必要、特定、明确的目的共享您的信息，授权合作伙伴只能接触到其履行职责所需信息，且不得将此信息用于其他任何目的。对于涉及儿童个人信息的，我们不允许合作伙伴进行转委托。</p><p>目前，我们的授权合作伙伴包括以下类型：</p><p>（1）广告、分析服务类的授权合作伙伴。除非得到您的许可，否则我们不会将您的个人身份信息与提供广告、分析服务的合作伙伴共享。我们会委托这些合作伙伴处理与广告覆盖面和有效性相关的信息，但不会提供您的个人身份信息，或者我们将这些信息进行去标识化处理，以便它不会识别您个人。这类合作伙伴可能将上述信息与他们合法获取的其他数据相结合，以执行我们委托的广告服务或决策建议。</p><p>（2）供应商、服务提供商和其他合作伙伴。我们将信息发送给支持我们业务的供应商、服务提供商和其他合作伙伴，这些支持包括受我们委托提供的技术基础设施服务、分析我们服务的使用方式、衡量广告和服务的有效性、提供客户服务、支付便利或进行学术研究和调查。</p><p>我们会对授权合作伙伴获取有关信息的应用程序接口（API）进行严格的安全检测，并与授权合作伙伴约定严格的数据保护措施，令其按照我们的委托目的、服务说明、本隐私权政策以及其他任何相关的保密和安全措施来处理个人信息。</p><p class="bold-text">（二）转让</p><p>我们不会将您的个人信息转让给任何公司、组织和个人，但以下情况除外：</p><p>1、在获取明确同意的情况下转让：获得您的明确同意后，我们会向其他方转让您的个人信息；</p><p>2、在易企秀服务提供者发生合并、收购或破产清算情形，或其他涉及合并、收购或破产清算情形时，如涉及到个人信息转让，我们会要求新的持有您个人信息的公司、组织继续受本政策的约束，否则我们将要求该公司、组织和个人重新向您征求授权同意。</p><p class="bold-text">（三）公开披露</p><p>我们仅会在以下情况下，公开披露您的个人信息：</p><p>1、获得您明确同意或基于您的主动选择，我们可能会公开披露您的个人信息；</p><p>2、<span class="underline bold-text">如果我们确定您出现违反法律法规或严重违反易企秀平台相关协议及规则的情况，或为保护易企秀平台用户或公众的人身财产安全免遭侵害，我们可能依据法律法规或征得您同意的情况下披露关于您的个人信息</span>，包括相关违规行为以及易企秀平台已对您采取的措施。例如，若您因出售假冒商品而严重违反易企秀规则，我们可能会公开披露您的店铺认证主体信息与违规情况。</p><p class="bold-text">（四）共享、转让、公开披露个人信息时事先征得授权同意的例外</p><p>以下情形中，共享、转让、公开披露您的个人信息无需事先征得您的授权同意：</p><p>1、与国家安全、国防安全有关的；<br>2、与公共安全、公共卫生、重大公共利益有关的；<br>3、与犯罪侦查、起诉、审判和判决执行等司法或行政执法有关的；<br>4、出于维护您或其他个人的生命、财产等重大合法权益但又很难得到本人同意的；<br>5、您自行向社会公众公开的个人信息；<br>6、从合法公开披露的信息中收集个人信息的，如合法的新闻报道、政府信息公开等渠道。</p><p>请知悉，根据适用的法律，若我们<span class="underline bold-text">对个人信息采取技术措施和其他必要措施进行处理，使得数据接收方无法重新识别特定个人且不能复原，则此类处理后数据的共享、转让、公开披露无需另行向您通知并征得您的同意。</span></p><p class="bold-text">四、我们如何保护您的信息</p><p>（一）我们已采取符合业界标准、合理可行的安全防护措施保护您的信息，防止个人信息遭到未经授权访问、公开披露、使用、修改、损坏或丢失。我们会使用加密技术提高个人信息的安全性；我们会使用受信赖的保护机制防止个人信息遭到恶意攻击；我们会部署访问控制机制，尽力确保只有授权人员才可访问个人信息；以及我们会举办安全和隐私保护培训课程，加强员工对于保护个人信息重要性的认识。</p><p>（二）我们有行业先进的以数据为核心、围绕数据生命周期进行的数据安全管理体系，从组织建设、制度设计、人员管理、产品技术等方面多维度提升整个系统的安全性。</p><p>（三）我们会采取合理可行的措施，尽力避免收集无关的个人信息。<span class="underline bold-text">我们只会在达成本政策所述目的所需的期限内保留您的个人信息，除非法律有强制的存留要求，</span><span class="bold-text">而我们判断前述期限的标准包括：</span></p><p class="bold-text">1、完成与您相关的交易目的、维护相应交易及业务记录、应对您可能的查询或投诉；<br>2、保证我们为您提供服务的安全和质量；<br>3、您是否同意更长的留存期间；<br>4、是否存在保留期限的其他特别约定。</p><p class="underline bold-text">在您的个人信息超出保留期间后，我们会根据适用法律的要求删除您的个人信息。</p><p>（四）互联网并非绝对安全的环境，使用易企秀平台服务时，<span class="underline bold-text">我们强烈建议您不要使用非易企秀平台推荐的通信方式发送您的信息。</span>您可以通过我们的服务建立联系和相互分享。当您通过我们的服务创建交流、交易或分享时，您可以自主选择沟通、交易或分享的对象，作为能够看到您的交易内容、联络方式、交流信息或分享内容等相关信息的第三方。</p><p>请使用复杂密码，协助我们保证您的账号安全。我们将尽力保障您发送给我们的任何信息的安全性。如果我们的物理、技术或管理防护设施遭到破坏，导致信息被非授权访问、公开披露、篡改或毁坏，导致您的合法权益受损，我们将承担相应的法律责任。</p><p>（五）在不幸发生个人信息安全事件后，我们将按照法律法规的要求向您告知：安全事件的基本情况和可能的影响、我们已采取或将要采取的处置措施、您可自主防范和降低风险的建议、对您的补救措施等。事件相关情况我们将以邮件、信函、电话、推送通知等方式告知您，难以逐一告知个人信息主体时，我们会采取合理、有效的方式发布公告。</p><p>同时，我们还将按照监管部门要求，上报个人信息安全事件的处置情况。</p><p class="bold-text">五、您如何管理您的信息</p><p>您可以通过以下方式访问及管理您的信息：</p><p class="bold-text">（一）查询、更正和补充您的信息</p><p class="bold-text">我们鼓励您更新和修改您的个人信息以使其更准确有效。您能通过易企秀服务访问您的个人信息，并根据对应信息的管理方式自行完成或要求我们进行修改、补充和删除。我们将采取适当的技术手段或提供提交申请的联系渠道，尽可能保证您可以访问、更新和更正自己的个人信息或使用易企秀服务时提供的其他信息。</p><p class="bold-text">（二）注销您的账户</p><p>您可以登录易企秀并选择联系客服协助您申请注销您的账户。</p><p>在您主动注销账户之后，我们将停止为您提供产品或服务，根据适用法律的要求删除您的个人信息，或使其匿名化处理。</p><p class="bold-text">（三）响应您的上述请求</p><p>为保障安全，您可能需要提供书面请求，或以其他方式证明您的身份。我们可能会先要求您验证自己的身份，然后再处理您的请求。</p><p>在以下情形中，按照法律法规要求，我们将无法响应您的请求：</p><p>1、与国家安全、国防安全有关的；<br>2、与公共安全、公共卫生、重大公共利益有关的；<br>3、与犯罪侦查、起诉、审判和执行判决等有关的；<br>4、有充分证据表明个人信息主体存在主观恶意或滥用权利的；<br>5、响应您的请求将导致您或其他个人、组织的合法权益受到严重损害的；<br>6、涉及商业秘密的。</p><p class="bold-text">六、我们如何处理未成年人的信息</p><p class="underline bold-text">在易企秀商务活动中我们推定您具有相应的民事行为能力。如您为未成年人，我们要求您请您的父母或其他监护人仔细阅读本隐私权政策，并在征得您的父母或其他监护人同意的前提下使用我们的服务或向我们提供信息。</p><p class="underline bold-text">如果我们识别出您是儿童用户的，我们将通知您的监护人并要求您的监护人同意儿童个人信息收集使用规则。对于经父母或其他监护人同意使用我们的产品或服务而收集儿童个人信息的情况，我们只会在法律法规允许、父母或其他监护人明确同意或者保护儿童所必要的情况下使用、共享、转让或披露此信息。</p><p><span class="underline bold-text">若您是儿童的父母或其他监护人，请您关注您监护的儿童是否是在取得您的授权同意之后使用我们的服务的。</span>如您对您所监护的儿童的个人信息有疑问，请通过官方联系方式与我们联系。</p><p class="bold-text">七、通知和修订</p><p>为了给您提供更好的服务，我们可能会根据易企秀服务的更新情况及法律法规的相关要求适时修改本政策的条款，该等修改构成本政策的一部分。如该等更新造成您在本政策下权利的实质减少或重大变更，我们将在本政策生效前通过网站公告、推送通知、弹窗提示或其他方式来通知您，您如果不同意该等变更，可以选择停止使用易企秀服务；如您仍然继续使用易企秀服务的，即表示您已充分阅读、理解并同意受经修订的本政策的约束。</p><p>我们的任何修改都会将您的满意度置于首位。我们鼓励您在每次使用易企秀服务时都查阅我们的隐私政策。</p><p>我们可能在必需时（例如当我们由于系统维护而暂停某一项服务时）发出与服务有关的公告。您可能无法取消这些与服务有关、性质不属于推广的公告。</p><p class="bold-text">八、如何联系我们</p><p>如您有关于网络信息安全的投诉和举报，或您对本政策、易企秀的隐私措施、您的信息的相关事宜有任何问题、意见或建议，请通过如下方式及时与易企秀联系：客服电话：010-56592226；客服咨询： vip@eqxiu.com。</p><p>一般情况下，我们将在收到您的问题、意见或建议，并验证您的用户身份后的三十天内予以回复。</p></div></div></div></div>'},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function g(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:g(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)},c=n(101),l=n(566),u=n(567),p=n(54),d=n(24),h=n(71).getImgInfo,f=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{self:!1,fontFamily:!1}},trigger:{self:!1},sound:!1,link:!1}),r.eqxScene.formManager.add(r),r}return r(t,e),a(t,[{key:"create$context",
value:function(){var e=this.compJson,t=e.id,n=e.pageId,i=e.type,o=e.properties.title,r=this.eqxScene.config.mode;return this.pageId=n,this.uploadImage=[],this.name="eq[f_"+t+"]",this.$context=l.$compDiv(t,i,o,r),this.$button=this.$context.find("button"),this.$context}},{key:"eleShow",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleShow",this).call(this);var e=this.eqxScene.config.mode;"view"!==e||this.uploader||this.initUpload()}},{key:"initUpload",value:function(){this.initTencentUpload()}},{key:"initTencentUpload",value:function(){var e=this,t=this,n=document.createElement("input");n.type="file",n.multiple=!0,n.accept="image/jpeg,image/gif,image/png",this.$context.on("click",function(){$(n).trigger("click")}),p.$initTencentUpload().then(function(i){e.cos=i;var o=i.eqxOptions&&i.eqxOptions.credentials;$(n).on("change",function(r,a){var s=Array.from(n.files),c=[];try{s.forEach(function(e){var t=e.size/1024/1024;if(t>10)throw"over_max_size";e.target_name=(window.scene.userId||window.devScene.meta.createUser)+"/h5/image/"+Math.random().toString(36).slice(-10),c.push({Bucket:o.bucket+"-"+o.appId,Region:o.region,Key:e.target_name,Body:e,onTaskReady:function(e){console.log(e)}})})}catch(l){return void("over_max_size"==l&&u.modal("文件大小不得超过10M，请重新上传",t.$li))}e.updateTitle("上传中..."),i.uploadFiles({files:c,SliceSize:2097152,AsyncLimit:2,onProgress:function(e){var t=Math.floor(1e4*e.percent)/100,n=Math.floor(e.speed/1024/1024*100)/100;console.log("进度："+t+"%; 速度："+n+"Mb/s;")},onFileFinish:function(e,n,i){console.log(i.Key+" 上传"+(e?"失败":"完成")),e?u.modal(e.error&&e.error.message||"上传失败！",t.$li):(t.updateTitle(s.map(function(e){return e.name}).join("、")),t.uploadImage.file=c.map(function(e){return e.Body}),h(c[0].Key).then(function(e){t.uploadImage.info={w:Number(e.width),h:Number(e.height),size:Number(e.size),key:c[0].Key}}))}},function(e,t){console.log("uploadFiles:",e||t)})})})}},{key:"check",value:function(){var e=this.uploadImage.info&&d.FILE+this.uploadImage.info.key,t={success:!0,pageId:this.pageId,key:this.name,value:e};return this.required&&!e&&(t.success=!1,t.message="上传图片: "+this.title+" 为必填项"),t}},{key:"updateTitle",value:function(e){this.$context.find("button").text(e)}}]),t}(c);e.exports=f},function(e,t){"use strict";function n(e,t,n,i){var o=$('<div id="'+e+'"\n                             ctype="'+t+'"\n                             class="element upload-div"\n                             style="width: 100%;height: 100%;position: relative">\n                        </div>'),r=$('<button id="#{id}-upload-image"\n                             style="display: block;\n                                    width: 100%;\n                                    height: 100%;\n                                    border: none;\n                                    padding: 0 8px;\n                                    background-color: transparent;\n                                    text-align: left;\n                                    overflow: hidden;\n                                    white-space: nowrap;\n                                    text-overflow: ellipsis;\n                                    font-size: 16px;\n                                    pointer-events: none;">\n                         '+n+"\n                     </button>");return"view"===i&&r.attr("id",e+"-upload-image"),o.append(r)}e.exports={$compDiv:n}},function(e,t){"use strict";function n(e,t){var n=$('<div class="feedback-box">\n                      <div class="feedback-form">\n                        <div class="feedback-content">'+e+'</div>\n                        <div class="feedback-btn">\n                          <a class="feedback-close">关闭</a>\n                        </div>\n                      </div>\n                    </div>'),i=n.find(".feedback-form");i.css("margin-top",-Number.parseInt(i.height()+80)/2),n.insertBefore(t.parent().parent()),n.find(".feedback-close").on("click",function(){n.animate({opacity:0},{duration:300,complete:function(e){return n.remove()}})})}e.exports={modal:n}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(101),c=n(569),l=n(570),u=n(36).parse,p=n(483).isPhoneNumber,d=n(82).popUpModal,h=n(496).$getSmsCode,f=n(27),g=f.mobilecheck,m=f.isIOS;n(571);var v=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{base:{color:!1,lineHeight:!1,paddingTop:!1},compStyle:{backgroundColor:!1},compFont:{self:!0,fontColor:!0},functionStyle:{required:!0},advanceStyle:{"function":!0}},trigger:!1,sound:!1,link:!1}),r.eqxScene.formManager.add(r),r}return r(t,e),a(t,[{key:"check",value:function(){var e=this.$context.find(".telephone").val(),t=this.$context.find(".smsInput").val(),n=this.compJson.properties.telStyle,i={success:!0,pageId:this.pageId,key:this.name,type:this.type,value:{phoneValue:e}};return 2!=n?i.value.smsValue=t:i.skip=!0,this.required&&(e?t||2==n||(i.success=!1,i.message="请输入验证码"):(i.success=!1,i.message="请输入手机号")),i}},{key:"create$Activity",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.title,o=e.properties,r=o.telStyle,a=o.placeholder,s=void 0;return s=2==r?$(u(l,{id:t,type:n,title:i,placeholder:a})):$(u(c,{id:t,type:n,title:i}))}},{key:"settingNormalStyle",value:function(){var e=this.compJson,t=e.id,n=e.pageId,i=e.type,o=e.title,r=e.properties,a=r.required,s=r.ownFontSize,c=r.ownBg,l=r.ownerCss,u=l.borderWidth,p=l.borderColor,d=l.borderStyle,h=l.borderBottomLeftRadius,f=l.borderBottomRightRadius,g=l.borderTopLeftRadius,m=l.borderTopRightRadius,v=r.telStyle;2!=v&&(this.$context.find(".telephone").css({borderWidth:u,borderColor:p,borderStyle:d,borderBottomLeftRadius:h,borderBottomRightRadius:f,borderTopLeftRadius:g,borderTopRightRadius:m}),this.$context.find(".smsInput").css({borderWidth:u,borderColor:p,borderStyle:d,borderBottomLeftRadius:h,borderBottomRightRadius:f,borderTopLeftRadius:g,borderTopRightRadius:m})),this.required=a,this.title=o,this.type=i,this.name="eq[f_"+t+"]",this.pageId=n,this.updateInputFontSize(s),this.updateInputBgColor(c)}},{key:"create$context",value:function(){var e=this.create$Activity();return this.$context=e,this.settingNormalStyle(),e}},{key:"update$context",value:function(){var e=this.compJson,t=e.properties,n=t.markActivity,i=t.telStyle,o=t.placeholder,r=this.$context.empty();n&&2==i?$(r).html('\n                <input class="normal-phone" type="tel" style="border: none" placeholder="'+o+'"/>\n            '):$(r).html('<input class="telephone" type="tel" placeholder="请输入手机号"/>\n    <div style="width: 100%;height: 12%;"></div>\n    <input class="smsInput" type="number"  oninput="if(value.length>6)value=value.slice(0,6)" placeholder="验证码"/>\n    <input class="smsButton" type="button"  value="获取验证码"/>')}},{key:"updateInputBorderColor",value:function(e){this.$context.find(".telephone").css({borderColor:e}),this.$context.find(".smsInput").css({borderColor:e})}},{key:"createPlaceHolderSheet",value:function(e){var t=document.getElementById("editor-sheet-placeholder");t||(t=document.createElement("style"),t.setAttribute("id","editor-sheet-placeholder"),t.setAttribute("type","text/css"),document.head.appendChild(t));var n=Array.from(t.sheet),i=new RegExp("placeholder-font-"+e),o=n.some(function(e){return i.test(e)});o||t.sheet.addRule(".placeholder-font-"+e+"::-webkit-input-placeholder","font-size: "+e+"px !important")}},{key:"updateInputFontSize",value:function(e){if(!e)return!1;var t=this.$context.find(".telephone"),n=this.$context.find(".smsInput");this.createPlaceHolderSheet(e),n.removeClass(),n.addClass("placeholder-font-"+e),n.addClass("smsInput"),t.removeClass(),t.addClass("placeholder-font-"+e),t.addClass("telephone"),t.css({fontSize:e}),n.css({fontSize:e})}},{key:"updateInputBgColor",value:function(e){return!!e&&(this.$context.find(".normal-phone").css({backgroundColor:e}),this.$context.find(".telephone").css({backgroundColor:e}),void this.$context.find(".smsInput").css({backgroundColor:e}))}},{key:"bindAfterRenderEvent",value:function(){var e=this,t=!0;return this.$context.find(".smsButton").bind("touchstart mousedown",function(n){if(t){var i=e.$context.find(".telephone").val();i?i&&!p(i)?d("电话格式不对"):(t=!1,h(i,e.eqxScene.meta.userId||e.eqxScene.meta.createUser).then(function(){var n=180,i=setInterval(function(){e.$context.find(".smsButton").val("重新发送"+n+"秒"),0==n&&(t=!0,e.$context.find(".smsButton").val("获取验证码"),clearInterval(i)),n-=1},1e3)})["catch"](function(e){d(!e.code||150005!=e.code&&150001!=e.code?"发送失败，请重新发送":e.msg),t=!0})):d("请输入手机号")}}),m()&&this.$context.find("input").on("blur",function(){var e=document.documentElement.scrollTop||document.body.scrollTop;window.scrollTo(0,0,e)}),this.onFocusInTrigger(this.$context.find("input")),this.onChangeTriggerVar(this.$context.find(".telephone"),"telephone"),this.onChangeTriggerVar(this.$context.find(".smsInput"),"smsInput"),!0}},{key:"onChangeTriggerVar",value:function(e,t){var n=this;e.on("change input",function(){var i=e.val();n.id.toString().indexOf("_mask")>-1&&n.eqxScene.eventManager.publish("inputChangeMask_"+t,{id:n.id,value:i})}),this.eqxScene.eventManager.subscribe("inputChangeMask_"+t,{update:function(t){var i=t.data.id;n.id+"_mask"===i&&e.val(t.data.value)}})}},{key:"onFocusInTrigger",value:function(e){var t=this;g()&&this.eqxScene.getOrientation().isLandScape()&&e.on("focusin",function(e){t.eqxPage===t.eqxScene.currentPage&&(t.eqxScene.eventManager.publish("formMask",{comp:t}),$(e.currentTarget).blur(),e.preventDefault())})}}]),t}(s);e.exports=v},function(e,t){e.exports='<div class="element editable-text comp_sms" style="width: 100%;height: 100%" id="#{id}" ctype="#{type}" title="#{title}" name="eq[f_#{id}]"><input class="telephone" type="tel" placeholder="请输入手机号"/><div style="width: 100%;height: 12%"></div><input class="smsInput" maxlength="6" oninput="value.length>6&&(value=value.slice(0,6))" type="number" placeholder="验证码"/> <input class="smsButton" type="button" value="获取验证码"/></div>'},function(e,t){e.exports='<div class="element editable-text comp_sms" style="width: 100%;height: 100%" id="#{id}" ctype="#{type}" title="#{title}" name="eq[f_#{id}]"><input class="telephone normal-phone" style="border: none" type="tel" placeholder="#{placeholder}"/></div>'},function(e,t){},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function g(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:g(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)},c=n(573),l=n(36).parse;n(575);var u=n(101),p=n(24),d=n(80).$setWxCookie,h=n(69).getWeChatUser,f=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{self:!1},trigger:{self:!1},anim:!1,link:!1,flexLine:"",otherShowCompSetting:!0}),r}return r(t,e),a(t,[{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.css.width,o=e.css.height,r=void 0,a=void 0,s=void 0;if(e.properties.formRandom.currentForm){r="hide",s="";var u={source:"h5",type:"wx",info:h()};u=encodeURIComponent(JSON.stringify(u)),a=p.VIEW_HOST_EBDAN+"ls/"+e.properties.formRandom.currentForm.code+"?cardId="+t+"&userinfo="+u}else r="",s="hide",a="";var d=$(l(c,{id:t,type:n,isDefaultContentShow:r,iframeSrc:a,isIframeShow:s}));return this.$iframe=d.find("iframe"),this.$iframe.css({width:i,height:o}),d}},{key:"update$context",value:function(){var e=this.compJson.properties.formRandom;this.$iframe.css({width:this.compJson.css.width,height:this.compJson.css.height});var t=this.$context.find(".default-content");e.currentForm?(this.$iframe.attr("src",p.VIEW_HOST_EBDAN+"ls/"+e.currentForm.code),this.$iframe.hasClass("hide")&&this.$iframe.removeClass("hide"),!t.hasClass("hide")&&t.addClass("hide")):(this.$iframe.attr("src",""),!this.$iframe.hasClass("hide")&&this.$iframe.addClass("hide"),t.hasClass("hide")&&t.removeClass("hide"))}},{key:"bindAfterRenderEvent",value:function(e,n){function i(e){"blur"===e.type&&(window.scrollTo(0,0),r.$editDiv.offset())}s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"bindAfterRenderEvent",this).call(this,e,n);var o=this.eqxPage.eqxScene.MessEventListener,r=this.eqxPage;o.subscribe(this.compJson.id,i,"onmessage"),d()}}]),t}(u);e.exports=f},function(e,t,n){e.exports='<div id="#{id}" ctype="#{type}" class="element comp_formRandom"><div class="default-content #{isDefaultContentShow}"><img src="'+n(574)+'" alt=""><p>请先关联一个表单作品</p></div><iframe src="#{iframeSrc}" frameborder="0" scrolling="auto" class="#{isIframeShow}"></iframe></div>'},function(e,t,n){e.exports=n.p+"images/formRandom-f13381.png"},function(e,t){},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function x(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:x(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)},c=n(27),l=c.isWeixin,u=c.isWxwork,p=n(101),d=n(577),h=n(578),f=n(36).parse,g=n(579),m=n(69).getWxJSSDK,v=n(82).popUpModal,y=n(69).hrefToWxAuth,b=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{self:!0,fontFamily:!0,fontSize:!0,fontColor:!0,baseStyle:!0,lineHeight:!0,letterSpacing:!0}},sound:!1,link:!1}),"view"===r.eqxPage.eqxScene.config.mode&&(r.wxJssdk=m()),r.soundKey=e.id.toString().substring(3),d[r.soundKey]=d[r.soundKey]||{},d[r.soundKey].wxpId=e.id,r}return r(t,e),a(t,[{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.css,o=i.width,r=i.height,a=i.lineHeight;return $(f(h,{id:t,type:n})).css({width:o,height:r,lineHeight:a,display:"inline-block"})}},{key:"bindAfterRenderEvent",value:function(e){var t=this;return $(e).on("mousedown touchstart",function(e){return window.event.stopPropagation(),e.preventDefault(),u()?y(null,null,t.eqxScene.meta):void(l()?t.soundPlay():(v("请在微信中按住我"),t.playDefaultSound()))}),!0}},{key:"updateSize",value:function(e,n){this.$context.css({width:n.width,height:n.height,lineHeight:n.height+"px"}),this.compJson.css.lineHeight=n.height+"px",s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSize",this).call(this,e,n)}},{key:"soundPlay",value:function(){var e=this,t=this;if(d[this.soundKey].soundId){var n=d[this.soundKey].soundId;this.eqxScene.soundManager.onPlay({type:4}),this.wxJssdk.then(function(){wx.playVoice({localId:n})})}else this.compJson.serverId?this.wxJssdk.then(function(){wx.downloadVoice({serverId:e.compJson.serverId,success:function(n){var i=n.localId;e.eqxScene.soundManager.onPlay({type:4}),wx.playVoice({localId:i}),d[t.soundKey].soundId=i},error:function(){e.playDefaultSound()}})}):this.playDefaultSound();this.wxJssdk.then(function(){wx.onVoicePlayEnd({success:function(){e.eqxScene.soundManager.onEnd({type:4})}})})}},{key:"playDefaultSound",value:function(){var e=this;this.defaultSound||(this.defaultSound=document.createElement("audio"),this.defaultSound.src=n(579)),this.defaultSound.paused?(this.eqxScene.soundManager.onPlay({type:4}),this.defaultSound.play(),$(this.defaultSound).bind("ended",function(){e.eqxScene.soundManager.onEnd({type:4})})):(this.eqxScene.soundManager.onEnd({type:4}),this.defaultSound.pause())}}],[{key:"getDefaultSound",value:function(){return g}}]),t}(p);e.exports=b},function(e,t){"use strict";e.exports={}},function(e,t){e.exports='<a id="#{id}" class="element comp_wechat_play" ctype="#{type}"><span style="font-size:16px" class="eqf-volume-high"></span></a>'},function(e,t,n){e.exports=n.p+"images/wexin_sound-d41d8c.mp3"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function b(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:b(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)};n(581);var c=n(27),l=c.isWeixin,u=c.isWxwork,p=n(69).saveWxCompData,d=n(69).generateUserKey,h=n(101),f=n(577),g=n(69).getWxJSSDK,m=n(82).popUpModal,v=n(69).hrefToWxAuth,y=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return"view"===r.eqxPage.eqxScene.config.mode&&(r.wxJssdk=g()),r.soundKey=e.id.toString().substring(3),f[r.soundKey]=f[r.soundKey]||{},f[r.soundKey].wxrId=e.id,$.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{self:!0,fontFamily:!0,fontSize:!0,fontColor:!0,baseStyle:!0,lineHeight:!0,letterSpacing:!0}},sound:!1,link:!1}),r}return r(t,e),a(t,[{key:"create$context",value:function(){var e=this.compJson,t=document.createElement("a");return t.innerHTML=e.properties.title,t.id=e.id,t.setAttribute("class","element comp_wechat_hear"),t.setAttribute("ctype",e.type),t.setAttribute("data-event","1120612"),$(t).css({width:e.css.width,height:e.css.height,display:"inline-block"}),$(t)}},{key:"bindAfterRenderEvent",value:function(e){var t=this,n=void 0;return l()?$(e).on("touchstart",function(e){return u()?v(null,null,t.eqxScene.meta):(window.event.stopPropagation(),e.preventDefault(),void(n=setTimeout(function(){t.soundRecord()},100)))}).on("touchend",function(){u()||(clearTimeout(n),n=null,t.soundStopRecord())}):$(e).on("mousedown",function(e){return u()?v(null,null,t.eqxScene.meta):void m("请在微信中按住我！")}),!0}},{key:"updateSize",value:function(e,n){this.$context.css({width:n.width,height:n.height,lineHeight:n.height+"px"}),this.compJson.css.lineHeight=n.height+"px",s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSize",this).call(this,e,n)}},{key:"soundRecord",value:function(){var e=this;this._recordAllowed=!0,this.wxJssdk.then(function(){e.eqxScene.soundManager.stopAll(),wx.startRecord({success:function(){e._recordAllowed?(e.second=0,e.openPlayState()):(wx.stopRecord(),e._recordAllowed=!1)}}),e.$context.addClass("recording").text("松开 结束")})}},{key:"openPlayState",value:function(){var e=this,t="<div class='voice-panel'><span class='icon eqf-volume-high'></span><div class='voice-tip'>松开手指 停止录音</div></div>";this.voicePanel=$(t).prependTo(this.$li.parent()),this.calculateTime=setInterval(function(){e.second++,e.second>=50&&$(e.voicePanel).text(60-e.second),60===e.second&&e.soundStopRecord()},1e3)}},{key:"soundStopRecord",value:function(){var e=this;this._recordAllowed&&(this._recordAllowed=!1,clearInterval(this.calculateTime),this.calculateTime=null,this.$context.removeClass("recording").text("按住 说话"),this.eqxScene.soundManager.restoreAll(),$(this.voicePanel).remove(),wx.stopRecord({success:function(t){e.second=0,e.wechatUploadVoice(t.localId)}}))}},{key:"wechatUploadVoice",value:function(e){var t=this;f[this.soundKey].soundId=e,wx.uploadVoice({localId:e,isShowProgressTips:1,success:function(e){var n=e.serverId;d(),p(f[t.soundKey].wxpId,n)}})}}]),t}(h);e.exports=y},function(e,t){},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=e.id,n=e.type,i=e.marginTop,o=e.marginBottom,r=e.css,a=e.content,s=void 0===a?"":a;return r.cursor="default",r.minHeight="inherit",$(p(u,{id:t,type:n,content:s,marginTop:i,marginBottom:o})).css(r)}function s(e){var t=e.fontFamily,n=e.mode,i=e.compId;"view"===n&&window.scene&&h({fontFamily:t,textContent:g,compId:i})}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(469),u=n(470),p=n(36).parse,d=n(165),h=d.getFontFamilyStyle,f=n(27).isWeixin,g="",m=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{self:!0,compFont:{self:!0,fontFamily:!0,fontSize:!0,fontColor:!0,bgColor:!0,baseStyle:!0,lineHeight:!0,letterSpacing:!0},advanceStyle:{variable:!1,"function":!1},functionStyle:{variableText:!1,adjustMode:!1,replace:!1}},trigger:{self:!1},sound:!1,link:!1}),r}return r(t,e),c(t,[{key:"create$context",value:function(){var e=this.compJson,t=this.eqxScene.config.mode,n=e.id,i=e.type,o=e.content,r=e.css,c=r.letterSpacing,l=void 0===c?0:c,u=r.fontFamily,p=r.writingMode,d=r.marginTop,h=void 0===d?"0px":d,m=r.marginBottom,v=void 0===m?"0px":m,y=e.properties.anim,b=void 0===y?[]:y;if(e.properties.isReplace=e.properties.isReplace||!1,"view"===t&&window.eqxH5WxInfo&&f()&&"share"!==e.properties.type){var x=window.eqxH5WxInfo.nickname;x&&(e.content=x)&&(o=x)}o&&(o=o.replace(/\s/g,function(){var e=0;return function(t){return e+=1,e%2?"&nbsp;":t}}())),g=o||"我的微信昵称",o=o||"双击编辑文本";var w=a({id:n,type:i,content:o,marginTop:h,marginBottom:v,css:{fontFamily:u,writingMode:p}});return s({mode:this.eqxScene.config.mode,fontFamily:u,compId:this.id}),11===(e.id+"").length&&this.$li.attr("_tracker_data_",JSON.stringify({id:e.id})),b[0]&&"typer"===b[0].type&&w.css({opacity:0}),w.css({letterSpacing:parseFloat(l||0)+"em"}),w}},{key:"updateContent",value:function(e){var t=this.compJson,n=t.css.fontFamily;t.content=e,t.properties.title=g=e,s({fontFamily:n,mode:this.eqxScene.config.mode,compId:this.id+"wx"}),this.$context.find("span").text(e)}}]),t}(l);e.exports=m},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(584),c=n(585),l=n(191).isSupportStyle,u=n(27).isWeixin,p=n(600),d=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{self:!0,advanceStyle:{variable:!1,"function":!1},functionStyle:{variableImg:!1,imgProto:!1,gSensor:!1,scratch:!1,replace:!1}},link:!1,trigger:{self:!1}}),r}return r(t,e),a(t,[{key:"create$context",value:function(){var e=this.eqxScene.config.mode,t=this.compJson,n=t.id,i=t.type,o=t.properties,r=o.scratch,a=o.imgStyle,s=o.maskSrc,p=o.filter;p=void 0===p?{}:p;var d=p.type;if(t.properties.isReplace=t.properties.isReplace||!1,t.properties.wxChooseImg=t.properties.wxChooseImg||"default","view"===e&&window.eqxH5WxInfo&&u()&&"share"!==t.properties.type){var h=window.eqxH5WxInfo.headimgurl;h&&(t.properties.src=h)}var f=this._getContextImgSrc();if(f&&(f=f.replace(/\/\d*$/,"/0")),console.log("微信头像链接",f),Number.isInteger(d)&&d>0)var g=$(c.filterImg({id:n,type:i,src:f,filterType:d}));else g=$(c.img({id:n,type:i,src:f}));return l("WebkitMaskBoxImage")&&s&&this.$contentsDiv.addClass("img_mask").css({"-webkit-mask-box-image":"url("+s+")"}),a&&g.css(a),r&&this.addScratch(),this.$boxContentDiv.css("overflow","hidden"),g}}],[{key:"getDefaultImg",value:function(){return p}}]),t}(s);e.exports=d},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function C(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:C(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)},c=n(585),l=n(101),u=n(191).isSupportStyle,p=n(588),d=n(110),h=n(71),f=h.initEffectImgPath,g=h.loadImg,m=n(24),v=n(599).stackBlurImage,y=n(191).getEvent,b=n(67).getForbiddenImages,x=n(27).isWeixin,w=n(69).getWxJSSDK,k=n(26),S=k.openUrl,I=n(27),T=I.iphoneCheck,E=n(23),P=E.$ajax,_=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!0},advanceStyle:{variable:!0,"function":!0},functionStyle:{variableImg:!0,imgProto:!0,gSensor:!0,scratch:!0,replace:!1}},link:!0}),r}return r(t,e),a(t,[{key:"getFtEditableProps",value:function(){var e=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtEditableProps",this).call(this),n=this.FtEditableProps;return e.concat([n.image.imageSrc,n.link.url,n.internalLink.internalLink,n.telephone.number,n.sound.soundSrc])}},{key:"getFtValue",value:function(e){var n=this.FtEditableProps;return e===n.image.imageSrc?this.getProp("src"):s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFtValue",this).call(this,e)}},{key:"getImgSrc",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2];return this.eqxScene.config.mobileEdit&&(n.width&&(n.width*=2),n.height&&(n.height*=2)),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getImgSrc",this).call(this,e,n,i)}},{key:"updateSize",value:function(e,n){if(this.$width&&this.$height){var i=this.$width/this.$height;this.updateImageSize(i,e,n)}s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSize",this).call(this,e,n)}},{key:"updateTurnOver",value:function(e){this.$boxContentDiv.css("transform",e)}},{key:"pinchEnd",value:function(){var e=this.compJson,t=e.properties,n=e.css,i=t.imgStyle,o=this.$context[0],r=d.parseTransformInFloat(o.style.transform),a=r.scale.x,s=r.scale.y,c=i.width,l=i.height,u=i.marginTop,p=i.marginLeft,h=c*a,f=l*s,g=Math.max(n.height/f,n.width/h,1);f*=g,h*=g;var m=p-(h-c)/2,v=u-(f-l)/2,y=this.validateImgStyle({width:h,height:f,marginTop:v,marginLeft:m},n);this.$context.css("transform","").css(y),t.imgStyle=y}},{key:"validateImgStyle",value:function(e,t){var n=e.width,i=e.height,o=e.marginTop,r=e.marginLeft;return o<0?o+i<t.height&&(o=t.height-i):o=0,r<0?r+n<t.width&&(r=t.width-n):r=0,{width:n,height:i,marginTop:o,marginLeft:r}}},{key:"moveEnd",value:function(){var e=this.compJson,t=e.properties,n=e.css,i=t.imgStyle,o=parseInt(this.$context.css("marginLeft")),r=parseInt(this.$context.css("marginTop")),a=this.validateImgStyle({width:i.width,height:i.height,marginLeft:o,marginTop:r},n);this.$context.css(a),t.imgStyle=a}},{key:"updateImageSize",value:function(e,t,n){e||(this.$width&&this.$height?e=this.$width/this.$height:console.error("no imageRatio!")),t||(t=this.compJson.css),n||(n=this.compJson.css),void 0===n.height&&(n.height=t.height),void 0===n.width&&(n.width=t.width),void 0===n.borderWidth&&(n.borderWidth=parseInt(t.borderWidth||this.compJson.css.borderWidth||0));var i=this.compJson,o=i.properties,r=(n.width-2*n.borderWidth)/(n.height-2*n.borderWidth),a=o.imgStyle;if(r>e){var s=n.width-2*n.borderWidth,c=s/e,l=-(c+2*n.borderWidth-n.height)/2,u=0;a={width:s,height:c,marginTop:l,marginLeft:u}}else{var p=n.height-2*n.borderWidth,d=e*p,h=-(d+2*n.borderWidth-n.width)/2,f=0;a={width:d,height:p,marginLeft:h,marginTop:f}}this.$context.css(a),this.canvas&&$(this.canvas).css(a),o.imgStyle=a}},{key:"_getContextImgSrc",value:function(){var e=this.compJson,t=e.properties;t=void 0===t?{}:t;var n=t.src,i=t.imgStyle,o=t.fileName;if(n=f(n),i&&!this.eqxPage.notImageCut){var r=/\.(gif)$/.test(o);n=this.getImgSrc(n,{width:i.width,height:i.height
},r)}return n}},{key:"create$context",value:function(){var e=this.eqxPage.pageJson.properties,t=this.compJson,n=t.id,i=t.type,o=t.properties,r=o.scratch,a=o.imagepreview,s=o.imgStyle,l=o.maskSrc,p=o.filter;p=void 0===p?{}:p;var d=p.type;t.properties.isReplace=t.properties.isReplace||!1;var h=this._getContextImgSrc();if(Number.isInteger(d)&&d>0)var f=$(c.filterImg({id:n,type:i,src:h,filterType:d}));else f=$(c.img({id:n,type:i,src:h}));if(u("WebkitMaskBoxImage")&&l&&this.$contentsDiv.addClass("img_mask").css({"-webkit-mask-box-image":"url("+l+")"}),s&&f.css(s),r&&this.addScratch(),a&&!e.hasOwnProperty("pip")&&!e.hasOwnProperty("flash")){var g=!0;e.hasOwnProperty("oneShot")&&e.oneShot.auto===!0&&(g=!1),!g||e.pageScroll.canAutoFlip||this.eqxScene.meta.property.autoFlip||this.addImagePreview()}this.$boxContentDiv.css("overflow","hidden");var m=b();return m.length>0&&t.properties.originSrc&&m.includes(t.properties.originSrc)&&this.$boxContentDiv.css({display:"none"}),f}},{key:"eleShow",value:function(){var e=this,n=this.compJson.properties.src;n&&/.gif/.test(n)&&setTimeout(function(){var t=e.$context.prop("src");e.$context.show().each(function(){void this.offsetHeight}).prop("src",t)},1),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleShow",this).call(this)}},{key:"updateImgSrc",value:function(){this.$context=this.create$context(),this.$contentsDiv.empty(),this.$contentsDiv.append(this.$context)}},{key:"updateImageSrc",value:function(e,t,n){e=this.getImgSrc(m.FILE+e,{width:t,height:n}),this.$context.attr("src",e)}},{key:"addImagePreview",value:function(){var e=this.eqxScene,t=this.$contentsDiv;"view"===e.config.mode&&x()&&this.$boxContentDiv.click(function(){w().then(function(){var e=t.find("img").attr("src");e&&(e=e.split("?")[0]),P({url:e+"?imageInfo"}).then(function(n){if(!T()&&["jpeg","jpg"].includes(n.format)){var i=[];t.find("img").each(function(e){var t=$(this).attr("src");t&&(t=t.split("?")[0]),i.push(t)}),e=e.replace("http://","https://"),wx.previewImage({current:e,urls:i})}else e&&wx.previewImage({urls:[e]})})["catch"](function(t){wx.previewImage({urls:[e]})})})})}},{key:"addScratch",value:function(){var e=this;this.$contentsDiv[0].style.position="relative",this.canvas=this.createCanvas(),this.ctx=this.canvas.getContext("2d"),this.$contentsDiv.prepend(this.canvas),this.drawCanvas().then(function(){"view"===e.eqxScene.config.mode&&e.addCanvasEvent()})}},{key:"createCanvas",value:function(){var e=document.createElement("canvas");return e.style.position="absolute",$(e).css(this.compJson.properties.imgStyle),e}},{key:"drawCanvas",value:function(){var e=this,t=this.compJson.properties,n=t.src,i=t.imgStyle;return n=this.getImgSrc(n,{width:i.width,height:i.height}),g(n,!0).then(function(t){e.ctx.globalCompositeOperation="source-over",e.canvas.width=t.width,e.canvas.height=t.height,e.ctx.drawImage(t,0,0),e.ctx.globalCompositeOperation="destination-out",v(e.canvas,30,!0)})}},{key:"addCanvasEvent",value:function(){function e(e){a++,t(),e.preventDefault(),e.stopPropagation();var c=y(e);o=c.pageX-$(s.canvas).offset().left,r=c.pageY-$(s.canvas).offset().top,s.ctx.moveTo(n,i),s.ctx.lineTo(o,r),s.ctx.stroke(),n=o,i=r}function t(){setTimeout(function(){a>=45&&!c&&(c=!0,$(s.canvas).fadeOut(500,function(){setTimeout(function(){s.deleScratch()},500)}))},200)}this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.lineWidth=40;var n,i,o,r,a=0,s=this,c=!1;$(this.canvas).on("mousedown touchstart",function(t){t.preventDefault(),t.stopPropagation();var o=y(t);n=o.pageX-$(s.canvas).offset().left,i=o.pageY-$(s.canvas).offset().top,$(s.canvas).on("mousemove touchmove",e),$(s.canvas).on("mouseup touchend mouseleave",function(){$(s.canvas).off("mousemove touchmove",e)})})}},{key:"deleScratch",value:function(){$(this.canvas).off(),$(this.canvas).remove(),delete this.canvas}},{key:"editImage",value:function(e,t){function n(e){return JSON.parse(JSON.stringify(e))}var i=this.compJson;if(t)var o=Promise.resolve(t);else o=g(this._getContextImgSrc()).then(function(e){var t=e.width,n=e.height,i=t/n;return{width:t,height:n,ratio:i}});var r=n(i);e=n(e);var a=r.properties;a.imgStyle=e.imgStyle,a.cropSize=e.cropSize,a.src=e.src,a.originSrc=e.originSrc,a.maskSrc=e.maskSrc;var s=this.updateJson(r);return this.eqxPage.renderEqxComp(s,!0),o.then(function(e){var t=e.width,n=e.height,i=e.ratio;s.$width=t,s.$height=n,s.updateImageSize(i),s.findTopGroup().autoSizeTopDown()}),s}},{key:"bindAfterRenderEvent",value:function(e,t){t.straightUrl&&$(e).click(function(){S(t.straightUrl)})}}],[{key:"getImageStyles",value:function(){return p}}]),t}(l);e.exports=_},function(e,t,n){"use strict";function i(e){var t=e.id,n=e.type,i=e.src,o=e.filterType,c=void 0===o?s[0].value:o,l="filter-"+t,u=s.find(function(e){return e.value===c})||c[0],p=u.path;return a(r,{id:t,type:n,filterId:l,src:i,path:p})}function o(e){var t=e.id,n=e.type,i=e.src;return'<img id="'+t+'" ctype="'+n+'" class="element comp_image editable-image" style="display:block;" draggable="false" src="'+i+'">'}n(586);var r=n(587),a=n(36).parse;e.exports={img:o,filterImg:i};var s=[{value:1,path:"1.7 0.1 0.1 0 -0.287 0 1.7 0.1 0 -0.287 0 0.1 1.6 0 -0.287 0 0 0 1.0 0"},{value:2,path:"2.1 -1.4 0.6 0.0 -0.12 -0.3 2.0 -0.3 0.0 -0.12 -1.1 -0.2 2.6 0.0 -0.12 0.0 0.0 0.0 1.0 0.0"},{value:3,path:"1.9 -0.3 -0.2 0 -0.341 -0.2  1.7 -0.1  0 -0.341 -0.1 -0.6 2.0 0 -0.341 0 0 0 1.0 0"},{value:4,path:"1.0 0.0 0.0 0.0 -0.26 0.0 1.1 0.0 0.0 -0.26 0.0 0.0 1.0 0.0 -0.26 0.0 0.0 0.0 1.0 0.0"},{value:5,path:"1.2 0.0 0.0 0.0 0.0 0.0 0.9 0.0 0.0 0.0 0.0 0.0 0.8 0.0 0.0 0 0 0 1.0 0"},{value:6,path:"0.8 0.3 0.1 0.0 0.182 0.1 0.9 0.0 0.0 0.182 0.1 0.3 0.7 0.0 0.182 0.0 0.0 0.0 1.0 0.0"},{value:7,path:"0.9 0 0 0 0.255 0 0.9 0 0 0.255 0 0 0.9 0 0.255 0 0 0 1.0 0"},{value:8,path:"0.6 0.3 0.1 0 0.28745 0.2 0.7 0.1 0 0.28745 0.2 0.3 0.4 0 0.28745 0 0 0 1.0 0"},{value:9,path:"0.8 1.6 0.2 0 -0.639 0.8 1.6 0.2 0 -0.639 0.8 1.6 0.2 0 -0.639 0 0 0 1.0 0"},{value:10,path:"0.2 0.5 0.1 0 0.16 0.2 0.5 0.1 0 0.16 0.2 0.5 0.1 0 0.16 0 0 0 1 0"},{value:11,path:"4.8 -1.0 -0.1 0 -1.523 -0.5 4.4 -0.1 0 -1.523 -0.5 -1.0 5.2 0 -1.523 0 0 0 1.0 0"}]},function(e,t){},function(e,t){e.exports='<div id="#{id}" ctype="#{type}" class="element comp_image editable-image"><svg width="100%" height="100%" version="1.1" xmlns="http://www.w3.org/2000/svg"><g><image width="100%" height="100%" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#{src}" filter="url(##{filterId})" draggable="false"></image><defs><filter id="#{filterId}"><feColorMatrix class="saturation" color-interpolation-filters="sRGB" type="matrix" values="#{path}"></feColorMatrix></filter></defs></g></svg></div>'},function(e,t,n){"use strict";var i=[{name:"圆形",path:n(589)},{name:"菱形",path:n(590)},{name:"心形",path:n(591)},{name:"矩形2",path:n(592)},{name:"矩形3",path:n(593)},{name:"矩形4",path:n(594)},{name:"星形1",path:n(595)},{name:"星形2",path:n(596)},{name:"星形3",path:n(597)},{name:"三角形",path:n(598)}];e.exports=i},function(e,t,n){e.exports=n.p+"images/circle-6daa4d.svg"},function(e,t,n){e.exports=n.p+"images/diamond-a61c24.svg"},function(e,t,n){e.exports=n.p+"images/heart-d692b9.svg"},function(e,t,n){e.exports=n.p+"images/rect2-007f3e.svg"},function(e,t,n){e.exports=n.p+"images/rect3-896f69.svg"},function(e,t,n){e.exports=n.p+"images/rect4-fb3aef.svg"},function(e,t,n){e.exports=n.p+"images/star1-42a9b6.svg"},function(e,t,n){e.exports=n.p+"images/star2-b75251.svg"},function(e,t,n){e.exports=n.p+"images/star3-343bf6.svg"},function(e,t,n){e.exports=n.p+"images/triangle-170329.svg"},function(e,t){"use strict";function n(e,t,n){var r=e.width,a=e.height;isNaN(t)||t<1||(n?i(e,0,0,r,a,t):o(e,0,0,r,a,t))}function i(e,t,n,i,o,c){if(!(isNaN(c)||c<1)){c|=0;var l,u=e.getContext("2d");try{try{l=u.getImageData(t,n,i,o)}catch(p){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),l=u.getImageData(t,n,i,o)}catch(p){throw new Error("unable to access local image data: "+p)}}}catch(p){throw new Error("unable to access image data: "+p)}var d,h,f,g,m,v,y,b,x,w,k,S,I,T,$,E,P,_,C,A,O,q,L,M,R=l.data,j=c+c+1,F=i-1,B=o-1,D=c+1,J=D*(D+1)/2,N=new r,z=N;for(f=1;f<j;f++)if(z=z.next=new r,f==D)var W=z;z.next=N;var H=null,Y=null;y=v=0;var U=a[c],X=s[c];for(h=0;h<o;h++){for(E=P=_=C=b=x=w=k=0,S=D*(A=R[v]),I=D*(O=R[v+1]),T=D*(q=R[v+2]),$=D*(L=R[v+3]),b+=J*A,x+=J*O,w+=J*q,k+=J*L,z=N,f=0;f<D;f++)z.r=A,z.g=O,z.b=q,z.a=L,z=z.next;for(f=1;f<D;f++)g=v+((F<f?F:f)<<2),b+=(z.r=A=R[g])*(M=D-f),x+=(z.g=O=R[g+1])*M,w+=(z.b=q=R[g+2])*M,k+=(z.a=L=R[g+3])*M,E+=A,P+=O,_+=q,C+=L,z=z.next;for(H=N,Y=W,d=0;d<i;d++)R[v+3]=L=k*U>>X,0!=L?(L=255/L,R[v]=(b*U>>X)*L,R[v+1]=(x*U>>X)*L,R[v+2]=(w*U>>X)*L):R[v]=R[v+1]=R[v+2]=0,b-=S,x-=I,w-=T,k-=$,S-=H.r,I-=H.g,T-=H.b,$-=H.a,g=y+((g=d+c+1)<F?g:F)<<2,E+=H.r=R[g],P+=H.g=R[g+1],_+=H.b=R[g+2],C+=H.a=R[g+3],b+=E,x+=P,w+=_,k+=C,H=H.next,S+=A=Y.r,I+=O=Y.g,T+=q=Y.b,$+=L=Y.a,E-=A,P-=O,_-=q,C-=L,Y=Y.next,v+=4;y+=i}for(d=0;d<i;d++){for(P=_=C=E=x=w=k=b=0,v=d<<2,S=D*(A=R[v]),I=D*(O=R[v+1]),T=D*(q=R[v+2]),$=D*(L=R[v+3]),b+=J*A,x+=J*O,w+=J*q,k+=J*L,z=N,f=0;f<D;f++)z.r=A,z.g=O,z.b=q,z.a=L,z=z.next;for(m=i,f=1;f<=c;f++)v=m+d<<2,b+=(z.r=A=R[v])*(M=D-f),x+=(z.g=O=R[v+1])*M,w+=(z.b=q=R[v+2])*M,k+=(z.a=L=R[v+3])*M,E+=A,P+=O,_+=q,C+=L,z=z.next,f<B&&(m+=i);for(v=d,H=N,Y=W,h=0;h<o;h++)g=v<<2,R[g+3]=L=k*U>>X,L>0?(L=255/L,R[g]=(b*U>>X)*L,R[g+1]=(x*U>>X)*L,R[g+2]=(w*U>>X)*L):R[g]=R[g+1]=R[g+2]=0,b-=S,x-=I,w-=T,k-=$,S-=H.r,I-=H.g,T-=H.b,$-=H.a,g=d+((g=h+D)<B?g:B)*i<<2,b+=E+=H.r=R[g],x+=P+=H.g=R[g+1],w+=_+=H.b=R[g+2],k+=C+=H.a=R[g+3],H=H.next,S+=A=Y.r,I+=O=Y.g,T+=q=Y.b,$+=L=Y.a,E-=A,P-=O,_-=q,C-=L,Y=Y.next,v+=i}u.putImageData(l,t,n)}}function o(e,t,n,i,o,c){if(!(isNaN(c)||c<1)){c|=0;var l,u=e.getContext("2d");try{try{l=u.getImageData(t,n,i,o)}catch(p){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),l=u.getImageData(t,n,i,o)}catch(p){throw alert("Cannot access local image"),new Error("unable to access local image data: "+p)}}}catch(p){throw alert("Cannot access image"),new Error("unable to access image data: "+p)}var d,h,f,g,m,v,y,b,x,w,k,S,I,T,$,E,P,_,C,A,O=l.data,q=c+c+1,L=i-1,M=o-1,R=c+1,j=R*(R+1)/2,F=new r,B=F;for(f=1;f<q;f++)if(B=B.next=new r,f==R)var D=B;B.next=F;var J=null,N=null;y=v=0;var z=a[c],W=s[c];for(h=0;h<o;h++){for(T=$=E=b=x=w=0,k=R*(P=O[v]),S=R*(_=O[v+1]),I=R*(C=O[v+2]),b+=j*P,x+=j*_,w+=j*C,B=F,f=0;f<R;f++)B.r=P,B.g=_,B.b=C,B=B.next;for(f=1;f<R;f++)g=v+((L<f?L:f)<<2),b+=(B.r=P=O[g])*(A=R-f),x+=(B.g=_=O[g+1])*A,w+=(B.b=C=O[g+2])*A,T+=P,$+=_,E+=C,B=B.next;for(J=F,N=D,d=0;d<i;d++)O[v]=b*z>>W,O[v+1]=x*z>>W,O[v+2]=w*z>>W,b-=k,x-=S,w-=I,k-=J.r,S-=J.g,I-=J.b,g=y+((g=d+c+1)<L?g:L)<<2,T+=J.r=O[g],$+=J.g=O[g+1],E+=J.b=O[g+2],b+=T,x+=$,w+=E,J=J.next,k+=P=N.r,S+=_=N.g,I+=C=N.b,T-=P,$-=_,E-=C,N=N.next,v+=4;y+=i}for(d=0;d<i;d++){for($=E=T=x=w=b=0,v=d<<2,k=R*(P=O[v]),S=R*(_=O[v+1]),I=R*(C=O[v+2]),b+=j*P,x+=j*_,w+=j*C,B=F,f=0;f<R;f++)B.r=P,B.g=_,B.b=C,B=B.next;for(m=i,f=1;f<=c;f++)v=m+d<<2,b+=(B.r=P=O[v])*(A=R-f),x+=(B.g=_=O[v+1])*A,w+=(B.b=C=O[v+2])*A,T+=P,$+=_,E+=C,B=B.next,f<M&&(m+=i);for(v=d,J=F,N=D,h=0;h<o;h++)g=v<<2,O[g]=b*z>>W,O[g+1]=x*z>>W,O[g+2]=w*z>>W,b-=k,x-=S,w-=I,k-=J.r,S-=J.g,I-=J.b,g=d+((g=h+R)<M?g:M)*i<<2,b+=T+=J.r=O[g],x+=$+=J.g=O[g+1],w+=E+=J.b=O[g+2],J=J.next,k+=P=N.r,S+=_=N.g,I+=C=N.b,T-=P,$-=_,E-=C,N=N.next,v+=i}u.putImageData(l,t,n)}}function r(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var a=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],s=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];e.exports={stackBlurImage:n}},function(e,t,n){e.exports=n.p+"images/wx_default-deef0b.png"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){S.push(e),T||s()}function s(){if(T=!0,S.length>0){var e=S.shift();e().then(function(){s()})}else T=!1}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function A(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:A(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)},u=n(27),p=u.isWeixin,d=u.isWxwork,h=n(584),f=n(69).saveWxCompData,g=n(69).generateUserKey,m=n(82).popUpModal,v=n(602),y=n(603),b=n(69).getWxJSSDK,x=n(24),w=n(392),k=w.uploadTencent,S=[],I=n(69).hrefToWxAuth,T=!1,E=n(72),P=n(26),_=P.addProtocolNoLine,C=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{self:!0,advanceStyle:{variable:!1,"function":!1},functionStyle:{variableImg:!1,imgProto:!1,gSensor:!1,scratch:!1,replace:!1}},link:!1,sound:!1,trigger:{self:!1}}),"view"===r.eqxPage.eqxScene.config.mode&&(r.wxJssdk=b()),r}return r(t,e),c(t,[{key:"create$context",value:function(){var e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"create$context",this).call(this),n=this.compJson.serverId,i=this;return n&&(e.css("display","none"),a(function(){return new Promise(function(e){i.responsiveImage(n),e()})})),e}},{key:"bindAfterRenderEvent",value:function(e,t){var n=this;return p()||$(e).click(function(){return d()?I(null,null,n.eqxScene.meta):void m("请在微信中点击我")}),!0}},{key:"eleShow",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleShow",this).call(this),this.$context.parent().css("position","relative"),this.$context.css("position","absolute");var e=this.eqxScene.config.mode;if("view"===e&&p()){var n=this;this.options={onUploadComplete:function(e,t,i){var o={width:parseInt(n.compJson.css.width),height:parseInt(n.compJson.css.height)},r=n.changeCss(e,o);n.cropInfo=n.getCropInfo(e),n.setConfig(r),E(i,function(e){n.$context.attr("src",e.toDataURL())},{maxWidth:600,orientation:!0})},scale:.5625},this.cropImg||(this.cropImg=new y($(".nr"),this.$contentsDiv,this.options,this.upQiniuCallback,this))}}},{key:"upQiniuCallback",value:function(e,t){var n=t;return new Promise(function(t,i){return g(),f("needWait",n.compJson.id),k(e).then(function(e){var i=n.key=e.key;t(x.FILE+i);var o=n.cropInfo,r="?imageMogr2/auto-orient/crop/!"+parseInt(o.width)+"x"+parseInt(o.height)+"a"+Math.abs(parseInt(o.left))+"a"+Math.abs(parseInt(o.top)),a=""+i+r;f(n.compJson.id,a)})["catch"](function(e){console.log(e)})})}},{key:"setConfig",value:function(e){this.cssAfterCrop=e,this.$context.css(e)}},{key:"getCropInfo",value:function(e){var t=e.tellScaled.width,n=e.tellScaled.height,i=e.tellScaled.x,o=e.tellScaled.y;return{width:t,height:n,left:i,top:o}}},{key:"changeCss",value:function(e,t){var n=e.tellScaled.width,i=e.tellScaled.x,o=e.tellScaled.y,r=e.getCanvasData.naturalWidth,a=e.getCanvasData.naturalHeight,s=t.width/n,c=r*s+"px",l=a*s+"px",u=-i*s+"px",p=-o*s+"px";return{width:c,height:l,left:u,top:p}}},{key:"responsiveImage",value:function(e){this._responsiveImage(e)}},{key:"_responsiveImage",value:function(e){var t=new Image;e=x.FILE+e,t.src=e;var n=this;t.onload=function(){var i,o,r=window.parseInt(n.compJson.css.width,10),a=window.parseInt(n.compJson.css.height,10);t.width/t.height>=r/a?(i=r,o=t.height*(r/t.width)):(o=a,i=t.width*(a/t.height)),n.$context.css({display:"block",width:i+"px",height:o+"px","margin-top":(window.parseInt(n.$li.height(),10)-o)/2+"px","margin-left":(window.parseInt(n.$li.width(),10)-i)/2+"px"}).attr("src",e)}}}],[{key:"getDefaultImg",value:function(){return _(v)}}]),t}(h);e.exports=C},function(e,t,n){e.exports=n.p+"images/wechat_image-f8aa1a.png"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(25).$loadCropperJs,a=n(73),s=function(){function e(t,n,o,r,a){i(this,e),this.$container=t,this.upQiniuCallback=r,this.uploadComp=a,this.$el=n,this.cropWidth=this.uploadComp.compJson.css.width,this.cropHeight=this.uploadComp.compJson.css.height;var s={token:"",files:[],mimeType:["image/*"],maxFileName:50,maxFileSize:10,maxCount:20,maxWidth:750,maxHeight:1334,scale:1,onFilesAdded:function(){console.error("onFilesAdded")},onUploadProgress:function(){console.error("onUploadProgress")},onFileUploaded:function(){console.error("onFileUploaded")},onUploadComplete:function(){console.log("onUploadComplete")},onUploadResult:function(){console.error("onUploadResult")},onError:function(){console.error("error")}};this.value=Object.assign(s,o),this.$input&&this.$input.remove(),this.$input=this.createInput(this.value.mimeType,this.value.maxCount),n.append(this.$input),this.bindEvent(n,this.$input,this.value)}return o(e,[{key:"bindEvent",value:function(e,t,n){var i=this;t.bind("change",function(o){var s=this;r().then(function(){var o=s.files[0],r=a.createObjectURL(s.files[0]);i.div&&$(i.div).remove(),i.createContainer(e,t,n,r,o)})})}},{key:"createContainer",value:function(e,t,n,i,o){var r=this;this.file=o;var a=this,s=document.createElement("div");this.div=s,$(s).css({position:"absolute",width:"100%",height:"100%",zIndex:9999});var c=document.createElement("div");$(c).css({width:"136px",height:"33px","text-align":"center","line-height":"33px","font-size":"18px","border-radius":"3px","background-color":"#1261FF",position:"absolute",bottom:"39px",zIndex:999,left:"90px",color:"#fff"});var l=document.createElement("img");this.$img=$(l),this.imgSrc=l.src=i,$(l).css({maxWidth:"100%"}),c.innerHTML="完&nbsp;&nbsp;&nbsp;&nbsp;成",c.onclick=function(i){i.stopPropagation(),$(s).remove(),a.initInput(e,t,n),r.upQiniuCallback(r.file,r.uploadComp)},this.$container.append(s),$(s).append(c),$(s).append(l);var u=void 0,p=void 0;$(l).cropper({scalable:!1,zoomable:!1,aspectRatio:a.cropWidth/a.cropHeight,minCropBoxWidth:100,ready:function(){$(".cropper-container").on("mousedown touchstart mousemove touchmove mouseup touchend mouseleave",function(e){e.stopPropagation()})},crop:function(){u=$(this).cropper("getData"),p=$(this).cropper("getCanvasData"),n.onUploadComplete({tellScaled:u,getCanvasData:p},i,o)}})}},{key:"createInput",value:function(e,t){var n=document.createElement("input");return n.id="inputFile",$(n).css({position:"absolute",left:0,top:0,width:"100%",height:"100%",cursor:"pointer",opacity:"0",zIndex:1}),$(n).attr({type:"file",accept:"image/*"}),t>1&&$(n).attr({multiple:""}),$(n)}},{key:"initInput",value:function(e,t,n){this.$input.remove(),this.$input=this.createInput(n.mimeType,n.maxCount),this.bindEvent(e,this.$input,n),e.append(this.$input)}}]),e}();e.exports=s},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function b(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:b(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)};n(605);var c=n(27),l=c.isWeixin,u=c.isWxwork,p=n(101),d=n(606).textVoteTpl,h=n(607).alertTpl,f=n(609).$isVoted,g=n(609).$postVote,m=n(62).randomId,v=n(69).hrefToWxAuth,y=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return e.properties.voteNumberStatus=!e.properties.hasOwnProperty("voteNumberStatus")||e.properties.voteNumberStatus,e.properties.voteNumber=e.properties.hasOwnProperty("voteNumber")?e.properties.voteNumber:1,$.extend(!0,r.$ability,{style:{compStyle:{self:!0},advanceStyle:{size:!1,"function":!0},functionStyle:{blockingTimeSubmit:!0,voteNumber:!0}},trigger:{self:!1},sound:!1,link:!1,flexLine:"e,w,r"}),r.ids=[],r}return r(t,e),a(t,[{key:"getMinWidth",value:function(){return 300}},{key:"updateSize",value:function(e,n){var i=this.getMinWidth();n.width&&n.width<e.width&&(!n.left||n.left===e.left)&&n.width<i&&this.$li.css({width:i}),n.left&&n.left>e.left&&n.width&&n.width<i&&this.$li.css({left:e.left,width:i});var o=this.$context.height();o!=n.height&&this.$li.height(o),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSize",this).call(this,e,n)}},{key:"update$li",value:function(e){var n=this.compJson.css,i=this.getMinWidth();e.width&&e.width<n.width&&(!e.left||e.left===n.left)&&e.width<i&&(e.width=i),e.left&&e.left>n.left&&e.width&&e.width<i&&(delete e.left,delete e.width),e.height&&(e.height=this.$context.height()),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update$li",this).call(this,e)}},{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.properties,o=i.title,r=void 0===o?"请投票":o,a=i.selectType,s=i.buttonColor,c=void 0===s?"#08A1EF":s,l=i.children,u=void 0===l?[]:l;a="single"==a?"单选":"多选";var p=d({id:t,type:n}),f=$(p);if(this.$title=$('<div class="vote-view-title">'+r+"（"+a+"）</div>"),f.append(this.$title),u.length){this.$options=$('<ul class="vote-view-options"></ul>'),this.childrenOption=u.map(function(e){var t=e.id,n=e.label;return $('<li class="vote-view-option" id="'+t+'"><span><em class="eqf-yes" style="display: none"></em></span><div class="vote-view-text">'+n+"</div></li>")}),this.$submit=$('<div class="vote-view-button">投票</div>'),this.$options.append(this.childrenOption),f.append(this.$options),f.append(this.$submit);var g=h();this.$tpl=$(g).appendTo(f),this.updateButtonColor(c)}return f}},{key:"updateButtonColor",value:function(e){this.$submit.css({backgroundColor:e})}},{key:"updateTitle",value:function(e,t){t="single"==t?"单选":"多选",this.$title.text(e+"（"+t+"）")}},{key:"updateOptions",value:function(e){this.$options.find("#"+e.id+" .vote-view-text").text(e.label)}},{key:"deleteOption",value:function(e){this.compJson.properties.children.splice(e,1),this.childrenOption.splice(e,1)[0].remove(),this.$li.css({height:""}),this.update$li({height:this.$li.height()})}},{key:"addOption",value:function(e){var t={id:m(),label:"选项"+(this.compJson.properties.children.length+1)};this.compJson.properties.children.splice(e+1,0,t);var n=$('<li class="vote-view-option" id="'+t.id+'"><span><em class="eqf-yes" style="display: none"></em></span><div class="vote-view-text">'+t.label+"</div></li>");this.childrenOption.splice(e+1,0,n),$(this.$options.children()[e]).after(n),this.$li.css({height:""}),this.update$li({height:this.$li.height()})}},{key:"bindAfterRenderEvent",value:function(e,t){var n=this;u()?(this.$submit.addClass("inWxwork").text("请到微信中提交"),this.$submit.on("click",function(){v(null,null,n.eqxScene.meta)})):l()?this.isVoted().then(function(){n.$options.children().on("click",function(e){var i=$(e.currentTarget).find(".eqf-yes");i.is(":hidden")?"single"==t.properties.selectType&&1==n.ids.length?(n.$options.find(".eqf-yes").hide(),n.ids[0]=e.currentTarget.id,i.show()):"multi"==t.properties.selectType&&n.ids.length==t.properties.selectCount?n.alertTpl("最多选择"+t.properties.selectCount+"项"):(i.show(),n.ids.push(e.currentTarget.id)):(i.hide(),n.ids.splice(n.ids.indexOf(e.currentTarget.id),1))}),n.$submit.on("click",function(){var e=t.sceneId,i=t.pageId;n.ids.length?g(e,t.id,{pageId:i,data:JSON.stringify(n.ids)}).then(function(e){e.success&&n.alertTpl("投票成功，谢谢参与！").then(function(){var t=!n.compJson.properties.hasOwnProperty("voteNumberStatus")||n.compJson.properties.voteNumberStatus,i=void 0;i=n.compJson.properties.hasOwnProperty("voteNumberStatus")&&t?n.compJson.properties.hasOwnProperty("voteNumber")?n.compJson.properties.voteNumber:1:999,e.obj>=i&&!t&&(n.showVoted(e.map),n.$submit.off(),n.$options.children().off())})})["catch"](function(e){120609===e.code?n.alertTpl("投票次数已达上限！"):n.alertTpl(e.msg)}):n.alertTpl("请至少选择一项")})}):this.$submit.css({backgroundColor:"#f0f3f4",color:"#a3afb7"}).text("请在微信中投票")}},{key:"alertTpl",value:function(e){var t=this;return new Promise(function(n,i){t.$tpl.find("span").text(e),t.$tpl.css({opacity:1,zIndex:2}),window.setTimeout(function(){t.$tpl.css({opacity:0,zIndex:-2}),n()},2e3)})}},{key:"showVoted",value:function(e){var t=this;this.$options.find(".eqf-yes").hide();var n=[],i=0;this.compJson.properties.children.forEach(function(o){var r=o.id;n.push({id:r,count:e[r]||0}),i+=e[r]||0,e[r]&&t.ids.push(r)}),n.forEach(function(e){$('<em style="float:right">'+e.count+"  ("+(e.count/i*100).toFixed(2)+"%)</em>").prependTo(t.$options.find("#"+e.id))}),this.$li.height(""),this.$submit.css({backgroundColor:"#f0f3f4",color:"#a3afb7"}).text("次数已达上限")}},{key:"isVoted",value:function(){var e=this;return new Promise(function(t,n){var i=e.compJson.properties.endTime;if(i&&new Date(i)<Date.now())e.$submit.css({backgroundColor:"#f0f3f4",color:"#a3afb7"}).text("投票已过期"),n();else if(l()){var o=e.compJson,r=o.sceneId,a=o.pageId,s=o.id,c=!e.compJson.properties.hasOwnProperty("voteNumberStatus")||e.compJson.properties.voteNumberStatus,u=void 0;u=e.compJson.properties.hasOwnProperty("voteNumberStatus")&&c?e.compJson.properties.hasOwnProperty("voteNumber")?e.compJson.properties.voteNumber:1:999,f(s,{sceneId:r,pageId:a}).then(function(i){i.obj&&i.obj>=u?(e.showVoted(i.map),n()):t()})}else n()})}}]),t}(p);e.exports=y},function(e,t){},function(e,t){"use strict";function n(e){var t=e.id,n=e.type;e.title,e.selectType;return'<div  id="'+t+'" ctype="'+n+'" class="vote-view">\n    </div>'}e.exports={textVoteTpl:n}},function(e,t,n){"use strict";function i(){return'<div class="vote-alert">\n              <span></span>\n            </div>'}n(608),e.exports={alertTpl:i}},function(e,t){},function(e,t,n){"use strict";function i(e,t){var n=localStorage.getItem("wxUserResForH5");return t.openid=n,a({type:"POST",url:r.SERVER_1+"eqs/s/vote/verify/"+e,data:t})}function o(e,t,n){var i=localStorage.getItem("wxUserResForH5");return n.openid=i,a({type:"POST",url:r.SERVER_1+"eqs/s/vote/"+e+"/"+t,data:n})}var r=n(24),a=n(23).ajax;e.exports={$isVoted:i,$postVote:o}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function x(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:x(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)};n(611);var c=n(24),l=n(25).$loadSliders,u=n(101),p=n(27),d=p.isWeixin,h=p.isWxwork,f=n(607).alertTpl,g=n(69).hrefToWxAuth,m=n(609).$isVoted,v=n(609).$postVote,y=n(612),b=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.intervalObj={},r.descIds=[],e.properties.voteNumberStatus=!e.properties.hasOwnProperty("voteNumberStatus")||e.properties.voteNumberStatus,e.properties.voteNumber=e.properties.hasOwnProperty("voteNumber")?e.properties.voteNumber:1,$.extend(!0,r.$ability,{style:{compStyle:{self:!0},advanceStyle:{size:!1,"function":!0},functionStyle:{blockingTimeSubmit:!0,voteNumber:!0}},trigger:{self:!1},sound:!1,link:!1,flexLine:"r"}),r.isLandScape=r.eqxPage.orientation&&r.eqxPage.orientation.isLandScape(),r}return r(t,e),a(t,[{key:"updateSize",value:function(e,n){this.$slider.width(n.width),this.plugin.update(),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSize",this).call(this,e,n)}},{key:"create$context",value:function(){var e=this;this.descArr=[],this.imgArr=[],this.loadPlugin=Promise.resolve();var n=this.compJson,i=442;this.isLandScape&&(i=280);var o=n.id,r=n.type,a=n.css.width,l=n.properties;l=void 0===l?{}:l;var u=l.title,p=void 0===u?"请投票":u,d=l.selectType,h=l.buttonColor,g=void 0===h?"#08A1EF":h,m=l.children,v=void 0===m?[]:m,b=l.bgColor;d="single"==d?"单选":"多选";var x=$('<div id="'+o+'" ctype="'+r+'" class="vote-img"></div>').css({"background-color":b,height:i});if(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSize",this).call(this,{height:""},{height:i}),v.length){v.forEach(function(t){var n=t.src,i=t.desc,o=t.id,r=n?""+(c.FILE+n):y;e.imgArr.push($('<div class="vote-img-slide-bg" style="background-image:url('+r+'); width: 100%; height: 100%; background-size: contain; background-repeat: no-repeat; background-position: 50%"></div>')),e.descArr.push($('<li id="'+o+'">'+i+"</li>"))}),this.$title=$('<div class="vote-img-prev-title"><h1>'+p+'</h1><span class="vote-img-sing-double">('+d+")</span></div>"),
x.append(this.$title),this.$slider=$('<div class="slides '+(this.isLandScape?"slides__landscape":"")+'" style="width: '+a+'px;"></div>');var w=$('<ul class="vote-img-desc"></ul>');w.append(this.descArr),this.$slider.append(this.imgArr),this.loadPlugin=this.initSlider(w),x.append(this.$slider),this.$submit=$('<a class="btn-main">提交</a>'),x.append(this.$submit);var k=f();this.$tpl=$(k).appendTo(x),this.updateButtonColor(g)}return this.$context=x,x}},{key:"updateButtonColor",value:function(e){this.$submit.css({backgroundColor:e})}},{key:"updateOptions",value:function(e,t){this.plugin["goto"](t+1),this.descArr[t].text(e.desc),this.imgArr[t].css({backgroundImage:"url("+c.FILE+e.src+")"})}},{key:"updateTitle",value:function(e,t){t="single"==t?"单选":"多选",this.$title.find("h1").text(e),this.$title.find(".vote-img-sing-double").text("("+t+")")}},{key:"initSlider",value:function(e){var t=this,n=329;return this.isLandScape&&(n=178),this.$em=$('<span class="eqf-yes-l"></span>'),l().then(function(){return t.$slider.slidesjs({width:300,height:n,navigation:{active:!1},callback:{loaded:function(){e.children().css({display:"none"}),t.descArr[0].css({display:"inline-block"}),t.$slider.append(e),t.$slider.find(".slidesjs-container").append(t.$em),t.isLandScape&&(t.$slider.find(".slidesjs-container").height(n),t.$slider.find(".slidesjs-control").height(n))},complete:function(n){e.children().css({display:"none"}),t.descArr[n-1].css({display:"inline-block"});var i=t.descArr[n-1].attr("id");t.descIds.indexOf(i)==-1?t.$em.removeClass("active"):t.$em.addClass("active")}}}),t.plugin=t.$slider.data("plugin_slidesjs"),t.plugin})}},{key:"bindAfterRenderEvent",value:function(e,t){var n=this;return h()?(this.$submit.addClass("inWxwork").text("请到微信中提交"),this.$submit.on("click",function(){g(null,null,n.eqxScene.meta)})):d()?this.loadPlugin.then(function(){return n.isVoted()}).then(function(){n.$em.on("click",function(e){e.preventDefault(),e.stopPropagation();var i=n.descArr[n.plugin.data.current].attr("id");n.descIds.indexOf(i)==-1?"single"==t.properties.selectType&&1==n.descIds.length?(n.descIds[0]=i,n.$em.addClass("active")):"multi"==t.properties.selectType&&n.descIds.length==t.properties.selectCount?n.alertTpl("最多选择"+t.properties.selectCount+"项"):(n.descIds.push(i),n.$em.addClass("active")):(n.descIds.splice(n.descIds.indexOf(i),1),n.$em.removeClass("active"))}),n.$submit.on("click",function(e){e.preventDefault(),e.stopPropagation();var i=t.sceneId,o=t.pageId;n.descIds.length?v(i,t.id,{pageId:o,data:JSON.stringify(n.descIds)}).then(function(e){e.success&&n.alertTpl("投票成功，谢谢参与！").then(function(){var t=!n.compJson.properties.hasOwnProperty("voteNumberStatus")||n.compJson.properties.voteNumberStatus,i=void 0;i=n.compJson.properties.hasOwnProperty("voteNumberStatus")&&t?n.compJson.properties.hasOwnProperty("voteNumber")?n.compJson.properties.voteNumber:1:999,e.obj>=i&&!t&&(n.showVoted(e.map),n.$em.off(),n.$submit.off())})})["catch"](function(e){120609===e.code?n.alertTpl("投票次数已达上限！"):n.alertTpl(e.msg)}):n.alertTpl("请至少选择一项")})}):this.$submit.css({backgroundColor:"#f0f3f4",color:"#a3afb7"}).text("请在微信中投票"),!1}},{key:"showVoted",value:function(e){var t=this;this.descIds=[],this.$em.remove(),this.plugin.stop(),this.$slider.remove();var n={},i=[],o=0;this.compJson.properties.children.forEach(function(r){var a=r.id,s=r.desc;n[a]=s,i.push({id:a,count:e[a]||0}),o+=e[a]||0,e[a]&&t.descIds.push(a)});var r=$('<ul class="vote-img-ul"></ul>');i.forEach(function(e){r.append($("<li id = '"+e.id+'\' class="vote-img-li"><em style="float: right">'+e.count+" ("+(e.count/o*100).toFixed(2)+" %)</em> "+n[e.id]+"</li>"))}),r.insertBefore(this.$submit),this.$submit.css({backgroundColor:"#f0f3f4",color:"#a3afb7"}).text("次数已达上限")}},{key:"alertTpl",value:function(e){var t=this;return new Promise(function(n,i){t.$tpl.find("span").text(e),t.$tpl.css({opacity:1,zIndex:1001}),window.setTimeout(function(){t.$tpl.css({opacity:0,zIndex:-2}),n()},2e3)})}},{key:"isVoted",value:function(){var e=this;return new Promise(function(t,n){if(e.compJson.properties.endTime&&new Date(e.compJson.properties.endTime)<new Date&&(e.$submit.css({backgroundColor:"#f0f3f4",color:"#a3afb7"}).text("投票已过期"),n()),d()){var i=e.compJson,o=i.sceneId,r=i.pageId,a=i.id,s=!e.compJson.properties.hasOwnProperty("voteNumberStatus")||e.compJson.properties.voteNumberStatus,c=void 0;c=e.compJson.properties.hasOwnProperty("voteNumberStatus")&&s?e.compJson.properties.hasOwnProperty("voteNumber")?e.compJson.properties.voteNumber:1:999,m(a,{sceneId:o,pageId:r}).then(function(i){i.obj&&i.obj>=c?(e.showVoted(i.map),n()):t()})}else n()})}},{key:"startPlay",value:function(){var e=this;this.playInterval=setInterval(function(){e.plugin&&e.plugin.next()},5e3)}},{key:"stopPlay",value:function(){this.playInterval&&(clearInterval(this.playInterval),this.playInterval=null)}},{key:"eleHide",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleHide",this).call(this),this.stopPlay()}},{key:"eleShow",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleShow",this).call(this),this.startPlay()}}]),t}(u);e.exports=b},function(e,t){},function(e,t,n){e.exports=n.p+"images/defaultImg-f9d1d1.svg"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function T(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:T(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)};n(614);var c=n(101),l=n(54),u=n(26).addUrlParam,p=n(27).isWeixin,d=n(27).isPc,h=n(69).getWxJSSDK,f=n(117).COMP_KEY,g=n(69).addCompKey,m=n(27).mobilecheck,v="ontouchstart"in window,y=v?"touchstart":"mousedown",b=v?"touchmove":"mousemove",x=v?"touchend":"mouseup",w={},k=function(e){for(var t=e.split(","),n=t[0].match(/:(.*?);/)[1],i=window.atob(t[1]),o=i.length,r=new Uint8Array(o);o--;)r[o]=i.charCodeAt(o);return new Blob([r],{type:n})},S=function(e,t){return e.lastModifiedDate=new Date,e.name=t,e},I=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.wxJssdk=h(),$.extend(!0,r.$ability,{style:{compFont:{self:!1}},trigger:{self:!1},sound:!1,link:!1}),r}return r(t,e),a(t,[{key:"updateSize",value:function(e,n){this.setCanvasSize(n.width,n.height);var i=this.compJson.properties.imgSrc;i&&(this.clearCanvas(),this.drawingImage(i)),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSize",this).call(this,e,n)}},{key:"create$context",value:function(){var e=$('<div style="position: relative; height: 100%;overflow: hidden;"></div>');this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d");var t=this.compJson,n=t.css,i=n.width,o=n.height,r=t.properties,a=r.imgSrc,s=r.boardColor,c=r.qiniuSrc;return this.setCanvasSize(i,o),this.setCanvasBgColor(s),a&&this.drawingImage(a),c&&(w[this.compJson.id]=c),this.$alert=$('<div class="board-bg" style="display: none"><span class="board-alert">正在保存...</span></div>'),this.$penBtn=$('<span class="board-pen eqf-brush"></span>'),this.$closeBtn=$('<span class="board-close eqf-delete-f" style="display: none"></span>'),e.append(this.$alert),e.append(this.$penBtn),e.append(this.$closeBtn),this.$cancelBtn=$('<a class="board-btn board-reset" style="display: none">取消</a>'),this.$endBtn=$('<a class="board-btn board-end" style="display: none">完成</a>'),e.append(this.$cancelBtn),e.append(this.$endBtn),e.append(this.canvas),e}},{key:"setCanvasSize",value:function(e,t){this.canvas.width=e,this.canvas.height=t}},{key:"setCanvasBgColor",value:function(e){this.canvas.style.backgroundColor=e}},{key:"drawingImage",value:function(e,t){var n=this.compJson.css,i=n.width,o=n.height,r="";r="base64"==t?e:this.getImgSrc(e,{width:i,height:o});var a=new Image;a.setAttribute("crossOrigin","anonymouse");var s=this;a.onload=function(){var e=0,t=0,n=i,r=o;this.width/i>this.height/o?(n=this.width/(this.height/o),e=(i-n)/2):(r=this.height/(this.width/i),t=(o-r)/2),s.ctx.drawImage(a,e,t,n,r)},a.src=r}},{key:"clearCanvas",value:function(){var e=this.compJson.css,t=e.width,n=e.height;this.ctx.clearRect(0,0,t,n)}},{key:"bindAfterRenderEvent",value:function(e,t){var n=this,i=!1,o=!1,r=0,a=0,s=this.compJson.css.height;return this.$penBtn.on("click",function(){return!i&&(n.clearCanvas(),i=!0,n.$cancelBtn.css({display:"inline-block"}),n.$endBtn.css({display:"inline-block"}),n.$closeBtn.css({display:"inline-block"}),!v&&n.canvas.classList.add("boarding"),void 0)}),this.$cancelBtn.on("click",function(){n.clearCanvas(),i=!1,n.$cancelBtn.hide(),n.$endBtn.hide(),n.$closeBtn.hide(),!v&&n.canvas.classList.remove("boarding"),n.compJson.properties.imgSrc&&n.drawingImage(n.compJson.properties.imgSrc)}),this.$closeBtn.on("click",function(){n.clearCanvas()}),this.$endBtn.on("click",function(){i=!1,n.$cancelBtn.hide(),n.$endBtn.hide(),n.$closeBtn.hide(),!v&&n.canvas.classList.remove("boarding"),"view"==n.eqxScene.config.mode&&window==window.top&&n.saveImage()}),this.canvas.addEventListener(y,function(e){if(!i)return!1;e.preventDefault(),e.stopPropagation(),o=!0;var t=n.canvas.getBoundingClientRect();e=v?e.targetTouches[0]:e,r=v?e.pageX-t.left:e.offsetX,a=v?e.pageY-t.top:e.offsetY+20,m()&&n.eqxScene.getOrientation().isLandScape()&&(a=v?e.pageX-t.left:e.offsetX,a=s-a,r=v?e.pageY-t.top:e.offsetY+20)}),this.canvas.addEventListener(b,function(e){if(!i||!o)return!1;var c=n.canvas.getBoundingClientRect();e=v?e.targetTouches[0]:e;var l=v?e.pageX-c.left:e.offsetX,u=v?e.pageY-c.top:e.offsetY+20;m()&&n.eqxScene.getOrientation().isLandScape()&&(u=v?e.pageX-c.left:e.offsetX,u=s-u,l=v?e.pageY-c.top:e.offsetY+20),n.ctx.beginPath(),n.ctx.moveTo(r,a),n.ctx.lineTo(l,u),n.ctx.strokeStyle=t.properties.penColor,n.ctx.lineWidth=t.properties.penSize,n.ctx.lineCap="round",n.ctx.stroke(),r=l,a=u}),this.canvas.addEventListener(x,function(e){o=!1}),this.canvas.addEventListener("mouseleave",function(e){o=!1}),!0}},{key:"saveImage",value:function(){var e=this;this.$alert.show();var t=this;l.$initTencentUpload().then(function(n){var i=e.canvas.toDataURL("image/png");if(n){var o=n.eqxOptions&&n.eqxOptions.credentials,r=(window.scene.userId||window.devScene.meta.createUser)+"/h5/image/"+Math.random().toString(36).slice(-10);n.uploadFile({Bucket:o.bucket+"-"+o.appId,Region:o.region,Key:r,Body:S(k(""+i),r+".png"),SliceSize:5242880,onProgress:function(e){console.log(JSON.stringify(e))},onFileFinish:function(e,n,i){return console.log(i.Key+"上传"+(e?"失败":"完成")),e?void console.error(e.error):(w[t.compJson.id]=r,l.$saveCompInfoByCompKey(f,w))}},function(e,t){console.log(e||t)})}}).then(function(){var t=u("compKey",f,window.location.href);if(p()?e.wxJssdk.then(function(){g(t,f)}):window.history.replaceState({title:$("title").html(),url:t},$("title").html(),t),d()&&window.top===window){var n=$("#codeImg");n.length&&(n.empty(),n.qrcode({render:"canvas",size:200,text:t}))}e.$alert.hide()})}}]),t}(c);e.exports=I},function(e,t){},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(101),c=n(616),l=n(617),u=n(36).parse,p=n(69).getWeChatUser,d=n(618).$getCardJsApiConfig,h=n(618).$getCardSign,f=n(33),g=f.wxNonceStr,m=f.wxTimestamp,v=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{self:!1,fontFamily:!1}},trigger:{self:!1},sound:!1,link:!1}),r}return r(t,e),a(t,[{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.css,o=i.width,r=i.height,a=e.properties,s=a.title,p=a.styleImgSrc;if(p){p=this.getImgSrc(p,{width:o,height:r});var d="0";this.$context=$(u(l,{id:t,type:n,title:s,styleImgSrc:p,padding:d}))}else this.$context=$(u(c,{id:t,type:n,title:s}));return this.$context}},{key:"updateCompTitle",value:function(){var e=this.compJson.properties;this.$context.html(""+e.title)}},{key:"deleteImage",value:function(){this.compJson.properties.imgSrc||(this.$context[0].innerText="")}},{key:"bindAfterRenderEvent",value:function(){var e=this,t=this.compJson.properties.cardId;this.$li.click(function(){var n=p(),i=e.eqxScene.meta.userId;d(i).then(function(e){var i=e.obj;return h(g,m,t,i,n.openid)}).then(function(e){var i={openid:n.openid,api_ticket:e.obj.apiTicket,timestamp:e.obj.timestamp,nonce_str:e.obj.nonce_str,signature:e.obj.signature};wx.addCard({cardList:[{cardId:t,cardExt:JSON.stringify(i)}],success:function(e){alert("卡券添加成功")},cancel:function(e){alert("卡券添加失败")},fail:function(e){alert("卡券添加失败")}})})})}}]),t}(s);e.exports=v},function(e,t){e.exports='<a id="#{id}" ctype="#{type}" class="element comp-reward" style="cursor: pointer;width: 100%;height: 100%;display: table"><span style="display: table-cell;vertical-align: middle">#{title}</span></a>'},function(e,t){e.exports='<a id="#{id}" ctype="#{type}" class="element eqx-tel editable-text" style="cursor: default; width: 100%;height: 100%;padding: #{padding}"><img style="width: 100%; height: 100%" src="#{styleImgSrc}"></a>'},function(e,t,n){"use strict";function i(e){return a({type:"GET",url:r.SERVER_1+"eqs/s/wx/getcouponticket?userId="+e})}function o(e,t,n,i,o){return a({type:"POST",url:r.SERVER_1+"eqs/s/wx/sign",data:{openid:o,nonce_str:e,timestamp:t,cardId:n,apiTicket:i}})}var r=n(24),a=n(23).ajax;e.exports={$getCardJsApiConfig:i,$getCardSign:o}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=e.id,n=e.type,i=e.marginTop,o=e.marginBottom,r=e.css,a=e.content,s=void 0===a?"":a;return r.cursor="default",r.minHeight="inherit",r.fontSize&&(r.fontSize=u(r.fontSize)),$(f(h,{id:t,type:n,content:s,marginTop:i,marginBottom:o})).css(r)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(101),l=n(166),u=l.addSuffixPx,p=n(165),d=p.addFontFamily,h=n(620),f=n(36).parse,g=n(621).parse,m=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{base:{self:!1},border:{self:!1},boxShadow:{self:!1},compFont:{self:!0,fontFamily:!0,fontSize:!0,fontColor:!0,bgColor:!0,baseStyle:!0,lineHeight:!0,letterSpacing:!0},compStyle:{backgroundColor:!0},advanceStyle:{"function":!0}},link:!0}),r}return r(t,e),s(t,[{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.content,o=e.sceneId,r=e.css,s=r.fontFamily,c=r.fontSize,l=r.writingMode,u=r.marginTop,p=void 0===u?"0px":u,h=r.marginBottom,f=void 0===h?"0px":h,m=e.properties.anim,v=void 0===m?[]:m;i=i||"+yyyy";var y=new Date,b=g(y,i),x=a({id:t,type:n,content:b,marginTop:p,marginBottom:f,css:{fontFamily:s,fontSize:c,writingMode:l}});return d({mode:this.eqxScene.config.mode,fontFamily:s,sceneId:o}),v[0]&&"typer"===v[0].type&&x.css({opacity:0}),x}},{key:"updateContent",value:function(e){e=e||this.compJson.content||"+yyyy";var t=new Date,n=g(t,e);this.$context.children().html(n)}},{key:"autoAdjustSize",value:function(){function e(e){var t=e.$context,n=e.$context.children(),i=parseInt(t.css("padding")),o=n.height(),r={height:o+2*i};return e.update$li(r),{height:parseInt(e.$li.css("height")),width:parseInt(e.$li.css("width"))}}function t(t,n){if(void 0!==n&&null!==n){var r=320,a=t.$context,s=t.$context.children(),c=o(s);if(c<a.width()){var l={width:c+2*parseInt(a.css("padding"))};t.update$li(l),t.update$boxDiv(l),a.css(l)}else if(c>=a.width())for(var u=s.height(),p=a.height(),d=a.width();u>p&&d<r;)i(t),u=s.height(),p=a.height(),d=a.width();return e(t)}}function n(t,n){if(void 0!==n&&null!==n){var i=t.$context,o=t.$context.children();if(1===n){for(;r(i,o,n)&&a(i)>l;)s(t);if(r(i,o,n)&&a(i)<=l)return e(t)}else{if(0!==n)return e(t);for(;r(i,o,n)&&a(i)<u;)c(t);r(i,o,n)||s(t)}return{height:parseInt(t.$li.css("height")),width:parseInt(t.$li.css("width"))}}}function i(e){var t=e.$context,n=parseFloat(t.css("width"))+1,i={width:n+"px"};e.update$li(i),e.update$boxDiv(i),t.css(i)}function o(e){var t=e.css("display","inline").width();return e.css("display","block"),t}function r(e,t,n){return n?t.height()>e.height():t.height()<e.height()}function a(e){return parseInt(e.css("font-size"))}function s(e){var t=e.$context,n=a(t);if(n>l){var i={fontSize:n-1+"px"};e.update$li(i),e.update$boxDiv(i),t.css(i)}}function c(e){var t=e.$context,n=a(t);if(n<u){var i={fontSize:n+1+"px"};e.update$li(i),e.update$boxDiv(i),t.css(i)}}var l=12,u=96,p=this.compJson.properties,d=p.adjustWHMode,h=p.adjustFSMode,f=arguments.length?arguments[0]:null;return d?n(this,f):h?t(this,f):e(this)}}]),t}(c);e.exports=m},function(e,t){e.exports='<div id="#{id}" ctype="#{type}" class="element" style="padding: 5px;width: 100%;height: 100%"><span style="display: block;margin-top: #{marginTop};margin-bottom: #{marginBottom};color: inherit;word-break: break-all">#{content}</span></div>'},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){t.map=8191&e,t.day=e>>13&31,t.month=e>>18&1,t.leapMonth=e>>20&15,t.hasLeapMonth=!!(e&1<<19)}function o(e){var t=e.year-1890+26;return e.gYear=t%10,e.zYear=t%12,e.animal=e.zYear,e}function r(e){var t=e._date.getFullYear(),n=e._date.getMonth(),r=e._date.getDate(),a=h.map,s=t-h.YEAR_MIN,c={};e.year=t,i(a[s],c),(n<c.month||n===c.month&&r<c.day)&&(s-=1,e.year=t-1,i(a[s],c));for(var l=new Date(e.year,c.month,c.day),u=(e._date.getTime()-l.getTime())/864e5>>0,p=0,d=0,f=0;f<14;){if(d=c.map&1<<f?30:29,p+=d,u<p){e.day=d-(p-u)+1;break}f+=1}return e.leap=!1,c.hasLeapMonth&&(f===c.leapMonth+1&&(e.leap=!0),f>c.leapMonth&&(f-=1)),e.month=f,o(e),e}function a(e){return{year:e.getFullYear(),month:e.getMonth(),mDay:e.getDate(),wDay:e.getDay()}}function s(e,t,n){if(e+="",t-=e.length,t<=0)return e;if(n||0===n||(n=" "),n+=""," "===n&&t<10)return y[t]+e;for(var i="";;){if(1&t&&(i+=n),t>>=1,!t)break;n+=n}return i+e}function c(e,t){return e=""+e,e.substr(e.length-t)}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"zyyy zy cy yyyy yy MMMM Mmmm mmmm MMM Mmm mmm mm m DDDD dddd DDD ddd dd d ",n=a(e),i=v(e).toJSON({chinese:!0});return t.replace("+zyyy",g[n.year]).replace("+zy",g[c(n.year,2)]).replace("+yyyy",n.year).replace("+yy",c(n.year,2)).replace("+MMMM",f.mmmm[n.month].toUpperCase()).replace("+Mmmm",f.mmmm[n.month]).replace("+mmmm",f.mmmm[n.month].toLowerCase()).replace("+MMM",f.mmm[n.month].toUpperCase()).replace("+Mmm",f.mmm[n.month]).replace("+mmm",f.mmm[n.month].toLowerCase()).replace("+mm",s(n.month+1,2,"0")).replace("+zm",g[n.month+1]).replace("+m",n.month+1).replace("+DDDD",f.dddd[n.wDay].toUpperCase()).replace("+dddd",f.dddd[n.wDay]).replace("+Dddd",f.dddd[n.wDay].charAt(0).toUpperCase()+f.dddd[n.wDay].substr(1)).replace("+ddd",f.dddd[n.wDay].substr(0,3)).replace("+Ddd",f.dddd[n.wDay].charAt(0).toUpperCase()+f.dddd[n.wDay].substr(1,2)).replace("+DDD",f.dddd[n.wDay].substr(0,3).toUpperCase()).replace("+zddd",f.zddd[n.wDay]).replace("+dd",s(n.mDay,2,"0")).replace("+zd",g[n.mDay]).replace("+d",n.mDay).replace("+cy",i.year).replace("+cm",i.month).replace("+cd",i.day)}function u(){return{parse:l}}var p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=[1750378,339370,6020516,405156,314698,4934293,371351,279894,2804405,346837,8115922,419666,331429,4961866,394827,297627,3880278,370026,281433,1759058,345938,6019877,412453,313931,4936875,377517,288107,1764201,355753,7093650,429714,331045,4954701,395862,303798,3872181,370388,282281,1769106,347794,6016294,402731,313943,4936374,379738,296660,2821833,354121,7075475,420499,329003,5991003,387757,304490,3881813,371620,281417,1759891,346773,7058733,402742,314029,4945322,378290,290213,2825546,363850,8120981,412311,329046,5999285,387797,304850,3878565,372389,280138,2796695,338587,7066970,402794,314217,4945746,387922,289573,3864139,354891,8123563,410285,320877,5999465,396713,306578,3882277,372005,10246733,428630,336566,6006197,403157,315049,4947602,388754,298278,2812502,346711,8123606,418650,321237,4953801,395081,304787,3872043,361771,272987,1758554,337258,7060309,412580,322377,4938387,379541,288045,3861165,346805,9172394,419282,331173,6004042,396618,306325,3880238,361814,273077,1758642,345810,6008485,403237,312907,4934807,371883,288090,2812630,355177,11269970,420690,330533,6003275,387659,296107,4916571,361901,273258,1760082,347538,7068965,404773,313941,4936877,378038,279989,2813354,356041,8142482,421522,331046,5999190,387671,296150,3868373,362325,280393,2797203,337555,7058731,402731,305755,4937050,378218,289637,3864394,355146,8125077,420501,320813,5991085,387765,304554,3869605,363941,281930,2808981,339094,7059790,402774,314037,4937138,378578,290469,3870282,345675,8113303,410795,320859,5991126,387946,304978,3880741,363301,273035,1750171,337067],h={YEAR_MIN:1890,YEAR_MAX:2100,map:d,monthNames:["正月","二月","三月","四月","五月","六月","七月","八月","九月","十月","冬月","腊月"],dayNames:["","初一","初二","初三","初四","初五","初六","初七","初八","初九","初十","十一","十二","十三","十四","十五","十六","十七","十八","十九","二十","廿一","廿二","廿三","廿四","廿五","廿六","廿七","廿八","廿九","三十"],heavenlyStems:["甲","乙","丙","丁","戊","己","庚","辛","壬","癸"],earthlyBranches:["子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥"],animals:["鼠","牛","虎","兔","龙","蛇","马","羊","猴","鸡","狗","猪"],solarPeriods:["小寒","大寒","立春","雨水","惊蛰","春分","清明","谷雨","立夏","小满","芒种","夏至","小暑","大暑","立秋","处暑","白露","秋分","寒露","霜降","立冬","小雪","大雪","冬至"],solarPeriodsMap:[0,21208,42467,63836,85337,107014,128867,150921,173149,195551,218072,240693,263343,285989,308563,331033,353350,375494,397447,419210,440795,462224,483532,504758]},f={zddd:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],ddd:["sun","mon","tue","wed","thu","fri","sat"],Ddd:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],DDD:["SUN","MON","TUE","WED","THU","FRI","SAT"],Dddd:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dddd:["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],DDDD:["SUNDAY","MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY"],mmm:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],mmmm:["January","February","March","April","May","June","July","August","September","October","November","December"]},g={1:"一",2:"二",3:"三",4:"四",5:"五",6:"六",7:"七",8:"八",9:"九",10:"十",11:"十一",12:"十二",13:"十三",14:"十四",15:"十五",16:"十六",17:"十七",18:"十八",19:"十九",20:"二十",21:"二十一",22:"二十二",23:"二十三",24:"二十四",25:"二十五",26:"二十六",27:"二十七",28:"二十八",29:"二十九",30:"三十",31:"三十一",2015:"二零一五",2016:"二零一六",2017:"二零一七",2018:"二零一八",2019:"二零一九",2020:"贰零贰零",2021:"贰零贰壹",2022:"贰零贰贰"},m=function(){function e(t){return n(this,e),t?(t instanceof Date&&(this._date=t,r(this)),this):this}return p(e,[{key:"convert",value:function(){return r(this)}},{key:"toDate",value:function(){return this._date}},{key:"isValid",value:function(){return!!this._date}},{key:"format",value:function(e){return this._date?(e=e||"农历gYzY年MD",e.replace("gY",h.heavenlyStems[this.gYear]).replace("zY",h.earthlyBranches[this.zYear]).replace("gM",h.heavenlyStems[this.gMonth]).replace("zM",h.earthlyBranches[this.zMonth]).replace("gD",h.heavenlyStems[this.gDay]).replace("zD",h.earthlyBranches[this.zDay]).replace("M",(this.leap?"闰":"")+h.monthNames[this.month]).replace("D",h.dayNames[this.day])):"Invalid Date"}},{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this;if(e.chinese&&(t={year:h.heavenlyStems[this.gYear]+h.earthlyBranches[this.zYear],month:h.monthNames[this.month],day:h.dayNames[this.day],gYear:h.heavenlyStems[this.gYear],zYear:h.earthlyBranches[this.zYear],animal:h.animals[this.animal],leap:this.leap?"闰":""}),"array"===e.type)return[t.year,t.month,t.day,t.leap];var n=t,i=n.year,o=n.month,r=n.day,a=n.leap,s=n.gYear,c=n.zYear,l=n.animal;return{year:i,month:o,day:r,leap:a,gYear:s,zYear:c,animal:l}}},{key:"toString",value:function(){return this.format()}}]),e}(),v=function(e){if(e){if(!(e instanceof Date))throw new Error("date parameter must be Date/Array/Object")}else e=new Date;return new m(e)},y=[""," ","  ","   ","    ","     ","      ","       ","        ","         "];e.exports=u()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(623);var s=n(101),c=n(624),l=n(36).parse,u=n(24),p=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{},removeComp:!1,copyComp:!1,link:!1}),r}return r(t,e),a(t,[{key:"create$context",value:function(){var e=this,t=e.compJson,n=t.id,i=t.type,o=t.properties,r=o.forward,a=o.back,s=$(l(c,{id:n,type:i,forward:e.amendImageSrc(r),back:e.amendImageSrc(a)}));return this.$forward=s.find(".forward"),this.$back=s.find(".back"),s}},{key:"updateButtonImage",value:function(e){var t=this.$context.find("."+e),n=this.compJson.properties;t.css("backgroundImage","url("+this.amendImageSrc(n[e])+")")}},{key:"amendImageSrc",value:function(e){return/(localhost)|(\w+.com)|(\w+.cn)|(\w+.cc)/.test(e)?e:""+(u.FILE+e)}},{key:"showForwardButton",value:function(){this.$forward.show(),this.$back.hide()}},{key:"showBackButton",value:function(){this.$forward.hide(),this.$back.show()}}]),t}(s);e.exports=p},function(e,t){},function(e,t){e.exports='<div id="#{id}" ctype="#{type}" class="element element-pip-button"><div class="forward" style="background-image: url(\'#{forward}\')"></div><div class="back" style="background-image: url(\'#{back}\')"></div></div>'},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){for(var n=$(g),i=[],o=[],r=[],a=0;a<t.length;a++){e++;var s={prizeId:e,prizeName:"谢谢参与",couponCode:"",isLost:!0};i.push(t[a]),i.push(s),o.push(s),r.push("<li>"+t[a].prizeName+": "+t[a].prizeDetail+"</li>")}return x.draw(n.find(".turntable-box"),i),{prizeList:i,partakeItems:o,prizeItemsTpl:r,$turntableTpl:n}}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function S(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:S(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)};n(626),n(627);var l=n(101),u=n(36).parse,p=n(69).getWeChatUser,d=n(27).isWeixin,h=n(82).popUpModal,f=n(28).isEqxWxMini,g=n(628),m=n(632),v=n(633),y=n(635),b=n(637),x=n(638),w=n(639),k=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{advanceStyle:{size:!1}},trigger:{self:!1},sound:!1,link:!1,flexLine:""}),r}return r(t,e),s(t,[{key:"create$context",value:function(){var e=this.compJson,t=p(),n=e.id,i=e.type;g=u(g,{id:n,type:i}),this.startTime=w.timeFormat(e.baseInfo.startTime),this.endTime=w.timeFormat(e.baseInfo.endTime);var o=a(e.prizeInfo.seq,e.prizeInfo.options);return this.prizeList=o.prizeList,this.partakeItems=o.partakeItems,this.prizeItemsTpl=o.prizeItemsTpl,this.$turntableTpl=o.$turntableTpl,this.$container=this.$turntableTpl.find(".turntable-container"),this.lotteryBox=this.$turntableTpl.find(".lottery-container"),this.lotteryBox.css("opacity","0"),this.btn=this.$turntableTpl.find(".turntable-btn"),this.$mask=$('<div class="bg-mask"></div>'),w.getBalanceInfo(this.lotteryBox,this.eqxScene.meta.id,e,t),this.$turntableTpl}},{key:"bindAfterRenderEvent",value:function(e,t){var n=this;this.initDom(),this.deg=0;var i=p(),o=this.eqxScene.meta.id,r=this.eqxScene.bgm,a=this.compJson.activityId,s=void 0;this.$btn.on("click",function(e){return e.stopPropagation(),d()||f()?(n.$btn.addClass("disabled"),n.lotteryItem=null,n.chances=0,n.winJson=null,s=w.getLottery(o,a,i),void s.then(function(e){n.winJson=e.obj;for(var t=n.prizeList,i=0;i<t.length;i++)if(t[i].prizeId===e.obj.id){n.lotteryItem=t[i],n.chances=i;break}})["catch"](function(e){if(110101===e.code)h("活动还未开始，活动时间为"+n.startTime+"&nbsp;~&nbsp;"+n.endTime);else if(110102===e.code)h("活动已经结束啦，下次早点来哦～");else if(110112===e.code)h("今日抽奖次数已用完，请明日再来～");else{var t=Math.random()*n.partakeItems.length>>>0;n.lotteryItem=n.partakeItems[t],n.chances=2*t+1}})["finally"](function(){if(s=null,n.lotteryItem){var e=n.prizeList.length;
n.deg=n.deg||0,n.deg=n.deg+(360-n.deg%360)+(3600-n.chances*(360/e)),n.$container.css("transform","rotate("+n.deg+"deg)")}else n.$btn.removeClass("disabled")})):void h("该组件仅能在微信中使用。")}),this.$container.on("transitionend",function(){n.$btn.removeClass("disabled"),r&&r.hide(),w.getBalanceInfo(n.lotteryBox,o,t,i),n.lotteryItem.isLost?(n.$lostLotteryHtml.append(n.$closeBtn),n.$lostLotteryHtml.show()):(n.$winLotteryHtml.append(n.$closeBtn),w.updateWinLotteryTpl(n.winJson,n.$winLotteryHtml),n.$winLotteryHtml.show(),w.sendRedPackets(n.winJson)["catch"](function(){h("红包发送失败！")}))}),this.silkBag.on("click",function(e){e.stopPropagation(),r&&r.hide(),n.$activityTpl.append(n.$closeBtn),w.getHitList(o,a,i,b,n.$prizeContainer),n.$activityTpl.find(".prize-list").html(n.prizeItemsTpl.join("")),n.$activityTpl.find(".activity-time p").html(n.startTime+" - "+n.endTime),n.editActivityCss("block","none","35px"),n.$activityTpl.show()}),this.$explain.on("click",function(e){e.stopPropagation(),n.editActivityCss("block","none","35px")}),this.$myPrize.on("click",function(e){e.stopPropagation(),n.editActivityCss("none","block","160px")}),this.$closeBtn.on("click",function(e){e.stopPropagation(),n.$mask.find(".mask-container").hide(),r&&r.show()}),this.$againBtn.on("click",function(){n.$closeBtn.trigger("click")}),this.$activityTpl.on("click",function(){n.$closeBtn.trigger("click")}),this.$winLotteryHtml.on("click",function(){n.$closeBtn.trigger("click")}),this.$lostLotteryHtml.on("click",function(){n.$closeBtn.trigger("click")}),this.$prizeContainer.on("touchstart touchmove touchend mousedown mouseup mousemove",function(e){e.stopPropagation()})}},{key:"eleShow",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleShow",this).call(this),this.$mask.show(),this.$mask.parent().length||this.$mask.insertBefore(this.$li.parent().parent()),w.showMaskPanel(this.$mask,this.eqxPage)}},{key:"eleHide",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleHide",this).call(this),this.$mask.hide()}},{key:"initDom",value:function(){this.$btn=this.$li.find(".turntable-btn"),this.$container=this.$li.find(".turntable-container"),this.silkBag=this.$li.find("#silkBag"),this.$closeBtn=$('<div class="mask-close"></div>'),this.$activityTpl=$(m),this.$lostLotteryHtml=$(y),this.$winLotteryHtml=$(v),this.$explain=this.$activityTpl.find(".explain"),this.$myPrize=this.$activityTpl.find(".my-prize"),this.$mask.append(this.$lostLotteryHtml),this.$mask.append(this.$winLotteryHtml),this.$mask.append(this.$activityTpl),this.$mask.find(".mask-container").hide(),this.$prizeContainer=this.$activityTpl.find(".prize-container"),this.$explainContainer=this.$activityTpl.find(".explain-container"),this.$againBtn=this.$mask.find(".mask-btn")}},{key:"editActivityCss",value:function(e,t,n){this.$explainContainer.css("display",e),this.$prizeContainer.css("display",t),this.$activityTpl.find(".arrow").css("left",n)}}]),t}(l);e.exports={EqxTurntable:k,drawCanvas:a}},function(e,t){},function(e,t){},function(e,t,n){e.exports='<div class="game-turntable-box" id="#{id}" ctype="#{type}"><div id="silkBag" class="silk-bag"><img src="'+n(629)+'" alt="活动锦囊"></div><div class="turntable-box"><img src="'+n(630)+'" alt=""><div class="turntable-container"><canvas class="turntable-canvas" width="230" height="230"></canvas></div><a class="turntable-btn" href="javascript:;"><img src="'+n(631)+'" alt=""></a></div><div class="lottery-container"><p class="spend-item">今日已抽<span>0</span>次</p><p class="surplus-item">您今日还可抽<span>10</span>次</p></div></div>'},function(e,t,n){e.exports=n.p+"images/silkBag-883835.png"},function(e,t,n){e.exports=n.p+"images/bg-turntable-70266f.gif"},function(e,t,n){e.exports=n.p+"images/pointer-btn-dcf05c.gif"},function(e,t){e.exports='<div class="mask-container activity-container"><ul class="header"><li class="explain"><a href="javascript:;">活动说明</a></li><li class="my-prize"><a href="javascript:;">我的奖品</a></li><div class="arrow"></div></ul><div class="activity-lottery"><div class="explain-container"><div class="activity-info"><div class="title">活动奖品</div><ul class="prize-list"></ul></div><div class="activity-time"><div class="title">活动时间</div><p></p></div></div><div class="prize-container"></div></div></div>'},function(e,t,n){e.exports='<div class="mask-container win-container"><div class="win-lottery"><p>恭喜你获得了</p><img src="'+n(634)+'" alt="奖品"><p class="level">一等奖</p><p class="detail">小米4K高清电视</p><button class="btn mask-btn">再来一次</button></div></div>'},function(e,t,n){e.exports=n.p+"images/gift-2371b1.png"},function(e,t,n){e.exports='<div class="mask-container lost-container"><div class="lost-lottery"><img src="'+n(636)+'" alt="未中奖"><p class="detail">奖品飘走了......</p><button class="btn mask-btn">再来一次</button></div></div>'},function(e,t,n){e.exports=n.p+"images/lost-a2aa4c.png"},function(e,t){e.exports='<div class="prize-info"><div class="isEmptyAward ellipsis"><span class="awardStyle">#{name}</span> <span class="awardName">：#{detail}</span></div><div class="code-period"><span class="awardTypeName">中奖时间：</span> <span class="awardBgTime">#{hitTime}</span></div><div class="code-period"><span class="awardTypeName">#{typeName}：</span> <span class="awardBgTime">#{couponCode}</span></div><div class="ticket-img"></div></div>'},function(e,t){"use strict";function n(e,t){var n=t.length;if(n>>>0!==0){for(var i=180/n+90,o=document.createElement("ul"),r=1/n,a=[],s=e.find(".turntable-canvas")[0],c=e.find(".turntable-container")[0],l=n>5?"12px":"14px",u=s.getContext("2d"),p=0;p<n;p++)u.save(),u.beginPath(),u.translate(115,115),u.moveTo(0,0),u.rotate((360/n*p-i)*Math.PI/180),u.arc(0,0,115,0,2*Math.PI/n,!1),p%2==0?u.fillStyle="#ffb820":u.fillStyle="#ffcb3f",u.fill(),u.lineWidth=.5,u.strokeStyle="#e4370e",u.stroke(),u.restore(),a.push('<li class="turntable-item"> <span style="transform: rotate('+p*r+"turn);font-size:"+l+'"><em class="prize-len-'+n+'">'+t[p].prizeName+"</em></span> </li>"),p+1===n&&(o.className="turntable-list",$(c).append(o),o.innerHTML=a.join(""));return e}}e.exports={draw:n}},function(e,t,n){"use strict";function i(e){return e=e.replace(/\-/g,"/"),v(new Date(e),"yyyy年MM月dd日 hh:mm")}function o(e,t,n){return d(e,t,n.openid,n.nickname,n.headimgurl,n.sex,n.province)}function r(e,t,n,i){var o=void 0,r=e.find(".spend-item"),a=e.find(".surplus-item"),s=0,c=n.lotteryInfo.lotteryDayLimit;o=p(t,n.activityId,i.openid),o.then(function(e){var t=e.map;s=t.used,c=t.balance})["finally"](function(){o=null,r.find("span").html(s),a.find("span").html(c),e.css("opacity","1")})}function a(e,t,n,i,o){var r=void 0;o.empty(),r=h(e,t,n.openid),r.then(function(e){var t=e.list;if(!t||0==t.length)return void o.html("暂无记录");for(var n=0;n<t.length;n++){var r={name:t[n].prizeName,detail:t[n].detail,hitTime:t[n].hitTime};t[n].prizeType==y?(r.typeName="红包金额",r.couponCode=t[n].couponCode/100+"元"):(r.typeName="兑奖码",r.couponCode=t[n].couponCode);var a=g(i,r);o.append(a)}})["catch"](function(){o.html("暂无记录")})}function s(e){return e&&e.prizeType==y?f(e.redPacketsId):Promise.resolve()}function c(e,t){e.show();var n=t.$editDiv.css("transform")||"",i=n.match(/matrix.*, (.*)\)/),o=i?i[1]:0,r=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;e.find(".mask-container").css({top:Math.abs(o)+"px",height:(m()?r:486)+"px"})}function l(e){for(var t=[],n=0;n<e.length;n++)t.push("<li>"+e[n].prizeName+"："+e[n].prizeDetail+"</li>");return t}function u(e,t){e.prizeType==y?t.find(".level").html("￥"+e.couponCode/100+" 元"):t.find(".level").html(e.prizeName),t.find(".detail").html(e.detail)}var p=n(640).$getLotteryBalance,d=n(640).$getLottery,h=n(640).$getHitList,f=n(640).$sendRedPackets,g=n(36).parse,m=n(27).mobilecheck,v=n(35).dateFormat,y="red_packets";e.exports={timeFormat:i,getLottery:o,getBalanceInfo:r,getHitList:a,sendRedPackets:s,showMaskPanel:c,getPrizeList:l,updateWinLotteryTpl:u}},function(e,t,n){"use strict";function i(e,t,n){return s({type:"GET",url:c.SERVER_1+"vip/lottery/balance",data:{sceneId:e,lotteryId:t,wxOpenId:n}})}function o(e,t,n,i,o,r,a){return s({type:"GET",async:!1,url:c.SERVER_1+"vip/lottery/draw",data:{sceneId:e,lotteryId:t,wxOpenId:n,wxNickName:i,wxHeadImage:o,wxSex:r,wxProvince:a}})}function r(e,t,n){return s({type:"GET",url:c.SERVER_1+"vip/lottery/hit",data:{sceneId:e,lotteryId:t,wxOpenId:n}})}function a(e){return s({type:"GET",url:c.SERVER_1+"vip/lottery/send",data:{redPacketsId:e}})}var s=n(23).ajax,c=n(24);e.exports={$getLotteryBalance:i,$getLottery:o,$getHitList:r,$sendRedPackets:a}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(){return $(m)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function I(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:I(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)};n(642),n(627);var l=n(101),u=n(36).parse,p=n(69).getWeChatUser,d=n(27).isWeixin,h=n(82).popUpModal,f=n(639),g=n(28).isEqxWxMini,m=n(643),v=n(645),y=n(646),b=n(632),x=n(633),w=n(635),k=n(637),S=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{advanceStyle:{size:!1}},trigger:{self:!1},sound:!1,link:!1,flexLine:""}),r}return r(t,e),s(t,[{key:"create$context",value:function(){var e=this.compJson,t=p(),i=e.id,o=e.type;return m=u(m,{id:i,type:o}),this.startTime=f.timeFormat(e.baseInfo.startTime),this.endTime=f.timeFormat(e.baseInfo.endTime),this.$gameHtml=$(m),this.$egg=this.$gameHtml.find(".egg"),this.prizeList=e.prizeInfo.options,this.$mask=$('<div class="bg-mask"></div>'),this.lotteryBox=this.$gameHtml.find(".lottery-container"),this.lotteryBox.css("opacity","0"),f.getBalanceInfo(this.lotteryBox,this.eqxScene.meta.id,e,t),this.prizeItemsTpl=f.getPrizeList(this.prizeList),this.audio=document.createElement("audio"),this.audio.src=n(647),this.$gameHtml.append(this.audio),this.$gameHtml}},{key:"bindAfterRenderEvent",value:function(e,t){var n=this;this.initDom();var i=p(),o=this.eqxScene.meta.id,r=this.eqxScene.bgm,a=this.compJson.activityId,s=null,c=void 0;this.$egg.on("click",function(e){return e.stopPropagation(),d()||g()?(n.winJson=null,s&&clearTimeout(s),void(s=setTimeout(function(){n.lotteryItem=null,c=f.getLottery(o,a,i),c.then(function(t){n.winJson=t.obj;var i=n.eggClick(e);n.$winLotteryHtml.append(n.$closeBtn),f.updateWinLotteryTpl(n.winJson,n.$winLotteryHtml),n.smashProcess(i,n.$winLotteryHtml)})["catch"](function(t){n.lostLottery(t.code,e)})["finally"](function(){f.getBalanceInfo(n.lotteryBox,o,t,i)})},300))):void h("该组件仅能在微信中使用。")}).on("dbclick",function(e){e.stopPropagation(),s&&clearTimeout(s)}),this.silkBag.on("click",function(e){e.stopPropagation(),r&&r.hide(),n.$activityTpl.append(n.$closeBtn),f.getHitList(o,a,i,k,n.$prizeContainer),n.$activityTpl.find(".prize-list").html(n.prizeItemsTpl.join("")),n.$activityTpl.find(".activity-time p").html(n.startTime+" - "+n.endTime),n.editActivityCss("block","none","35px"),n.$activityTpl.show()}),this.$explain.on("click",function(e){e.stopPropagation(),n.editActivityCss("block","none","35px")}),this.$myPrize.on("click",function(e){e.stopPropagation(),n.editActivityCss("none","block","160px")}),this.$closeBtn.on("click",function(e){e.stopPropagation(),n.$li.find(".land-box").removeClass("pause"),n.$egg.removeClass("pause"),n.$li.find(".egg").html("").prop("style",""),n.$mask.find(".mask-container").hide(),r&&r.show()}),this.$againBtn.on("click",function(){n.$closeBtn.trigger("click")}),this.$activityTpl.on("click",function(){n.$closeBtn.trigger("click")}),this.$winLotteryHtml.on("click",function(){n.$closeBtn.trigger("click")}),this.$lostLotteryHtml.on("click",function(){n.$closeBtn.trigger("click")}),this.$prizeContainer.on("touchstart touchmove touchend mousedown mouseup mousemove",function(e){e.stopPropagation()})}},{key:"eleShow",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleShow",this).call(this),this.$mask.show(),this.$mask.parent().length||this.$mask.insertBefore(this.$li.parent().parent()),f.showMaskPanel(this.$mask,this.eqxPage)}},{key:"eleHide",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleHide",this).call(this),this.$mask.hide()}},{key:"initDom",value:function(){this.silkBag=this.$li.find("#silkBag"),this.$closeBtn=$('<div class="mask-close"></div>'),this.$activityTpl=$(b),this.$winLotteryHtml=$(x),this.$lostLotteryHtml=$(w),this.$mask.append(this.$lostLotteryHtml),this.$mask.append(this.$winLotteryHtml),this.$mask.append(this.$activityTpl),this.$mask.find(".mask-container").hide(),this.$explain=this.$activityTpl.find(".explain"),this.$myPrize=this.$activityTpl.find(".my-prize"),this.$againBtn=this.$lostLotteryHtml.find(".mask-btn"),this.$prizeContainer=this.$activityTpl.find(".prize-container"),this.$explainContainer=this.$activityTpl.find(".explain-container")}},{key:"editActivityCss",value:function(e,t,n){this.$explainContainer.css("display",e),this.$prizeContainer.css("display",t),this.$activityTpl.find(".arrow").css("left",n)}},{key:"noAnimation",value:function(e){var t=window.getComputedStyle(e[0]).transform,n=window.getComputedStyle(this.$egg[0]),i=window.getComputedStyle(this.$egg[1]),o=window.getComputedStyle(this.$egg[2]),r=n.transform,a=i.transform,s=o.transform,c=n.zIndex,l=i.zIndex,u=o.zIndex;e.addClass("pause").css("transform",t),this.$egg.eq(0).addClass("pause").css("transform",r).css("z-index",c),this.$egg.eq(1).addClass("pause").css("transform",a).css("z-index",l),this.$egg.eq(2).addClass("pause").css("transform",s).css("z-index",u)}},{key:"eggClick",value:function(e){var t=$(e.target);$(".egg").off("click",this.eggClick),this.noAnimation(t.parents(".land-box"));var n=$('<img src="'+y+'" class="hammer"><img src="'+v+'" class="egg-smash">');return t.html(n),t}},{key:"lostLottery",value:function(e,t){if(110101===e)h("活动还未开始，活动时间为"+this.startTime+"&nbsp;~&nbsp;"+this.endTime);else if(110102===e)h("活动已经结束啦，下次早点来哦～");else if(110112===e)h("今日抽奖次数已用完，请明日再来～");else{this.$lostLotteryHtml.append(this.$closeBtn);var n=this.eggClick(t);this.smashProcess(n,this.$lostLotteryHtml)}}},{key:"smashProcess",value:function(e,t){var n=this,i=this.eqxScene.bgm;this.audio.play(),setTimeout(function(){e.css("background","none").find(".egg-smash").show(),setTimeout(function(){f.sendRedPackets(n.winJson)["catch"](function(){h("红包发送失败！")}),i&&i.hide(),t.show()},500)},1e3)}}]),t}(l);e.exports={EqxSmashEgg:S,initEgg:a}},function(e,t){},function(e,t,n){e.exports='<div class="game-box" id="#{id}" ctype="#{type}"><div id="silkBag" class="silk-bag"><img src="'+n(629)+'" alt="活动锦囊"></div><div class="stage"><img class="tray" src="'+n(644)+'" style="display: block"><div class="land-box"><div class="egg"></div><div class="egg"></div><div class="egg"></div></div></div><div class="lottery-container"><p class="spend-item">今日已砸<span>0</span>次</p><p class="surplus-item">您今日还可砸<span>10</span>次</p></div></div>'},function(e,t,n){e.exports=n.p+"images/stage-bf68e9.png"},function(e,t,n){e.exports=n.p+"images/egg-break-ccb058.png"},function(e,t,n){e.exports=n.p+"images/hammer-28a857.png"},function(e,t,n){e.exports=n.p+"images/smashEgg-81a39c.mp3"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(){return $(m)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function S(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:S(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)};n(649);var l=n(101),u=n(36).parse,p=n(69).getWeChatUser,d=n(27).isWeixin,h=n(82).popUpModal,f=n(639),g=n(28).isEqxWxMini,m=n(650),v=n(637),y=n(632),b=n(633),x=n(635),w=n(652),k=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{advanceStyle:{size:!1}},trigger:{self:!1},sound:!1,link:!1,flexLine:""}),r}return r(t,e),s(t,[{key:"create$context",value:function(){var e=this.compJson,t=p(),n=e.id,i=e.type;return m=u(m,{id:n,type:i}),this.startTime=f.timeFormat(e.baseInfo.startTime),this.endTime=f.timeFormat(e.baseInfo.endTime),this.$gameHtml=$(m),this.$drawArea=this.$gameHtml.find("#drawArea"),this.$canvas=this.$gameHtml.find("#cardCanvas"),this.$awardResult=this.$gameHtml.find("#awardResult"),this.prizeList=e.prizeInfo.options,this.$mask=$('<div class="bg-mask"></div>'),this.lotteryBox=this.$gameHtml.find(".lottery-container"),this.lotteryBox.css("opacity","0"),this.prizeItemsTpl=f.getPrizeList(this.prizeList),f.getBalanceInfo(this.lotteryBox,this.eqxScene.meta.id,e,t),this.$gameHtml}},{key:"bindAfterRenderEvent",value:function(e,t){var n=this;this.initDom();var i=p(),o=this.eqxScene.bgm,r=this.eqxScene.meta.id,a=this.compJson.activityId;this.isDrawed=!1,this.thisTimeHasEnd=!0,this.startStatus=!1,this.isWinner=!1,this.initDraw(),this.$drawArea.on("touchstart",function(e){n.toucheStart(e.originalEvent)}).on("touchmove",function(e){n.touchMove(e.originalEvent)}).on("touchend",function(e){n.isDrawed&&n.thisTimeHasEnd&&n.touchEnd(e.originalEvent)}),this.$drawArea.on("mousedown",function(e){n.toucheStart(e.originalEvent)}).on("mousemove",function(e){n.touchMove(e.originalEvent)}).on("mouseup",function(e){n.isDrawed&&n.thisTimeHasEnd&&n.touchEnd(e.originalEvent)}),this.silkBag.on("click",function(e){e.stopPropagation(),o&&o.hide(),n.$activityTpl.append(n.$closeBtn),f.getHitList(r,a,i,v,n.$prizeContainer),n.$activityTpl.find(".prize-list").html(n.prizeItemsTpl.join("")),n.$activityTpl.find(".activity-time p").html(n.startTime+" - "+n.endTime),n.editActivityCss("block","none","35px"),n.$activityTpl.show()}),this.$explain.on("click",function(e){e.stopPropagation(),n.editActivityCss("block","none","35px")}),this.$myPrize.on("click",function(e){e.stopPropagation(),n.editActivityCss("none","block","160px")}),this.$closeBtn.on("click",function(e){e.stopPropagation(),n.$mask.find(".mask-container").hide(),n.$awardResult.find(".win-award").hide(),n.$awardResult.find(".lost-award").hide(),n.ctx.globalCompositeOperation="source-over",n.initDraw(),o&&o.show()}),this.$againBtn.on("click",function(e){e.stopPropagation(),n.$closeBtn.trigger("click")}),this.$activityTpl.on("click",function(e){e.stopPropagation(),n.$closeBtn.trigger("click")}),this.$winLotteryHtml.on("click",function(e){e.stopPropagation(),n.$closeBtn.trigger("click")}),this.$lostLotteryHtml.on("click",function(e){e.stopPropagation(),n.$closeBtn.trigger("click")}),this.$prizeContainer.on("touchstart touchmove touchend mousedown mouseup mousemove",function(e){e.stopPropagation()})}},{key:"eleShow",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleShow",this).call(this),this.$mask.show(),this.$mask.parent().length||this.$mask.insertBefore(this.$li.parent().parent()),f.showMaskPanel(this.$mask,this.eqxPage)}},{key:"eleHide",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleHide",this).call(this),this.$mask.hide()}},{key:"initDom",value:function(){this.silkBag=this.$li.find("#silkBag"),this.$closeBtn=$('<div class="mask-close"></div>'),this.$activityTpl=$(y),this.$winLotteryHtml=$(b),this.$lostLotteryHtml=$(x),this.$mask.append(this.$lostLotteryHtml),this.$mask.append(this.$winLotteryHtml),this.$mask.append(this.$activityTpl),this.$mask.find(".mask-container").hide(),this.$explain=this.$activityTpl.find(".explain"),this.$myPrize=this.$activityTpl.find(".my-prize"),this.$againBtn=this.$lostLotteryHtml.find(".mask-btn"),this.$prizeContainer=this.$activityTpl.find(".prize-container"),this.$explainContainer=this.$activityTpl.find(".explain-container")}},{key:"editActivityCss",value:function(e,t,n){this.$explainContainer.css("display",e),this.$prizeContainer.css("display",t),this.$activityTpl.find(".arrow").css("left",n)}},{key:"lostLottery",value:function(e,t){110101===t?h("活动还未开始，活动时间为"+this.startTime+"&nbsp;~&nbsp;"+this.endTime):110102===t?h("活动已经结束啦，下次早点来哦～"):110112===t?h("今日抽奖次数已用完，请明日再来～"):(this.$awardResult.find(".lost-award").show().siblings().hide(),this.$lostLotteryHtml.append(this.$closeBtn),this.doToucheStart(e))}},{key:"winLottery",value:function(e){this.$awardResult.find(".win-award p").html(e.prizeName),this.$awardResult.find(".win-award").show().siblings().hide(),this.$winLotteryHtml.append(this.$closeBtn),f.updateWinLotteryTpl(e,this.$winLotteryHtml)}},{key:"getRoute",value:function(e){var t=e.touches?e.touches[0]:e,n=t.pageX-this.$canvas.offset().left,i=t.pageY-this.$canvas.offset().top;return{x:n,y:i}}},{key:"doToucheStart",value:function(e){this.startStatus=!0,this.thisTimeHasEnd=!1;var t=this.getRoute(e),n=t.x,i=t.y;this.drawCircle(n,i),this.lastX=n,this.lastY=i}},{key:"toucheStart",value:function(e){var t=this;if(e.preventDefault(),e.stopPropagation(),!d()&&!g())return void h("该组件仅能在微信中使用。");if(this.thisTimeHasEnd){var n=p(),i=this.eqxScene.meta.id,o=this.compJson.activityId,r=f.getLottery(i,o,n);this.winJson=null,r.then(function(n){t.isWinner=!0,t.winJson=n.obj,t.winLottery(t.winJson),t.doToucheStart(e)})["catch"](function(n){t.isWinner=!1,t.lostLottery(e,n.code)})["finally"](function(){f.getBalanceInfo(t.lotteryBox,i,t.compJson,n)})}else this.doToucheStart(e)}},{key:"touchMove",value:function(e){var t=this;if(e.preventDefault(),e.stopPropagation(),this.startStatus){for(var n=this.getRoute(e),i=n.x,o=n.y,r=this.circleRadius(i,o,this.lastX,this.lastY);r>this.step;)this.lastX+=(i-this.lastX)/r*this.step,this.lastY+=(o-this.lastY)/r*this.step,this.drawCircle(this.lastX,this.lastY),r=this.circleRadius(i,o,this.lastX,this.lastY);if(this.drawCircle(i,o),this.lastX=i,this.lastY=o,this.percent()>this.per){this.clear(),this.startStatus=!1,this.$canvas.hide(),this.thisTimeHasEnd=!0;var a=this.isWinner?this.$winLotteryHtml:this.$lostLotteryHtml;setTimeout(function(){var e=t.eqxScene.bgm;e&&e.hide(),t.$canvas.show(),a.show(),t.isWinner&&f.sendRedPackets(t.winJson)["catch"](function(){h("红包发送失败！")})},500)}}}},{key:"touchEnd",value:function(e){this.startStatus=!1,e.preventDefault(),e.stopPropagation()}},{key:"initDraw",value:function(){this.$canvas.show();var e=this.$canvas.attr("width"),t=10*e/320;this.isDrawed?this.drawGGL():(this.initCanvas(t),this.isDrawed=!0)}},{key:"initCanvas",value:function(e){this.r=e||12,this.per=60,this.step=this.r/8,this.ca=this.$canvas[0],this.ctx=this.ca.getContext("2d"),this.w=this.$canvas.attr("width"),this.h=this.$canvas.attr("height"),this.pixels=this.w*this.h,this.img=w,this.lastX=0,this.lastY=0,this.create()}},{key:"create",value:function(){var e=this;this.clear();var t=this.ctx,n=this.w,i=this.h,o=new Image;o.crossOrigin="anonymous",o.src=this.img,this.img=o;var r=this.ca;o.onload=function(){t.drawImage(o,(r.width-n)/2,(r.height-i)/2,n,i)},this.drawGGL=function(){e.ctx.drawImage(e.img,(e.ca.width-e.w)/2,(e.ca.height-e.h)/2,e.w,e.h)},this.$drawArea.css({"background-image":"url()"}),this.ca.addEventListener("touchstart",$.proxy(function(t){!e.thisTimeHasEnd&&e.toucheStart(t)},this),!1),this.ca.addEventListener("touchmove",$.proxy(function(t){!e.thisTimeHasEnd&&e.touchMove(t)},this),!1),this.ca.addEventListener("touchend",$.proxy(function(t){!e.thisTimeHasEnd&&e.touchEnd(t)},this),!1),this.ca.addEventListener("mousedown",$.proxy(function(t){!e.thisTimeHasEnd&&e.toucheStart(t)},this),!1),this.ca.addEventListener("mousemove",$.proxy(function(t){!e.thisTimeHasEnd&&e.touchMove(t)},this),!1),this.ca.addEventListener("mouseup",$.proxy(function(t){!e.thisTimeHasEnd&&e.touchEnd(t)},this),!1)}},{key:"clear",value:function(){this.ctx.clearRect(0,0,this.w,this.h)}},{key:"drawCircle",value:function(e,t){this.ctx.globalCompositeOperation="destination-out",this.ctx.beginPath(),this.ctx.arc(e,t,this.r,0,2*Math.PI),this.ctx.fillStyle="#000",this.ctx.fill()}},{key:"percent",value:function(){for(var e=0,t=this.ctx.getImageData(0,0,this.w,this.h),n=0,i=t.data.length;n<i;n+=4)0===t.data[n]&&0===t.data[n+1]&&0===t.data[n+2]&&0===t.data[n+3]&&e++;return e/this.pixels*100}},{key:"circleRadius",value:function(e,t,n,i){return Math.sqrt((e-n)*(e-n)+(t-i)*(t-i))}}]),t}(l);e.exports={EqxScratchcard:k,initScratchcard:a}},function(e,t){},function(e,t,n){e.exports='<div class="game-scratch-box" id="#{id}" ctype="#{type}"><div class="main-box"><div id="silkBag" class="silk-bag"><img src="'+n(629)+'" alt="活动锦囊"></div><div class="title-box title-down"><img src="'+n(651)+'" alt="一刮千金"></div><div id="drawAreaBox" class="draw-area-box"><div class="draw-area-bg"></div><div id="drawArea" class="draw-area"><div id="awardResult" class="award-result"><div class="award win-award"><p>1等奖</p></div><div class="award lost-award"></div></div><canvas id="cardCanvas" class="card-canvas" width="260" height="112"></canvas></div></div><div class="lottery-container"><p class="spend-item">今日已刮<span>0</span>次</p><p class="surplus-item">您今日还可刮<span>10</span>次</p></div></div></div>'},function(e,t,n){e.exports=n.p+"images/title-ca88d3.png"},function(e,t,n){e.exports=n.p+"images/scratch-a66dec.jpg"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function x(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:x(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)},c=n(101),l=n(36).parse,u=n(27).isWeixin,p=n(69).getWeChatUser,d=n(82).popUpModal,h=n(640).$sendRedPackets,f=n(639),g=n(28).isEqxWxMini,m=n(654),v=n(633),y=n(635),b=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!1},compFont:{self:!1,fontFamily:!1}},trigger:{self:!1},sound:!1,link:!1}),r.canRob=!0,r}return r(t,e),a(t,[{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.properties.title;return this.$context=$(l(m,{id:t,type:n,title:i})),this.$mask=$('<div class="bg-mask"></div>'),this.$context}},{key:"bindAfterRenderEvent",value:function(){var e=this;this.initDom();var t=p();this.bgm=this.eqxScene.bgm;var n=this.eqxScene.meta.id,i=this.compJson.prizeInfo,o=i.activityId;this.startTime=f.timeFormat(i.startTime),this.endTime=f.timeFormat(i.endTime),this.$li.click(function(){if(console.log("canRob",e.canRob),!u()&&!g())return void d("该组件仅能在微信中使用。");var i=f.getLottery(n,o,t);e.canRob&&(e.canRob=!1,i.then(function(t){e.winLottery(t.obj.couponCode),e.canRob=!0,h(t.obj.redPacketsId)["catch"](function(){d("红包发送失败！")})})["catch"](function(t){e.lostLottery(t.code),e.canRob=!0}))}),this.$closeBtn.on("click",function(t){t.stopPropagation(),e.$mask.find(".mask-container").hide(),e.bgm&&e.bgm.show()}),this.$againBtn.on("click",function(t){t.stopPropagation(),e.$closeBtn.trigger("click")}),this.$winLotteryHtml.on("click",function(t){t.stopPropagation(),e.$closeBtn.trigger("click")}),this.$lostLotteryHtml.on("click",function(t){t.stopPropagation(),e.$closeBtn.trigger("click")})}},{key:"eleShow",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleShow",this).call(this),this.$mask.show(),this.$mask.parent().length||this.$mask.insertBefore(this.$li.parent().parent()),f.showMaskPanel(this.$mask,this.eqxPage)}},{key:"eleHide",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleHide",this).call(this),this.$mask.hide()}},{key:"initDom",value:function(){this.$closeBtn=$('<div class="mask-close"></div>'),this.$winLotteryHtml=$(v),this.$lostLotteryHtml=$(y),this.$mask.append(this.$lostLotteryHtml),this.$mask.append(this.$winLotteryHtml),this.$mask.find(".mask-container").hide(),this.$againBtn=this.$mask.find(".mask-btn")}},{key:"winLottery",value:function(e){this.$winLotteryHtml.append(this.$closeBtn),this.$winLotteryHtml.find(".level").html("￥"+e/100+"元"),this.$winLotteryHtml.find(".detail").html("微信现金红包"),this.bgm&&this.bgm.hide(),this.$winLotteryHtml.show()}},{key:"lostLottery",value:function(e){110101===e?d("活动还未开始，活动时间为"+this.startTime+"&nbsp;~&nbsp;"+this.endTime):110102===e?d("活动已经结束啦，下次早点来哦～"):110112===e?d("今日抽奖次数已用完，请明日再来～"):120003===e?d("正在领取中，请勿频繁操作"):(this.$lostLotteryHtml.append(this.$closeBtn),this.bgm&&this.bgm.hide(),this.$lostLotteryHtml.show())}}]),t}(c);e.exports=b},function(e,t,n){e.exports='<div id="#{id}" ctype="#{type}" class="element comp-redPackets" style="cursor: default;width: 100%;height: 100%"><img src="'+n(655)+'" alt="红包" style="width: 100%; height: 100%"></div>'},function(e,t,n){e.exports=n.p+"images/redPackets-88e891.svg"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(101),c=n(657),l=n(36).parse,u=n(27).isWeixin,p=n(28).isEqxWxMini,d=n(501),h=n(504),f=n(80).$getUserWxInfo,g=n(69),m=g.hrefToWxAuth,v=g.setWeChatUser,y=g.initWeChat,b=g.getWeChatUser,x=n(164),w=x.$grabRedPacket,k=n(511),S=k.getRedPacketImg,I=n(34),T=I.isRedEnvelopesSupportHost,E=function(e){
function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!1},compFont:{self:!1,fontFamily:!1}},trigger:{self:!1},sound:!1,link:!1,flexLine:"r,ne,se,sw,nw"}),r}return r(t,e),a(t,[{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.properties.activityId,o=this.getRedPacketImg(),r=$(l(c,{id:t,type:n,src:o}));if("view"==this.eqxScene.config.mode&&!i){var a=$('<img src="'+d+'" alt="">');a.css({"max-width":"128px",width:"100%",position:"absolute",top:"0",left:"50%",transform:"translateX(-50%)"}),this.$boxDiv.append(a)}return r}},{key:"getRedPacketImg",value:function(){var e=this.compJson.properties.styleSetting;return S(e)}},{key:"update$context",value:function(e){Object.assign(this.compJson.properties.styleSetting,e);var t=this.getRedPacketImg();this.$context.find("img.red-packet").attr("src",t)}},{key:"bindAfterRenderEvent",value:function(){var e=this,t=this.compJson.properties,n=t.activityId,i=t.styleSetting.congratulations;if(n&&T()){var o=this.getActivityJson(n),r=!1;this.$li.click(function(){if(!r)if(r=!0,u()||p()){if(!o)return void(r=!1);var t=b(),a=e.eqxScene.meta,s=void 0;s=u()&&!t.openid?f(a.userId,a).then(function(e){return e.obj?(v(e.obj),y({obj:a},location.href.split("#")[0]),t=b(),void 0):(m(null,null,a),Promise.reject(new Error))}):Promise.resolve(),s.then(function(){Date.now()<o.startTime?(e.redPacketReceive=new h({mode:"fail",failCode:120805}),r=!1):Date.now()>o.endTime?(e.redPacketReceive=new h({mode:"fail",failCode:120806}),r=!1):w(a.id,n,t.openid).then(function(t){200==t.code&&(e.redPacketReceive=new h({mode:"success",money:t.map.payAmount,congratulations:i})),r=!1})["catch"](function(t){console.log(t),e.redPacketReceive=new h({mode:"fail",failCode:t.code}),r=!1})})["catch"](function(){r=!1})}else e.redPacketReceive=new h({mode:"fail",failCode:"noWxEnv"}),r=!1})}}},{key:"getActivityJson",value:function(e){var t=this.eqxScene.sceneJson,n=t.redpacketJson||{},i=n.activity||[];return i.find(function(t){return t.id==e})}}]),t}(s);e.exports=E},function(e,t){e.exports='<div id="#{id}" ctype="#{type}" class="element comp-redPackets" style="width: 100%; height: 100%; position: relative"><img class="red-packet" src="#{src}" alt="红包" style="max-width: 100%; max-height: 100%; position: absolute; top: 0; left: 0; right: 0; bottom: 0; margin: auto"></div>'},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var n=void 0;switch(e){case 0:n=S;break;case 1:n=I;break;case 2:n=T;break;case 3:n=E;break;case 4:n=P;break;case 5:n=_}return'<img class="prize-icon" src="'+n+'" alt="">\n            <p class="prize-text">'+t+'</p>\n            <div class="prize-mask"></div>'}function s(e){var t=$(y);return e.forEach(function(e){e.prizeIndexArr.forEach(function(n){t.find(".prize-"+n).html(a(e.rank,e.prizeName))})}),t}function c(e){return e?1===e.length?s([{prizeIndexArr:[0,2,4,6],prizeName:"谢谢参与",rank:0},{prizeIndexArr:[1,3,5,7],prizeName:e[0].prizeName,rank:1}]):2===e.length?s([{prizeIndexArr:[0,2,4,6],prizeName:"谢谢参与",rank:0},{prizeIndexArr:[1],prizeName:e[0].prizeName,rank:1},{prizeIndexArr:[3,5,7],prizeName:e[1].prizeName,rank:2}]):3===e.length?s([{prizeIndexArr:[0,2,4,6],prizeName:"谢谢参与",rank:0},{prizeIndexArr:[1],prizeName:e[0].prizeName,rank:1},{prizeIndexArr:[7],prizeName:e[1].prizeName,rank:2},{prizeIndexArr:[3,5],prizeName:e[2].prizeName,rank:3}]):4===e.length?s([{prizeIndexArr:[0,2,4,6],prizeName:"谢谢参与",rank:0},{prizeIndexArr:[1],prizeName:e[0].prizeName,rank:1},{prizeIndexArr:[7],prizeName:e[1].prizeName,rank:2},{prizeIndexArr:[3],prizeName:e[2].prizeName,rank:3},{prizeIndexArr:[5],prizeName:e[3].prizeName,rank:4}]):5===e.length?s([{prizeIndexArr:[0,4],prizeName:"谢谢参与",rank:0},{prizeIndexArr:[1],prizeName:e[0].prizeName,rank:1},{prizeIndexArr:[7],prizeName:e[1].prizeName,rank:2},{prizeIndexArr:[3],prizeName:e[2].prizeName,rank:3},{prizeIndexArr:[5],prizeName:e[3].prizeName,rank:4},{prizeIndexArr:[2,6],prizeName:e[4].prizeName,rank:5}]):void 0:$(y)}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function A(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:A(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)};n(659);var p=n(101),d=n(36).parse,h=n(69).getWeChatUser,f=n(27).isWeixin,g=n(82).popUpModal,m=n(28).isEqxWxMini,v=n(639),y=n(660),b=n(637),x=n(632),w=n(633),k=n(635),S=n(662),I=n(663),T=n(664),E=n(666),P=n(667),_=n(668),C=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{advanceStyle:{size:!1}},trigger:{self:!1},sound:!1,link:!1,flexLine:""}),r}return r(t,e),l(t,[{key:"create$context",value:function(){var e=this.compJson,t=h(),n=e.id,i=e.type;return y=d(y,{id:n,type:i}),this.startTime=v.timeFormat(e.baseInfo.startTime),this.endTime=v.timeFormat(e.baseInfo.endTime),this.prizeList=e.prizeInfo.options,this.$gameHtml=c(this.prizeList),this.$mask=$('<div class="bg-mask"></div>'),this.lotteryBox=this.$gameHtml.find(".lottery-container"),this.lotteryBox.css("opacity","0"),this.prizeItemsTpl=v.getPrizeList(this.prizeList),v.getBalanceInfo(this.lotteryBox,this.eqxScene.meta.id,e,t),this.$gameHtml}},{key:"bindAfterRenderEvent",value:function(e,t){var n=this;this.initDom(),this.initLottery(),this.lottery.init("lottery");var i=h(),o=this.eqxScene.bgm,r=this.eqxScene.meta.id,a=this.compJson.activityId;this.$startBtn.on("click",function(e){return e.stopPropagation(),f()||m()?void(n.click||n.startRoll(r,a,i)):void g("该组件仅能在微信中使用。")}),this.silkBag.on("click",function(e){e.stopPropagation(),o&&o.hide(),n.$activityTpl.append(n.$closeBtn),v.getHitList(r,a,i,b,n.$prizeContainer),n.$activityTpl.find(".prize-list").html(n.prizeItemsTpl.join("")),n.$activityTpl.find(".activity-time p").html(n.startTime+" - "+n.endTime),n.editActivityCss("block","none","35px"),n.$activityTpl.show()}),this.$explain.on("click",function(e){e.stopPropagation(),n.editActivityCss("block","none","35px")}),this.$myPrize.on("click",function(e){e.stopPropagation(),n.editActivityCss("none","block","160px")}),this.$closeBtn.on("click",function(e){e.stopPropagation(),n.$mask.find(".mask-container").hide(),o&&o.show()}),this.$againBtn.on("click",function(e){e.stopPropagation(),n.$closeBtn.trigger("click")}),this.$activityTpl.on("click",function(e){e.stopPropagation(),n.$closeBtn.trigger("click")}),this.$winLotteryHtml.on("click",function(e){e.stopPropagation(),n.$closeBtn.trigger("click")}),this.$lostLotteryHtml.on("click",function(e){e.stopPropagation(),n.$closeBtn.trigger("click")}),this.$prizeContainer.on("touchstart touchmove touchend mousedown mouseup mousemove",function(e){e.stopPropagation()})}},{key:"eleShow",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleShow",this).call(this),this.$mask.show(),this.$mask.parent().length||this.$mask.insertBefore(this.$li.parent().parent()),v.showMaskPanel(this.$mask,this.eqxPage)}},{key:"eleHide",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleHide",this).call(this),this.$mask.hide()}},{key:"initDom",value:function(){this.silkBag=this.$li.find("#silkBag"),this.$closeBtn=$('<div class="mask-close"></div>'),this.$activityTpl=$(x),this.$winLotteryHtml=$(w),this.$lostLotteryHtml=$(k),this.$mask.append(this.$lostLotteryHtml),this.$mask.append(this.$winLotteryHtml),this.$mask.append(this.$activityTpl),this.$mask.find(".mask-container").hide(),this.$explain=this.$activityTpl.find(".explain"),this.$myPrize=this.$activityTpl.find(".my-prize"),this.$againBtn=this.$lostLotteryHtml.find(".mask-btn"),this.$prizeContainer=this.$activityTpl.find(".prize-container"),this.$explainContainer=this.$activityTpl.find(".explain-container"),this.$startBtn=this.$gameHtml.find("#start")}},{key:"editActivityCss",value:function(e,t,n){this.$explainContainer.css("display",e),this.$prizeContainer.css("display",t),this.$activityTpl.find(".arrow").css("left",n)}},{key:"initLottery",value:function(){var e=this;this.click=!1,this.prizeData={prizeId:1,prizeName:"",prizeDetail:""},this.lottery={index:-1,count:8,timer:0,speed:100,times:0,cycle:50,prize:0,init:function(t){this.$lottery=e.$gameHtml.find("#"+t),this.count=this.$lottery.find(".prize").length,this.$lottery.find(".prize-"+this.index).addClass("on")},roll:function(){var e=this.$lottery,t=this.index;e.find(".prize-"+t).removeClass("on"),t+=1,t>this.count-1&&(t=0),e.find(".prize-"+t).addClass("on"),this.index=t}}}},{key:"getRandom",value:function(e,t){return Math.floor(e+Math.random()*(t-e+1))}},{key:"getPrizeNum",value:function(e){var t=[0,1,2,7,3,6,5,4],n=this.$gameHtml.find(".prize"),i=n.map(function(e,t){return $(t).find(".prize-text").text()}),o=[];i.each(function(t,n){n===e&&o.push(t)});var r=this.getRandom(0,o.length-1);return t[o[r]]}},{key:"startRoll",value:function(e,t,n){var i=this;this.winJson=null;var o=void 0;o=v.getLottery(e,t,n),o.then(function(e){var t=e.obj;i.winJson=e.obj,i.lottery.prize=i.getPrizeNum(t.prizeName),i.prizeData={prizeId:t.id,prizeName:t.prizeName,prizeDetail:t.detail},i.roll(),i.click=!0})["catch"](function(e){110101===e.code?g("活动还未开始，活动时间为"+i.startTime+"&nbsp;~&nbsp;"+i.endTime):110102===e.code?g("活动已经结束啦，下次早点来哦～"):110112===e.code?g("今日抽奖次数已用完，请明日再来～"):(i.lottery.prize=i.getPrizeNum("谢谢参与"),i.prizeData={prizeId:"",prizeName:"谢谢参与",prizeDetail:"谢谢参与"},i.roll(),i.click=!0)})["finally"](function(){v.getBalanceInfo(i.lotteryBox,e,i.compJson,n)})}},{key:"roll",value:function(){var e=this;this.lottery.times+=1,this.lottery.roll(),this.lottery.times>this.lottery.cycle+10&&this.lottery.prize==this.lottery.index?("谢谢参与"==this.prizeData.prizeName?setTimeout(function(){e.lostLottery()},500):setTimeout(function(){e.winLottery()},500),clearTimeout(this.lottery.timer),this.lottery.speed=100,this.lottery.times=0,this.click=!1):(this.lottery.times<this.lottery.cycle?this.lottery.speed-=10:this.lottery.times>this.lottery.cycle+10&&(0==this.lottery.prize&&7==this.lottery.index||this.lottery.prize==this.lottery.index+1)?this.lottery.speed+=110:this.lottery.speed+=20,this.lottery.speed<40&&(this.lottery.speed=40),this.lottery.timer=setTimeout(this.roll.bind(this),this.lottery.speed))}},{key:"lostLottery",value:function(){this.$lostLotteryHtml.show().css({zIndex:"100"})}},{key:"winLottery",value:function(){this.$winLotteryHtml.show().css({zIndex:"100"}),v.updateWinLotteryTpl(this.winJson,this.$winLotteryHtml),v.sendRedPackets(this.winJson)["catch"](function(){g("红包发送失败！")})}}]),t}(p);e.exports={EqxNineSquare:C,initNineSquare:c}},function(e,t){},function(e,t,n){e.exports='<div class="nine-square-box" id="#{id}" ctype="#{type}"><div class="main-box" id="lottery"><div id="silkBag" class="silk-bag"><img src="'+n(629)+'" alt="活动锦囊"></div><div class="lottery-box"><img class="lottery-bg" src="'+n(661)+'" alt=""><div class="nine-square"><div class="prize prize-0"><img class="prize-icon" src="'+n(662)+'" alt=""><p class="prize-text">谢谢参与</p><div class="prize-mask"></div></div><div class="prize prize-1"><img class="prize-icon" src="'+n(663)+'" alt=""><p class="prize-text">一等奖</p><div class="prize-mask"></div></div><div class="prize prize-2"><img class="prize-icon" src="'+n(662)+'" alt=""><p class="prize-text">谢谢参与</p><div class="prize-mask"></div></div><div class="prize prize-7"><img class="prize-icon" src="'+n(664)+'" alt=""><p class="prize-text">二等奖</p><div class="prize-mask"></div></div><div class="start-button"><a href="javascript:;" id="start"><img src="'+n(665)+'" alt=""></a></div><div class="prize prize-3"><img class="prize-icon" src="'+n(666)+'" alt=""><p class="prize-text">三等奖</p><div class="prize-mask"></div></div><div class="prize prize-6"><img class="prize-icon" src="'+n(662)+'" alt=""><p class="prize-text">谢谢参与</p><div class="prize-mask"></div></div><div class="prize prize-5"><img class="prize-icon" src="'+n(666)+'" alt=""><p class="prize-text">三等奖</p><div class="prize-mask"></div></div><div class="prize prize-4"><img class="prize-icon" src="'+n(662)+'" alt=""><p class="prize-text">谢谢参与</p><div class="prize-mask"></div></div></div></div><div class="lottery-container"><p class="spend-item">今日已抽奖<span>0</span>次</p><p class="surplus-item">您今日还可抽奖<span>10</span>次</p></div></div></div>'},function(e,t,n){e.exports=n.p+"images/lotteryBg-f60ba7.gif"},function(e,t,n){e.exports=n.p+"images/prize0-057c5b.png"},function(e,t,n){e.exports=n.p+"images/prize1-c1faf6.png"},function(e,t,n){e.exports=n.p+"images/prize2-cf91bd.png"},function(e,t,n){e.exports=n.p+"images/startButton-277df3.png"},function(e,t,n){e.exports=n.p+"images/prize3-28b9aa.png"},function(e,t,n){e.exports=n.p+"images/prize4-5db028.png"},function(e,t,n){e.exports=n.p+"images/prize5-17fc23.png"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function f(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:f(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)};n(670);var c=n(101),l=n(671),u=n(36).parse,p=n(25).$loadQRCode,d=n(24),h=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{self:!0,fontFamily:!1,fontColor:!0},link:!1,advanceStyle:{paddingTop:!1,borderRadius:!1}},trigger:{click:!1},flexLine:"ne,se,sw,nw,r"}),r}return r(t,e),a(t,[{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.properties,o=i.address,r=i.logoImg,a=i.img,s=e.css,c=s.width,p=s.height;if(this.$context=$(u(l,{id:t,type:n,content:""})),a&&a.trim()){var h=this.getImgSrc(a,{width:c,height:p});this.generateQrcodeImg(this.$context,h)}else o||(this.compJson.properties.address=o=d.VIEW_HOST+"s/"+this.eqxScene.meta.code),this.generateQrcodeAddress(this.$context,o,r,c);return this.$context}},{key:"updateSize",value:function(e,n){var i=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateSize",this).call(this,e,n),clearTimeout(this._updateTimeOut),this._updateTimeOut=setTimeout(function(){if(i.compJson.properties.img){var e=i.compJson.css,t=e.width,n=e.height,o=i.getImgSrc(i.compJson.properties.img,{width:t,height:n});i.generateQrcodeImg(i.$context,o)}else i.updateQrcodeAddress()},300)}},{key:"generateQrcodeAddress",value:function(e,t,n,i){var o=this;p().then(function(){var r={render:"image",ecLevel:"H",size:i,text:t};if(o.compJson.properties.showLogoImg&&n){var a=d.FILE+n,s=new Image;s.setAttribute("crossOrigin","anonymous"),s.onload=function(){var t=s.height,n=s.width;if(t!==n){var i=document.createElement("canvas"),o=i.height=i.width=100,a=void 0,c=void 0,l=void 0,u=void 0;t>n?(l=o,u=Math.abs(n/t*o),c=0,a=Math.abs((o-u)/2)):(u=o,l=Math.abs(t/n*o),a=0,c=Math.abs((o-l)/2));var p=i.getContext("2d");p.drawImage(s,a,c,u,l);var d=new Image;d.src=i.toDataURL(),d.onload=function(){Object.assign(r,{mode:4,mSize:.25,image:d}),e.qrcode(r),d.onload=null}}else Object.assign(r,{mode:4,mSize:.25,image:s}),e.qrcode(r);s.onload=null},s.src=a}else e.qrcode(r)})}},{key:"generateQrcodeImg",value:function(e,t){var n="<img src="+t+">";e.append(n)}},{key:"updateQrcodeAddress",value:function(){this.$context.empty(),this.compJson.properties.img="";var e=this.compJson,t=e.properties,n=t.address,i=t.logoImg,o=e.css.width;this.generateQrcodeAddress(this.$context,n,i,o)}},{key:"updateQrcodeImg",value:function(e){var t=this.$context;t.empty(),this.generateQrcodeImg(t,e)}}]),t}(c);e.exports=h},function(e,t){},function(e,t){e.exports='<span id="#{id}" ctype="#{type}" class="element eqx-qrcode">#{content}</span>'},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=e.id,n=e.type,i=e.css,o=e.className,r=e.wordArtType,a=e.content,s=void 0===a?"":a;return i.cursor="default",i.minHeight="inherit",i.fontSize&&(i.fontSize=S(i.fontSize)),$(E(P,{id:t,type:n,content:s,className:o,wordArtType:r})).css(i)}function s(e){var t=e[0].style;t.cssText=t.cssText.replace(/(text-shadow[^;]*);/,"$1 !important;")}function c(e){var t=e[0].style;t.cssText+="-webkit-background-clip: text; background-clip: text; color: transparent;"}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=function M(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:M(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)},d=n(673),h=d.textShadowTemplate,f=n(674);n(675);var g=n(676),m=n(677),v=n(678),y=n(679),b=n(680),x=n(681),w=n(101),k=n(166),S=k.addSuffixPx,I=n(165),T=I.addFontStyle,E=n(36).parse,P=n(682),_=n(67).getForbiddenTexts,C=n(683),A=n(66),O=A.perfectStr,q=A.getDangerousStr,L=function(e){function t(e,n){i(this,t),e.content=O(q(e.content));var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),a=[0,1,2,3,7,8].includes(e.properties.wordArtType);return $.extend(!0,r.$ability,{style:{compFont:{self:!0,fontFamily:!0,fontSize:!0,fontColor:a}},trigger:{click:!1},flexLine:"n,s,w,e,r"}),r.types=C,r}return r(t,e),u(t,[{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.sceneId,o=e.content,r=e.css,l=e.properties,u=r.letterSpacing,p=void 0===u?0:u,d=r.fontFamily,h=r.fontSize,f=r.writingMode,g=l.wordArtType,m=l.anim,v=void 0===m?[]:m,y=this.parseStyles(g,l);if(o){o.length>4e3&&(o=o.substr(0,4e3)),o=o.replace(/(eval|script|atob)/g,""),o=o.replace(/\s/g,function(){var e=0;return function(t){return e+=1,e%2?"&nbsp;":t}}());var b=_();b.length>0&&o&&b.forEach(function(e){var t=new RegExp(e);o=o.replace(t,"")})}else o=this.getNameByType(g);var x="";4===g?x="texture":[5,6].includes(g)&&(x="gradient");var w=this.eqxScene.config.mode,k=Object.assign({fontFamily:d,fontSize:h,writingMode:f},y),S=this.$context=a({id:t,type:n,content:o,className:x,css:k,wordArtType:g});return[0,1,2,3,7,8,9].includes(g)&&s(S),[4,5,6].includes(g)&&c(S),T({mode:w,fontFamily:d,sceneId:i,publishTime:this.eqxScene.meta.publishTime}),v[0]&&"typer"===v[0].type&&S.css({opacity:0}),S.css({letterSpacing:parseFloat(p||0)+"em"}),S}},{key:"parseStyles",value:function(e,t){var n=void 0;return[4,5,6].includes(e)?n=this.parseBackgroundStyle(e,t):[0,1,2,3,7,8].includes(e)&&(n=this.parseShadowStyle(e,t)),n}},{key:"parseShadowStyle",value:function(e,t){var n="",i=t.angle,o=t.size,r=t.shadow,a=t.threeDs,s=t.stroke,c=t.shake;if([2].includes(e)&&(n+=this.parseStroke(s)),[7].includes(e)){c.props=t,this.getValidVal("shake",c),delete c.props;var l=c.size,u=c.color,p=c.colorOpposite;a=[];var d=(i+180)%360;a.push({size:l,angle:i,color:u},{size:l,angle:d,color:p})}[1,2,3,7,8].includes(e)&&(8===e&&(this.getValidVal("engraving",t),a.forEach(function(e){e.size=o})),a.props=t,1!==e&&2!==e||this.getValidVal("stereoscopic",a),3===e&&this.getValidVal("mulitStereo",a),n+=this.parseThreeD(i,a),delete a.props),[0,1,2,3].includes(e)&&(n+=this.parseShadow(r));var h={textShadow:""+n.slice(0,n.length-1)};return h}},{key:"parseBackgroundStyle",value:function(e,t){var n=t.gradient,i=t.texture,o=void 0;if(4===e){var r=void 0;if(""===i.imgSrc)if(i["default"])switch(i["default"]){case"texture1":r=g;break;case"texture2":r=m;break;case"texture3":r=v;break;case"texture4":r=y;break;case"texture5":r=b;break;case"texture6":r=x;break;default:r=g}else r=g;else r=this.getImgSrc(i.imgSrc);o={backgroundImage:"url("+r+")"}}else{this.getValidVal("gradient",n);var a=n.angle,s=n.colors,c=n.type,l="";l=1===c?s[0]+" 0%, "+s[1]+" 100%":s[0]+" 0%, "+s[0]+" 50%, "+s[1]+" 50%, "+s[1]+" 100%",o={backgroundImage:"linear-gradient("+a+"deg, "+l+")"}}return o}},{key:"parseShadow",value:function(e){this.getValidVal("shadow",e);var t=e.h,n=e.v,i=e.blur,o=e.color;return t+"px "+n+"px "+i+"em "+o+","}},{key:"parseStroke",value:function(e){this.getValidVal("stroke",e);var t=e.size,n=e.color;return h({size:t,color:n})}},{key:"parseThreeD",value:function(e,t){var n="",i=1,o=1,r=-1,a=-1;return t.forEach(function(t){var s=t.size,c=t.angle,l=t.color,u=void 0===c?e:c;if(u=Math.round(u),u-=u%45,s=Math.round(s),s<0&&(s=0),0===u)for(;s--;)n+="0px "+a+"px 0 "+l+",",a--;else if(45===u)for(;s--;)n+=i+"px "+a+"px 0 "+l+",",i++,a--;else if(90===u)for(;s--;)n+=i+"px 0px 0 "+l+",",i++;else if(135===u)for(;s--;)n+=i+"px "+o+"px 0 "+l+",",i++,o++;else if(180===u)for(;s--;)n+="0px "+o+"px 0 "+l+",",o++;else if(225===u)for(;s--;)n+=r+"px "+o+"px 0 "+l+",",o++,r--;else if(270===u)for(;s--;)n+=r+"px 0px 0 "+l+",",r--;else if(315===u)for(;s--;)n+=r+"px "+a+"px 0 "+l+",",r--,a--}),n}},{key:"getValidVal",value:function(e,t){function n(e,t){for(var i in e)"threeD"===i&&t.threeDs?t.threeDs.forEach(function(t){t.size>e.threeD.size.max&&(t.size=e.threeD.size.max),t.size<e.threeD.size.min&&(t.size=e.threeD.size.min)}):e[i].max?(t[i]>e[i].max&&(t[i]=e[i].max),t[i]<e[i].min&&(t[i]=e[i].min)):(t[i]&&t[i].max||(t=t[i]),n(e[i],t))}var i=f[e];n(i,t)}},{key:"getNameByType",value:function(e){var t=C.find(function(t){return e===t.type});return t?t.name:void console.error("艺术字类型不存在")}},{key:"getTypeByName",value:function(e){var t=C.find(function(t){return e===t.name});return t?t.type:void console.error("艺术字名称不存在")}},{key:"updateStyle",value:function(){var e=this.compJson,t=e.properties,n=t.wordArtType,i=this.parseStyles(n,t);this.$context.css(i),s(this.$context),[4,5,6].includes(n)&&c(this.$context),this.autoAdjustSize()}},{key:"updateTextureStyle",value:function(){var e=this.compJson.properties.texture.imgSrc,t=this.getImgSrc(e),n={backgroundImage:"url("+t+")"};this.$context.css(n),c(this.$context),this.autoAdjustSize()}},{key:"getRealContent",value:function(){var e=this.$context[0].innerText;return e}},{key:"updateContent",value:function(e){var t=this.$context[0];t.innerHTML=e}},{key:"entryEditMode",value:function(){if(!this.getEditState()){var e=this.compJson.properties.wordArtType,t=this.$context,n=document.createElement("div");n.innerText=this.getRealContent(),n.className="wa-editor",t.empty(),[4,5,6].includes(e)&&(n.style.backgroundImage=t.css("backgroundImage")),t[0].append(n),n.setAttribute("contenteditable","true"),n.style.outline="none",this.textEditor=n}}},{key:"exitEditMode",value:function(){if(this.getEditState()){var e=this.compJson.properties.wordArtType,t=this.textEditor;t.setAttribute("contenteditable","false"),[4,5,6].includes(e)&&(t.style.background="transparent"),this.$context[0].removeChild(t);var n=this.textEditor.innerHTML;this.textEditor=null,this.updateContent(n)}}},{key:"getEditState",value:function(){return!!this.textEditor}},{key:"getTextEditor",value:function(){return this.textEditor}},{key:"getTextEditorContent",value:function(){return this.getTextEditor().innerText}},{key:"calcExtraSize",value:function(){var e=this.compJson.properties,t=e.wordArtType,n=0,i=0,o=0,r=0;if([0,1,2,3].includes(t)&&(o=e.shadow.h,r=e.shadow.v),[1,2,3].includes(t)){var a=0,s=e.angle;e.threeDs.forEach(function(e){a+=e.size}),s>270?(n-=a,i-=a):s>180?(n-=a,i+=a):s>90?(n+=a,i+=a):(n+=a,i-=a)}return o=Math.abs(o),r=Math.abs(r),n=Math.abs(n),i=Math.abs(i),[2].includes(t)&&(n+=e.stroke.size,i+=e.stroke.size),n=Math.max(n,o),i=Math.max(i,r),{offsetX:n,offsetY:i}}},{key:"get$contentSize",value:function(){var e=void 0;e=this.getEditState()?$(this.getTextEditor()):this.$content.find("span");var t=e.width(),n=e.height();return{width:t,height:n}}},{key:"update$li",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.calcExtraSize(),i=n.offsetY,o=e.height;["number","string"].includes("undefined"==typeof o?"undefined":l(o))&&(e.height=parseInt(o)+i+"px"),p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update$li",this).call(this,e)}}]),t}(w);e.exports=L},function(e,t){"use strict";var n=function(e,t,n){if(!(e<1)){for(var i=[],o=void 0,r=void 0;e>0;){for(o=e+t,r=-e+n;o>-e;)i.push([o,r]),o--;for(o=e+t,r=e+n;r>-e;)i.push([o,r]),r--;for(o=e+t,r=e+n;o>-e;)i.push([o,r]),o--;for(o=-e+t,r=e+n;r>-e;)i.push([o,r]),r--;e-=2}return i}},i=function(e){var t=e.size,i=e.x,o=void 0===i?0:i,r=e.y,a=void 0===r?0:r,s=e.color,c=void 0===s?"blue":s;if(t<=0)return"";t=t<0?0:t;var l=n(t,o,a),u="";return l.forEach(function(e){u+=e[0]+"px "+e[1]+"px 0 "+c+","}),u};e.exports={textShadowTemplate:i}},function(e,t){"use strict";e.exports={shadow:{h:{min:0,max:10,step:1},v:{min:0,max:10,step:1},blur:{min:0,max:1,step:.1}},stereoscopic:{props:{angle:{min:0,max:359,step:1},threeD:{size:{min:1,max:10,step:1}}}},mulitStereo:{props:{angle:{min:0,max:359,step:1},threeD:{size:{min:1,max:5,step:1}}}},stroke:{size:{min:1,max:8,step:1}},shake:{size:{min:1,max:10,step:1},props:{angle:{min:0,max:359,step:1}}},engraving:{size:{min:1,max:5,step:1}},gradient:{angle:{min:0,max:359,step:1}}}},function(e,t){},function(e,t,n){e.exports=n.p+"images/texture1-e6ca58.png"},function(e,t,n){e.exports=n.p+"images/texture2-c15b21.jpg"},function(e,t,n){e.exports=n.p+"images/texture3-e9bdb3.jpg"},function(e,t,n){e.exports=n.p+"images/texture4-11c7fa.jpg"},function(e,t,n){e.exports=n.p+"images/texture5-833f32.jpg"},function(e,t,n){e.exports=n.p+"images/texture6-160e92.jpg"},function(e,t){e.exports='<div id="#{id}" ctype="#{type}" watype="#{wordArtType}" class="element common word-art #{className}" style="-ms-word-wrap: break-word;word-wrap: break-word">#{content}</div>'},function(e,t){"use strict";var n=[{type:0,name:"阴影文字"},{type:1,name:"立体文字"},{type:2,name:"描边立体文字"},{type:3,name:"多重立体文字"},{type:4,name:"贴图文字"},{type:5,name:"渐变文字"},{type:6,name:"金属文字"},{type:7,name:"颤抖文字"},{type:8,name:"镌刻文字"}];e.exports=n},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){return $(h(e,t))}function c(e){var t=e.fontFamily,n=e.textContent,i=e.mode,o=e.compId;"view"===i&&window.scene&&k({fontFamily:t,textContent:n,compId:o})}var l=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(c){o=!0,r=c}finally{try{!i&&s["return"]&&s["return"]()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=function I(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:I(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)};n(685);var d=n(101),h=n(36).parse,f=n(686),g=n(687),m=n(688),v=n(104),y=n(24),b=n(689),x=n(27).isAndroid,w=n(165),k=w.getFontFamilyStyle,S=function(e){function t(e,n){o(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,a.$ability,{style:{compFont:{fontFamily:!0}},trigger:{mediaCanplay:!0,mediaEnded:!0,mediaPlaying:!0}}),a.play=a.play.bind(a),a.timeUpdate=a.timeUpdate.bind(a),a.lrcList=[].concat(i(a.compJson.properties.audio.lrc)),a.first=!0,a.scaleList=[12,6,4,3,2.4,2,1.71,1.5,1.33,1.2,1.09,1],a}return a(t,e),u(t,[{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=e.properties,o=e.css.fontFamily,r=i.bgImg,a=r.img,u=r.opacity;void 0===i.audio.lrcStyle&&(i.audio.lrcStyle=1);var p=void 0,d=void 0,h=void 0;a.src?(p=this.getImgSrc(a.src),h="block"):(p="",h="none"),d=u;var v=f.split("<hr>"),w=l(v,5),k=w[0],S=w[1],I=w[2],T=w[3],$=w[4],E=this.isView="view"===this.eqxScene.config.mode,P=void 0,_="block";E?P=k.replace("<slot-mode>",T):(P=k.replace("<slot-mode>",$),i.audio.lrc.length&&(_="none"));var C=void 0;i.sourceType===b.AUDIO||void 0===i.sourceType&&p?P=P.replace("<slot-bg>",S):i.sourceType===b.VIDEO?(P=P.replace("<slot-bg>",I),C=y.VIDEO+i.audio.url):(this.bgVideoTpl=I,this.bgImgTpl=S,P=P.replace("<slot-bg>",""));var A=void 0;A=E?["lrc-position-base-style1","lrc-position-base-style2","lrc-position-base-style3","lrc-position-base-style4"][i.audio.lrcStyle-1]:["speech-line-text-set-style1","speech-line-text-set-style2","speech-line-text-set-style3","speech-line-text-set-style4"][i.audio.lrcStyle-1];var O=this.$context=s(P,{id:t,type:n,playCover:g,bgImgOpacity:d,bgDisplay:h,bgImgSrc:p,noLrc:_,bgVideoSrc:C,fontFamily:o,lrcBaseClass:A});x()||(O.find("video").attr("playsinline","true"),O.find("video").attr("crossOrigin","anonymous"),O.find("video").attr("webkit-playsinline","true")),!E&&i.audio.lrc.length&&(this.$textDom=O.find(".speech-line-text-set"),this.showText(i.audio.lrc[0])),this.$animDom=O.find(".speech-lrc-content"),this.$animDomSave=this.$animDom.clone(),this.$posBase=O.find(".lrc-position-base"),
E&&(this.speechAgent=new m(this,this.eqxScene.soundManager),this.wordsShow=this[["wordsShowStyle1","wordsShowStyle2","wordsShowStyle3","wordsShowStyle4"][i.audio.lrcStyle-1]],i.audio.lrcStyle>1&&this.$posBase.empty());var q=this.lrcList,L="";q.forEach(function(e){var t=e.text;L+=t});var M=this.eqxScene.config.mode;return c({mode:M,fontFamily:o,compId:this.id,textContent:L}),O}},{key:"sourceTypeSetting",value:function(e){e===b.VIDEO?this.$context.find(".speech-size-control").prepend(this.bgVideoTpl):this.$context.find(".speech-size-control").prepend(this.bgImgTpl)}},{key:"play",value:function(){this.$animDom.css("display","flex"),this.$context.find(".speech-play").hide(),this.first&&(this._currentP=this.$posBase.find(".speech-lrc-p")[0],this._currentLine=this.$posBase.find(".speech-lrc-line")[0])}},{key:"pause",value:function(){this.$context.find(".speech-play").show()}},{key:"reset",value:function(){var e=this.$animDomSave.clone();this.$animDom.replaceWith(e),this.$animDom=e,this.$posBase=this.$context.find(".lrc-position-base"),this.first=!0,this.lrcList=[].concat(i(this.compJson.properties.audio.lrc))}},{key:"timeUpdate",value:function(e){if(this.lrcList.length){var t=this.lrcList[0];e>=t.time&&(this.wordsShow(t),this.lrcList.shift())}}},{key:"wordsShowStyle1",value:function(e){var t=e.text,n=e.color,i=e.animRule,o=i.entry,r=i.Presize,a=i.Protate,s=i.Lrotate,c=this._currentLine,l=this._currentP,u=this.$posBase[0];this.stageContentPre({currentLine:c,text:t,color:n}),this.stageShow({currentLine:c,currentP:l,textLen:t.length,Protate:a,Presize:r}),this.stageWrapperPre({posBase:u,Lrotate:s,entry:o})}},{key:"stageContentPre",value:function(e){var t=e.currentLine,n=e.text,i=e.color;t.lastElementChild.innerText=n,t.style.color=i}},{key:"stageShow",value:function(e){var t=e.currentLine,n=e.currentP,i=e.textLen,o=e.Protate,r=e.Presize,a=4,s=this.scaleList[i-1];if(this.first)return this.first=!1,t.className="speech-lrc-line",t.style.height=16*s+a+"px",t.lastElementChild.style.transform="scale("+s+")",!1;if("n"!==o){var c=this._rotateP,l=this,u=function d(){c.removeEventListener("transitionend",d),c.removeEventListener("webkitTransitionend",d),l._removeP&&l._removeP.parentElement.removeChild(l._removeP),l._removeP=c};if(c.addEventListener("transitionend",u),c.addEventListener("webkitTransitionend",u),"l"===o)c.classList.add("rotate-left2"),c.style.marginLeft="-2px";else{c.classList.add("rotate-right2");var p=192.59/s*(s-1);t.lastElementChild.style.marginLeft=p+"px"}}n.firstElementChild.style.transform="scale("+r+")",t.classList.add("zoom-entry"),s*=1/r,t.style.height=16*s+a+"px",t.lastElementChild.classList.add("zoom-entry"),t.lastElementChild.style.transform="scale("+s+")"}},{key:"stageWrapperPre",value:function(e){function t(){d.removeEventListener("transitionend",t),d.removeEventListener("webkitTransitionend",t),r.insertBefore(h._rotateP,s)}var n=e.posBase,i=e.Lrotate,o=e.entry,r=document.createElement("div"),a="speech-lrc-line",s=document.createElement("div"),c="speech-lrc-line-visual";r.appendChild(s);var l=!1;if("n"!==i){this._rotateP=this._currentP,l=!0;var u=document.createElement("div");u.className="speech-lrc-p";var p=document.createElement("div");p.className="speech-lrc-p-visual",u.appendChild(p),this._currentP=u,n.appendChild(u),c+="r"===i?" rotate-right":" rotate-left",a+=" zoom-rotate"}else a+="l"===o?" zoom-left":" zoom-right";r.className=a,s.className=c,this._currentP.firstElementChild.appendChild(r);var d=this._currentLine;this._currentLine=r;var h=this;l&&this._rotateP&&(d.addEventListener("transitionend",t),d.addEventListener("webkitTransitionend",t))}},{key:"wordsShowStyle2",value:function(e){var t=e.text,n=e.color,i=t.length<6?"26px":"18px";this.$posBase.text(t).css({color:n,fontSize:i})}},{key:"wordsShowStyle3",value:function(e){var t=e.text,n=e.color;this.$posBase.text(t).css({color:n})}},{key:"wordsShowStyle4",value:function(e){var t=e.text,n=e.color,i=e.animRule.pos,o=i.x,r=i.y,a=t.length<6?"26px":"18px",s=parseInt(this.$context.height()*r/6)+4;this.$posBase.text(t).css({color:n,top:s,fontSize:a});var c=parseInt(this.compJson.css.width),l=parseInt(a)*t.length;if(c+8>l){var u=parseInt(((c-l)/3+4)*o)+4;this.$posBase.css({left:u,width:"auto"})}}},{key:"eleShow",value:function(){p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleShow",this).call(this),this.isView&&this.speechAgent.startPlay()}},{key:"eleHide",value:function(){p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleHide",this).call(this),this.isView&&(this.speechAgent&&this.speechAgent.update(new v("stop")),this.reset())}},{key:"showText",value:function(e){var t=e.text,n=e.color,i=e.animRule;this.$textDom||this.hideNolrc();var o=this.compJson.properties.audio.lrcStyle;if(this.$textDom.text(t).css({color:n||"#FFFFFF",left:"auto"}),1===o){var r=t.length,a=this.scaleList[r-1];this.$textDom.css({transform:"scale("+a+")",top:0,width:"100%",fontSize:"16px"})}else if(2===o){var s=t.length<6?"26px":"18px";this.$textDom.css({top:"40%",fontSize:s,width:"100%"})}else if(3===o)this.$textDom.css({top:"10%",width:"20px",left:"10%"});else if(4===o){var c=t.length<6?"26px":"18px";this.$textDom.css({top:parseInt(this.$context.height()*i.pos.y/6)+10,fontSize:c});var l=parseInt(this.compJson.css.width),u=parseInt(c)*t.length;if(l+8>u){var p=parseInt((l-u)/3*i.pos.x)+4;this.$textDom.css({left:p,width:"auto"})}}}},{key:"hideNolrc",value:function(){this.$textDom=this.$context.find(".speech-line-text-set"),this.$context.find(".speech-no-lrc").hide()}},{key:"updateBgImg",value:function(){var e=this.compJson.properties.bgImg,t=e.img,n=e.opacity,i=this.$context.find(".speech-bg-img")[0];if(i.style.opacity=n,t.src){var o=this.getImgSrc(t.src);i.style.backgroundImage="url("+o+")",i.style.display="block"}else i.style.display="none"}},{key:"updateBgVideo",value:function(){var e=y.VIDEO+this.compJson.properties.audio.url,t=this.$context.find("video");t.attr("src",e)}},{key:"switchLrcStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.$textDom;this.$textDom.removeClass("speech-line-text-set-style1"),this.$textDom.removeClass("speech-line-text-set-style2"),this.$textDom.removeClass("speech-line-text-set-style3"),this.$textDom.removeClass("speech-line-text-set-style4");var n=["speech-line-text-set-style1","speech-line-text-set-style2","speech-line-text-set-style3","speech-line-text-set-style4"][e-1];if(t.addClass(n),1===e){var i=t.text().length,o=this.scaleList[i-1];t.css("transform","scale("+o+")")}else t.css("transform","scale(1)")}}]),t}(d);e.exports=S},function(e,t){},function(e,t){e.exports='<div id="#{id}" ctype="#{type}" class="speech-rcg" style="font-family: #{fontFamily}"><div class="speech-size-control"><slot-bg><slot-mode></slot-mode></slot-bg></div></div><hr><div class="speech-bg-img" style="display: #{bgDisplay}; background-image: url(#{bgImgSrc}); opacity: #{bgImgOpacity}"></div><hr><div class="speech-bg-video"><video><source type="video/mp4" src="#{bgVideoSrc}"></video></div><hr><div class="speech-lrc-content"><div class="lrc-position-base #{lrcBaseClass}"><div class="speech-lrc-p"><div class="speech-lrc-p-visual"><div class="speech-lrc-line zoom-center"><div class="speech-lrc-line-visual"></div></div></div></div></div></div><div class="speech-play"><div class="speech-play-icon" style="background-image: url(#{playCover})"></div></div><hr><div class="speech-add-view"><div class="speech-add-editor"><div class="speech-no-lrc" style="display: #{noLrc}"><div class="speech-add-icon"><span class="eqf-recognition"></span></div><div class="speech-add-desc">请添加音/视频</div></div><div class="speech-line-text-set #{lrcBaseClass}"></div></div></div>'},function(e,t,n){e.exports=n.p+"images/play-a4cd52.svg"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(106),c=n(69).getWxJSSDK,l=n(24),u=n(27).isWeixin,p=n(26).resolveUrl,d=n(689),h=n(690),f=h.getMusic,g=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.manager=n,r.sourceType=r.master.compJson.properties.sourceType,r.soundJson=r.master.compJson.properties.audio,r.type=7,r.init(),u()&&(r.wxJssdk=c()),r}return r(t,e),a(t,[{key:"init",value:function(){var e=this;this.sourceType===d.VIDEO?(this.audio=this.master.$context.find("video")[0],this.audio.src=p(l.VIDEO,this.soundJson.url)):(this.audio=new window.Audio,this.audio.src=p(l.FILE,this.soundJson.url)),this.audio.load(),this.addEventListeners(),this.register(),$(this.audio).on("error",function(){e.soundJson.url&&e.soundJson.url.indexOf("tingmall.com")!==-1&&f(e.soundJson.id).then(function(t){e.audio.src=t.url||t.src})})}},{key:"update",value:function(e){switch(e.type){case"stop":this.stopPlay();break;case"pause":this.pausePlay();break;case"down":this.audio.volume=.1;break;case"restore":this.audio.volume=1;break;case"reset":this.audio.currentTime=0;break;default:console.warn("EqxSpeechAgent: 无效的消息"+e.type)}}},{key:"addEventListeners",value:function(){var e=this;this.audio.addEventListener("timeupdate",function(){e.audio.currentTime>0&&(e.master.timeUpdate(e.audio.currentTime),e.audio.ended&&(e.master.reset(),e.master.pause()))})}},{key:"startPlay",value:function(e){function t(e){e.paused&&(4===e.readyState?e.paused&&(e.play(),n.master.play(),n.manager.onPlay(n)):(e.load(),$(e).on("canplay",function(){$(n.audio).off("canplay"),e.play(),n.master.play(),n.manager.onPlay(n)})))}var n=this,i=this.audio;i.paused&&this.audio.paused&&(u()&&!e?n.haveRequestWx?t(i):this.wxJssdk.then(function(){wx.checkJsApi({jsApiList:["checkJsApi"],success:function(){n.haveRequestWx=!0,t(i)}})}):t(i))}},{key:"pausePlay",value:function(){this.audio.paused||(this.audio.pause(),this.master.pause(),this.manager.onEnd(this))}},{key:"stopPlay",value:function(){this.pausePlay(),this.master.reset(),this.audio.currentTime=0,this.manager.onEnd(this)}}]),t}(s);e.exports=g},function(e,t){"use strict";var n={NONE:"",AUDIO:"audio",VIDEO:"video"};e.exports=n},function(e,t,n){"use strict";function i(e){var t="material/tmusic/music/url";return a({type:"GET",url:r.MATERIAL_API+t,data:{itemId:e}}).then(function(e){return 200===e.code?e.obj.response.docs:Promise.reject("No Data!")})}function o(e){var t={report_type:"800100",data:{from_source:0,bitrate:"MP3-128K-FTD",is_online:1,device_type:1,entrance:1,is_share:0,play_count:1,ip:"-",song_from:0,action_1:0,city_code:"-"}};t.data=Object.assign(t.data,e);var n="/material/tmusic/report";return a({type:"POST",url:r.MATERIAL_API+n,data:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(function(e){return 200===e.code?e.obj.response.docs:Promise.reject(e)})}var r=n(24),a=n(23).$ajax;e.exports={getMusic:i,reportTMusic:o}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function x(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:x(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)},c=n(692),l=c.MAGICCUBE,u=c.CAROUSEL,p=c.PANORAMA,d=c.ONETAKE,h=n(693),f=n(695),g=n(696),m=n(697);n(698);var v=n(101),y=n(699),b=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compFont:{fontFamily:!0}},link:!1,trigger:{self:!1,mediaCanplay:!0,mediaEnded:!0,mediaPlaying:!0}}),r}return r(t,e),a(t,[{key:"create$context",value:function(){var e=this.getController();return this.$context=$(y).append(e.createComponent(this)),this.$context}},{key:"getController",value:function(){var e=this.compJson,t=e.properties.materialType;switch(t){case l:return h;case p:return m;case u:return g;case d:return f;default:return null}}},{key:"updateMagicCube",value:function(e){var t=e.width;if(!Number.isNaN(t)){var n=this.getController();n.render(this,e)}}},{key:"changeType",value:function(e){var t=e.type,n=e.rotateRate,i=e.boxShadow,o=this.compJson;o.properties.materialType=t,o.properties.rotateRate=n,o.properties.boxShadow=i,this.$context.empty();var r=this.getController();this.$context.append(r.createComponent(this)),this.updateMagicCube(o.css)}},{key:"update$li",value:function(e){var n=e.width;Number.isNaN(n)||this.updateMagicCube(e),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update$li",this).call(this,e)}},{key:"changeMaterial",value:function(){var e=this,t=this.compJson,n=this.getController(),i=t.properties.materialItem,o=i.map(function(t){return e.getImgSrc(t)});n.changeMaterial(this.$context,o)}},{key:"updateRotateRate",value:function(e){var t=this.compJson,n=this.getController();n.updateCubeAnimation(this.$context,t,e)}},{key:"updateSpaceBetween",value:function(e){var t=this.compJson;t.properties.spaceBetween=e;var n=this.getController();n.updateSpaceBetween&&n.updateSpaceBetween(this.$context,t,e)}},{key:"updateBoxShadow",value:function(){var e=this.getController();e.updateBoxShadow&&e.updateBoxShadow(this.$context,this.compJson)}},{key:"calcContainerWidth",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;return Math.sin(2*Math.PI/360*45)*e-t}},{key:"bindAfterRenderEvent",value:function(){var e=this.getController();e.initTouchEvent&&e.initTouchEvent(this)}}]),t}(v);e.exports=b},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="magiccube",i="carousel",o="panorama",r="onetake";t.MAGICCUBE=n,t.CAROUSEL=i,t.PANORAMA=o,t.ONETAKE=r},function(e,t,n){"use strict";var i=n(694),o={startClientX:0,startClientY:0,currClientX:0,currClientY:0,startTimeStamp:0,maxRotateRate:110,moveDirection:1,faceClassMap:{1:"magic-cube__container__cube__face-front",2:"magic-cube__container__cube__face-back",3:"magic-cube__container__cube__face-left",4:"magic-cube__container__cube__face-right",5:"magic-cube__container__cube__face-top",6:"magic-cube__container__cube__face-bottom"},render:function(e,t){if(this.$context=e.$context,this.css=t,t.width){var n=this.calcWidth(t.width);this.cubeCss={width:n+"px",height:n+"px",marginTop:"-"+n/2+"px",marginLeft:"-"+n/2+"px",translateZ:n/2+"px"},this.initCubeAnimation(this.$context,e.compJson),this.updateContainer(),this.updateFaceFront(),this.updateFaceBack(),this.updateFaceLeft(),this.updateFaceRight(),this.updateFaceTop(),this.updateFaceBottom(),this.updateBoxShadow(this.$context,e.compJson)}},containerTpl:function(){return $('\n            <div class="magic-cube__container">\n                <div class="magic-cube__container__cube">\n                </div>\n            </div>\n        ')},faceTpl:function(){return $('\n            <div class="magic-cube__container__cube__face"></div>\n        ')},createFaceFront:function(e,t){var n={transform:"translateZ("+e/2+"px)"};return this.createFace(t,n,1)},createFaceRight:function(e,t){var n={transform:"rotateY(90deg) translateZ("+e/2+"px)"};return this.createFace(t,n,2)},createFaceBack:function(e,t){var n={transform:"rotateY(180deg) translateZ("+e/2+"px)"};return this.createFace(t,n,3)},createFaceLeft:function(e,t){var n={transform:"rotateY(-90deg) translateZ("+e/2+"px)"};return this.createFace(t,n,4)},createFaceTop:function(e,t){var n={transform:"rotateX(90deg) translateZ("+e/2+"px)"};return this.createFace(t,n,5)},createFaceBottom:function(e,t){var n={transform:"rotateX(-90deg) translateZ("+e/2+"px)"};return this.createFace(t,n,6)},createFace:function(e,t,n){var o=this.faceTpl();o.addClass(this.faceClassMap[n]),o.css(t);var r=$('<img src=""/>'),a=e.length,s=e[n%a]||i;return r.attr("src",s),o.append(r),o},createFaces:function(e,t){var n=$("<div/>");return n.append(this.createFaceFront(e,t)),n.append(this.createFaceRight(e,t)),n.append(this.createFaceBack(e,t)),n.append(this.createFaceLeft(e,t)),n.append(this.createFaceTop(e,t)),n.append(this.createFaceBottom(e,t)),n},calcWidth:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;return Math.sin(2*Math.PI/360*45)*e-t},createComponent:function(e){var t=e.compJson,n=t.css.width,i=this.calcWidth(n,16),o=this.containerTpl(),r=o.find(".magic-cube__container__cube");r.css({width:i+"px",height:i+"px",marginTop:"-"+i/2+"px",marginLeft:"-"+i/2+"px"});var a=t.properties.materialItem,s=a.map(function(t){return e.getImgSrc(t)}),c=this.createFaces(i,s);return o.find(".magic-cube__container__cube").append(c),this.initCubeAnimation(o,t),this.updateBoxShadow(o,t),o},initCubeAnimation:function(e,t){var n=t.properties.rotateRate||50;this.updateCubeAnimation(e,t,n)},updateBoxShadow:function(e,t){var n=e.find(".magic-cube__container__cube__face"),i=t.properties,o=i.boxShadow,r=void 0===o?{css:{}}:o,a=r.used;a&&r.css?n.css({boxShadow:"1px 3px 12px "+r.css.color}):n.css({boxShadow:""})},toggleCubeRotate:function(e,t,n){var i=t.properties.rotateRate,o=e.find(".magic-cube__container__cube"),r="magicCubeRotate "+(this.maxRotateRate-i)+"s linear infinite",a={};o[0].style.animation||(a.animation=r),n?(a["animation-play-state"]="paused",a["-webkit-animation-play-state"]="paused"):(a["animation-play-state"]="running",a["-webkit-animation-play-state"]="running"),o.css(a)},removeAnimation:function(e){var t=e.find(".magic-cube__container__cube");t.css({animation:""})},updateCubeAnimation:function(e,t,n){var i=e.find(".magic-cube__container__cube"),o=Number(n),r=0===o?o:this.maxRotateRate-n,a="";r&&(a="magicCubeRotate "+r+"s linear infinite"),t.properties.rotateRate=n,i.css({animation:a})},updateContainer:function(){var e=this.$context.find(".magic-cube__container__cube");e.css({width:""+this.cubeCss.width,height:""+this.cubeCss.width,marginTop:""+this.cubeCss.marginTop,marginLeft:""+this.cubeCss.marginLeft})},updateFaceFront:function(){var e=this.$context.find(".magic-cube__container__cube__face-front");e.css({transform:"translateZ("+this.cubeCss.translateZ+")"})},updateFaceBack:function(){var e=this.$context.find(".magic-cube__container__cube__face-back");e.css({transform:"rotateY(180deg) translateZ("+this.cubeCss.translateZ+")"})},updateFaceLeft:function(){var e=this.$context.find(".magic-cube__container__cube__face-left");e.css({transform:"rotateY(-90deg) translateZ("+this.cubeCss.translateZ+")"})},updateFaceRight:function(){var e=this.$context.find(".magic-cube__container__cube__face-right");e.css({transform:"rotateY(90deg) translateZ("+this.cubeCss.translateZ+")"})},updateFaceTop:function(){var e=this.$context.find(".magic-cube__container__cube__face-top");e.css({transform:"rotateX(90deg) translateZ("+this.cubeCss.translateZ+")"})},updateFaceBottom:function(){var e=this.$context.find(".magic-cube__container__cube__face-bottom");e.css({transform:"rotateX(-90deg) translateZ("+this.cubeCss.translateZ+")"})},changeMaterial:function(e,t){for(var n=e.find(".magic-cube__container__cube__face").find("img"),o=t.length,r=0;r<n.length;r++)$(n[r]).attr("src",t[r%o]||i)},initTouchEvent:function(e){function t(e){if(e.clientX)return e;var t=e.originalEvent.targetTouches;return t&&t.length>0?t[0]:{}}function n(e){var n=e.timeStamp-y;n>150&&(s.removeAnimation(a),s.pause=!0),l=t(e).clientX,u=t(e).clientY,h=l-p,f=u-d,v+=h,m-=f,c.css({transform:"rotateX("+m+"deg) rotateY("+v+"deg)"}),p=t(e).clientX,d=t(e).clientY}function i(t){c.off("touchmove mousemove",n),y=t.timeStamp-y,y<150?(s.pause=b,c.off("touchend mouseup",i),$(document).off("touchend mouseup",i),s.pause?(s.toggleCubeRotate(a,e.compJson,!1),s.pause=!1):(s.toggleCubeRotate(a,e.compJson,!0),s.pause=!0)):o()}function o(){g=setTimeout(function(){return h*=.9,f*=.9,Math.abs(h)<.1&&Math.abs(f)<.1?(c.off("touchend mouseup",i),$(document).off("touchend mouseup",i),void clearTimeout(g)):(v+=h,m-=f,c.css({transform:"rotateX("+m+"deg) rotateY("+v+"deg)"}),void o())},16)}var r=this,a=e.$context,s=this,c=a.find(".magic-cube__container__cube"),l=void 0,u=void 0,p=void 0,d=void 0,h=void 0,f=void 0,g=null,m=-10,v=0,y=0,b=!1;c.on("touchstart mousedown",function(o){clearTimeout(g),b=s.pause,s.toggleCubeRotate(a,e.compJson,!0),s.pause=!0,o.stopPropagation(),o.preventDefault(),r.startClientX=t(o).clientX,r.startClientY=t(o).clientY,p=t(o).clientX,d=t(o).clientY,y=o.timeStamp,c.on("touchmove mousemove",n),c.on("touchend mouseup",i),$(document).on("touchend mouseup",i)})}};e.exports=o},function(e,t,n){e.exports=n.p+"images/face-1fccaf.png"},function(e,t,n){"use strict";var i=n(694),o={faces:{},initFaceCount:6,originTranslateZ:-1500,spaceBetween:300,maxRotateRate:100,currRate:50,render:function(e,t){this.$context=e.$context,this.css=t,this.updateContainer(),this.updateBoxShadow(this.$context,e.compJson)},updateSpaceBetween:function(e,t,n){this.spaceBetween=n,this.originTranslateZ=5*-this.spaceBetween,this.initOneTake(t)},updateContainer:function(){var e=this.$context.find(".onetake__container"),t=this.$context.find(".onetake__container__sceen"),n=this.$context.find(".onetake__container__sceen__face");e.css({width:this.css.width,height:this.css.height}),t.css({width:this.css.width,height:this.css.width}),n.css({width:this.css.width,height:this.css.width})},initOneTake:function(e){for(var t=this.faces[e.id],n=0;n<t.length;n++){var i=t[n],o=this.originTranslateZ+n*this.spaceBetween;i.translateZ=o,i.srcTrans=this.originTranslateZ,this.initTrans(i.id,e)}},handleTrans:function(e,t,n){var i=this,o=$(".onetake__container");requestAnimationFrame(function(){var r=i.faces[n.id],a=r.find(function(e){return e.id===t});return a.translateZ=e,a.translateZ>i.spaceBetween?(a.translateZ=a.srcTrans,void o.find("#"+t).css({transform:"translateZ("+a.translateZ+"px)"})):void o.find("#"+t).css({transform:"translateZ("+a.translateZ+"px)"})})},transFaces:function(e,t){var n=this,i=this.faces[t.id],o=$(".onetake__container");i.forEach(function(t,i){t.translateZ>n.spaceBetween?t.translateZ=t.srcTrans:t.translateZ<n.originTranslateZ?t.translateZ=n.spaceBetween:t.translateZ=t.translateZ+e,o.find("#"+t.id).css({transform:"translateZ("+t.translateZ+"px)"})})},getTransRate:function(){return(10-(this.maxRotateRate-this.currRate)/10)/2},initTrans:function(e,t){var n=this,i=this,o=this.faces[t.id],r=function a(){if(!n.pause){var r=o.find(function(t){return t.id===e});r.translateZ>n.spaceBetween?cancelAnimationFrame(r.animationframe_controll):(r.translateZ+=i.getTransRate(),n.handleTrans(r.translateZ,r.id,t),r.animationframe_controll=requestAnimationFrame(a))}};r()},createComponent:function(e){var t=e.compJson,n=t.css,o=n.width,r=n.height,a=t.properties.materialItem;t.properties.spaceBetween&&(this.spaceBetween=t.properties.spaceBetween),this.originTranslateZ=5*-this.spaceBetween;var s=a.map(function(t){return e.getImgSrc(t)});this.faces[t.id]=[];var c=this.sceenTpl();c.attr("id","onetake_sceen_"+t.id);for(var l=0;l<this.initFaceCount;l++){var u=this.imageContainerTpl(),p=s[l%s.length]||i,d=$('<img src="'+p+'" alt="" class="onetake__container__sceen__face__img">');u.append(d),u.css({width:o,height:o});var h=this.originTranslateZ+l*this.spaceBetween,f="onetake_face_"+l;u.attr("id",f);var g={srcTrans:this.originTranslateZ,id:f,dom:u,translateZ:h};this.faces[t.id].push(g),c.append(u)}c.css({width:o,height:o});var m=this.containerTpl();return m.append(c),m.css({width:o,height:r}),this.initOneTake(t),this.updateCubeAnimation(m,t,t.properties.rotateRate),this.updateBoxShadow(m,t),m},containerTpl:function(){return $('\n            <div class="onetake__container">\n            </div>\n        ')},sceenTpl:function(){return $('\n            <div class="onetake__container__sceen">\n            </div>\n        ')},imageContainerTpl:function(){return $('\n            <div class="onetake__container__sceen__face">\n            </div>\n        ')},changeMaterial:function(e,t){for(var n=e.find(".onetake__container__sceen__face").find("img"),o=t.length,r=0;r<n.length;r++)$(n[r]).attr("src",t[r%o]||i)},removeAnimation:function(e){for(var t=this.faces[e.id],n=0;n<t.length;n++){var i=t[n];i.animationframe_controll&&cancelAnimationFrame(i.animationframe_controll)}this.pause=!0},updateCubeAnimation:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,i=this.faces[t.id],o=0;o<i.length;o++){var r=i[o];r.animationframe_controll&&cancelAnimationFrame(r.animationframe_controll)}0!==n?(this.pause=!1,this.currRate=n,this.initOneTake(t)):this.pause=!0,t.properties.rotateRate=n},updateBoxShadow:function(e,t){var n=e.find(".onetake__container__sceen__face"),i=t.properties,o=i.boxShadow,r=void 0===o?{css:{}}:o,a=r.used;a&&r.css?n.css({boxShadow:"1px 3px 12px "+r.css.color}):n.css({boxShadow:""})},initTouchEvent:function(e){function t(e){if(e.clientX)return e;var t=e.originalEvent.targetTouches;return t&&t.length>0?t[0]:{}}function n(n){c=t(n).clientY,u=c-l,a.transFaces(u,e.compJson),l=t(n).clientY}function i(t){if(t.stopPropagation(),s.off("touchmove mousemove",n),p=t.timeStamp-p,p<100)if(a.pause=d,s.off("touchend mouseup",i),$(document).off("touchend mouseup",i),a.pause){var o=e.compJson.properties.rotateRate;a.updateCubeAnimation(r,e.compJson,o),a.pause=!1}else a.removeAnimation(e.compJson)}var o=this,r=e.$context,a=this,s=r.find(".onetake__container__sceen"),c=void 0,l=void 0,u=void 0,p=0,d=!1;s.on("touchstart mousedown",function(r){r.stopPropagation(),r.preventDefault(),d=a.pause,a.removeAnimation(e.compJson),o.startClientX=t(r).clientX,o.startClientY=t(r).clientY,l=t(r).clientY,p=r.timeStamp,s.on("touchmove mousemove",n),$(document).on("touchend mouseup",i)})}};e.exports=o},function(e,t,n){"use strict";var i=n(694),o={perspectiveOriginY:150,faceCount:6,maxRotateRate:105,calcWidth:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=e/2,i=360/this.faceCount;return Math.tan(i/2*(2*Math.PI)/360)*n*2-t},containerTpl:function(){return $('\n        <div class="carousel__container">\n            <div class="carousel__container__content">\n            </div>\n        </div>\n        ')},faceTpl:function(){return $('\n        <div class="carousel__container__content__face">\n        </div>\n        ')},createFace:function(e,t){for(var n=this.containerTpl(),o=this.faceCount-1;o>=0;o--){var r=this.faceTpl(),a=$('<img src=""/>'),s=e[o%e.length]||i;a.attr("src",s),r.append(a),r.css({}),n.append(r)}return n},render:function(e,t){this.$context=e.$context,this.css=t,this.updateContent(e.compJson),$(".c-cube-stage").empty(),this.$context.append(this.createComponent(e))},initCubeAnimation:function(e){var t=e.compJson,n=t.properties.rotateRate||50;this.updateCubeAnimation(e.$context,t,n)},updateContent:function(e){var t=this.css,n=t.width,i=t.height;n&&(e.css.width=n),i&&(e.css.height=i)},updateFaces:function(){for(var e=this.calcWidth(this.css.width),t=this.css.width/2,n=this.$context.find(".carousel__container__content__face"),i=this.faceCount-1;i>=0;i--){var o=360/this.faceCount,r=i*o;$(n[i]).css({width:e+"px",height:e+"px",transformOrigin:"center",position:"absolute",top:"50%",transform:"rotateY("+r+"deg) translateZ("+t+"px) translateY(-"+e/2+"px)"})}},updateBoxShadow:function(e,t){var n=e.find(".carousel__container__content__face"),i=t.properties,o=i.boxShadow,r=void 0===o?{css:{}}:o,a=r.used;a&&r.css?n.css({boxShadow:"1px 3px 12px "+r.css.color}):n.css({boxShadow:""})},changeMaterial:function(e,t){for(var n=e.find(".carousel__container__content__face").find("img"),o=t.length,r=0;r<n.length;r++)$(n[r]).attr("src",t[r%o]||i)},createComponent:function(e){var t=e.compJson,n=this.containerTpl(),o=t.css,r=o.width,a=o.height,s=t.properties.materialItem,c=s.map(function(t){return e.getImgSrc(t)}),l=this.calcWidth(r),u=n.find(".carousel__container__content");n.css({"perspective-origin-y":"-"+this.perspectiveOriginY+"px","-webkit-perspective-origin-y":"-"+this.perspectiveOriginY+"px"}),u.css({width:l+"px",height:a+"px",marginLeft:-l/2+"px",marginTop:-(a/2)+this.perspectiveOriginY/2+"px"});for(var p=360/this.faceCount,d=r/2,h=this.faceCount-1;h>=0;h--){var f=this.faceTpl(),g=h*p,m=$('<img src=""/>'),v=c.length,y=c[h%v]||i;m.attr("src",y),f.append(m),f.css({width:l+"px",height:l+"px",transformOrigin:"center",position:"absolute",top:"50%",transform:"rotateY("+g+"deg) translateZ("+d+"px) translateY(-"+l/2+"px)"}),n.find(".carousel__container__content").append(f)}return this.updateCubeAnimation(n,t,t.properties.rotateRate),this.updateBoxShadow(n,t),n},toggleCubeRotate:function(e,t,n){var i=t.properties.rotateRate,o=e.find(".carousel__container__content"),r="carouselRotate "+(this.maxRotateRate-i)+"s linear infinite",a={};o[0].style.animation||(a.animation=r),n?(a["animation-play-state"]="paused",a["-webkit-animation-play-state"]="paused"):(a["animation-play-state"]="running",a["-webkit-animation-play-state"]="running"),o.css(a)},removeAnimation:function(e){var t=e.find(".carousel__container__content");t.css({animation:""})},updateCubeAnimation:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,i=e.find(".carousel__container__content"),o=Number(n),r=0===o?o:this.maxRotateRate-n,a="";r&&(a="carouselRotate "+r+"s linear infinite"),t.properties.rotateRate=n,i.css({animation:a})},initTouchEvent:function(e){function t(e){if(e.clientX)return e;var t=e.originalEvent.targetTouches;return t&&t.length>0?t[0]:{}}function n(e){e.stopPropagation();var n=e.timeStamp-v;n>100&&(s.removeAnimation(a),s.pause=!0),l=t(e).clientX,u=t(e).clientY,h=l-p,f=u-d,m+=h,c.css({transform:"translateZ(-400px) rotateY("+m+"deg)"}),p=t(e).clientX,d=t(e).clientY}function i(t){return c.off("touchmove mousemove",n),v=t.timeStamp-v,v<100?(s.pause=y,c.off("touchend mouseup",i),$(document).off("touchend mouseup",i),void(s.pause?(s.toggleCubeRotate(a,e.compJson,!1),s.pause=!1):(s.toggleCubeRotate(a,e.compJson,!0),s.pause=!0))):void o()}function o(){g=setTimeout(function(){return h*=.9,f*=.9,Math.abs(h)<.1&&Math.abs(f)<.1?(c.off("touchend mouseup",i),$(document).off("touchend mouseup",i),void clearTimeout(g)):(m+=h,c.css({transform:"translateZ(-400px) rotateY("+m+"deg)"}),void o())},16)}var r=this,a=e.$context,s=this,c=a.find(".carousel__container__content"),l=void 0,u=void 0,p=void 0,d=void 0,h=void 0,f=void 0,g=null,m=0,v=0,y=!1;c.on("touchstart mousedown",function(o){clearTimeout(g),o.stopPropagation(),o.preventDefault(),y=s.pause,s.toggleCubeRotate(a,e.compJson,!0),s.pause=!0,r.startClientX=t(o).clientX,r.startClientY=t(o).clientY,p=t(o).clientX,d=t(o).clientY,v=o.timeStamp,c.on("touchmove mousemove",n),$(document).on("touchend mouseup",i)})}};e.exports=o},function(e,t,n){"use strict";var i=n(694),o={faceCount:4,maxRotateRate:110,createStage:function(){return $('\n        <div class="panorama">\n            <!-- 舞台层 -->\n            <div class="panorama__stage">\n            </div>\n        </div>\n        ');
},createController:function(){return $('\n            <div class="panorama__stage__control"></div>\n        ')},createImgWrap:function(){return $('\n            <div class="panorama__stage__control__facewrap"></div>\n        ')},createFace:function(){return $('\n            <div class="panorama__stage__control__facewrap__face">\n                <img src="./face.png" alt="">\n            </div>\n        ')},render:function(e,t){this.$context=e.$context,this.css=t,this.updateContent(),this.updateFaces(),this.initCubeAnimation(e),this.updateBoxShadow(this.$context,e.compJson)},initCubeAnimation:function(e){var t=e.compJson,n=t.properties.rotateRate||50;this.updateCubeAnimation(e.$context,t,n)},updateContent:function(){var e=this.$context.find(".panorama__stage"),t=this.$context.find(".panorama__stage__control__facewrap"),n=this.css.width/1.2;e.css({width:""+this.css.width,height:""+this.css.height}),t.css({width:n,height:n})},updateFaces:function(){for(var e=this.css.width/1.2,t=e/2,n=this.$context.find(".panorama__stage__control__facewrap__face"),i=this.faceCount-1;i>=0;i--){var o=360/this.faceCount,r=i*o;$(n[i]).find("img").css({width:e+"px",height:e+"px"}),$(n[i]).css({transform:"rotateY("+r+"deg) translateZ("+t+"px)"})}},updateBoxShadow:function(e,t){var n=e.find(".panorama__stage__control__facewrap__face"),i=t.properties,o=i.boxShadow,r=void 0===o?{css:{}}:o,a=r.used;a&&r.css?n.css({boxShadow:"1px 3px 12px "+r.css.color}):n.css({boxShadow:""})},changeMaterial:function(e,t){for(var n=e.find(".panorama__stage__control__facewrap__face").find("img"),o=t.length,r=0;r<n.length;r++)$(n[r]).attr("src",t[r%o]||i)},createComponent:function(e){for(var t=e.compJson,n=t.css,o=n.width,r=n.height,a=t.properties.materialItem,s=a.map(function(t){return e.getImgSrc(t)}),c=this.createStage().find(".panorama__stage"),l=this.createImgWrap(),u=this.createController(),p=o/1.2,d=360/this.faceCount,h=p/2,f=this.faceCount-1;f>=0;f--){var g=this.createFace(),m=f*d,v=s[f%s.length]||i;g.find("img").attr("src",v),g.find("img").css({width:p+"px",height:p+"px",transform:"rotateY(180deg)"}),g.css({transform:"rotateY("+m+"deg) translateZ("+h+"px)"}),l.append(g)}return l.css({width:p+"px",height:p+"px"}),u.append(l),c.css({width:o+"px",height:r+"px"}),c.append(u),this.updateCubeAnimation(c,t,t.properties.rotateRate),this.updateBoxShadow(c,t),c},toggleCubeRotate:function(e,t,n){var i=t.properties.rotateRate,o=e.find(".panorama__stage__control"),r="panoramaRotate "+(this.maxRotateRate-i)+"s linear infinite",a={};o[0].style.animation||(a.animation=r),n?(a["animation-play-state"]="paused",a["-webkit-animation-play-state"]="paused"):(a["animation-play-state"]="running",a["-webkit-animation-play-state"]="running"),o.css(a)},removeAnimation:function(e){var t=e.find(".panorama__stage__control");t.css({animation:""})},updateCubeAnimation:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,i=e.find(".panorama__stage__control"),o=Number(n),r=0===o?o:this.maxRotateRate-n,a="";r&&(a="panoramaRotate "+r+"s linear infinite"),t.properties.rotateRate=n,i.css({animation:a})},initTouchEvent:function(e){function t(e){var t=e.timeStamp-v;t>100&&(s.removeAnimation(a),s.pause=!0),l=n(e).clientX,u=n(e).clientY,h=l-p,f=u-d,m+=h,c.css({transform:"rotateY("+-m+"deg)"}),p=n(e).clientX,d=n(e).clientY}function n(e){if(e.clientX)return e;var t=e.originalEvent.targetTouches;return t&&t.length>0?t[0]:{}}function i(n){return n.stopPropagation(),c.off("touchmove mousemove",t),v=n.timeStamp-v,v<100?(s.pause=y,c.off("touchend mouseup",i),$(document).off("touchend mouseup",i),void(s.pause?(s.toggleCubeRotate(a,e.compJson,!1),s.pause=!1):(s.toggleCubeRotate(a,e.compJson,!0),s.pause=!0))):void o()}function o(){g=setTimeout(function(){return h*=.9,f*=.9,Math.abs(h)<.1&&Math.abs(f)<.1?(c.off("touchend mouseup",i),$(document).off("touchend mouseup",i),void clearTimeout(g)):(m+=h,c.css({transform:"rotateY("+-m+"deg)"}),void o())},16)}var r=this,a=e.$context,s=this,c=a.find(".panorama__stage__control"),l=void 0,u=void 0,p=void 0,d=void 0,h=void 0,f=void 0,g=null,m=0,v=0,y=!1;c.on("touchstart mousedown",function(o){clearTimeout(g),o.stopPropagation(),o.preventDefault(),y=s.pause,s.toggleCubeRotate(a,e.compJson,0),s.pause=!0,r.startClientX=n(o).clientX,r.startClientY=n(o).clientY,p=n(o).clientX,d=n(o).clientY,v=o.timeStamp,c.on("touchmove mousemove",t),$(document).on("touchend mouseup",i)})}};e.exports=o},function(e,t){},function(e,t){e.exports='<div class="c-cube-stage"></div>'},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=e.id,n=e.type,i=e.num,o='<div class="element" id="buoy#{id}"ctype="#{type}" num="#{num}"></div>';return $(u(o,{id:t,type:n,num:i}))}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function d(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:d(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)},l=n(101),u=n(36).parse,p=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{style:{compStyle:{self:!1,backgroundColor:!1},compFont:{self:!1,fontFamily:!1}},trigger:{self:!1},sound:!1,link:!1}),r.added=!1,r}return r(t,e),s(t,[{key:"eleShow",value:function(){if(c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"eleShow",this).call(this),!this.added){var e=this.compJson.id;this.eqxPage.eqxScene.renderAd.renderBuoyDom("#buoy"+e),this.added=!0}}},{key:"create$context",value:function(){var e=this.compJson,t=e.id,n=e.type,i=this.eqxPage.pageJson.num||0,o=a({id:t,type:n,num:i});return o}},{key:"addEventListeners",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addEventListeners",this).call(this)}}]),t}(l);e.exports=p},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(27),c=n(101),l=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return $.extend(!0,r.$ability,{trigger:{self:!1},style:{advanceStyle:{size:!1}},sound:!1,link:!1,flexLine:"r"}),r.compJson=e,r}return r(t,e),a(t,[{key:"create$context",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"edit",o="edit"==i?"editor":"view",r=this.eqxPage.eqxScene.meta.property.adBagSwitch,a=this.compJson.properties&&this.compJson.properties.activityCode?this.compJson.properties:"",c=a.activityCode,l=Date.now()+o+"-"+t,u=window.eqxH5WxInfo?{wx_encode_id:window.eqxH5WxInfo.hdencodeid,nickname:window.eqxH5WxInfo.nickname,headimgurl:window.eqxH5WxInfo.headimgurl}:"";e.attr("id",l);var p=e.parents("li");if((0,s.mobilecheck)()){var d=void 0;this.eqxPage.width/this.eqxPage.height<320/486&&(d=(this.eqxPage.height/(this.eqxPage.width/320)-486)/2),e.height(this.eqxPage.height),p.css({top:-d+"px",height:this.eqxPage.height+"px"})}HdPluginTools.initEditor({comp:e,activityId:t,mode:o,adBagSwitch:r,wxInfo:u,activityCode:c,renderedFn:function(t){if(t&&(n.compJson.properties.activityCode=t),"editor"==o){var i=e.find("#sectionNr-"+l),r=i.find("section:first");i.empty().append(r)}}})}}]),t}(c);e.exports=l},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(703),n(704);var r=n(705),a=n(706),s=n(64).isRightArrow,c=function(){function e(t,n){i(this,e),this.eqxPage=n,this.$arrow=this.create$arrow(t)}return o(e,[{key:"create$arrow",value:function(e){if(this.eqxPage&&this.eqxPage.orientation&&this.eqxPage.orientation.isLandScape()){var t=s(e)?$(r):$(a);return s(e)||t.addClass("u-arrow-right__landscape"),t}return s(e)?$(a):$(r)}},{key:"updatePageMode",value:function(e){var t=this.create$arrow(e);this.$arrow&&(this.$arrow.replaceWith(t),this.$arrow=t,this.css&&this.updateCss(this.css))}},{key:"updateCss",value:function(e){this.css=e,this.$arrow.css(e)}},{key:"remove",value:function(){this.$arrow.remove()}}]),e}();e.exports=c},function(e,t){},function(e,t){},function(e,t){e.exports='<section class="u-arrow-bottom"><div class="pre-wrap-bottom"><div class="pre-box1"><div class="pre1"></div></div><div class="pre-box2"><div class="pre2"></div></div></div></section>'},function(e,t){e.exports='<section class="u-arrow-right"><div class="pre-wrap-right"><div class="pre-box3"><div class="pre3"></div></div><div class="pre-box4"><div class="pre4"></div></div></div></section>'},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(117).COMP_TYPE,a=n(117).FORM_COMPS,s=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];i(this,e),this.compJsonList=n,this.compNumMap={},Object.keys(r).forEach(function(e){t.compNumMap[e]=0})}return o(e,[{key:"iterate",value:function(){var e=this;this.compJsonList.forEach(function(t){e.compNumMap[t.type]+=1})}},{key:"getCountIds",value:function(){return this.countIdArr.join(",")}},{key:"hasComp",value:function(e){return!!this.compNumMap[e]}},{key:"isNormalSms",value:function(){var e=this.compJsonList.some(function(e){return"12"==e.type&&2!=e.properties.telStyle});return e}},{key:"hasRedPacketComp",value:function(){return this.hasComp(9)}},{key:"hasMapComp",value:function(){return this.hasComp("m")}},{key:"hasChartComp",value:function(){return this.hasComp("t")}},{key:"hasCommentComp",value:function(){return this.hasComp("b")}},{key:"hasSubmitButtonComp",value:function(){return this.hasComp(6)||this.hasComp(601)}},{key:"hasFormComp",value:function(){var e=this,t=0;return a.forEach(function(n){t+=e.compNumMap[n]}),!!t}}]),e}();e.exports=s},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(24),a=n(26).resolveUrl,s=n(709),c=n(36).parse,l=n(71),u=n(27),p=n(710),d=n(711),h={none:0,Gravity:1,Parallax:2},f=function(){function e(t,n){i(this,e),this.compJson=t,this.eqxPage=n,this.eqxScene=n.eqxScene;var o=this.eqxScene.config;o.EqxGravity.disableGravityMotion?this.gravityMode=h.none:u.mobilecheck()?this.gravityMode=h.Gravity:this.gravityMode=h.Parallax,this.gravityPromise=null,this.gravity=null}return o(e,[{key:"updateBgHeight",value:function(e){this.$gravity.css({height:e})}},{key:"updateCss",value:function(e){this.$gravity.css(e)}},{key:"create$gravity",value:function(){var e=this,t=this.compJson,n=t.id,i=t.properties.imgSrc,o=t.css,u=o.top,f=o.left,g=o.width,m=o.height,v=this.eqxScene,y=v.width,b=v.height;if(i){var x=a(r.FILE,i),w=$(c(s,{id:n,src:x}));this.$gravity=w,this.gravityPromise=l.loadImg(x).then(function(){switch(w.find("img").css({transform:"translate3d("+f+"px,"+u+"px,0)",width:g,height:m}),e.gravityMode){case h.Gravity:e.gravity=new d(n,$(w.find("img")),u,f,y,b),e.gravity.init();break;case h.Parallax:p(w,{innerW:g,innerH:m,outerW:y,outerH:b}).then(function(){e.eqxPage.orientation.isLandScape()&&"view"==e.eqxScene.config.mode&&w.css({transform:"rotate(90deg) translate3d(0px, 0px, 0px)"})})}})}return this.$gravity}},{key:"delete$gravity",value:function(){var e=this;this.gravityMode===h.Gravity&&this.gravityPromise&&this.gravityPromise.then(function(){e.gravity.destroy()}),this.$gravity&&this.$gravity.remove()}},{key:"update$gravity",value:function(){this.delete$gravity(),this.create$gravity()}}]),e}();e.exports=f},function(e,t){e.exports='<div id="wrapper-gravity#{id}" class="eqx-bg-img" style="position: absolute;z-index: 0;width: 100%;height:100%"><div class="layer" data-depth="0.5"><img src="#{src}" alt="" style="position:absolute"/></div></div>'},function(e,t,n){"use strict";function i(e,t){return o.$loadParallax().then(function(){var n=t.innerW,i=t.innerH,o=t.outerW,r=t.outerH,a=t.scalarX,s=void 0===a?100:a,c=t.scalarY,l=void 0===c?100:c;console.log("重力感应 Parallax Starts!",t);var u={calibrateX:!0,calibrateY:!0,invertX:!0,invertY:!0,limitX:parseInt(n)-parseInt(o),limitY:parseInt(i)-parseInt(r),scalarX:s,scalarY:l,frictionX:1,frictionY:1,originX:.5,originY:.5};new Parallax(e[0],u)})}var o=n(25);e.exports=i},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(82).popYaoModal,a=n(27).iphoneCheck,s=function(){function e(t,n,o,r,a,s){i(this,e),this.id=t,this.bgHeight=0,this.bgWidth=0,this.offsetLeft=r,this.offsetTop=o,this.screenHeight=s,this.screenWidth=a,this.isFirst=!0,this.firstGamma=0,this.firstBeta=0,this.lastGama=0,this.lastBeta=0,this.targetLeft=0,this.targetTop=0,this.bg=n,this.isShowModal=!1,this.isShowFailModal=!1}return o(e,[{key:"init",value:function(){var e=this;e.targetLeft=e.nowLeft=e.offsetLeft,e.targetTop=e.nowTop=e.offsetTop,e.bindEvent(),e.requestAnimationFrame=e.requestAnimationFrame.bind(this),e.raf=requestAnimationFrame(e.requestAnimationFrame)}},{key:"bindEvent",value:function(){var e=this;window.DeviceMotionEvent&&this.iosCheck().then(function(){window.DeviceMotionEvent&&$(window).on("deviceorientation."+e.id,function(t){var n=t.originalEvent;n.g=n.gamma,n.b=n.beta,e.isFirst&&(e.bgHeight=e.bg.height(),e.bgWidth=e.bg.width(),e.nowGama=e.lastGama=e.firstGamma=n.g,e.nowBeta=e.lastBeta=e.firstBeta=n.b,e.isFirst=!1),(Math.abs(n.g-e.lastGama)>3||Math.abs(n.b-e.lastBeta)>3)&&(e.targetLeft=Math.round(e.offsetLeft+(e.firstGamma-n.g)*e.bgWidth/180),e.targetTop=Math.round(e.offsetTop+(n.b-e.firstBeta)*e.bgHeight/180),e.nowBeta=e.lastBeta=n.b,e.nowGama=e.lastGama=n.g,e.targetLeft>=0?e.targetLeft=0:e.targetLeft<e.screenWidth-e.bgWidth&&(e.targetLeft=e.screenWidth-e.bgWidth),e.targetTop>=0?e.targetTop=0:e.targetTop<e.screenHeight-e.bgHeight&&(e.targetTop=e.screenHeight-e.bgHeight))})})["catch"](function(){console.error("获取授权失败")})}},{key:"getPermission",value:function(){return new Promise(function(e,t){window.DeviceMotionEvent.requestPermission().then(function(n){"granted"==n?e():t({type:1})})["catch"](function(){t({type:2})})})}},{key:"iosCheck",value:function(){var e=this;return new Promise(function(t,n){a()&&"undefined"!=typeof window.DeviceMotionEvent&&"function"==typeof window.DeviceMotionEvent.requestPermission?e.getPermission().then(function(){t()})["catch"](function(i){1===i.type?(!e.isShowFailModal&&r("zhongli2",function(){n()}),e.isShowFailModal=!0):2===i.type&&(!e.isShowModal&&r("zhongli",function(){e.getPermission().then(function(){t()})["catch"](function(){r("zhongli2",function(){n()})})}),e.isShowModal=!0)}):t()})}},{key:"requestAnimationFrame",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=0,t=0,n=this;n.isFirst||(e=.1*(n.targetLeft-n.nowLeft),t=.1*(n.targetTop-n.nowTop),n.nowLeft+=+e.toFixed(5),n.nowTop+=+t.toFixed(5),n.bg.css({transform:"translate3d("+n.nowLeft+"px,"+n.nowTop+"px,0)","-ms-transform":"translate3d("+n.nowLeft+"px,"+n.nowTop+"px,0)","-webkit-transform":"translate3d("+n.nowLeft+"px,"+n.nowTop+"px,0)"})),n.raf=requestAnimationFrame(n.requestAnimationFrame)})},{key:"destroy",value:function(){window.cancelAnimationFrame(this.raf),$(window).off("deviceorientation."+this.id)}}]),e}();e.exports=s},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(713).PAGEFILTER_STYLE,a=function(){function e(t,n){i(this,e),this.compJson=t,this.eqxPage=n,this.eqxScene=n.eqxScene}return o(e,[{key:"create$pagefilter",value:function(){var e=this.eqxScene.config.mode,t=this.eqxPage.pageJson.properties.pagefilter;t.hasOwnProperty("filternum")&&("edit"===e||"view"===e&&t.disableAnimation?(this.eqxPage.$pageDiv.css("filter",this.makefilterstyle(this.eqxPage.pageJson.properties.pagefilter.filternum)),this.eqxPage.$pageDiv.css("-webkit-filter",this.makefilterstyle(this.eqxPage.pageJson.properties.pagefilter.filternum))):this.makefilterStyleDOM())}},{key:"makefilterStyleDOM",value:function(){if($("#pagefilter_use").length){var e=$("#pagefilter_use").html();$("#pagefilter_use").html(e+this.makeframework(this.eqxPage))}else{var t=document.createElement("style");t.id="pagefilter_use",t.type="text/css",t.innerHTML=this.makeframework(this.eqxPage),document.getElementsByTagName("head").item(0).appendChild(t)}}},{key:"makeframework",value:function(e){var t="";if(e.pageJson.properties.pagefilter&&e.pageJson.properties.pagefilter.hasOwnProperty("filternum")){var n=e.pageJson.id,i=this.makefilterstyle(e.pageJson.properties.pagefilter.filternum);t=" \n            @-webkit-keyframes filterpage"+n+"up {\n                0% { -webkit-filter: '';}\n              100% { -webkit-filter: "+i+";}\n            }\n            @keyframes filterpage"+n+"up {\n                0% { filter: '';font-size:10px;}\n              100% { filter: "+i+";font-size:14px;}\n            }\n            @-moz-keyframes filterpage"+n+"up {\n                0% { -moz-filter: '';}\n              100% { -moz-filter: "+i+";}\n            }\n            @-webkit-keyframes filterpage"+n+"down {\n                0% { -webkit-filter: "+i+";}\n              100% { -webkit-filter: '';}\n            }\n            @keyframes filterpage"+n+"down {\n                0% { filter: "+i+";}\n              100% { filter: '';}\n            }\n            @-moz-keyframes filterpage"+n+"down {\n                0% { -moz-filter: "+i+";}\n              100% { -moz-filter: '';}\n            }\n";var o=e.pageJson.properties.pagefilter.animationTime||0,r=Number(e.pageJson.properties.pagefilter.animationDirection)?"up":"down",a=e.$pageDiv[0].style;a.webkitAnimation="filterpage"+n+r+" "+o+"s linear",a.mozAnimation="filterpage"+n+r+" "+o+"s linear",a.animation="filterpage"+n+r+" "+o+"s linear",a.webkitAnimationFillMode="forwards",a.mozAnimationFillMode="forwards",a.animationFillMode="forwards"}return t}},{key:"makefilterstyle",value:function(e){var t="",n=r[e]?r[e].attr||null:null;if(n){var i=[];for(var o in n){var a=o;"huerotate"===o&&(a="hue-rotate"),i.push(a+"("+n[o].value+n[o].unit+")")}t=i.join(" ")}return t}}]),e}();e.exports=a},function(e,t){"use strict";var n={0:{name:"原图",num:0,order:0},1:{name:"胶片",num:1,order:1,attr:{brightness:{value:112,unit:"%"},contrast:{value:77,unit:"%"},saturate:{value:150,unit:"%"},sepia:{value:18,unit:"%"}}},2:{name:"蓝调",num:2,order:2,attr:{contrast:{value:75,unit:"%"},saturate:{value:105,unit:"%"},huerotate:{value:-35,unit:"deg"},sepia:{value:18,unit:"%"},brightness:{value:105,unit:"%"},grayscale:{value:30,unit:"%"}}},3:{name:"日系",num:3,order:3,attr:{contrast:{value:99,unit:"%"},huerotate:{value:-33,unit:"deg"},sepia:{value:21,unit:"%"},brightness:{value:91,unit:"%"}}},4:{name:"午茶",num:4,order:4,attr:{huerotate:{value:-11,unit:"deg"},saturate:{value:226,unit:"%"},brightness:{value:90,unit:"%"},contrast:{value:120,unit:"%"},sepia:{value:60,unit:"%"}}},5:{name:"褪色",num:5,order:5,attr:{brightness:{value:115,unit:"%"},contrast:{value:80,unit:"%"},saturate:{value:60,unit:"%"}}},6:{name:"校园",num:6,order:6,attr:{brightness:{value:140,unit:"%"},sepia:{value:30,unit:"%"},saturate:{value:85,unit:"%"},contrast:{value:86,unit:"%"},invert:{value:1,unit:"%"}}},7:{name:"盛夏",num:7,order:7,attr:{brightness:{value:108,unit:"%"},sepia:{value:30,unit:"%"},saturate:{value:85,unit:"%"},contrast:{value:86,unit:"%"},invert:{value:1,unit:"%"}}},12:{name:"清新",num:40,order:8,attr:{brightness:{value:124,unit:"%"},contrast:{value:104,unit:"%"},saturate:{value:108,unit:"%"}}},13:{name:"鲜明",num:41,order:9,attr:{brightness:{value:120,unit:"%"},contrast:{value:120,unit:"%"},saturate:{value:132,unit:"%"}}},14:{name:"鲜暖色",num:42,order:10,attr:{brightness:{value:120,unit:"%"},contrast:{value:120,unit:"%"},saturate:{value:132,unit:"%"},huerotate:{value:342,unit:"deg"}}},15:{name:"鲜冷色",num:43,order:11,attr:{brightness:{value:120,unit:"%"},contrast:{value:120,unit:"%"},saturate:{value:132,unit:"%"},huerotate:{value:-345.6,unit:"deg"}}},16:{name:"轻胶片",num:44,order:12,attr:{brightness:{value:112,unit:"%"},contrast:{value:104,unit:"%"},saturate:{value:92,unit:"%"},huerotate:{value:14.4,unit:"deg"},blur:{value:.2,unit:"px"}}},17:{name:"珍珠白",num:45,order:13,attr:{brightness:{value:132,unit:"%"},contrast:{value:92,unit:"%"},saturate:{value:92,unit:"%"},huerotate:{value:0,unit:"deg"},blur:{value:.1,unit:"px"}}},18:{name:"高级灰",num:46,order:14,vip:!0,attr:{brightness:{value:112,unit:"%"},contrast:{value:112,unit:"%"},saturate:{value:80,unit:"%"},huerotate:{value:0,unit:"deg"},blur:{value:0,unit:"px"}}},19:{name:"强黑白",num:47,order:15,attr:{brightness:{value:112,unit:"%"},contrast:{value:140,unit:"%"},saturate:{value:0,unit:"%"},huerotate:{value:0,unit:"deg"},blur:{value:.1,unit:"px"}}},8:{name:"怀旧",num:8,vip:!0,order:16,attr:{saturate:{value:100,unit:"%"},contrast:{value:59,unit:"%"},brightness:{value:106,unit:"%"},sepia:{value:39,unit:"%"},huerotate:{value:-21,unit:"deg"}}},9:{name:"森林",num:9,order:17,attr:{saturate:{value:100,unit:"%"},contrast:{value:59,unit:"%"},brightness:{value:106,unit:"%"},sepia:{value:55,unit:"%"},huerotate:{value:46,unit:"deg"}}},10:{name:"玫瑰",num:10,order:18,attr:{contrast:{value:67,unit:"%"},brightness:{value:96,unit:"%"},saturate:{value:157,unit:"%"},sepia:{value:53,unit:"%"},huerotate:{value:-33,unit:"deg"}}},11:{name:"黑白",num:11,order:19,attr:{brightness:{value:105,unit:"%"},sepia:{value:30,unit:"%"},saturate:{value:185,unit:"%"},contrast:{value:120,unit:"%"},grayscale:{value:110,unit:"%"}}},23:{name:"通透",num:23,order:20,attr:{brightness:{value:99,unit:"%"},sepia:{value:40,unit:"%"},grayscale:{value:30,unit:"%"},contrast:{value:120,unit:"%"},saturate:{value:145,unit:"%"}}},24:{name:"灰橙",num:24,order:21,vip:!0,attr:{brightness:{value:85,unit:"%"},grayscale:{value:30,unit:"%"},contrast:{value:130,unit:"%"},saturate:{value:145,unit:"%"}}},25:{name:"黯淡",num:25,order:22,attr:{saturate:{value:160,unit:"%"},brightness:{value:82,unit:"%"},contrast:{value:140,unit:"%"},grayscale:{value:35,unit:"%"}}},26:{name:"暗红",num:26,order:23,attr:{saturate:{value:163,unit:"%"},brightness:{value:94,unit:"%"},contrast:{value:120,unit:"%"},grayscale:{value:40,unit:"%"}}},28:{name:"柔和",num:28,order:24,attr:{saturate:{value:140,unit:"%"},brightness:{value:120,unit:"%"},contrast:{value:120,unit:"%"},grayscale:{value:60,unit:"%"}}},29:{name:"暖色",num:29,order:25,attr:{saturate:{value:106,unit:"%"},brightness:{value:95,unit:"%"},contrast:{value:135,unit:"%"},grayscale:{value:10,unit:"%"}}},30:{name:"哑光",num:30,order:26,attr:{saturate:{value:136,unit:"%"},brightness:{value:100,unit:"%"},contrast:{value:100,unit:"%"},sepia:{value:19,unit:"%"},grayscale:{value:30,unit:"%"}}},31:{name:"质感",num:31,vip:!0,order:27,attr:{saturate:{value:90,unit:"%"},brightness:{value:87,unit:"%"},contrast:{value:220,unit:"%"},grayscale:{value:90,unit:"%"}}},32:{name:"富士",num:32,order:28,attr:{saturate:{value:140,unit:"%"},brightness:{value:92,unit:"%"},contrast:{value:140,unit:"%"},grayscale:{value:30,unit:"%"}}},33:{name:"佳能",num:33,order:29,attr:{saturate:{value:196,unit:"%"},brightness:{value:97,unit:"%"},contrast:{value:121,unit:"%"},grayscale:{value:47,unit:"%"}}},34:{name:"宝丽来",num:34,vip:!0,order:30,attr:{saturate:{value:196,unit:"%"},brightness:{value:97,unit:"%"},contrast:{value:121,unit:"%"},sepia:{value:40,unit:"%"}}},35:{name:"工业",num:35,order:31,attr:{saturate:{value:130,unit:"%"},brightness:{value:93,unit:"%"},contrast:{value:121,unit:"%"},sepia:{value:40,unit:"%"},grayscale:{value:30,unit:"%"}}}};e.exports={PAGEFILTER_STYLE:n}},function(e,t){"use strict";var n=[{name:"红包",types:["9"]},{name:"新文本",types:["7"]},{name:"爆款文本",types:["1"]},{name:"文本",types:["2","x","298","299"]},{name:"微信昵称",types:["201"]},{name:"背景",types:["3"]},{name:"图片",types:["4"]},{name:"微信头像",types:["401"]},{name:"上传照片",types:["403"]},{name:"输入框",types:["5","501","502","503","504","505"]},{name:"提交按钮",types:["6","601"]},{name:"拨打电话",types:["8"]},{name:"评分",types:["a"]},{name:"留言板",types:["b"]},{name:"复选框",types:["c"]},{name:"浏览次数",types:["d"]},{name:"广告",types:["g"]},{name:"形状",types:["h"]},{name:"点赞",types:["i"]},{name:"跳转链接",types:["l"]},{name:"地图",types:["m"]},{name:"随机图片",types:["n"]},{name:"轮播图",types:["p"]},{name:"单选框",types:["r"]},{name:"音效",types:["s"]},{name:"图表",types:["t"]},{name:"外链视频",types:["v"]},{name:"视频",types:["o"]},{name:"语音",types:["w01","w02"]},{name:"下拉列表",types:["z"]},{name:"计时",types:["e","f"]},{name:"投票",types:["j","k"]},{name:"重力感应",types:["q"]},{name:"画板",types:["u"]},{name:"打赏",types:["11"]},{name:"打赏",types:["n11"]},{name:"随机事件",types:["10"]},{name:"上传图片",types:["upload"]},{name:"实时日期",types:["14"]},{name:"验证码",types:["12"]},{name:"头像墙",types:["13"]},{name:"长按按钮",types:["16"]},{name:"微信卡券",types:["17"]},{name:"幸运转盘抽奖",types:["18"]},{name:"砸金蛋",types:["19"]},{name:"一刮千金",types:["20"]},{name:"微信红包",types:["21"]},{name:"新微信红包",types:["2021"]},{name:"幸运九宫格",types:["22"]},{name:"二维码",types:["23"]},{name:"点击截图",types:["24"]},{name:"艺术字",types:["25"]},{name:"自说字画",types:["26"]},{name:"立体魔方",types:["27"]},{name:"自定义表单",types:["29"]},{name:"动态数字",types:["30"]},{name:"实时位置",types:["31"]},{name:"拼图",types:["32"]},{name:"人脸识别",types:["33"]},{name:"年龄改变",types:["34"]},{name:"人脸融合",types:["35"]},{name:"上传照片",types:["wp"]},{name:"目录",types:["36"]},{name:"天气",types:["37"]},{name:"互动",types:["66"]},{name:"游戏",types:["65"]},{name:"实时对话",types:["38"]}];e.exports=n},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(367),s=n(716),c=n(62).randomId,l=n(110),u=function(){function e(t){o(this,e),this.page=t}return r(e,[{key:"insertItem2Group",value:function(e,t){e.group=t,t.eqxItems.push(e),e.$item&&t.$ul.append(e.$item)}},{key:"changeEqxItemVerticalPosition",value:function(e){function t(e){return Math.min.apply(Math,i(e.map(function(e){return e.getAbsolutePos().top})))}function n(e,t){for(var n=0;n<e.length;n++){var i=e[n].getAbsolutePos(),o=i.top;e[n].updateTop(t+n-o)}}var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;if(e){var a=e.group;if(a){var s=this.reLayout(a),c=s.findIndex(function(t){return t===e});if(c<0||0===o)return null;if(o<0)for(var l=c;l>0&&o<0;l--,o++)s[l]=[s[l-1],s[l-1]=s[l]][0];else if(o>0)for(var u=c;u<s.length-1&&o>0;u++,o--)s[u]=[s[u+1],s[u+1]=s[u]][0];n(s,t(s)),this.reLayout(s,r)}}}},{key:"reLayout",value:function(){function e(e){return e.sort(function(e,t){var n=e.getAbsolutePos(),i=n.top,o=t.getAbsolutePos(),r=o.top;return i-r}),e}function t(e){for(var t=1;t<e.length;t++){var n=e[t],o=e[t-1],r=n.getAbsolutePos().top,a=o.getAbsolutePos().top,s=o.getAbsolutePos().height,c=a+s+i;e[t].updateTop(c-r)}return e}var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.layer,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;if(Array.isArray(n))var o=n.slice();else if(n instanceof a)o=e(n.eqxItems.slice());else{if(!(n instanceof s))return[];o=e(n.getDirectItems().slice())}return t(o)}},{key:"extractComps",value:function(e){var t=[];return e.forEach(function(e){e.isGroupItem()?t.push.apply(t,i(e.getAllSubEqxComps())):t.push(e)}),t}},{key:"copyItems",value:function(e,t,n,i,o){var r=this,a=[];return e.sort(function(e,t){return e.zIndex-t.zIndex}).forEach(function(e){e.isGroupItem()?a.push(r._copyGroupItem(e,t,n,i,o)):a.push(r._copyCompItem(e,t,n,i,o))}),a}},{key:"_copyGroupItem",value:function(e,t,n,i,o){var r=this,a=[];e.eqxItems.slice().sort(function(e,t){return e.zIndex-t.zIndex}).forEach(function(e){a.push(e.isGroupItem()?r._copyGroupItem(e,0,n,i,o):r._copyCompItem(e,0,n,i,o))});var s=this.combineItems(a.map(function(e){return e.id})),c=e.group;return s&&t&&c&&(s.group=c,this.insertItem2Group(s,c),c.autoSize()),s.sourceEqxItem=e,s}},{key:"_copyCompItem",value:function(e,t,n,i,o){var r=this,a=JSON.parse(JSON.stringify(e.compJson));o&&o(a),1===n?(a.css.left+=10,a.css.top+=10):2===n&&(a.css.top+=10),i=i.filter(function(e){return"e"===e.sourceType&&e.sourceId===a.id}).map(function(e){return delete e.$$hashKey,JSON.parse(JSON.stringify(e))}),delete a.id,delete a.css.zIndex,2021==a.type&&(a.properties.activityId="");var s=this.page.addCompJson(a),c=s?this.page.initEqxCompByJson(s):null,l=s.properties;if(!c)return null;if(this.page.renderEqxComp(c),i.length&&i.forEach(function(e){e.sourceId===e.targetId&&(e.targetId=s.id),e.sourceId=s.id;var t=r.page.pageJson.properties,n=t.triggerGroup.findIndex(function(t){return e.targetId===t.targetId&&e.sourceId===t.sourceId&&e.eventType===t.eventType&&e.targetState===t.targetState});n===-1&&t.triggerGroup.push(e)}),1==l.initType?c.startAnimation({maxCount:1,reset:!0}):c.eleHide(),c&&t&&e.group){var u=e.group;c.group=u,this.insertItem2Group(c,u),u.autoSize()}return c.sourceEqxItem=e,c}},{key:"breakUpGroupItem",value:function(e){var t,n=this.layer,o=n.eqxItems.find(function(t){return t.isGroupItem()&&t.id===e}),r=o.group;if(!o)return[];var a=o.eqxItems.slice(),s=l.parseTransform(o.getTransform()).rotate;r&&(t=r.eqxItems).push.apply(t,i(a)),
(r||n).$ul.append(a.map(function(e){var t=e.getAbsolutePos(),n=t.left,i=t.top;if(r){var o=r.getAbsolutePos(),a=o.left,c=o.top;n-=a,i-=c}if(e.$item.css({left:n,top:i}),s){var u=l.parseTransform(e.getTransform()).rotate;e.$item.css({transform:"rotateZ("+u+"deg)"})}return e.$item})),o.$group.remove(),o.$group=null,o.$groupBox=null,o.$ul=null,a.forEach(function(e){e.group=r||null,e.parent=r||n});var c=n.eqxItems.findIndex(function(e){return e===o});return c>-1&&n.eqxItems.splice(c,1),r&&(c=r.eqxItems.findIndex(function(e){return e===o}),c>-1&&r.eqxItems.splice(c,1)),a}},{key:"combineItems",value:function(e){function t(e){var t=e.filter(function(e){return e.isGroupItem()||"16"!==e.type});e.length=0,e.push.apply(e,i(t))}var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=this.page,s=this.layer,c=e.map(function(e){return r.getEqxItem(e)});if(this._includeFunTemplates(c))return null;if(t(c),this.isExistNested(c))return null;var l=this._findCommonAncestor(c);if(this._limitNestDepth(l,c,o),this._updateIndexCrossLayer(c),!c||!c.length)return null;c.forEach(function(e){if(e.group){var t=e.group.eqxItems.findIndex(function(t){return t===e});t>-1&&e.group.eqxItems.splice(t,1),e.group!==l&&n._clearEmptyGroup(e.group)}e.eqxLayer!==s&&n._changeItemCrossLayer(e)});var u=-1;l!==s&&l.isGroupItem()&&(u=s.eqxItems.findIndex(function(e){return e===l})),e=c.map(function(e){return e.id});var p=new a({id:this._generateGroupId(),compIds:e},s);return s.initEqxItem(p,u).renderEqxItem(p),p.eqxItems.forEach(function(e){var t=e.getAbsolutePos(),n=t.left,i=t.top,o=p.getAbsolutePos(),r=o.left,a=o.top;n-=r,i-=a,e.$item.css({left:n,top:i})}),l!==s&&l.isGroupItem()&&(this.insertItem2Group(p,l),p.group=l,p.parent=l),this.updateCompsIndex(),p.autoSize(),p}},{key:"_includeFunTemplates",value:function(e){return e.some(function(e){return e.isFunTemplate()})}},{key:"_limitNestDepth",value:function(e,t,n){function o(e,t){var n=a(e);return n>=t?(r(e),u.breakUpGroupItem(e.id)):(e.eqxItems.slice().forEach(function(e){e.isGroupItem()&&o(e,n+1)}),[e])}function r(e){for(var t=e.hasGroupItem();t;)u.breakUpGroupItem(t.id),t=e.hasGroupItem()}function a(e){if(e){if(e instanceof s)return 0;for(var t=1;e.group;)t++,e=e.group;return t}return-1}var c=[],l=a(e),u=this;return l===-1||l>=n?void(t.length=0):(l<n&&t.forEach(function(e){e.isGroupItem()?c.push.apply(c,i(o(e,n-l))):c.push(e)}),t.length=0,void t.push.apply(t,c))}},{key:"removeEmptyGroups",value:function(){function e(){return n.page.getEqxItems().filter(function(e){return e.isGroupItem()}).find(function(e){return!e.eqxItems.length})}for(var t=[],n=this,i=e();i;)t.push(i),n._clearEmptyGroup(i),i=e();return t}},{key:"isExistNested",value:function(e){for(var t=0;t<e.length;t++)for(var n=e[t];n.group;){if(e.indexOf(n.group)!==-1)return n;n=n.group}return!1}},{key:"traceTopItemsContain",value:function(e){for(var t=[],n=0;n<e.length;n++){for(var i=e[n];i.group;)i=i.group;t.indexOf(i)===-1&&t.push(i)}return t}},{key:"filterNestedItems",value:function(e){for(var t=[],n=0;n<e.length;n++){for(var i=e[n],o=i,r=!1;i.group;){if(e.indexOf(i.group)!==-1){r=!0;break}i=i.group}r||t.push(o)}return t}},{key:"_updateIndexCrossLayer",value:function(e){var t=this;if(this._isCrossLayer(e)){var n=[],i=[];e.forEach(function(e){e.eqxLayer!==t.layer?i.push(e):n.push(e)}),n.sort(function(e,t){return e.zIndex-t.zIndex}),i.push.apply(i,n),i.forEach(function(e,t){return e.zIndex=t+1})}}},{key:"_changeItemCrossLayer",value:function(e){var t=this;e.isGroupItem()&&e.eqxItems.forEach(function(e){t._changeItemCrossLayer(e)});var n=e.eqxLayer.eqxItems.findIndex(function(t){return t===e});n>-1&&e.eqxLayer.eqxItems.splice(n,1),e.eqxLayer=t.layer,e.eqxLayer.eqxItems.push(e)}},{key:"updateCompsIndex",value:function(){function e(t){var n=[];return t.forEach(function(t){return t.isGroupItem()?n.push.apply(n,i(e(t.eqxItems))):n.push(t)}),n}var t=this.layer.getLayerTreeStructure(),n=e(t);this.layer.updateCompsIndex(n)}},{key:"_clearEmptyGroup",value:function(e){if(e&&e.isGroupItem()&&!e.eqxItems.length){var t=e.group;e.eqxLayer.removeEqxItem(e),this._clearEmptyGroup(t)}}},{key:"_findCommonAncestor",value:function(e){if(1===e.length&&!e[0].isGroupItem())return e[0].group||this.layer;if(this._isCrossLayer(e))return this.layer;for(var t=e[0],n=1;n<e.length;n++)t=this._find2CommonAncestor(t,e[n]);return t}},{key:"_isCrossLayer",value:function(e){for(var t=0;t<e.length;t++)if(e[t].eqxLayer!==this.layer)return!0;return!1}},{key:"_find2CommonAncestor",value:function(e,t){if(e===this.layer||t===this.layer)return this.layer;var n=this._computeLinkLength(e),i=this._computeLinkLength(t),o=Math.abs(n-i);if(n<i){var r=[t,e];e=r[0],t=r[1]}for(;o--;)e=e.group;for(;e&&t;){if(e===t)return e;e=e.group,t=t.group}return this.layer}},{key:"_computeLinkLength",value:function(e){for(var t=0;e;)t++,e=e.group;return t}},{key:"_generateGroupId",value:function(){return"group:"+c()}},{key:"layer",get:function(){return this.page.getCurrentLayer()}}]),e}();e.exports=u},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(367),s=n(101),c=n(196),l=n(117).COMP_TYPE,u=console.log.bind(console,"[EqxLayer]"),p=n(27).isPc,d=n(25).$loadParallax,h=n(71).qiniuZoom,f=n(258),g=f.getItemByUser,m=function(){function e(t,n){o(this,e),this.eqxPage=n,this.eqxItems=[],this.$layer=null,this.$layerBox=null,this.layerBg=null,this.$ul=null,this.lock=!1,this.allowOperate=!0,this.json=t,this.name=t.name,this.items=t.items,this.id=t.id,this._lastHash=t.hash}return r(e,[{key:"getEqxComps",value:function(){return this.eqxItems.filter(function(e){return!e.isGroupItem()})}},{key:"getEqxGroups",value:function(){return this.eqxItems.filter(function(e){return e.isGroupItem()})}},{key:"removeEqxItem",value:function(e){e.group&&e.group.removeEqxItem(e);var t=this.eqxItems.findIndex(function(t){return t===e});t>-1&&this.eqxItems.splice(t,1),e.destroy()}},{key:"setAllowOperate",value:function(e){return this.allowOperate=e,this.allowOperate}},{key:"_getCompsAndGroups",value:function(){for(var e=[],t=[],n=0;n<this.items.length;n++){var i=this.items[n];/group/.test(i.id)?t.push(i):e.push(i)}return{comps:e,groups:t}}},{key:"_initEqxGroup",value:function(e){return new a(e,this)}},{key:"_initEqxComp",value:function(e){var t=c[e.type],n=this.eqxPage.id||"";return t&&t.prototype instanceof s?new t(e,this):void console.error("In Valid Type: "+e.type+" @Page"+n,e)}},{key:"_getLayerTranslate3dz",value:function(){for(var e=this.id,t=this.eqxPage,n=t.pageJson.properties.oneShot.distance,i=void 0===n?320:n,o=void 0,r=0;r<t.eqxLayerList.length;r++)if(t.eqxLayerList[r].id===e){o=r*i;break}return o}},{key:"init",value:function(){return this}},{key:"initEqxItems",value:function(e,t){var n=this;if(!e){var o=this._getCompsAndGroups();e=o.comps,t=o.groups}var r=[];return e.map(function(e){return e.name=n.eqxPage.getCompName(e),e}).filter(function(e){var t=e.type;return"EqxBackground"!==l[t]&&"EqxGravity"!==l[t]}).sort(function(e,t){var n=e.css.zIndex,i=t.css.zIndex;return n-i}).map(function(e,t){return e.num=t+1,e.css.zIndex=t+1,e}).forEach(function(e){var t=n._initEqxComp(e);t&&n.eqxItems.push(t),r.push(t)}),r.push.apply(r,i(t.map(function(e){var t=n._initEqxGroup(e);return n.eqxItems.push(t),t.itemIds.forEach(function(e){return t.addEqxItem(n.getEqxItem(e))}),t}))),r}},{key:"initEqxItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=this;return e.isGroupItem()?(t>-1?n.eqxItems.splice(t,0,e):n.eqxItems.push(e),e.addEqxItems.apply(e,i(e.itemIds.map(function(e){return n.getEqxItem(e)})))):t>-1?n.eqxItems.splice(t,0,e):n.eqxItems.push(e),this}},{key:"renderEqxItems",value:function(){for(var e=[],t=this.eqxItems.length,n=t-1;n>=0;n--){var i=this.eqxItems[n];i.rendered||e.push(i.render())}return this.$ul.append(e),this}},{key:"renderEqxItem",value:function(e,t){t&&e.rendered&&(e.rendered=!1,e.destroy());var n=e.group?e.group.$ul:this.$ul;return e.rendered||n.append(e.render()),e.isGroupItem()||"16"!==e.type||(this.hasPipButton=1),this}},{key:"toJson",value:function(){var e=[],t=[],n=this.flash||{},i=n.duration,o=void 0===i?null:i,r=n.durationType,s=void 0===r?0:r,c=this.json,l=c.thumbnail,u=c.area,p=c.pipButton,d=c.id,h=c.displayed,f=c.screenBg;this.eqxItems.sort(function(e,t){return e.zIndex-t.zIndex});for(var g=0;g<this.eqxItems.length;g++){var m=this.eqxItems[g];m instanceof a?t.push(m.toJson()):e.push(m.toJson())}if(null!==o&&null!==s)var v={duration:o,durationType:s};return{id:d,area:u,flash:v,elems:e,groups:t,displayed:h,thumbnail:l,pipButton:p,screenBg:f,name:this.name,hash:this._lastHash,compIds:this.eqxItems.map(function(e){return e.id})}}},{key:"updateEqxLayerIndex",value:function(e){this.$layer&&(this.zIndex=e,this.$layer&&this.$layer.css({zIndex:e}))}},{key:"isEqxLayer",value:function(){return!0}},{key:"render",value:function(){var e=this.eqxPage.pageJson,t=void 0===e?{}:e,n=t.properties.oneShot,i=void 0===n?{}:n,o=this.eqxScene.config.mode,r=t.properties.longPage,a=void 0===r?null:r,s=a?a+"px":"100%",c="",l="position: absolute;width: 100%;height: "+s+";",u=this.eqxScene.sceneJson.meta.property;if(u&&u.orientation&&(c=u.orientation.curr||"","landscape"===c&&(l="position: absolute;width: 100%;height: 100%;")),this.$layer=$('<section class="layer" id="'+this.id+'" style="'+l+'">\n                <div class="layer-box">\n                    <ul id="edit_area" class="layer-items edit_area '+c+' weebly-content-area weebly-area-active"></ul>\n                </div>\n            </section>'),this.$layerBox=this.$layer.find(".layer-box"),this.$ul=this.$layerBox.find("ul"),this.$layer.css({zIndex:this.zIndex}),this.initEqxItems(),this.renderEqxItems(),i.isOpen&&"view"===o){var d="translate3d(0px, 0px, "+(-this._getLayerTranslate3dz()||0)+"px)";this.$layer.css({transform:d})}return p()||(window.top===window?this.setUlTopAndLeft():this.setIframeUlTopAndLeft(),this.eqxPage.pageJson.properties.longPage&&this.$ul.css({"margin-top":0,"transform-origin":"50% 0","-webkit-transform-origin":"50% 0"})),this.renderBg(this.addBgJson(this.json.screenBg)),this.display(),this.initElementsParallax(),this.$layer}},{key:"initElementsParallax",value:function(){var e=this,t=this.items,n=t.some(function(e){var t=e.properties||{},n=t.GSensor,i=void 0===n?{}:n;return i.isUsed});n&&d().then(function(){var t=window.Parallax;e.parallax=new t(e.$ul.get(0)),console.log("初始化组件重力感应",e)})}},{key:"display",value:function(){this.displayed?(this.$layer.show(),this.allowOperate=!0):(this.$layer.hide(),this.allowOperate=!1)}},{key:"hide",value:function(){this.$layer&&this.$layer.hide(),this.$layer&&(this.$layer.hide(),this.findSpecAnimItem(!1,1))}},{key:"show",value:function(){this.$layer&&(this.$layer.show(),this.findSpecAnimItem(!0,1))}},{key:"findSpecAnimItem",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.getEqxComps().forEach(function(t){for(var i=t.compJson.properties.anim,o=void 0===i?[]:i,r=0;r<o.length;r++){var a=o[r];if(n.indexOf(a.animClassify)>-1){e?t.eleShow():t.eleHide();break}}})}},{key:"getEqxItem",value:function(e){return this.eqxItems.find(function(t){return t.id===e})}},{key:"hasGroupsInLayer",value:function(){return this.items.some(function(e){return/group/.test(e.id)})}},{key:"getLayerTreeStructure",value:function(){function e(n){return n.forEach(function(t){return t.isGroupItem()&&e(t.eqxItems)}),n.sort(function(e,n){var i=e.getZIndex(),o=n.getZIndex();return t?i-o:o-i}),n}var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.getDirectItems();return e(n)}},{key:"updateItemsIndexBySplit",value:function(e,t){var n=this.getLayerTreeStructure(!0),o=t.length,r=n.indexOf(t[0]),a=n.indexOf(t[o-1]);if(e.startsWith("+")){var s=(/\+(\d+|\+)/.exec(e)||[])[1]||1;s=Math.min(s,n.length-a),n.splice.apply(n,[r+s,0].concat(i(n.splice(r,o))))}else{if(!e.startsWith("-"))throw new TypeError("invalid action: "+e);var c=(/-(\d+|\+)/.exec(e)||[])[1]||1;c=Math.min(c,r),n.splice.apply(n,[r-c,0].concat(i(n.splice(r,o))))}var l=this._getCompsFromTree(n,!0);this.updateCompsIndex(l,!0)}},{key:"updateItemIndex",value:function(e,t){if(e&&t){var n=t.getZIndex(),i=this.getLayerTreeStructure(!0),o=t.group?t.group.eqxItems:i,r=o.indexOf(t);if("++"===e)o.push(o.splice(r,1)[0]);else if("--"===e)o.unshift(o.splice(r,1)[0]);else if(e.startsWith("+")){var a=(/\+(\d+|\+)/.exec(e)||[])[1]||1;a=Math.min(a,o.length-r),o.splice(r+a,0,o.splice(r,1)[0])}else{if(!e.startsWith("-"))throw new TypeError("invalid action: "+e);var s=(/-(\d+|\+)/.exec(e)||[])[1]||1;s=Math.min(s,r),o.splice(r-s,0,o.splice(r,1)[0])}var c=this._getCompsFromTree(o,!0);this.updateCompsIndex(c,!0);var l=t.getZIndex();u("updateItemIndex",n,"-->",e,"-->",l,t)}}},{key:"_getCompsFromTree",value:function(e){function t(e,t){var n=e.getZIndex()-t.getZIndex();return o?n:-n}var n=this,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=[];return e.forEach(function(e){return e.isGroupItem()?r.push.apply(r,i(n._getCompsFromTree(e.eqxItems).sort(t))):r.push(e)}),r}},{key:"updateCompsIndex",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.length,i=n-1;i>=0;i--){var o=e[i],r=t?i+1:n-i;o.updateCss({zIndex:r})}this.autoZIndex()}},{key:"autoZIndex",value:function(){this.getDirectItems().forEach(function(e){return e.autoZIndex()})}},{key:"getDirectItems",value:function(){return this.eqxItems.filter(function(e){return!e.group})}},{key:"deleteEqxItem",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this;e.isGroupItem()&&e.eqxItems.forEach(function(e){return n.deleteEqxItem(e)});var i=n.eqxItems.findIndex(function(t){return t===e});i>-1&&n.eqxItems.splice(i,1),e.group&&(i=e.group.eqxItems.findIndex(function(t){return t===e}),i>-1&&e.group.eqxItems.splice(i,1)),t&&e.destroy()}},{key:"addEqxItems",value:function(e){var t,n=this;(t=n.eqxItems).push.apply(t,i(e)),e.forEach(function(e){e.eqxLayer.deleteEqxItem(e,!1),e.eqxLayer=n,n.$ul.append(e.$item)})}},{key:"destroy",value:function(){this.$layer&&this.$layer.remove(),this.$layer=null,this.$layerBox=null,this.$ul=null}},{key:"setUlTopAndLeft",value:function(){if(!this.eqxScene.config.disableSetUlTopAndLeft){var e,t;this.width/this.height>=320/486?e=(this.width/(this.height/486)-320)/2:t=(this.height/(this.width/320)-486)/2,e&&this.$ul.css({marginLeft:e}),t&&this.$ul.css({marginTop:t})}}},{key:"setIframeUlTopAndLeft",value:function(){var e,t=(this.width-320)/2,n=(this.height-486)/2;return e=this.width/this.height<=320/486?"scale("+this.width/320+")":"scale("+this.height/486+")",this.$ul.css({marginTop:n,marginLeft:t,transform:e}),{marginLeft:t,marginTop:n}}},{key:"initEqxBgByJson",value:function(e){if(e&&!$.isEmptyObject(e)){var t=e.properties?e.properties.bgColor:null,n=e.properties?e.properties.imgSrc:null,i={};this.eqxPage.orientation.isLandScape()&&(i={width:"486px",height:"320px",transform:"rotate(90deg)",top:"82px",left:"-84px"});var o="",r="";if(t&&(o='<div class="layer-bg layer-bg-color" style="position: absolute; z-index: -1; width: 100%; height: 100%; background: '+e.properties.bgColor+';"></div>'),n&&(r='<div class="layer-bg layer-bg-img" style="position: absolute; z-index: 0; width: 100%; height: 100%;background-image: url(\''+h(n,320,588)+"');\n                        background-size: cover; background-position: 50% 50%;\n                        background-origin: content-box;\"></div>"),this.layerBg=$('<div style="width: 100%; height: 100%; position: absolute;z-index: -1;opacity: '+e.css.opacity+'">\n                <div class="layer-bg-content" style="width: 100%; height: 100%; overflow: hidden;position: absolute;z-index: -1;">\n                    '+o+"\n                    "+r+"\n                </div>\n            </div>"),n&&"view"===this.eqxScene.config.mode&&this.layerBg.css(i),"edit"===this.eqxScene.config.mode){var a=g("showPhone",this.eqxScene.meta.createUser);void 0===a&&(a=!0),!this.eqxPage.isLongPage()&&a&&this.layerBg.css({overflow:"hidden"}),this.$layerBgContent=this.layerBg.find(".layer-bg-content"),this.eqxPage.orientation.isLandScape()?this.$layerBgContent.css({width:this.eqxPage.isLongPage()?"calc(100% + 51px)":"calc(100% + 102px)",left:"-51px"}):this.$layerBgContent.css({height:this.eqxPage.isLongPage()?"calc(100% + 51px)":"calc(100% + 102px)",top:"-51px"})}return this.layerBg}}},{key:"updateLayerBgArea",value:function(e){"edit"===this.eqxScene.config.mode&&!this.eqxPage.isLongPage()&&this.layerBg&&(e?this.layerBg.css({overflow:"hidden"}):this.layerBg.css({overflow:"visible"}))}},{key:"renderBg",value:function(e){var t=this.$layer.find(".layer-bg");t?this.$layer.append(e):console.error("background already rendered")}},{key:"addBgJson",value:function(e){return this.deleteBg(),this.json.screenBg=e,this.initEqxBgByJson(e)}},{key:"deleteBg",value:function(){this.layerBg&&this.layerBg.remove()}},{key:"updateBgOpacity",value:function(e){this.layerBg.css({opacity:e})}},{key:"calLayerAnimTime",value:function(){var e;if(this.eqxPage.flash){var t=this.json.flash,n=void 0===t?{}:t,i=n.durationType,o=void 0===i?0:i,r=n.duration,a=void 0===r?null:r;0===o?(e=this._computeCompsTime(this.getEqxComps()),0==e&&(e=2e3)):1===o&&a>=0&&(e=1e3*a)}else e=this._computeCompsTime(this.getEqxComps());return e}},{key:"_computeCompsTime",value:function(e){for(var t=0,n=0;n<e.length;n++)for(var i=e[n],o=i.compJson.properties.anim,r=void 0===o?[]:o,a=0;a<r.length;a++){var s=r[a],c=s.countNum,l=void 0===c?1:c,u=s.duration,p=s.delay;if(s.count)t=Math.max(t,u+p);else if(1==s.animClassify){var d,h=i.$context.text(),f=s.textInterval,g=/(\b[a-zA-Z]+\b)|[\u4e00-\u9fa5]|[\.\<\>\《\》\。\-\——\_\?\!\？\！\:\：\;\；]/g,m=h.match(g);d=m?l*(u+(m.length-1)*f)+p:l*u+p,t=Math.max(t,d)}else t=Math.max(t,l*u+p)}return 1e3*t}},{key:"displayed",get:function(){var e=this.json.displayed,t=void 0===e||e;return t},set:function(e){this.json.displayed=e}},{key:"zIndex",get:function(){return this.json.zIndex},set:function(e){this.json.zIndex=e}},{key:"width",get:function(){return this.eqxPage.width}},{key:"height",get:function(){return this.eqxPage.height}},{key:"eqxScene",get:function(){return this.eqxPage.eqxScene}},{key:"translate3dz",get:function(){return this._getLayerTranslate3dz()}},{key:"hasPipButton",get:function(){return this.json.pipButton},set:function(e){this.json.pipButton=e}},{key:"thumbnail",get:function(){return this.json.thumbnail},set:function(e){this.json.thumbnail=e}},{key:"area",get:function(){return this.json.area},set:function(e){this.json.area=e}}]),e}();e.exports=m},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(258),a=r.getItemByUser,s=function(){function e(t){i(this,e),this.page=t}return o(e,[{key:"copyScreen",value:function(e){var t=this.screens[e],n=this.page.addEmptyEqxLayer(e+1,t.json.screenBg||null),i=this.page.groupManager,o=this.page.pageJson.properties,r=o.triggerGroup,a=t.getDirectItems(),s=i.copyItems(a,0,0,r);n.addEqxItems(s),this.pipLayerHandler()}},{key:"addScreen",value:function(){var e=this.page.addEmptyEqxLayer(),t=this.page.pageJson.properties.pip;t&&t.used||this.page.switchCurrentLayer(e),this.showCurrentScreen(),this.pipLayerHandler()}},{key:"pipLayerHandler",value:function(){var e=this.page.eqxLayerList,t=e.findIndex(function(e){return e.hasPipButton});t!==-1&&(e.push(e.splice(t,1)[0]),e.forEach(function(e,t){return e.updateEqxLayerIndex(t+1)}))}},{key:"deleteScreen",value:function(e){var t=this.screens[e];this.page.deleteEqxLayer(t)}},{key:"showCurrentScreen",value:function(){var e=this;this.screens.forEach(function(t){if(t===e.currentScreen){if(t.$layer&&(t.$layer.show(),"edit"===e.page.eqxScene.config.mode&&!e.page.isLongPage())){var n=a("showPhone",e.page.eqxScene.meta.createUser);void 0===n&&(n=!0),t.updateLayerBgArea(n)}t.setAllowOperate(!0)}else t.$layer&&t.$layer.hide(),t.setAllowOperate(!1)})}},{key:"switchScreen",value:function(e){var t=this.screens[e];this.page.switchCurrentLayer(t),this.showCurrentScreen(),this.pipLayerHandler()}},{key:"getCompsInScreen",value:function(e){return e?e.eqxItems.slice().filter(function(e){return!e.isGroupItem()}):[]}},{key:"findImageCompInScreen",value:function(e){var t=this.getCompsInScreen(e);return t.find(function(e){var t=e.compJson.properties;return!!t.pip})}},{key:"updateCompsTranslateZ",value:function(e,t,n){if(e&&e.length){var i=n||this.currentScreen,o=this.screens.findIndex(function(e){return e===i});return e.forEach(function(e){var n=e.compJson.properties;n.translate3dZ=o*(t||320)}),e}}},{key:"screens",get:function(){return this.page.eqxLayerList.filter(function(e){return!e.hasPipButton}).sort(function(e,t){return e.zIndex-t.zIndex})}},{key:"currentScreen",get:function(){return this.page.getCurrentLayer()}},{key:"currentScreenIndex",get:function(){var e=this;return this.screens.findIndex(function(t){return t===e.currentScreen})}}]),e}();e.exports=s},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(121),a=r.RAW_EVENT,s=r.EQX_EVENT,c=r.getTriggerTargetStateName,l=n(32).throttle,u="ontouchstart"in window,p=u?"touchstart":"mousedown",d=u?"touchmove":"mousemove",h=u?"touchend":"mouseup",f=u?"touchcancel":"mouseleave",g=n(26).openUrl,m=n(82).popYaoModal,v=n(27).iphoneCheck,y=n(211).$getAuditResult,b=function(){function e(t,n){i(this,e),n||this.iteratorScene(t),this.isShowModal=!1,this.isShowFailModal=!1}return o(e,[{key:"iteratorScene",value:function(e){var t=this,n=null;e.pageJson.properties.triggerGroup&&e.pageJson.properties.triggerGroup instanceof Array&&e.pageJson.properties.triggerGroup.forEach(function(i){var o=e;"e"==i.targetType&&(o=e.getEqxCompById(i.targetId)),o&&(i.eventType===a.click?(n=e.getEqxCompById(i.sourceId),n&&n.$li&&n.$li.on("click",function(n){n.preventDefault(),n.stopPropagation(),t.triggerEleByState(o,i,e,!0)})):i.eventType===a.shake?t.addPageTrigger(o,i,e):i.eventType===a.taphold?(n=e.getEqxCompById(i.sourceId),n&&n.$li&&t.addTapholdTrigger(n,o,i,e)):i.eventType===a.slide?(n=e.getEqxCompById(i.sourceId),n&&n.$li&&t.addSlideTrigger(n,o,i,e)):i.eventType===a.mediaEnded?(n=e.getEqxCompById(i.sourceId),n&&n.$context&&("o"===n.compJson.type?n.$context.on("ended",function(){t.triggerEleByState(o,i,e)}):n.soundAgent?$(n.soundAgent.audio).on("ended",function(){t.triggerEleByState(o,i,e)}):"26"===n.compJson.type&&$(n.speechAgent.audio).on("ended",function(){t.triggerEleByState(o,i,e)}))):i.eventType===a.mediaCanplay?(n=e.getEqxCompById(i.sourceId),n&&n.$context&&("o"===n.compJson.type?n.$context.on("canplay",function(){t.triggerEleByState(o,i,e)}):n.soundAgent?$(n.soundAgent.audio).on("canplay",function(){t.triggerEleByState(o,i,e)}):"26"===n.compJson.type&&$(n.speechAgent.audio).on("canplay",function(){t.triggerEleByState(o,i,e)}))):i.eventType===a.mediaPlaying?(n=e.getEqxCompById(i.sourceId),n&&n.$context&&("o"===n.compJson.type?n.$context.on("playing",function(){t.triggerEleByState(o,i,e)}):n.soundAgent?$(n.soundAgent.audio).on("playing",function(){t.triggerEleByState(o,i,e)}):"26"===n.compJson.type&&$(n.speechAgent.audio).on("playing",function(){t.triggerEleByState(o,i,e)}))):i.eventType===a.animStart?(n=e.getEqxCompById(i.sourceId),n&&n.$boxDiv&&n.$boxDiv.on("animationstart",function(){t.triggerEleByState(o,i,e)})):i.eventType===a.animEnd?(n=e.getEqxCompById(i.sourceId),n&&n.eqxCompAnim.onAllAnimEnd(function(){t.triggerEleByState(o,i,e)})):i.eventType===a.animIteration?(n=e.getEqxCompById(i.sourceId),n&&n.$boxDiv&&n.$boxDiv.on("animationiteration",function(){t.triggerEleByState(o,i,e)})):i.eventType===a.exceptionSuc&&(n=e.getEqxCompById(i.sourceId),n&&"n11"==n.type&&n.$li.on("exception-success",function(n,r){t.triggerEleByState(o,i,e,r)})))})}},{key:"addSlideTrigger",value:function(e,t,n,i){function o(o){o.stopPropagation();var r=u?o.originalEvent.targetTouches[0].pageX:o.pageX,p=u?o.originalEvent.targetTouches[0].pageY:o.pageY;m=p-s,g=r-a,(Math.abs(g-f.left)>10||Math.abs(m-f.top)>10)&&!v&&(v=!0,l(function(e,t){c.triggerEleByState(e,t,i)},50,100)(t,n)),e.$li.css({top:m+"px",left:g+"px"})}function r(){g=f.left,m=f.top,e.$li.css({top:m,left:g}),$(e.$li).off(d,o),$(document).off(h,r),v&&(v=!v)}var a=0,s=0,c=this,f=e.compJson.css,g=f.left,m=f.top;e.$li.on(p,function(t){t.preventDefault(),t.stopPropagation();var n=u?t.originalEvent.targetTouches[0].pageX:t.pageX,i=u?t.originalEvent.targetTouches[0].pageY:t.pageY;a=n-g,s=i-m,$(e.$li).on(d,o),$(document).on(h,r)});var v=!1}},{key:"addTapholdTrigger",value:function(e,t,n,i){function o(t){t.preventDefault(),t.stopPropagation(),v=u?t.originalEvent.targetTouches[0].pageX:t.pageX,y=u?t.originalEvent.targetTouches[0].pageY:t.pageY,e.$li.bind(h,c).bind(f,c).bind(d,r),l=(new Date).getTime()/1e3,a()}function r(e){var t=u?e.originalEvent.targetTouches[0].pageX:e.pageX,n=u?e.originalEvent.targetTouches[0].pageY:e.pageY;(Math.abs(t-v)>10||Math.abs(n-y)>10)&&c()}function a(){var e=(new Date).getTime()/1e3,o=e-l;o>=2?(m.triggerEleByState(t,n,i),b=!0):g=setTimeout(a,500)}function c(){if(b){if(n.targetStateReverse){var o=JSON.parse(JSON.stringify(n));switch(o.targetState){case s.show:o.targetState=s.hide,m.triggerEleByState(t,o,i);break;case s.hide:o.targetState=s.show,m.triggerEleByState(t,o,i);break;case s.toggleShow:m.triggerEleByState(t,n,i);break;case s.play:m.triggerEleByState(t,n,i)}}b=!1}clearTimeout(g),e.$li.unbind(h,c).unbind(f,c).unbind(d,r)}var l=0,g=null,m=this,v=0,y=0,b=!1;e.$li.find("img").addClass("taphold_image"),e.$li.on(p,o)}},{key:"addPageTrigger",value:function(e,t,i){if(window.DeviceMotionEvent){this.shakeAudio||(this.shakeAudio=document.createElement("audio"),this.shakeAudio.src=n(719));var o=this,r=4e3,a=0,s=0,c=0,l=0,u=100;this.iosCheck(e,t,i).then(function(){window.DeviceMotionEvent&&window.addEventListener("devicemotion",function(n){var p=n.accelerationIncludingGravity,d=p.x,h=p.y,f=p.z,g=(new Date).getTime();if(g-a>u){var m=parseInt(g-a);a=g;var v=Math.abs(d+h+f-s-c-l)/m*1e4;v>r&&i.displayed?(u=2e3,o.triggerEleByState(e,t,i)):u=100,s=d,c=h,l=f}},!1)})["catch"](function(){console.error("获取授权失败")})}}},{key:"getPermission",value:function(){return new Promise(function(e,t){window.DeviceMotionEvent.requestPermission().then(function(n){"granted"==n?e():t({type:1})})["catch"](function(){t({type:2})})})}},{key:"iosCheck",value:function(e,t,n){var i=this;return new Promise(function(o,r){var a=i;v()&&"undefined"!=typeof window.DeviceMotionEvent&&"function"==typeof window.DeviceMotionEvent.requestPermission?i.getPermission().then(function(){o()})["catch"](function(s){1===s.type?(!i.isShowFailModal&&m("yaoyiyao2",function(){a.triggerEleByState(e,t,n),r()}),i.isShowFailModal=!0):2===s.type&&(!i.isShowModal&&m("yaoyiyao",function(){i.getPermission().then(function(){$("body").append('<div class="yaoyiyaoInfo" style="position:fixed;top:0;left0;width:100%;height:30px;line-height:30px;background:#000;color:#fff;text-align:center;z-index:22">试试摇一摇手机吧<div>'),setTimeout(function(){$(".yaoyiyaoInfo").hide()},3e3),o()})["catch"](function(){m("yaoyiyao2",function(){a.triggerEleByState(e,t,n),r()})})}),i.isShowModal=!0)}):o()})}},{key:"triggerEleByState",value:function(e,t,n,i){if(window._tracker_api_&&window._tracker_api_.trigger)try{window._tracker_api_.trigger(n.pageJson.id+"_"+t.sourceId,t.eventType,c(e,t))}catch(o){}switch(t.targetState){case s.show:setTimeout(function(){e.eleShow(),e.triggerHide=!1},1e3*t.delay);break;case s.hide:setTimeout(function(){e.eleHide(),e.triggerHide=!0},1e3*t.delay);break;case s.random:e.busy||(e.busy=!0,setTimeout(function(){e.showRandomImg(),e.busy=!1},1e3*t.delay));break;case s.play:"o"==e.compJson.type?e.playVideo(i):e.soundAgent?(e.soundAgent.audio.paused?e.soundAgent.startPlay():e.soundAgent.stopPlay(),$(e.soundAgent.audio).on("ended",function(){return e.soundAgent.manager.onEnd(e.soundAgent)})):e.speechAgent&&(e.speechAgent.audio.paused?e.speechAgent.startPlay(!0):e.speechAgent.pausePlay(),$(e.speechAgent.audio).on("ended",function(){return e.speechAgent.manager.onEnd(e.speechAgent)}));break;case s.link:setTimeout(function(){t.targetContent.startsWith("http://")&&window.location.href.startsWith("https://")&&/eqs\/link\?id=\d+&url=(.*)/.test(t.targetContent)&&(t.targetContent=t.targetContent.replace("http://","https://")),/eqs\/link\?id=\d+&url=(.*)/.exec(t.targetContent)&&(t.targetContent=(/eqs\/link\?id=\d+&url=(.*)/.exec(t.targetContent)||[])[1]);var e=t.targetContent;y({checkUrl:e,sceneId:window.scene.id}).then(function(e){e?g(decodeURIComponent(t.targetContent),n.pageJson.id):window.open("https://check.eqxiu.com/back-check/static/url.html?jumpUrl="+t.targetContent,"_self")})},1e3*t.delay);break;case s.page:setTimeout(function(){e.eqxScene.pageScroll.goToPageById(+t.targetContent)},1e3*t.delay);break;case s.phone:window.location.href="tel:"+t.targetContent;break;case s.position:var r=e.compJson.css.top;-r>0?n.touchPos=0:-r<n.pLen?n.touchPos=n.pLen:n.touchPos=-r,n.doTransform(n.touchPos,100);break;case s.anim:e.eleHide(),e.$li.offset(),e.eleShow();break;case s.pageR:setTimeout(function(){var n=Math.floor(Math.random()*t.targetContent.length);e.eqxScene.pageScroll.goToPageById(+t.targetContent[n])},1e3*t.delay);break;case s.toggleShow:setTimeout(function(){"boolean"==typeof e.triggerHide?e.triggerHide?(e.eleShow(),e.triggerHide=!1):(e.eleHide(),e.triggerHide=!0):1==e.compJson.properties.initType?(e.eleHide(),e.triggerHide=!0):(e.eleShow(),e.triggerHide=!1)},1e3*t.delay);break;default:return!1}}},{key:"compHasTrigger",value:function(e,t){return e.some(function(e){return e.targetId===t&&(e.targetState===s.hide||e.targetState===s.show||e.targetState===s.toggleShow)})}}]),e}();e.exports=b},function(e,t,n){e.exports=n.p+"images/wxShake-3a1ea8.mp3"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(106),c=n(26).resolveUrl,l=n(24),u=n(27).isWeixin,p=n(69).getWxJSSDK,d=n(27).mobilecheck,h=n(27).isIOS,f=n(690),g=f.getMusic,m=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));r.manager=n;var a=r.master.pageJson.properties.music;return r.soundJson=a,r.type=6,u()&&(r.wxJssdk=p()),r.initAudio(),r.init$audio(),r.register(),r.addListeners(),r}return r(t,e),a(t,[{key:"initAudio",value:function(){this.isSoundValid()&&(this.audio=new window.Audio,
this.audio.src=c(l.FILE,this.soundJson.url),this.audio.loop=!0)}},{key:"init$audio",value:function(){this.isSoundValid()&&(this.$audio=$('<div class="bgm-btn"></div>'),this.$audio.appendTo(this.master.eqxScene.$ele))}},{key:"addListeners",value:function(){var e=this;this.$audio&&this.$audio.on(d()?"touchend":"click",function(t){t.stopPropagation(),e.audio.paused?e.start():e.pause()})}},{key:"start",value:function(){var e=this,t=this.master;if(t.displayed){var n=function(t,n){4===t.readyState?(t.paused&&t.play(),n()):(t.load(),$(t).one("canplay",function(){t.play(),n()}),$(t).on("error",function(){e.soundJson.url&&e.soundJson.url.indexOf("tingmall.com")!==-1&&g(e.soundJson.id).then(function(t){e.audio.src=t.url||t.src,e.update({type:"play"})})}))};if(this.isSoundValid()){var i=this,o=this.audio;u()?this.wxJssdk.then(function(){wx.checkJsApi({jsApiList:["checkJsApi"],success:function(){n(o,function(){i.startRotate(),i.manager.onPlay(i)})}})}):n(o,function(){i.startRotate(),i.manager.onPlay(i)})}else this.manager.onPlay(this)}}},{key:"pause",value:function(){this.audio&&this.audio.pause(),this.stopRotate(),this.manager.onEnd(this)}},{key:"hide",value:function(){this.$audio&&this.$audio.hide(),this.pause(),this.audio&&(this.audio.currentTime=0)}},{key:"destroy",value:function(){this.soundJson=null,this.audio=null,this.$audio=null}},{key:"down",value:function(){this.audio&&(this.audio.volume=.1)}},{key:"restore",value:function(){this.audio&&(this.audio.volume=1)}},{key:"startRotate",value:function(){this.$audio&&(this.$audio.show(),this.$audio.addClass("rotate"))}},{key:"stopRotate",value:function(){this.$audio&&this.$audio.removeClass("rotate")}},{key:"isSoundValid",value:function(){return!(!this.soundJson||!this.soundJson.url)}},{key:"update",value:function(e){switch(e.type){case"pause":this.pause();break;case"hide":this.hide();break;case"down":h()?this.pause():this.down();break;case"restore":h()?this.start():this.restore();break;case"play":this.start()}}}]),t}(s);e.exports=m},function(e,t){"use strict";function n(e){function t(){var t=e.sceneJson.meta.property,n="";return t&&t.orientation&&(n=t.orientation.curr),n||""}function n(){return"landscape"===t()}function i(){var e=t();return"portrait"===e||!e}return{getOrientation:t,isLandScape:n,isPortrait:i}}e.exports=n},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(716),c=n(24),l=n(622),u=n(27).mobilecheck,p=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.pixelRatio=1,r}return r(t,e),a(t,[{key:"render",value:function(){var e=this,t=this.eqxPage,n=t.pageJson,i=n.properties.longPage,o=void 0===i?null:i,r=o?o+"px":"100%",a=t.getPageWidth(),s=t.getPageHeight();return this.$layer=$('<section class="layer pip-layer" style="position: absolute;width: 100%;height: '+r+';">\n                <div class="layer-box" style="width: 100%;height: 100%;">\n                    <ul style="position: absolute;width: '+a+"px;height: "+s+'px;"></ul>\n                </div>\n            </section>'),this.$layerBox=this.$layer.find(".layer-box"),this.$ul=this.$layerBox.find("ul"),this.initPipCanvasNode(),this.renderPipButton(),setTimeout(function(){e.adaptive()}),this.$layer}},{key:"adaptive",value:function(){if(u()){var e=this.eqxPage,t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,n=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,i=e.getPageWidth(),o=e.getPageHeight(),r=(t-i)/2,a=(n-o)/2;if(t/i>n/o)var s=t/i;else s=n/o;this.$ul.css({left:r,top:a,transform:"scale("+s+")",transformOrigin:"center center 0"})}}},{key:"renderPipButton",value:function(){var e=this.eqxPage,t=e.pageJson.elements,n=void 0===t?[]:t,i=n.find(function(e){return"16"===e.type});if(i){var o=new l(i,this);this.renderEqxItem(o),e.pip.btn=o,e.pip.$btn=o.$li}}},{key:"initPipCanvasNode",value:function(){var e=this,t=e.eqxPage,n=t.pageJson.properties.pip,i=void 0===n?{}:n,o=t.pageJson.extend||{},r=o.screens,a=void 0===r?[]:r,s=t.pip={index:0,radio:1,fps:60,scale:.985,direction:1,init:!0},c=s.$pip=$('<li style="position: absolute;top: 0;left: 0;"></li>'),l=t.getPageWidth()||320,u=t.getPageHeight()||486,p=s.$canvas=$('<canvas style="width: '+l+"px;height: "+u+'px;"></canvas>'),d=a.filter(function(e){return!e.pipButton});2===i.mode&&(s.index=d.length-2,s.radio=e.__radio(d[s.index+1].thumbnail.w,l,d[s.index+1].area.width),s.direction=0),s.context=p[0].getContext("2d");var h=e._getPixelRatio(s.context);e.pixelRatio=h;var f=h*l,g=h*u;p[0].width=f,p[0].height=g,c.append(p),e.$ul.append(c),e._preload(d).then(function(){e._draw(s,i,d,f,g),e._bind$btnEvent(s,i,d,f,g)})["catch"](function(){console.log("画中画图片预加载失败")})}},{key:"__radio",value:function(e,t,n){var i=1;return i=e/t!==2?n/e:n/e*2}},{key:"_draw",value:function(e,t,n,i,o){function r(){e.direction=e.direction?0:1,1===t.mode&&e.direction?e.btn.showForwardButton():1!==t.mode||e.direction?2===t.mode&&e.direction?e.btn.showBackButton():2!==t.mode||e.direction||e.btn.showForwardButton():e.btn.showBackButton()}function a(e,t,n,r,a,s,c,u,p,d,h){l?e.drawImage(t,0,0,n,r,p/(a-c)*(1-h)*i,d/(s-u)*(1-h)*o,i*h,o*h):e.drawImage(t,0,0,n,r,p/(a/2-c)*(1-h)*i,d/(s/2-u)*(1-h)*o,i*h,o*h)}function s(e,t,n,r,a,s,c,u,p){s=r/n*a,l?e.drawImage(t,c-(a/p-a)*(c/(n-a)),u-(s/p-s)*(u/(r-s)),a/p,s/p,0,0,i,o):e.drawImage(t,2*(c-(a/p-a)*(c/(n/2-a))),2*(u-(s/p-s)*(u/(r/2-s))),2*a/p,2*s/p,0,0,i,o)}var c=this,l=!(n[e.index].thumbnail.w*c.pixelRatio/i==2);if(e.direction&&e.index+1<n.length){if(e.radio<c.__radio(n[e.index+1].thumbnail.w*c.pixelRatio,i,n[e.index+1].area.width*c.pixelRatio)){if(!n[++e.index+1])return void(t.playback&&(e.index=n.length-2,e.radio=c.__radio(n[e.index+1].thumbnail.w*c.pixelRatio,i,n[e.index+1].area.width*c.pixelRatio),r()));e.radio=1}}else{if(e.direction||!(e.index>=0))return;if(e.radio>1){if(!n[--e.index])return void(t.playback&&(e.index=0,e.radio=1,r()));e.radio=c.__radio(n[e.index+1].thumbnail.w*c.pixelRatio,i,n[e.index+1].area.width*c.pixelRatio)}}e.current=n[e.index],e.next=n[e.index+1],s(e.context,e.next.image,e.next.thumbnail.w,e.next.thumbnail.h,e.next.area.width,e.next.area.height,e.next.area.left,e.next.area.top,e.radio),a(e.context,e.current.image,e.current.thumbnail.w,e.current.thumbnail.h,e.next.thumbnail.w,e.next.thumbnail.h,e.next.area.width,e.next.area.height,e.next.area.left,e.next.area.top,e.radio)}},{key:"_getPixelRatio",value:function(e){var t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t}},{key:"_bind$btnEvent",value:function(e,t,n,i,o){var r=this;e.$btn.on("contextmenu",function(e){e.preventDefault()}).on("touchstart mousedown",function(a){function s(){var a=(new Date).getTime();if(e.index>=0&&e.index+1<n.length){if(a-c<1e3/e.fps)return void(e.timer=requestAnimationFrame(s));c=a}if(e.direction&&e.index+1<n.length)e.radio=e.scale*e.radio;else{if(e.direction||!(e.index>=0))return;e.radio=e.radio/e.scale}delete e.init,r._draw(e,t,n,i,o),e.timer=requestAnimationFrame(s)}a.preventDefault(),cancelAnimationFrame(e.timer);var c=(new Date).getTime();e.timer=requestAnimationFrame(s)}).on("touchend mouseup",function(t){t.preventDefault(),cancelAnimationFrame(e.timer)})}},{key:"_preload",value:function(e){var t=e.length,n=0;return new Promise(function(i,o){for(var r=0;r<t;r++){var a=e[r],s=a.image=new Image;a.thumbnail?(s.src=c.FILE+a.thumbnail.src,s.onload=function(){++n===t&&i()}):o({})}})}}]),t}(s);e.exports=p},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(191).getEvent,s=n(317).getSize,c=n(27),l=function(){function e(t){o(this,e),this._page=t,this.init()}return r(e,[{key:"open",value:function(){var e=this._page,t=e.pageJson.properties;t.oneShot=t.oneShot||{},t.oneShot.isOpen=!0,t.oneShot.perspective=t.oneShot.perspective||320,this.init()}},{key:"play",value:function(){var e=this,t=e._page,n=t.eqxScene.config.mode;if("view"===n&&e.options&&e.options.isOpen&&e.options.auto){var i=this.options,o=i.perspective,r=i.computePerspective,a=this._page.pageJson.properties.oneShot,s=a.speedModulus||2,c=s*r/o,l=e._oneShotMaxTranslateZ(),u=0;!function p(){return u>l||!t.$editDiv?void e.clearAnimation():(e.animationframe_controll=requestAnimationFrame(p),u+=c,void e._updateOneShot$ul(u))}()}}},{key:"reset",value:function(){this.options&&this.options.isOpen&&(this.position=0,this._updateOneShot$ul(0),this.clearAnimation())}},{key:"clearAnimation",value:function(){this.animationframe_controll&&cancelAnimationFrame(this.animationframe_controll)}},{key:"init",value:function(e){var t=this,n=this._page,i=n.pageJson,o=i.properties.oneShot,r=void 0===o?{}:o;if(r.isOpen){r.speedModulus||(r.speedModulus=2),isNaN(parseFloat(e))&&(e=parseFloat(r.perspective));var a=r.distance,l=void 0===a?320:a,u=this._page.eqxScene.meta.createTime;u/1e3>1537433626&&(e=Math.min(e,l)),r.computePerspective=e;var p=$('<div class="one-shot-container"></div>'),d=$('<div class="one-shot-change-wraper"></div>');this.$container=p,d.css({transformStyle:"preserve-3d",transform:"translateZ(0px)",height:"100%",width:"100%"}),this.options=r;var h=n.$editDiv;p.css({width:"100%",height:"100%",perspective:e+"px",transformOrigin:"50% 50% 0",transformStyle:"preserve-3d"}),this.options.deviceWidth=c.isPc()?320:s().width,this.options.showlimit=c.isAndroidPhone()?50:20,this.options.layerNum=n.eqxLayerList.length,n.$pageDiv.append(h),h.children("section.layer").appendTo(d),p.append(d),p.appendTo(h),this.change_element=d.get(0),this._updateOneShot$ul(0),this._addOneShotEvent(),this._caculateIsShow(0),Promise.resolve().then(function(){var e=t._page.eqxBackground,i=void 0===e?null:e;i&&i.$bgEle&&n.$editDiv.prepend(i.$bgEle)})}}},{key:"_updateOneShot$ul",value:function(e){var t=this.change_element;t&&(this._caculateIsShow(e),requestAnimationFrame(function(){t.style.webkitTransform=t.style.transform=t.style.mozTransform="translateZ("+e+"px)"}))}},{key:"_addOneShotEvent",value:function(){var e=this,t=this._page,n=t.eqxScene.config.mode;if("view"===n&&!this.options.auto){this.position=0;var i=void 0,o=void 0,r=void 0,s=void 0,c=!0,l=!1,u=this._oneShotMaxTranslateZ(),p=this.options,d=p.perspective,h=p.computePerspective,f=2*h/d;t.$pageDiv.on("mousedown touchstart",function(t){t.stopPropagation(),i=!0,r=0;var n=a(t);s=o=n.clientY;var p=e.position;p?p<=-u/f?(c=!1,l=!0):c=l=!1:(c=!0,l=!1)}),t.$pageDiv.on("mousemove touchmove",function(n){n.stopPropagation(),n.preventDefault();var a=n.originalEvent,p=a.changedTouches||a;if(i&&!(p.length>1)){var d=p[0]?p[0]:p,h=d.clientY-s;r=e.position+d.clientY-o,r>0?(o=d.clientY,e.position=0,r=0,c&&h>50&&t.eqxScene.pageScroll.goToPrePage()):r*f<-u?(o=d.clientY,e.position=-u/f,r=-u/f,l&&h<-50&&t.eqxScene.pageScroll.goToNextPage()):l&&h<-50&&t.eqxScene.pageScroll.goToNextPage(),e._updateOneShot$ul(-r*f)}}),t.$pageDiv.on("mouseup touchend mouseleave",function(){i&&(i=!1,0!==r&&(e.position=r))})}}},{key:"_oneShotMaxTranslateZ",value:function(){var e=this._page,t=Math.max.apply(Math,i(e.eqxLayerList.map(function(e){return parseFloat(e.translate3dz+1)||0})));return t}},{key:"_caculateIsShow",value:function(e){var t=this._page,n=this.options,i=n.computePerspective,o=n.distance,r=void 0===o?320:o,a=this;t.eqxLayerList.forEach(function(t,n){var o=a._caculateByDistance(i,r*n,e,a.options.showlimit)?"block":"none";t.$layer.css("display",o)})}},{key:"_caculateByDistance",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;if(n>t+e)return!1;var o=t-n;if(o<e)return!0;var r=e/(o+e),a=this.options.deviceWidth*r;return a>=i}}]),e}();e.exports=l,function(){for(var e=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var n=(new Date).getTime(),i=Math.max(0,16.7-(n-e)),o=window.setTimeout(function(){t(n+i)},i);return e=n+i,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}()},function(e,t){"use strict";function n(e){window!==window.parent&&window.parent.postMessage({product:"h5",location:e?e.pageJson.num:1},"*")}e.exports={brogastPz:n}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function h(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:h(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)},c=n(191).getEvent,l=n(723),u=n(27),p=u.mobilecheck,d=function(e){function t(e){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return r(t,e),a(t,[{key:"_addOneShotEvent",value:function(){var e=this;if(!p())return void s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_addOneShotEvent",this).call(this);var n=this._page,i=n.eqxScene.config.mode;if("view"===i&&!this.options.auto){this.position=0,this.positionX=0;var o=void 0,r=void 0,a=void 0,l=void 0,u=!0,d=!1,h=this._oneShotMaxTranslateZ(),f=this.options,g=f.perspective,m=f.computePerspective,v=2*m/g;n.$pageDiv.on("mousedown touchstart",function(t){t.stopPropagation(),o=!0,a=0;var n=c(t);l=r=n.clientX;var i=e.position;i?i<=-h/v?(u=!1,d=!0):u=d=!1:(u=!0,d=!1)}),n.$pageDiv.on("mousemove touchmove",function(t){t.stopPropagation(),t.preventDefault();var i=t.originalEvent,s=i.changedTouches||i;if(o&&!(s.length>1)){var c=s[0]?s[0]:s,p=c.clientX-l;a=e.position+r-c.clientX,a>0?(r=c.clientX,e.position=0,a=0,u&&p>-50&&e.goToPrePage(n)):a*v<-h?(r=c.clientX,e.position=-h/v,a=-h/v,d&&p>50&&e.goToNextPage(n)):d&&p>50&&e.goToNextPage(n),e._updateOneShot$ul(-a*v)}}),n.$pageDiv.on("mouseup touchend mouseleave",function(){o&&(o=!1,0!==a&&(e.position=a))})}}},{key:"goToPrePage",value:function(e){var t=e.eqxScene.pageScroll,n=t.getActivePageByMoveDistance(1),i=0;return i=n&&n.pageJson.properties.pageMode>=0?n.pageJson.properties.pageMode:e.eqxScene.meta.pageMode,n&&n.arrow?n.arrow.updatePageMode(i):n&&n.renderArrow(i),t.disableFlip()||!n?Promise.resolve():t.goToPageById(n.pageJson.id,!0)}},{key:"goToNextPage",value:function(e){var t=e.eqxScene.pageScroll,n=t.getActivePageByMoveDistance(-1),i=0;if(i=n&&n&&n.pageJson.properties.pageMode>=0?n.pageJson.properties.pageMode:e.eqxScene.meta.pageMode,n&&n.arrow?n.arrow.updatePageMode(i):n&&n.renderArrow(i),n&&n.arrow?n.arrow.updatePageMode(i):n&&n.renderArrow(i),t.disableFlip()||!n)return Promise.resolve();if(e.eqxScene.currentPage.pageJson.properties.longPage){var o=e.eqxScene.currentPage.dotransformPx();return o?t.goToPageById(n.pageJson.id,!1):Promise.resolve()}return t.goToPageById(n.pageJson.id,!1)}}]),t}(l);e.exports=d},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(c){o=!0,r=c}finally{try{!i&&s["return"]&&s["return"]()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(727),l=n(728),u=n(114),p=u.FtRuleType,d=n(729),h=d.isPlainObject,f=function(){function e(t){o(this,e),this.eqxPage=t;var n=this.eqxPage.pageJson.properties;this.parse(n.groupSettings)}return s(e,[{key:"flatRules",value:function(t){return e.flatRules(t)}},{key:"validRule",value:function(e){var t=this;return e.comps.forEach(function(e){var n=e.id,i=e.properties;i.forEach(function(e,o){var r="undefined"==typeof e?"undefined":a(e);if("object"===r){var s=t.eqxPage.getEqxItem(n);if(!s)return;for(var c=s.compJson.properties.items,l=-1,u=e.fill.join(","),p=0;p<c.length;p++)if(c[p].elements&&c[p].elements.join(",")===u){l=p;break}l>-1?i[o]="fill-"+l:i[o]="xxx"}})}),e}},{key:"validRules",value:function(e){var t=this,n=[];return(e||[]).forEach(function(e){t.validRule(e)&&n.push(e)}),n}},{key:"parse",value:function(e){var t=this,n=this.eqxPage;n.getEqxItems().forEach(function(e){e._ft=null}),e=this.flatRules(e);var i=this.validRules(e).filter(function(e){var t=e.type,i=e.comps.filter(function(e){var i=e.id,o=e.properties,r=n.getEqxItem(i);if(!r)return!1;var a=r.filterEditableProps();return o=o.filter(function(e){var n=t+"."+e;return a.includes(n)}),o.length});return i.length}).map(function(e){return new l(e,t)});this.ftRules=i;var o=this.eqxPage.pageJson.properties;return this.rules=o.groupSettings=this.toJson(),i}},{key:"toJson",value:function(){return this.ftRules.map(function(e){return e.toJson()})}},{key:"getEqxItemRelativeFtRules",value:function(e){if(e.isGroupItem()){var t=e.getAllSubEqxItems(),n=[];return this.ftRules.forEach(function(e){var i=e.getEqxItems().some(function(e){return t.includes(e)});i&&n.push(e)}),n}return this.getEqxItemFtRules(e)}},{key:"getEqxItemFtRules",value:function(e){var t=[];return this.ftRules.forEach(function(n){n.getEqxItems().includes(e)&&t.push(n)}),t}},{key:"filterValidFtRules",value:function(){for(var e=0;e<this.ftRules.length;e++){var t=this.ftRules[e],n=t.filterValidFtTerms();n&&e--}}},{key:"findFtTerm",value:function(e,t){for(var n=t.split("."),i=r(n,2),o=i[0],a=i[1],s=0;s<this.ftRules.length;s++){var c=this.ftRules[s];if(c.type===o){var l=c.ftTerms.find(function(t){return t.canApplyTo(e,a)});if(l)return l}}}},{key:"addFtRule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ftRules.length;if(e instanceof c?(e.ftRule.deleteFtTerm(e,!0),e=l.ftTermToFtRule(e,this)):e instanceof l||this.validRule(e)&&(e=new l(e,this)),!this.ftRules.includes(e))return this.ftRules.splice(t,0,e),e}},{key:"addFtRules",value:function(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ftRules.length?this.ftRules.length-1:0;return h(t[0])&&(t=e.flatRules(t)),t.filter(function(e){var t=n.addFtRule(e,i);if(t)return i++,!0})}},{key:"convertFtTermToFtRule",value:function(e,t){e.ftRule.deleteFtTerm(e,!0),this.addFtRule(e,t)}},{key:"extractFtTermIntoFtRule",value:function(e,t,n){e&&t&&this.canMerge([e.ftRule,t])&&(e.ftRule.deleteFtTerm(e,!0),t.addFtTerm(e,n||0))}},{key:"splitFtRule",value:function(e){var t=this.ftRules.indexOf(e);if(t>-1&&e.ftTerms.length>1){this.deleteFtRule(e);var n=e.split();return this.addFtRules(n,t)}}},{key:"filterSameTypeFtRules",value:function(e){var t=e.type;return this.ftRules.filter(function(e){return e.type===t})}},{key:"canMerge",value:function(e){if(e.length<2)return!1;for(var t=e[0].type,n=1;n<e.length;n++)if(e[n].type!==t)return!1;return!0}},{key:"mergeFtRules",value:function(e){var t=this;if(e=e.filter(function(e){return t.ftRules.includes(e)}),this.canMerge(e)){var n=e[0];return n.mergeFtRules(e.slice(1)),n}}},{key:"deleteFtTerm",value:function(e,t){e.ftRule.deleteFtTerm(e,t)}},{key:"deleteFtRule",value:function(e){var t=this.ftRules.indexOf(e);return t>-1&&(this.ftRules.splice(t,1),!0)}},{key:"sortFtRule",value:function(e,t){var n=this.ftRules.length;t<0&&(t=0),t>n-1&&(t=n-1);var i=this.ftRules.indexOf(e);return i!==-1&&(this.ftRules.splice(i,1),this.ftRules.splice(t,0,e),!0)}},{key:"sortFtTerm",value:function(e,t){return e.ftRule.sortFtTerm(e,t)}}],[{key:"flatRules",value:function(e){if(!e||Array.isArray(e)){var t=[];return(e||[]).forEach(function(e){e.type===p.editGroup?t.push.apply(t,i(e.comps)):t.push(e)}),t}}}]),e}();e.exports=f},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(114),a=r.getEditPropName,s=r.FtRuleType,c=r.FtEditableProps,l=n(124),u=function(){function e(t,n){i(this,e),this.id=t.id,this.prop=t.prop,this.ftRule=n,this.eqxItem=this.ftRule.ftManager.eqxPage.getEqxItem(this.id),this.name=a(this.getFullPropKey())}return o(e,[{key:"getEqxItemFtValue",value:function(){return this.eqxItem&&this.eqxItem.getFtValue(this.getFullPropKey())}},{key:"getFullPropKey",value:function(){return this.ftRule.type+"."+this.prop}},{key:"isValid",value:function(){return this.eqxItem&&!this.eqxItem.isOrphan()&&this.eqxItem.isPropCanEdit(this.getFullPropKey())}},{key:"apply",value:function(){switch(this.ftRule.type){case s.color:return this._applyColor.apply(this,arguments);case s.image:return this._applyImage.apply(this,arguments);case s.content:return this._applyContent.apply(this,arguments);case s.link:return this._applyLink.apply(this,arguments);case s.internalLink:return this._applyInternalLink.apply(this,arguments);case s.telephone:return this._applyPhone.apply(this,arguments);case s.sound:return this._applySound.apply(this,arguments);case s.time:return this._applyTime.apply(this,arguments);case s.code:return this._applyCode.apply(this,arguments);case s.video:return this._applyVideo.apply(this,arguments);case s.input:return this._applyInput.apply(this,arguments);case s.tRandom:return this._applyTRandom.apply(this,arguments);case s.iRandom:return this._applyIRandom.apply(this,arguments)}}},{key:"_applyIRandom",value:function(e){var t=this.eqxItem;return t.compJson.properties.imgs=e,t.updateImg(e[0].src),t}},{key:"_applyTRandom",value:function(e){var t=this.eqxItem;return t.compJson.properties.texts=e,t.updateContent(e[0]),t}},{key:"_applyInput",value:function(e){var t={501:"姓名",502:"电话",503:"邮箱",504:"文本"},n=this.eqxItem;return n.compJson.properties.placeholder=t[e],n.compJson.title=t[e],n.compJson.type=e,n.setInputTitle(t[e]),n}},{key:"_applyVideo",value:function(e){var t=this.eqxItem,n=t.compJson;return n.src=e,t.updateJson(n),t.eqxPage.renderEqxComp(t,!0),t}},{key:"_applyCode",value:function(e){var t=this.eqxItem,n=t.compJson;return n.content=e,t}},{key:"_applyTime",value:function(e){var t=new Date(e).getTime(),n=this.eqxItem;return"e"===n.type?n.updateProp("endTime",t):n.updateProp("startTime",t),n.updateJson(n.compJson),n.eqxPage.renderEqxComp(n,!0),n}},{key:"_updateTrigger",value:function(e,t,n){var i=this.eqxItem,o=i.triggerManager.findEqxItemTriggerItem(i,e,t);if(!o)throw new Error("no trigger");return o.targetContent=n,i}},{key:"_applySound",value:function(e){var t=this.eqxItem;return t.compJson.sound={id:e.id,name:e.name,src:e.src},t.updateJson(t.compJson),t.eqxPage.renderEqxComp(t,!0),t}},{key:"_applyPhone",value:function(e){return this._updateTrigger("click","phone",e)}},{key:"_applyInternalLink",value:function(e){return this._updateTrigger("click","page",e)}},{key:"_applyLink",value:function(e){var t=this._updateTrigger("click","link",this.eqxItem.getLinkUrl(e));return t}},{key:"_applyContent",value:function(e,t){return this.eqxItem.updateContent(e),this.eqxItem.autoAdjustSize(t,!0)}},{key:"_applyImage",value:function(e,t){return this.eqxItem.editImage(e,t)}},{key:"_applyColor",value:function(e){var t=c,n=this.eqxItem,i=this.ftRule.type+"."+this.prop;if(0===i.indexOf(t.color.fill)){var o=+i.split("-")[1];return n.updateFillColor(o,e),n}switch(i){case t.color.backgroundColor:n.update$boxDiv({backgroundColor:e});break;case t.color.boxShadowColor:var r=l.parseBoxShadow(n.compJson.css.boxShadow);r.color=e;var a=l.getBoxShadowStr(r);n.update$boxDiv({boxShadow:a});break;case t.color.borderColor:n.update$boxDiv({borderColor:e});break;case t.color.color:n.update$boxDiv({color:e});break;case t.color.counterColor:n.update$iconColor(e)}return n}},{key:"deleteSelf",value:function(e){this.ftRule.deleteFtTerm(this,e)}},{key:"canApplyTo",value:function(e,t){return this.eqxItem===e&&this.prop===t}},{key:"parse",value:function(){}},{key:"toFtRuleJson",value:function(){var e=this.ftRule.toJson();return e.comps=[this.toJson()],e}},{key:"toJson",value:function(){return{id:this.id,properties:[this.prop]}}}]),e}();e.exports=u},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(114),s=a.FtRuleType,c=a.getEditPropName,l=a.FtRuleName,u=n(727),p=function(){function e(t,n){o(this,e),this.ruleJson=t,this.ftManager=n,this.ftTerms=this.parse()}return r(e,[{key:"isGroupRule",value:function(){var e=s;return[e.addGroup,e.moveGroup,e.deleteGroup,e.editGroup].includes(this.type)}},{key:"parse",value:function(){var e=this.ruleJson;this.type=e.type,this.value=e.value;var t=this.parseFtTermsByRuleJson(e);return this.calName(e.name,t),t}},{key:"calName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ftTerms;if(e)this.name=e;else{var n=t.length;if(0===n)return void(this.name="");if(1===n)var i=c(this.type+"."+t[0].prop);else i=l[this.type];var o=i.length,r=t.map(function(e){return e.eqxItem.getName()}).join("&"),a=r.length;a>14-o&&(r=r.substr(0,14-i.length)+"..."),this.name=r+"-"+i}}},{key:"toJson",value:function(){var e=this.ftTerms.map(function(e){return e.toJson()});return{name:this.name,type:this.type,value:this.value,comps:e}}},{key:"toEmptyJson",value:function(){return{name:this.name,type:this.type,value:this.value,comps:[]}}},{key:"deleteSelf",value:function(){this.ftManager.deleteFtRule(this)}},{key:"filterValidFtTerms",value:function(){for(var e=0;e<this.ftTerms.length;e++){var t=this.ftTerms[e];if(!t.isValid()){var n=this.deleteFtTerm(t);n&&e--}}if(!this.ftTerms.length)return this.deleteSelf(),!0}},{key:"apply",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=this.ftTerms.map(function(e){return e.apply.apply(e,t)});return this.updateFtValue(),i}},{key:"updateFtValue",value:function(){this.ftTerms[0]?this.value=this.ftTerms[0].getEqxItemFtValue():this.value=0}},{key:"getEqxItems",value:function(){var e=[];return this.ftTerms.forEach(function(t){e.includes(t.eqxItem)||e.push(t.eqxItem)}),e}},{key:"parseFtTermsByRuleJson",value:function(e){var t=this,n=[];return e.comps.forEach(function(e){e.properties.forEach(function(i){n.push(new u({id:e.id,prop:i},t))})}),n}},{key:"split",value:function(){var t=this;return this.ftTerms.map(function(n){var i={type:t.type,value:t.value,comps:[n.toJson()]};return new e(i,t.ftManager)})}},{key:"sortFtTerm",value:function(e,t){var n=this.ftTerms.length;t<0&&(t=0),t>n-1&&(t=n-1);var i=this.ftTerms.indexOf(e);return i!==-1&&(this.ftTerms.splice(i,1),this.ftTerms.splice(t,0,e),!0)}},{key:"mergeFtRule",value:function(e){var t=this;e.ftTerms.forEach(function(e){e.ftRule=t,t.ftTerms.push(e)}),this.ftManager.deleteFtRule(e)}},{key:"mergeFtRules",value:function(e){var t=this;e.forEach(function(e){return t.mergeFtRule(e)})}},{key:"addFtTerm",value:function(e){var t,n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ftTerms.length;if(e instanceof u){e.ftRule=this;var r=[e]}else{var a=e;r=a.properties.map(function(t){return new u({id:e.id,prop:t},n)})}var s=this.ftTerms.length;o<0&&(o=0),o>s-1&&(o=s-1),(t=this.ftTerms).splice.apply(t,[o,0].concat(i(r))),this.calName()}},{key:"deleteFtTerm",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.ftTerms.indexOf(e);return n>-1?(this.ftTerms.splice(n,1),t&&!this.ftTerms.length&&this.ftManager.deleteFtRule(this),!0):void this.calName()}}],[{key:"ftTermToFtRule",value:function(t,n){var i=t.ftRule.toEmptyJson(),o=new e(i,n);return o.addFtTerm(t),o}}]),e}();e.exports=p},function(e,t){"use strict";function n(e){var t=Object.assign({},e);return s(t),t}function i(e,t){return Object.prototype.toString.call(e).toLowerCase()==="[object "+t+"]"}function o(e){return i(e,"object")}function r(e){return i(e,"array")}function a(e){e.forEach(function(e){r(e)?a(e):o(e)&&s(e)})}function s(e){for(var t in e)e.hasOwnProperty(t)&&(t.startsWith("$")?delete e[t]:r(e[t])?a(e[t]):o(e[t])&&s(e[t]))}function c(e,t){return JSON.stringify(e)===JSON.stringify(t)}function o(e){return null!=e&&"object"===("undefined"==typeof e?"undefined":p(e))&&Array.isArray(e)===!1}function l(e){return o(e)===!0&&"[object Object]"===Object.prototype.toString.call(e)}function u(e){var t,n;return l(e)!==!1&&(t=e.constructor,"function"==typeof t&&(n=t.prototype,l(n)!==!1&&n.hasOwnProperty("isPrototypeOf")!==!1))}var p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports={remove$key:n,isSameValue:c,isObject:o,isArray:r,isPlainObject:u}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),
i&&e(t,i),t}}(),r=n(121),a=r.RAW_EVENT,s=r.EQX_EVENT,c=function(){function e(t){i(this,e),this.page=t}return o(e,[{key:"findEqxItemTriggerItem",value:function(e,t,n){var i=e.eqxPage,o=i.pageJson.properties.triggerGroup;return o.find(function(i){return i.eventType==a[t]&&i.sourceId==e.id&&i.targetState==s[n]})}},{key:"addTriggers",value:function(e){if(Array.isArray(e)&&e.length)for(var t=this.page.pageJson,n=t.properties,i=n.triggerGroup=n.triggerGroup||[],o=function(t){var n=e[t],o=i.findIndex(function(e){return e.eventType===n.eventType&&e.sourceId===n.sourceId&&e.targetId===n.targetId});return o>=0?"continue":void i.push(n)},r=0;r<e;r++){o(r)}}}]),e}();e.exports=c},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t,i){n(this,e),this.config=t,this.page=i,this.init()}return i(e,[{key:"init",value:function(){var e=this.config,t=this.page,n=t.eqxScene.config.mode,i=this.page.eqxLayerList;if(this.layers=i,this.count=i.length,this.current=0,"view"===n&&e.used){i.length>0&&i[0].show();for(var o=1;o<i.length;o++)i[o].hide();this.current=1}}},{key:"reset",value:function(){this.layers.length>0&&this.layers[0].show();for(var e=this.layers,t=1;t<e.length;t++)e[t].hide();this.stop(),this.current=1}},{key:"play",value:function(){var e=this.config,t=this.page,n=t.eqxScene.config.mode;"view"===n&&e.used&&this.playEqxLayer()}},{key:"stop",value:function(){this.loopTimer&&clearTimeout(this.loopTimer)}},{key:"playEqxLayer",value:function(){var e=this;return this.stop(),this.current===this.count?void console.log("快闪播放结束"):void(this.loopTimer=setTimeout(function(){if(!(e.current>=e.count)){for(var t=0;t<e.layers.length;t++)e.current===t?e.layers[e.current].show():e.layers[t].hide();e.current++,e.playEqxLayer()}},this.defaultDuration()))}},{key:"defaultDuration",value:function(){function e(e){for(var t=e.getEqxComps(),n=0,i=0;i<t.length;i++)for(var o=t[i],r=o.compJson.properties.anim,a=void 0===r?[]:r,s=0;s<a.length;s++){var c=a[s],l=c.countNum,u=c.duration,p=c.delay;if(c.count)n=Math.max(n,u+p);else if(1==c.animClassify){var d,h=o.$context.text(),f=c.textInterval,g=/(\b[a-zA-Z]+\b)|[\u4e00-\u9fa5]|[\.\<\>\《\》\。\-\——\_\?\!\？\！\:\：\;\；]/g,m=h.match(g);d=m?l*(u+(m.length-1)*f)+p:l*u+p,n=Math.max(n,d)}else n=Math.max(n,l*u+p)}return 1e3*n}if(this.current>=this.count)return 100;var t=this.layers[this.current-1],n=t.json.flash,i=void 0===n?{}:n,o=i.durationType,r=void 0===o?0:o,a=i.duration,s=void 0===a?null:a;if(0===r){var c=e(t);0==c&&(c=2e3)}else 1===r&&s>=0&&(c=1e3*s);return c}}]),e}();e.exports=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t,i){n(this,e),this.config=t,this._page=i,this.init()}return i(e,[{key:"init",value:function(){var e=this.config,t=this._page,n=t.eqxScene.config.mode,i=this._page.eqxLayerList;if(this.layers=i,this.count=i.length,t.pageJson.extend.mockItems=[],"view"===n&&e.used){i[0].show();for(var o=1;o<i.length;o++)i[o].hide();this.current=1}}}]),e}();e.exports=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t,i){n(this,e),this.config=t,this._page=i,this.init()}return i(e,[{key:"init",value:function(){var e=this.config,t=this._page,n=t.eqxScene.config.mode,i=this._page.eqxLayerList;if(this.layers=i,this.count=i.length,"view"===n&&e.used){i[0].show();for(var o=1;o<i.length;o++)i[o].hide();this.current=1}}}]),e}();e.exports=o},function(e,t,n){e.exports=n.p+"images/default-head-img-b3de00.png"},function(e,t,n){e.exports=n.p+"images/wechat-26725d.mp3"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function h(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:h(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)},c=n(169),l=n(64).isBottomArrow,u=n(64).PAGE_MODE,p=n(702),d=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),a=e.properties.longPage;r.scrollMode=l(r.pageMode)?"NS":"WE",r.pageScale();var s=window.VIEW_SCENE_NR_HEIGHT&&window.VIEW_SCENE_NR_HEIGHT>0&&r.height>window.VIEW_SCENE_NR_HEIGHT?window.VIEW_SCENE_NR_HEIGHT:r.height;return r.pLen=-(a*r.longPageScaleRatio-s)>0?0:-(a*r.longPageScaleRatio-s),r}return r(t,e),a(t,[{key:"pageScale",value:function(){var e;e=window.top===window?1:this.width/this.height<=320/486?this.width/320:this.height/486,this.longPageScaleRatio=e}},{key:"renderArrow",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"renderArrow",this).call(this),"WE"==this.scrollMode&&(this.bottomArrow=new p(u["上下翻页"],this),this.$pageDiv.append(this.bottomArrow.$arrow))}},{key:"addEventListener",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addEventListener",this).call(this),this.addTouchEvent()}},{key:"active",value:function(){this.resetLongPage();var e=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"active",this).call(this);return e}},{key:"resetLongPage",value:function(){this.touchPos=0,this.doTransform(0,0)}},{key:"addTouchEvent",value:function(){function e(e){for(var t=this.renderEqxList,i=t.length;i--;){var r=t[i],a=r.compJson.css.top*n.longPageScaleRatio||"";a=parseInt(a.toString().replace("px",""));var s=r.$li.css("display");a>o&&a+e<o&&!r.triggerHide&&1==r.compJson.properties.initType&&("list-item"===s||"none"===s)&&(r.eleShow(),t.splice(i,1)),"block"==s&&t.splice(i,1)}}var t=this,n=this;if("edit"!==this.eqxScene.config.mode){var i=this.pLen,o=this.height,r=this.$pageDiv,a=this.$editDiv,s=this.scrollMode,c=this.eqxCompList;this.renderEqxList=c.slice();var l=this.$transformArea=a;this.touchPos=0;var u,p,d,h,f,g=0,m=0,v=0;r.on("mousedown touchstart",function(e){if(!n.hasCoverEffect){e.stopPropagation(),u=!0,d=0;var t=e.originalEvent,i=t.touches,o=i?t.changedTouches[0]:null;p=o?o.clientY:e.clientY,"WE"==s&&(h=o?o.clientX:e.clientX),m=n.touchPos,g=Date.now()}}),r.on("mousemove touchmove",function(o){var r=t.eqxScene.pageScroll,a=t.pageJson.properties.pageScroll.disableFlip;if(o.stopPropagation(),o.preventDefault(),u){var c=o.originalEvent,l=c.touches,y=l?l[0]:null;if(d=n.touchPos+(y?y.clientY:o.clientY)-p,"WE"===s&&(f=(y?y.clientX:o.clientX)-h,Math.abs(f)>Math.abs(d-n.touchPos)&&!t.forbidHandFlip))return f>0?r.goToPrePage():r.goToNextPage(),void(u=!1);if(d>0&&"NS"===s&&!t.forbidHandFlip&&!a)return r.goToPrePage(),u=!1,void(n.touchPos=0);if(d>i&&d<0)e.call(t,d),n.doTransform(d,0);else if(d<i-5&&"NS"===s&&!t.forbidHandFlip&&!a)return r.goToNextPage(),u=!1,void(n.touchPos=i);v=Date.now(),v-g>300&&(g=v,m=d)}}),r.on("mouseup touchend mouseleave",function(){if(u)if(u=!1,d>i&&d<0){var e=Date.now(),t=(d-m)/(e-g);Math.abs(t)>5&&(t=t>0?1:-1);var o=Math.abs(t/.002),r=t*o/2;d+=r,d>0?(o=(d-0)/r*o,d=0):d<i&&(o=(d-i)/r*o,d=i),n.doTransform(d,o),n.touchPos=d,n.bottomArrow&&(n.bottomArrow.remove(),n.bottomArrow=null)}else d>0?n.touchPos=0:d<=i&&(n.touchPos=i),n.doTransform(n.touchPos,0)}),l.on("transitionend",function(i){i.target==l[0]&&e.call(t,n.touchPos)})}}},{key:"dotransformPx",value:function(){var e=this.pLen-this.touchPos;return 0===e||(e>-250&&e<0?this.touchPos=this.touchPos+e:this.touchPos=this.touchPos-250,this.doTransform(this.touchPos,300),!1)}},{key:"doTransform",value:function(e,t){var n=this;if("edit"!==this.eqxScene.config.mode){var i=this.$transformArea;if(i.length){var o=i.find(".alock"),r=i.get(0).style.transform?i.get(0).style.transform.replace(/translate3d\(.*?\)/g,""):"none",a="translate3d(0,"+e+"px,0)";if("none"!==r&&(a=r+" "+a),this.transformEle(i,a,t),o.length>0){var s,c,l=Array.prototype.slice.call(o);l.forEach(function(i){s=i.style.transform.replace(/translate3d\(.*?\)/g,""),c="none"===s&&s?"translate3d(0,"+-e/n.longPageScaleRatio+"px,0)":"translate3d(0,"+-e/n.longPageScaleRatio+"px,0) "+s,n.transformEle($(i),c,t)})}}}}},{key:"transformEle",value:function(e,t,n){if("edit"!==this.eqxScene.config.mode){if(e.css({transition:"","-webkit-transition":""}),n){var i="transform "+n+"ms ease-out";e.css({transition:i,"-webkit-transition":"-webkit-"+i})}e.css({transform:t,"-webkit-transform":"-webkit-"+t})}}}]),t}(c);e.exports=d},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function g(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:g(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)},c=n(169),l=n(64).isBottomArrow,u=n(64).PAGE_MODE,p=n(702),d=n(27).mobilecheck,h=n(157).perfectLandScapePage,f=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));r.scrollMode=l(r.pageMode)?"NS":"WE";var a=e.properties.longPage;r.pageScale();var s=window.VIEW_SCENE_NR_HEIGHT&&window.VIEW_SCENE_NR_HEIGHT>0&&r.height>window.VIEW_SCENE_NR_HEIGHT?window.VIEW_SCENE_NR_HEIGHT:r.height;return r.pLen=-(a*r.longPageScaleRatio-s)>0?0:-(a*r.longPageScaleRatio-s),r}return r(t,e),a(t,[{key:"pageScale",value:function(){var e;e=window.top===window?1:this.width/this.height<=320/486?this.width/320:this.height/486,this.longPageScaleRatio=e}},{key:"renderArrow",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"renderArrow",this).call(this),"WE"==this.scrollMode&&(this.bottomArrow=new p(u["左右翻页"],this),this.$pageDiv.append(this.bottomArrow.$arrow))}},{key:"addEventListener",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addEventListener",this).call(this),this.addTouchEvent()}},{key:"active",value:function(){this.resetLongPage();var e=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"active",this).call(this);return e}},{key:"resetLongPage",value:function(){this.touchPos=0,this.doTransform(0,0)}},{key:"toSaveJson",value:function(){var e=this.toPageJson(),t=JSON.parse(JSON.stringify(e));return h(t)}},{key:"addTouchEvent",value:function(){function e(e){for(var t=this.renderEqxList,n=t.length;n--;){var i=t[n],o=i.compJson.css.top*s.longPageScaleRatio||"";o=parseInt(o.toString().replace("px",""));var r=i.$li.css("display");o>l&&o+e<l&&!i.triggerHide&&1==i.compJson.properties.initType&&("list-item"===r||"none"===r)&&(i.eleShow(),t.splice(n,1)),"block"==r&&t.splice(n,1)}}function t(e){if(m)if(m=!1,y>c&&y<0){var t=Date.now(),n=(y-k)/(t-w);Math.abs(n)>5&&(n=n>0?1:-1);var i=Math.abs(n/.002),o=n*i/2;y+=o,y>0?(i=(y-0)/o*i,y=0):y<c&&(i=(y-c)/o*i,y=c),s.doTransform(y,i),s.touchPos=y,s.bottomArrow&&(s.bottomArrow.remove(),s.bottomArrow=null)}else y>0?s.touchPos=0:y<=c&&(s.touchPos=c),s.doTransform(s.touchPos,0)}function n(e){if(m)if(m=!1,x>c&&x<0){var t=Date.now(),n=(x-k)/(t-w);Math.abs(n)>5&&(n=n>0?1:-1);var i=Math.abs(n/.002),o=n*i/2;x+=o,x>0?(i=(x-0)/o*i,x=0):x<c&&(i=(x-c)/o*i,x=c),s.doTransform(x,i),s.touchPos=x,s.bottomArrow&&(s.bottomArrow.remove(),s.bottomArrow=null)}else x>0?s.touchPos=0:x<=c&&(s.touchPos=c),s.doTransform(s.touchPos,0)}function i(t){var n=s.eqxScene.pageScroll,i=s.pageJson.properties.pageScroll.disableFlip;if(m){var o=t.originalEvent,r=o.touches,a=r?r[0]:null;if(x=s.touchPos+(a?a.clientX:t.clientX)-b,"NS"===h&&(y=(a?a.clientY:t.clientY)-v,Math.abs(y)>Math.abs(x-s.touchPos)&&!s.forbidHandFlip))return y<0?n.goToNextPage():x>=0&&n.goToPrePage(),void(m=!1);if(x>0&&"WE"===h&&!s.forbidHandFlip&&!i)return n.goToPrePage(),m=!1,void(s.touchPos=0);if(x>c&&x<0)e.call(s,x),s.doTransform(x,0);else if(x<c-5&&"WE"===h&&!s.forbidHandFlip&&!i)return n.goToNextPage(),m=!1,void(s.touchPos=c);S=Date.now(),S-w>300&&(w=S,k=x)}}function o(t){var n=s.eqxScene.pageScroll,i=s.pageJson.properties.pageScroll.disableFlip;if(m){var o=t.originalEvent,r=o.touches,a=r?r[0]:null;if(y=s.touchPos+(a?a.clientY:t.clientY)-v,x=s.touchPos+(a?a.clientX:t.clientX)-b,"NS"===h&&(x=(a?a.clientX:t.clientX)-b,Math.abs(x)>Math.abs(y-s.touchPos)&&!s.forbidHandFlip))return x>0?n.goToNextPage():y>=0&&n.goToPrePage(),void(m=!1);if(y>0&&"WE"===h&&!s.forbidHandFlip&&!i)return n.goToPrePage(),m=!1,void(s.touchPos=0);if(y>c&&y<0)e.call(s,y),s.doTransform(y,0);else if(y<c-5&&"WE"===h&&!s.forbidHandFlip&&!i)return n.goToNextPage(),m=!1,void(s.touchPos=c);S=Date.now(),S-w>300&&(w=S,k=y)}}function r(e){m=!0,y=0,x=0;var t=e.originalEvent,n=t.touches,i=n?t.changedTouches[0]:null;v=i?i.clientY:e.clientY,b=i?i.clientX:e.clientX,k=s.touchPos,w=Date.now()}var a=this,s=this;if("edit"!==this.eqxScene.config.mode){var c=this.pLen,l=this.height,u=this.$pageDiv,p=this.$editDiv,h=this.scrollMode,f=this.eqxCompList;this.renderEqxList=f.slice();var g=this.$transformArea=p;this.touchPos=0;var m,v,y,b,x,w=0,k=0,S=0;u.on("mousedown touchstart",function(e){s.hasCoverEffect||(e.stopPropagation(),r(e))}),u.on("mousemove touchmove",function(e){e.stopPropagation(),e.preventDefault(),d()?o(e):i(e)}),u.on("mouseup touchend mouseleave",function(){d()?t():n()}),g.on("transitionend",function(t){t.target==g[0]&&e.call(a,s.touchPos)})}}},{key:"dotransformPx",value:function(){var e=this.pLen-this.touchPos;return 0===e||(e>-250&&e<0?this.touchPos=this.touchPos+e:this.touchPos=this.touchPos-250,this.doTransform(this.touchPos,300),!1)}},{key:"doTransform",value:function(e,t){var n=this;if("edit"!==this.eqxScene.config.mode){var i=this.$transformArea,o=i.find(".alock"),r=i.get(0).style.transform?i.get(0).style.transform.replace(/translate3d\(.*?\)/g,""):"none",a="translate3d(0,"+e+"px,0)";if("none"!==r&&(a=r+" "+a),this.transformEle(i,a,t),o.length>0){var s,c,l=Array.prototype.slice.call(o);l.forEach(function(i){s=i.style.transform.replace(/translate3d\(.*?\)/g,""),c="none"===s&&s?"translate3d(0,"+-e/n.longPageScaleRatio+"px,0)":"translate3d(0,"+-e/n.longPageScaleRatio+"px,0) "+s,n.transformEle($(i),c,t)})}}}},{key:"transformEle",value:function(e,t,n){if("edit"!==this.eqxScene.config.mode){if(e.css({transition:"","-webkit-transition":""}),n){var i="transform "+n+"ms ease-out";e.css({transition:i,"-webkit-transition":"-webkit-"+i})}e.css({transform:t,"-webkit-transform":"-webkit-"+t})}}}]),t}(c);e.exports=f},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function u(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:u(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)},c=n(169),l=function(e){function t(e,n){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return r(t,e),a(t,[{key:"show",value:function(){return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this),this}}]),t}(c);e.exports=l},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(169),c=n(157).perfectLandScapePage,l=function(e){function t(e,n){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return r(t,e),a(t,[{key:"toSaveJson",value:function(){var e=this.toPageJson(),t=JSON.parse(JSON.stringify(e));return c(t)}}]),t}(s);e.exports=l},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){s({fontFamily:e,textContent:"0123456789/",compId:"eqx-progress-bar"})}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(741);var a=n(165),s=a.getFontFamilyStyle,c=n(742),l=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments[2],r=arguments[3];i(this,e),this.eqxScene=r,this.meta=r.meta;var a=this.$progress=$('<div class="eqx-progress-bar"></div>'),s=this.$progressBar=$("<span></span>"),c=this.$slideNumber=$('<em class="page-tip"></em>');if(this.meta.property.orientation&&"landscape"===this.meta.property.orientation.curr){var l=r.height;a.addClass("eqx-progress-bar__landscape"),a.css({width:l})}this.setProgressBarStyle(),a.append([s,c]),this.lastText="",this.config=o,this.update(n,t)}return r(e,[{key:"isLandScape",value:function(){return this.meta.property.orientation&&"landscape"===this.meta.property.orientation.curr}},{key:"update",value:function(e,t){var n=e+"/"+t;if(n!==this.lastText){this.lastText=n,this.$slideNumber.text(n);var i=this.isLandScape()?this.eqxScene.height:320;this.$progressBar.css("width",i*e/t)}}},{key:"decide",value:function(){var e=this.meta.property.slideNumber&&!this.config.disableProgressBar;e?this.show():this.hide()}},{key:"hide",value:function(){this.$progress.hide()}},{key:"show",value:function(){this.$progress.show()}},{key:"removeProgressBarStyle",value:function(){var e=this;Object.values(c).forEach(function(t){e.$progress.hasClass(t.viewClass)&&e.$progress.removeClass(t.viewClass)})}},{key:"setProgressBarStyle",value:function(){var e=this.meta.property.pageNoStyle;e&&("手绘风"==c[e].name&&o("HYShuYuanHeiJ"),this.$progress.addClass(c[e].viewClass))}},{key:"updateProgressBarStyle",value:function(){this.removeProgressBarStyle(),this.setProgressBarStyle()}}]),e}();e.exports=l},function(e,t){},function(e,t,n){"use strict";var i=n(743),o=n(744),r=n(745),a={1:{name:"默认",viewClass:"",isFree:!0,pageNoStyleVal:1,viewImg:i},2:{name:"手绘风",viewClass:"hand-draw",isFree:!1,pageNoStyleVal:2,viewImg:o},3:{name:"渐变风",viewClass:"gradient",isFree:!1,pageNoStyleVal:3,viewImg:r}};e.exports=a},function(e,t,n){e.exports=n.p+"images/pageNoStyleDefault-3bf407.png"},function(e,t,n){e.exports=n.p+"images/pageNoStyleDraw-f65950.png"},function(e,t,n){e.exports=n.p+"images/pageNoStyleGradient-04bce1.png"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(57),a=r.$getAd,s=n(58),c=s.getPlatform,l={a:1,b:2,c:3},u=function(){function e(t){i(this,e),this.eqxScene=t,this.meta=t.meta,this.platform=c(),this.tempAppUseBtnHtml=$('<a rdt="3" cat="pc_h5" act="APP_模板_使用" class="temp-app-use" ></a>'),this.defaultLink="http://topic.eqxiu.com/editor/topic.html?channelCode=yhyy-shiyong-xz#/y20t31dAmj?fn=openInstall&type=0&sceneId="+this.meta.id,this.defaultBtnHtml=$('<a rdt="3" cat="pc_h5" act="APP_模板_使用" class="temp-app-use" href="'+this.defaultLink+'">\n                                        <div class="temp-app-use-tip">使用</div>\n                                    </a>')}return o(e,[{key:"addAppParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e,n="type=0&sceneId="+this.meta.id,i=e.lastIndexOf("?"),o=e.substr(i);return t+=i!==-1&&o.length>0?"&"+n:"?"+n}},{key:"render",value:function(e){var t=this,n={mediaIds:JSON.stringify([161]),channel:"d"===this.platform?1:0,platform:l[this.platform]||2,userId:this.meta.createUser,domainType:0};a(n).then(function(n){if(200===n.code&&n.obj){var i=n.obj[0]||{},o=i.linkUrl,r=i.picSrc,a=r?$('<image style="width: 100%;" src="'+r+'"/>'):$('<div class="temp-app-use-tip">使用</div>');t.tempAppUseBtnHtml.attr("href",t.addAppParams(o)||t.defaultLink),t.tempAppUseBtnHtml.append(a),e.append(t.tempAppUseBtnHtml)}else e.append(t.defaultBtnHtml)})["catch"](function(){e.append(t.defaultBtnHtml)})}}]),e}();e.exports=u},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){var e=$(window);e.on("scroll.elasticity",function(e){e.preventDefault()}).on("touchmove.elasticity",function(e){e.preventDefault()}),e.delegate("img","mousemove",function(e){e.preventDefault()})}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(191).getEvent,s=n(64).PAGE_MODE,c=n(166).preFixCss,l=n(26).getUrlParam,u=n(27).mobilecheck,p=n(748).pageFlipEndHook,d=function(){function e(t){i(this,e),this.eqxScene=t,this.eqxScene.currentPage=this.eqxScene.currentPage||this.eqxScene.eqxPageList[0],this.bindEventListeners(),this.pageFliping=!1;var n=this.eqxScene.meta.property,o=n.forbidHandFlip,r=n.triggerLoop,a=n.autoFlip,s=n.autoFlipTime,c=void 0===s?1:s;this.forbidHandFlip=o,this.triggerLoop=r,this.autoFlip=a,this.autoFlipTime=c,this.pageFlipModule=null,this.autoFlip&&!this.eqxScene.config.autoRecordScreen&&this.startAutoFlip(),this.mode="",this._pageAutoFlip=void 0,this.currentPageAutoFlip(),"view"==this.eqxScene.config.mode&&l("sceneLastPage")&&this.goToSceneLastPage()}return r(e,[{key:"currentPageAutoFlip",value:function(){var e=this,t=this.eqxScene.currentPage.pageJson.properties.pageScroll;"number"==typeof this._pageAutoFlip&&clearTimeout(this._pageAutoFlip),!this.autoFlip&&t.canAutoFlip&&(this._pageAutoFlip=setTimeout(function(){e.goToNextPage()},1e3*t.autoFlipTime))}},{key:"autoRecordScreen",value:function(){function e(){var i=t.currentPage,o=t.eqxPageList.findIndex(function(e){return e===i}),r=i.pageJson.properties.maxAnimTime;if(i.oneShot){var a=!1;i.oneShot.options.auto||(a=!0,i.oneShot.options.auto=!0),i.oneShot.play(),a&&(i.oneShot.options.auto=!1)}o!==t.eqxPageList.length-1?n.autoRecordTimer=setTimeout(function(){n.goToNextPage().then(function(){e()})},r):(n.RecordScreenStoped=!0,n.pauseRecordScreen())}var t=this.eqxScene,n=this;e()}},{key:"pauseRecordScreen",value:function(){this.autoRecordTimer&&(clearTimeout(this.autoRecordTimer),delete this.autoRecordTimer)}},{key:"disablePageFlip",value:function(){return this.disableFlip()||this.forbidHandFlip||this.eqxScene.currentPage.pageJson.properties.pageScroll.disableFlip}},{key:"disableFlip",value:function(){return this.eqxScene.currentPage.hasCoverEffect||this.pageFliping||1==this.eqxScene.eqxPageList.length}},{key:"bindEventListeners",value:function(){var e=this;o();var t=!1,n={moveX:0,moveY:0},i={startX:0,startY:0},r=void 0,s=void 0,c=this.eqxScene.$ele,l=function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=o.clientX,c=o.clientY;t||e.disablePageFlip()||(t=!0,r=null,e.initPageFlip(),s=0,n.moveY=0,n.moveX=0,i.startX=a,i.startY=c)},p=function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=o.clientX,c=o.clientY;if(t&&(n.moveX=a-i.startX,n.moveY=c-i.startY,s=e.pageFlipModule.getMoveDistance(n),0!=s)){if(e.pageFliping=!0,Math.abs(s)<=10&&r&&(r.deactive(),r=null),!r){if(r=e.getActivePageByMoveDistance(s),!r)return e.pageFliping=!1,!1;r.active()}if(!u()&&e.eqxScene.getOrientation().isLandScape()){var l=n.moveY;n.moveY=n.moveX,n.moveX=l}var p=e.eqxScene.currentPage.pageJson.properties.longPage;e.pageFlipModule.pageMove(e.eqxScene.currentPage,r,n,p)}},d=function(){t&&0!==s&&r&&(e.pageFliping=!0,e.pageFlipModule.pageEnd(e.eqxScene.currentPage,r,n).then(function(t){return t?(e.destroyActivePage(r),r.resetComps()):e.pageFlipEnd(r),e.startAutoFlip(),!0}),e.eqxScene.currentPage.soundAgent&&e.eqxScene.currentPage.soundAgent.start()),t=!1};c.on("mousedown touchstart",function(n){if(!$("#nr").data("selectRollOpen")){if(!t&&!e.disablePageFlip()){n.stopPropagation();var i=a(n);l(i)}c.on("mousemove touchmove",function(e){e.stopPropagation(),e.preventDefault();var t=a(e);p(t)}),c.on("mouseup touchend mouseleave",function(e){d(),c.off("mousemove touchmove mouseup touchend mouseleave")})}}),this.bindLPMissEvent(c,l,p,d)}},{key:"bindLPMissEvent",value:function(){function e(e){if("pageMove"===e.type)switch(e.direction){case"toBottom":n.goToPrePage();break;case"toUp":n.goToNextPage();break;case"toLeft":n.goToNextPage();break;case"toRight":n.goToPrePage();break;default:n.goToNextPage()}}var t=this.eqxScene.MessEventListener,n=this;t.subscribe("eqxScene.$ele",e,"onmessage")}},{key:"initPageFlip",value:function(){var e=this.eqxScene.currentPage.pageJson.properties.pageMode||this.eqxScene.currentPage.pageJson.properties.pageScroll.pageMode||this.eqxScene.meta.pageMode;e=this.eqxScene.currentPage.pageJson.properties.pageMode>=0?this.eqxScene.currentPage.pageJson.properties.pageMode:this.eqxScene.currentPage.pageJson.properties.pageScroll.pageMode>=0?this.eqxScene.currentPage.pageJson.properties.pageScroll.pageMode:this.eqxScene.meta.pageMode,this.mode=e,this.initFlipFnByMode(e),this.pageFlipModule.pageStart(this.eqxScene.currentPage)}},{key:"pageFlipEnd",value:function(e){e.bgm&&"none"===e.bgm.display&&e.bgm.show();var t=e.$section.find(".feedback-box");if(t.length&&e.bgm&&"block"===e.bgm.display&&e.bgm.hide(),u()){var n=this.getActivePageByMoveDistance(-1);if(n){var i=n.pageJson.properties.pageMode||n.pageJson.properties.pageScroll.pageMode||this.eqxScene.meta.pageMode;i=n.pageJson.properties.pageMode>=0?n.pageJson.properties.pageMode:n.pageJson.properties.pageScroll.pageMode>=0?n.pageJson.properties.pageScroll.pageMode:this.eqxScene.meta.pageMode,n&&n&&n.arrow?n.arrow.updatePageMode(i):n&&n.renderArrow(i)}}this.eqxScene.updateProgressBar(e),e.show(),this.eqxScene.currentPage.destroyed||this.eqxScene.currentPage.deactive().hide(),c(this.eqxScene.currentPage.section,"Transform",""),this.eqxScene.currentPage=e,this.destroyActivePage(e),this.currentPageAutoFlip(),!this.eqxScene.dependenciesRenderObj.allRendered&&this.eqxScene.renderDependenciesPages(),this.eqxScene.config.autoRecordScreen&&!this.RecordScreenStoped&&(this.pauseRecordScreen(),this.autoRecordScreen()),p(this.eqxScene,e)}},{key:"destroyActivePage",value:function(e){c(e.section,"Transform",""),e.deactive(),e=null,this.pageFliping=!1}},{key:"getActivePageByMoveDistance",value:function(e,t){var n=null,i=this.eqxScene.eqxPageList.indexOf(this.eqxScene.currentPage),o=this.eqxScene.eqxPageList.length-1;return void 0!==t?n=this.eqxScene.eqxPageList[t]:e>0?i>0?n=this.eqxScene.eqxPageList[i-1]:this.triggerLoop&&(n=this.eqxScene.eqxPageList[o]):e<0&&(i<o?n=this.eqxScene.eqxPageList[i+1]:this.triggerLoop&&(n=this.eqxScene.eqxPageList[0])),n&&!n.$section&&(console.log("[renderPage] nextPageId",n.pageJson.id),this.eqxScene.setNextRenderPageId(n.pageJson.id),n=null),n}},{key:"initFlipFnByMode",value:function(e){var t="";t=this.eqxScene.getOrientation().isLandScape()?this.getLandScapeFlipFn(e):this.getFlipFnByMode(e),this.pageFlipModule=n(749)("./"+t)}},{key:"getFlipFnByMode",value:function(e){var t="";switch(e){case s["上下翻页"]:t="vertical";break;case s["上下惯性翻页"]:t="vertiaclinertia";break;case s["左右翻页"]:t="horizontal";break;case s["左右惯性翻页"]:t="horizontalinertia";break;case s["左右连续翻页"]:t="horizontalSingle";break;case s["立体翻页"]:t="cube";break;case s["卡片翻页"]:t="card";break;case s["放大翻页"]:t="scale";break;case s["交换翻页"]:t="swap";break;case s["上下连续翻页"]:t="verticalSingle";break;case s["掉落翻页"]:t="fall";break;case s["淡入翻页"]:t="fadeIn";break;case s["翻书翻页"]:t="book";break;case s["上下推出翻页"]:t="verticalPush";break;case s["左右推出翻页"]:t="horizontalPush";break;case s["折叠翻页"]:t="flip";break;case s["画面分割翻页"]:t="splitPage";break;case s["竖百叶窗翻页"]:t="verticalBlindWindow";break;case s["折叠屏风翻页"]:t="foldBlind";break;case s["螺旋进入翻页"]:t="spiralRotate";break;case s["飞驰翻页"]:t="fly";break;case s["翻转翻页"]:t="overturn";break;case s["螺旋中心翻页"]:t="centerRotate";break;default:t="vertical"}return t}},{key:"getLandScapeFlipFn",value:function(e){var t="";switch(e){case s["上下翻页"]:t="horizontalLandscape";break;case s["上下惯性翻页"]:t="horizontalinertia-l";break;case s["左右翻页"]:t="vertical-l";break;case s["左右惯性翻页"]:t="vertiaclinertia-l";break;case s["左右连续翻页"]:t="verticalSingle-l";break;case s["立体翻页"]:t="cube-l";break;case s["卡片翻页"]:t="card-l";break;case s["放大翻页"]:t="scale-l";break;case s["交换翻页"]:t="swap-l";break;case s["上下连续翻页"]:t="horizontalSingle-l";break;case s["掉落翻页"]:t="fall-l";break;case s["淡入翻页"]:t="fadeIn-l";break;case s["翻书翻页"]:t="book-l";break;case s["上下推出翻页"]:t="horizontalPush-l";break;case s["左右推出翻页"]:t="verticalPush-l";break;case s["折叠翻页"]:
t="flip-l";break;case s["画面分割翻页"]:t="splitPage";break;case s["竖百叶窗翻页"]:t="verticalBlindWindow";break;case s["折叠屏风翻页"]:t="foldBlind";break;case s["螺旋进入翻页"]:t="spiralRotate";break;case s["飞驰翻页"]:t="fly";break;case s["翻转翻页"]:t="overturn";break;case s["螺旋中心翻页"]:t="centerRotate";break;default:t="vertical-l"}return t}},{key:"goToLastPage",value:function(){var e=this.eqxScene.getEqxPageByIndex(this.eqxScene.eqxPageList.length-1);return e?this.goToPageById(e.pageJson.id):Promise.resolve()}},{key:"goToSceneLastPage",value:function(){var e=this.eqxScene.eqxPageList.length-2;1!==this.eqxScene.meta.property.eqAdType&&(e=this.eqxScene.eqxPageList.length-1);var t=this.eqxScene.getEqxPageByIndex(e);return t?(this.eqxScene.renderPage(e),2===this.eqxScene.meta.property.eqAdType&&t.eqxCompList.pop().$li.remove(),3===this.eqxScene.meta.property.eqAdType&&(t.eqxCompList.pop().$li.remove(),t.eqxCompList[t.eqxCompList.length-2].$li.remove(),t.eqxCompList[t.eqxCompList.length-3].$li.remove(),"inside_13"==t.eqxCompList[t.eqxCompList.length-4].$li.attr("id")&&t.eqxCompList[t.eqxCompList.length-4].$li.remove()),this.goToPageById(t.pageJson.id)):Promise.resolve()}},{key:"goToPageByIndex",value:function(e){var t=this.eqxScene.getEqxPageByIndex(e);return t?this.goToPageById(t.pageJson.id):Promise.resolve()}},{key:"asyncGoToPageByIndex",value:function(e){var t=this.eqxScene.getEqxPageByIndex(e);return t?this.asyncGoToPageById(t.pageJson.id):Promise.resolve()}},{key:"asyncGoToPageById",value:function(e,t){var n=this;return new Promise(function(i,o){var r=n.eqxScene.getEqxPageById(e);r||i(),!n.pageFliping&&r&&r!==n.eqxScene.currentPage&&r.$section?n.goToPageById(e,t):r.$section||n.eqxScene.renderPage(r).then(function(){return n.goToPageById(e,t)})})}},{key:"goToPageById",value:function(e,t,n){var i=this;return new Promise(function(o,r){var a=i.eqxScene.getEqxPageById(e);if(a||o(),!i.pageFliping&&a&&a!==i.eqxScene.currentPage&&a.$section){var s=function p(){var e=this,t=arguments[0];t>0?t+=3:t-=3;var n=this.eqxScene.currentPage.pageJson.properties.longPage;Math.abs(t)<=20?(this.pageFlipModule.pageMove(this.eqxScene.currentPage,a,{moveX:t,moveY:t},n),requestAnimationFrame(p.bind(this,t))):this.pageFlipModule.pageEnd(this.eqxScene.currentPage,a,{moveX:t,moveY:t},n).then(function(){e.pageFlipEnd(a),o(a)})};i.pageFliping=!0,a.active(),i.initPageFlip();var c=a.pageJson.num,l=i.eqxScene.currentPage.pageJson.num;if(n){var u=i.eqxScene.currentPage.pageJson.id;a.pageJson.cataloguePosition=u}else a.pageJson.cataloguePosition=0;void 0===t&&(t=c>l),t?s.call(i,-1):s.call(i,1)}else a.$section||i.eqxScene.setNextRenderPageId(a.pageJson.id),o()})}},{key:"goToPrePage",value:function(){var e=this.getActivePageByMoveDistance(1),t=0;return t=e&&e&&e.pageJson.properties.pageMode>=0?e.pageJson.properties.pageMode:this.eqxScene.meta.pageMode,e&&e.arrow?e.arrow.updatePageMode(t):e&&e.renderArrow(t),this.disableFlip()||!e?Promise.resolve():this.goToPageById(e.pageJson.id,!1)}},{key:"goToPage",value:function(e,t){var n=this.getActivePageByMoveDistance(e,t),i=0;return i=n&&n&&n.pageJson.properties.pageMode>=0?n.pageJson.properties.pageMode:this.eqxScene.meta.pageMode,n&&n.arrow?n.arrow.updatePageMode(i):n&&n.renderArrow(i),!this.disableFlip()&&n?this.goToPageById(n.pageJson.id,e==-1):n||this.eqxScene.getEqxPageByIndex(t).$section?Promise.resolve():(this.eqxScene.getDependenciesPages(),void this.eqxScene.renderDependenciesPages())}},{key:"goToNextPage",value:function(){var e=this.getActivePageByMoveDistance(-1),t=0;if(t=e&&e.pageJson.properties.pageMode>=0?e.pageJson.properties.pageMode:this.eqxScene.meta.pageMode,e&&e.arrow?e.arrow.updatePageMode(t):e&&e.renderArrow(t),this.disableFlip()||!e)return Promise.resolve();if(this.eqxScene.currentPage.pageJson.properties.longPage){var n=this.eqxScene.currentPage.dotransformPx();return n?this.goToPageById(e.pageJson.id,!0):Promise.resolve()}return this.goToPageById(e.pageJson.id,!0)}},{key:"startAutoFlip",value:function(){var e=this;this.pauseAutoFlip(),this.autoFlip&&!this.disableFlip()&&(this.autoFlipIntervalId=setInterval(function(){e.triggerLoop||e.eqxScene.eqxPageList.indexOf(e.eqxScene.currentPage)!==e.eqxScene.eqxPageList.length-1?e.goToNextPage():e.pauseAutoFlip()},1e3*this.autoFlipTime))}},{key:"pauseAutoFlip",value:function(){this.autoFlipIntervalId&&(clearInterval(this.autoFlipIntervalId),delete this.autoFlipIntervalId)}},{key:"setAutoFlipTime",value:function(e){this.autoFlipTime=e}},{key:"setAutoFlip",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.autoFlip=!!e}},{key:"setHandleFlip",value:function(e){this.forbidHandFlip=e}},{key:"setLoop",value:function(e){this.triggerLoop=e,e&&this.autoFlip&&this.startAutoFlip()}},{key:"setScrollMode",value:function(e){this.eqxScene.meta.pageMode=e}}]),e}();e.exports=d},function(e,t){"use strict";function n(e,t){i(e,t),o(t)}function i(e,t){var n=e.eqxPageList.length,i=t.pageJson.num;$(".prelistmode_pagenum").html(i+"/"+n)}function o(e){e.getEqxItems().forEach(function(e){if(e.compJson&&29==e.compJson.type){var t={eventType:"pageRefresh"};e.$iframe[0].contentWindow.postMessage(JSON.stringify(t),"*")}})}e.exports={pageFlipEndHook:n}},function(e,t,n){function i(e){return n(o(e))}function o(e){return r[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var r={"./book":750,"./book-l":751,"./book-l.js":751,"./book.js":750,"./card":752,"./card-l":753,"./card-l.js":753,"./card.js":752,"./centerRotate":754,"./centerRotate.js":754,"./cube":755,"./cube-l":756,"./cube-l.js":756,"./cube.js":755,"./fadeIn":757,"./fadeIn-l":758,"./fadeIn-l.js":758,"./fadeIn.js":757,"./fall":759,"./fall-l":760,"./fall-l.js":760,"./fall.js":759,"./flip":761,"./flip-l":762,"./flip-l.js":762,"./flip.js":761,"./fly":763,"./fly.js":763,"./fly.scss":764,"./foldBlind":765,"./foldBlind.js":765,"./horizontal":766,"./horizontal.js":766,"./horizontalLandscape":767,"./horizontalLandscape.js":767,"./horizontalPush":768,"./horizontalPush-l":769,"./horizontalPush-l.js":769,"./horizontalPush.js":768,"./horizontalSingle":770,"./horizontalSingle-l":771,"./horizontalSingle-l.js":771,"./horizontalSingle.js":770,"./horizontalinertia":772,"./horizontalinertia-l":773,"./horizontalinertia-l.js":773,"./horizontalinertia.js":772,"./overturn":774,"./overturn.js":774,"./pageFlip":747,"./pageFlip.js":747,"./pageFlipEndHook":748,"./pageFlipEndHook.js":748,"./scale":775,"./scale-l":776,"./scale-l.js":776,"./scale.js":775,"./spiralRotate":777,"./spiralRotate.js":777,"./spiralRotate.scss":778,"./splitPage":779,"./splitPage.js":779,"./swap":780,"./swap-l":781,"./swap-l.js":781,"./swap.js":780,"./vertiaclinertia":782,"./vertiaclinertia-l":783,"./vertiaclinertia-l.js":783,"./vertiaclinertia.js":782,"./vertical":784,"./vertical-l":785,"./vertical-l.js":785,"./vertical.js":784,"./verticalBlindWindow":786,"./verticalBlindWindow.js":786,"./verticalPush":787,"./verticalPush-l":788,"./verticalPush-l.js":788,"./verticalPush.js":787,"./verticalSingle":789,"./verticalSingle-l":790,"./verticalSingle-l.js":790,"./verticalSingle.js":789};i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=749},function(e,t,n){"use strict";function i(e){}function o(e,t,n){0!=n.moveX&&(p&&(p=!1,e.$section.css({width:e.width,height:e.height}),e.$section.parent().append(l),e.$section.parent().append(u),u.append(e.$section)),n.moveX<0&&n.moveY<=0?d.bottomRight(l,u,e,n):n.moveX<0&&n.moveY>0?d.topRight(l,u,e,n):d.leftCenter(l,u,e,n))}function r(e,t,n){return new Promise(function(i,r){function a(n){n.moveX<0&&n.moveY<=0?(n.moveX=n.moveX-s,n.moveY=n.moveY+s<=0?n.moveY+s:n.moveY):n.moveX<0&&n.moveY>0?(n.moveX=n.moveX-s,n.moveY=n.moveY-s>=0?n.moveY-s:n.moveY):n.moveX=n.moveX+s,Math.abs(n.moveX)<2*e.width?(o(e,t,n),requestAnimationFrame(a.bind(this,n))):(u.css({top:0,left:0,transform:""}),l.css({width:0,height:0,top:0,left:0,transform:"",background:"none"}),e.$section.unwrap(),e.$section.removeAttr("style"),l.remove(),p=!0,i(!1))}var s=16;a(n)})}function a(e){return e.moveX}var s=n(166).preFixCss,c=n(166).prefix,l=$('<div style="position: absolute; top:0; left:0;z-index: 1000"></div>'),u=$('<div style="position: absolute; width: 1000px; height: 1000px; top:0; left:0;overflow: hidden;background: #fff; z-index: 100; display: block"></div>'),p=!0,d={caculateCoordinate:function(e,t,n,i){var o=i.width,r=i.height,a=r/o,s=r/Math.sqrt(o*o+r*r),c=Math.sqrt(1-s*s),l=Math.sqrt(o*o+r*r)/2,u=l*a,p=Math.sqrt(u*u+l*l),d=p/a,h=180*Math.atan(a)/Math.PI>0?180*Math.atan(a)/Math.PI:0,f=(n.width-p)*c,g=(n.width-p)*s*c,m=(n.width-p)*(1-s*s);return!(f<1)&&{newTriangleX:p,newTriangleY:d,degree:h,maskTransformY:f,turnPageTransformX:m,turnPageTransformY:g}},bottomRight:function(e,t,n,i){var o=this.caculateCoordinate(e,t,n,{width:-i.moveX,height:-i.moveY});o&&(o.degree>1?e.css({top:n.height,left:n.width,width:o.newTriangleX+"px",height:o.newTriangleY+"px",backgroundColor:"#ff0000",background:"-webkit-linear-gradient("+(180-o.degree)+"deg, #fff 10%, #d1cfc7 40%, #f2eee2 50%, transparent 50%, transparent 100%)",transform:"translate3d(-"+(o.newTriangleX-3)+"px, -"+(o.newTriangleY-3)+"px, 0) rotate3d(0,0,1, "+2*o.degree+"deg) scaleX(-1)"}):e.css({width:(-i.moveX+6)/2+"px",height:n.height+"px",top:0,left:n.width+i.moveX+"px",background:"-webkit-linear-gradient(left, #fff 0% , #d1cfc7 10%, #f2eee2 90%, #fff 100%)",transform:"",border:0}),t[0].style.zIndex=100,t[0].style.top=-(1e3-n.height)+"px",s(t[0],"TransformOrigin","0% 100% 0px"),s(t[0],"Transform","rotate3d(0,0,1,-"+(90-o.degree)+"deg) translate3d(0,"+o.maskTransformY+"px,0)"),n.section.style.top=1e3-n.height+"px",s(n.section,"TransformOrigin","0% 100% 0px"),s(n.section,"Transform","rotate3d(0,0,1,"+(90-o.degree)+"deg) translate3d("+-o.turnPageTransformX+"px,"+-o.turnPageTransformY+"px, 0)"))},topRight:function(e,t,n,i){var o=this.caculateCoordinate(e,t,n,{width:-i.moveX,height:i.moveY});o&&(o.degree>1?e.css({top:0,left:n.width,width:o.newTriangleX+"px",height:o.newTriangleY+"px",backgroundColor:"#ff0000",background:"-webkit-linear-gradient(-"+(180-o.degree)+"deg, #fff 10%, #d1cfc7 40%, #f2eee2 50%, transparent 50%, transparent 100%)",transform:"translate3d(-"+(o.newTriangleX-3)+"px,0,0)  rotate3d(0,0,1,-"+2*o.degree+"deg) scaleX(-1)"}):e.css({width:(-i.moveX+6)/2+"px",height:n.height+"px",top:0,left:n.width+i.moveX+"px",background:"-webkit-linear-gradient(left, #fff 0% , #d1cfc7 10%, #f2eee2 90%, #fff 100%)",transform:"",border:0}),t[0].style.zIndex=100,t[0].style.top=0,s(t[0],"TransformOrigin","0% 0% 0px"),s(t[0],"Transform","rotate3d(0,0,1,"+(90-o.degree)+"deg) translate3d(0,-"+o.maskTransformY+"px,0)"),n.section.style.top=0,s(n.section,"TransformOrigin","0% 0% 0px"),s(n.section,"Transform","rotate3d(0,0,1,-"+(90-o.degree)+"deg) translate3d("+-o.turnPageTransformX+"px,"+o.turnPageTransformY+"px, 0)"))},rightCenter:function(e,t,n,i){e.css({width:-i.moveX/2+"px",height:n.height+"px",left:n.width+i.moveX+"px",background:c.css+"linear-gradient(left, #fff 0% , #d1cfc7 15%, #f2eee2 85%, #fff 100%)"}),s(t[0],"Transform","translate3d("+i.moveX+"px, 0, 0)"),s(t[0],"TransformOrigin","0% 50% 0px"),s(n.section,"Transform","translate3d("+-i.moveX+"px, 0, 0)"),s(n.section,"TransformOrigin","0% 50% 0px")},leftCenter:function(e,t,n,i){e.css({width:i.moveX/2+"px",height:n.height+"px",top:"0px",transform:"",left:i.moveX+"px",background:c.css+"linear-gradient(left, #fff 0% , #d1cfc7 15%, #f2eee2 85%, #fff 100%)"}),s(t[0],"Transform","translate3d("+i.moveX+"px, 0, 0)"),s(t[0],"TransformOrigin","0% 50% 0px"),s(n.section,"Transform","translate3d("+-i.moveX+"px, 0, 0)"),s(n.section,"TransformOrigin","0% 50% 0px")}};e.exports={pageMove:o,pageEnd:r,pageStart:i,getMoveDistance:a}},function(e,t,n){"use strict";function i(e){}function o(e,t,n){0!=n.moveX&&(p&&(p=!1,e.$section.css({width:e.width,height:e.height}),e.$section.parent().append(l),e.$section.parent().append(u),u.append(e.$section)),n.moveX<0&&n.moveY<=0?d.bottomRight(l,u,e,n):n.moveX<0&&n.moveY>0?d.topRight(l,u,e,n):d.leftCenter(l,u,e,n))}function r(e,t,n){return new Promise(function(i,r){function a(n){n.moveX<0&&n.moveY<=0?(n.moveX=n.moveX-s,n.moveY=n.moveY+s<=0?n.moveY+s:n.moveY):n.moveX<0&&n.moveY>0?(n.moveX=n.moveX-s,n.moveY=n.moveY-s>=0?n.moveY-s:n.moveY):n.moveX=n.moveX+s,Math.abs(n.moveX)<2*e.width?(o(e,t,n),requestAnimationFrame(a.bind(this,n))):(u.css({top:0,left:0,transform:""}),l.css({width:0,height:0,top:0,left:0,transform:"",background:"none"}),e.$section.unwrap(),e.$section.removeAttr("style"),l.remove(),p=!0,i(!1))}var s=16;a(n)})}function a(e){return e.moveX}var s=n(166).preFixCss,c=n(166).prefix,l=$('<div style="position: absolute; top:0; left:0;z-index: 1000"></div>'),u=$('<div style="position: absolute; width: 1000px; height: 1000px; top:0; left:0;overflow: hidden;background: #fff; z-index: 100; display: block"></div>'),p=!0,d={caculateCoordinate:function(e,t,n,i){var o=i.width,r=i.height,a=r/o,s=r/Math.sqrt(o*o+r*r),c=Math.sqrt(1-s*s),l=Math.sqrt(o*o+r*r)/2,u=l*a,p=Math.sqrt(u*u+l*l),d=p/a,h=180*Math.atan(a)/Math.PI>0?180*Math.atan(a)/Math.PI:0,f=(n.width-p)*c,g=(n.width-p)*s*c,m=(n.width-p)*(1-s*s);return!(f<1)&&{newTriangleX:p,newTriangleY:d,degree:h,maskTransformY:f,turnPageTransformX:m,turnPageTransformY:g}},bottomRight:function(e,t,n,i){var o=this.caculateCoordinate(e,t,n,{width:-i.moveX,height:-i.moveY});o&&(o.degree>1?e.css({top:n.height,left:n.width,width:o.newTriangleX+"px",height:o.newTriangleY+"px",backgroundColor:"#ff0000",background:"-webkit-linear-gradient("+(180-o.degree)+"deg, #fff 10%, #d1cfc7 40%, #f2eee2 50%, transparent 50%, transparent 100%)",transform:"translate3d(-"+(o.newTriangleX-3)+"px, -"+(o.newTriangleY-3)+"px, 0) rotate3d(0,0,1, "+2*o.degree+"deg) scaleX(-1)"}):e.css({width:(-i.moveX+6)/2+"px",height:n.height+"px",top:0,left:n.width+i.moveX+"px",background:"-webkit-linear-gradient(left, #fff 0% , #d1cfc7 10%, #f2eee2 90%, #fff 100%)",transform:"",border:0}),t[0].style.zIndex=100,t[0].style.top=-(1e3-n.height)+"px",s(t[0],"TransformOrigin","0% 100% 0px"),s(t[0],"Transform","rotate3d(0,0,1,-"+(90-o.degree)+"deg) translate3d(0,"+o.maskTransformY+"px,0)"),n.section.style.top=1e3-n.height+"px",s(n.section,"TransformOrigin","0% 100% 0px"),s(n.section,"Transform","rotate3d(0,0,1,"+(90-o.degree)+"deg) translate3d("+-o.turnPageTransformX+"px,"+-o.turnPageTransformY+"px, 0)"))},topRight:function(e,t,n,i){var o=this.caculateCoordinate(e,t,n,{width:-i.moveX,height:i.moveY});o&&(o.degree>1?e.css({top:0,left:n.width,width:o.newTriangleX+"px",height:o.newTriangleY+"px",backgroundColor:"#ff0000",background:"-webkit-linear-gradient(-"+(180-o.degree)+"deg, #fff 10%, #d1cfc7 40%, #f2eee2 50%, transparent 50%, transparent 100%)",transform:"translate3d(-"+(o.newTriangleX-3)+"px,0,0)  rotate3d(0,0,1,-"+2*o.degree+"deg) scaleX(-1)"}):e.css({width:(-i.moveX+6)/2+"px",height:n.height+"px",top:0,left:n.width+i.moveX+"px",background:"-webkit-linear-gradient(left, #fff 0% , #d1cfc7 10%, #f2eee2 90%, #fff 100%)",transform:"",border:0}),t[0].style.zIndex=100,t[0].style.top=0,s(t[0],"TransformOrigin","0% 0% 0px"),s(t[0],"Transform","rotate3d(0,0,1,"+(90-o.degree)+"deg) translate3d(0,-"+o.maskTransformY+"px,0)"),n.section.style.top=0,s(n.section,"TransformOrigin","0% 0% 0px"),s(n.section,"Transform","rotate3d(0,0,1,-"+(90-o.degree)+"deg) translate3d("+-o.turnPageTransformX+"px,"+o.turnPageTransformY+"px, 0)"))},rightCenter:function(e,t,n,i){e.css({width:-i.moveX/2+"px",height:n.height+"px",left:n.width+i.moveX+"px",background:c.css+"linear-gradient(left, #fff 0% , #d1cfc7 15%, #f2eee2 85%, #fff 100%)"}),s(t[0],"Transform","translate3d("+i.moveX+"px, 0, 0)"),s(t[0],"TransformOrigin","0% 50% 0px"),s(n.section,"Transform","translate3d("+-i.moveX+"px, 0, 0)"),s(n.section,"TransformOrigin","0% 50% 0px")},leftCenter:function(e,t,n,i){e.css({width:i.moveX/2+"px",height:n.height+"px",top:"0px",transform:"",left:i.moveX+"px",background:c.css+"linear-gradient(left, #fff 0% , #d1cfc7 15%, #f2eee2 85%, #fff 100%)"}),s(t[0],"Transform","translate3d("+i.moveX+"px, 0, 0)"),s(t[0],"TransformOrigin","0% 50% 0px"),s(n.section,"Transform","translate3d("+-i.moveX+"px, 0, 0)"),s(n.section,"TransformOrigin","0% 50% 0px")}};e.exports={pageMove:o,pageEnd:r,pageStart:i,getMoveDistance:a}},function(e,t,n){"use strict";function i(e){}function o(e,t,n){n.moveY>0?(s(t.section,"TransformOrigin","top"),s(t.section,"Transform","rotate3d(1,0,0,"+(90-n.moveY/t.height*90)+"deg)")):(s(t.section,"TransformOrigin","bottom"),s(t.section,"Transform","rotate3d(1,0,0,"+(-90-n.moveY/e.height*90)+"deg)"))}function r(e,t,n){var i=!0;return new Promise(function(e,o){s(t.section,"Transition",c.css+"transform 0.4s linear"),n.moveY>0&&n.moveY<20?(s(t.section,"Transform","rotate3d(1,0,0,90deg)"),i=!0):n.moveY<0&&n.moveY>-20?(s(t.section,"Transform","rotate3d(1,0,0,-90deg)"),i=!0):(s(t.section,"Transform","rotate3d(1,0,0, 0deg)"),i=!1),$(t.section).one("transitionend webkitTransitionEnd",function(){s(t.section,"Transition",""),s(t.section,"TransformOrigin",""),e(i)})})}function a(e){return e.moveY}var s=n(166).preFixCss,c=n(166).prefix;e.exports={pageMove:o,pageEnd:r,pageStart:i,getMoveDistance:a}},function(e,t,n){"use strict";function i(e){}function o(e,t,n,i){l()?n.moveX>0?(i?s(t.section,"TransformOrigin","right"):s(t.section,"TransformOrigin","left"),s(t.section,"Transform","rotate3d(0,1,0,"+(90-n.moveX/e.width*90)+"deg)")):(i?s(t.section,"TransformOrigin","left"):s(t.section,"TransformOrigin","right"),s(t.section,"Transform","rotate3d(0,1,0,"+(-90-n.moveX/t.width*90)+"deg)")):n.moveX>0?(s(t.section,"TransformOrigin","right"),s(t.section,"Transform","rotate3d(0,1,0,"+(90-n.moveX/t.width*90)+"deg)")):(s(t.section,"TransformOrigin","left"),s(t.section,"Transform","rotate3d(0,1,0,"+(-90-n.moveX/e.width*90)+"deg)"))}function r(e,t,n,i){var o=!0;return new Promise(function(e,i){s(t.section,"Transition",c.css+"transform 0.4s linear"),console.log(n),n.moveX>0&&n.moveX<20?(s(t.section,"Transform","rotate3d(0,1,0,90deg)"),o=!0):n.moveX<0&&n.moveX>-20?(s(t.section,"Transform","rotate3d(0,1,0,-90deg)"),o=!0):(s(t.section,"Transform","rotate3d(0,1,0, 0deg)"),o=!1),$(t.section).one("transitionend webkitTransitionEnd",function(){s(t.section,"Transition",""),s(t.section,"TransformOrigin",""),e(o)})})}function a(e){return l()?-e.moveX:e.moveY}var s=n(166).preFixCss,c=n(166).prefix,l=n(27).mobilecheck;e.exports={pageMove:o,pageEnd:r,pageStart:i,getMoveDistance:a}},function(e,t,n){"use strict";function i(e){}function o(e,t,n){var i=Math.abs(n.moveY)/e.height*1.3;if(i.toFixed(3)<=1)if(n.moveY>0){var o=Math.abs(n.moveY)/e.height*90;e.section.style.zIndex=3,s(t.section,"Transform",""),s(e.section,"TransformOrigin","100% 0"),s(e.section,"Transform","rotate("+o+"deg)")}else{var r=90*(1-Math.abs(n.moveY)/e.height);e.section.style.zIndex="",s(e.section,"Transform",""),s(t.section,"TransformOrigin","0 100%"),s(t.section,"Transform","rotate("+r+"deg)")}}function r(e,t,n){var i=!0,o=!1;return new Promise(function(r,a){function l(){o=!0,e.section.style.zIndex="",s(t.section,"Transition",""),s(t.section,"TransformOrigin",""),s(t.section,"Transform",""),s(e.section,"Transition",""),s(e.section,"TransformOrigin",""),s(e.section,"Transform",""),r(i)}s(t.section,"Transition",c.css+"transform 0.6s ease-in-out"),s(e.section,"Transition",c.css+"transform 0.6s ease-in-out"),Math.abs(n.moveY)<20?(n.moveY>0?(s(e.section,"Transform","rotate(0)"),$(e.section).one("transitionend webkitTransitionEnd",function(){l()})):(s(t.section,"Transform","rotate(90deg)"),$(t.section).one("transitionend webkitTransitionEnd",function(){l()})),i=!0):(n.moveY>0?(s(e.section,"Transform","rotate(90deg)"),$(e.section).one("transitionend webkitTransitionEnd",function(){l()})):(s(t.section,"Transform","rotate(0)"),$(t.section).one("transitionend webkitTransitionEnd",function(){l()})),i=!1),setTimeout(function(){o||l()},700)})}function a(e){return e.moveY}var s=n(166).preFixCss,c=n(166).prefix;e.exports={pageMove:o,pageEnd:r,pageStart:i,getMoveDistance:a}},function(e,t,n){"use strict";function i(e){}function o(e,t,n){n.moveY>0?(s(t.section,"Transform","rotate3d(1,0,0,"+(90-n.moveY/t.height*90)+"deg) translate3d(0px, "+(n.moveY-e.height)/2+"px, "+(e.height-n.moveY)/2+"px)"),s(e.section,"Transform","rotate3d(1,0,0,"+-n.moveY/e.height*90+"deg) translate3d(0px, "+n.moveY/2+"px, "+n.moveY/2+"px)")):(s(t.section,"Transform","rotate3d(1,0,0,"+(-90-n.moveY/e.height*90)+"deg) translate3d(0px, "+(t.height+n.moveY)/2+"px, "+(t.height+n.moveY)/2+"px)"),s(e.section,"Transform","rotate3d(1,0,0,"+-n.moveY/e.height*90+"deg) translate3d(0px, "+n.moveY/2+"px, "+-n.moveY/2+"px)"))}function r(e,t,n){var i=!0,o=!1;return new Promise(function(r,a){s(e.section,"Transition",c.css+"transform 0.4s linear"),s(t.section,"Transition",c.css+"transform 0.4s linear"),n.moveY>0&&n.moveY<20?(s(t.section,"Transform","rotate3d(1,0,0,0deg) translate3d(0px,-"+e.height+"px,"+e.height+"px)"),s(e.section,"Transform","rotate3d(1,0,0,0deg) translate3d(0px, 0px, 0px)"),i=!0):n.moveY<0&&n.moveY>-20?(s(t.section,"Transform","rotate3d(1,0,0,0deg) translate3d(0px,"+e.height+"px, "+e.height+"px)"),s(e.section,"Transform","rotate3d(1,0,0,0deg) translate3d(0px, 0px, 0px)"),i=!0):(s(t.section,"Transform","rotate3d(1,0,0, 0deg) translate3d(0px,0px,0px)"),n.moveY>0?s(e.section,"Transform","rotate3d(1,0,0,-90deg) translate3d(0px,"+e.height/2+"px, "+e.height/2+"px)"):s(e.section,"Transform","rotate3d(1,0,0,90deg) translate3d(0px,"+-e.height/2+"px, "+e.height/2+"px)"),i=!1),$(t.section).one("transitionend webkitTransitionEnd",function(){o=!0,s(e.section,"Transition",""),s(t.section,"Transition",""),r(i)}),o||setTimeout(function(){o=!0,s(e.section,"Transition",""),s(t.section,"Transition",""),r(i)},450)})}function a(e){return e.moveY}var s=n(166).preFixCss,c=n(166).prefix;e.exports={pageMove:o,pageEnd:r,pageStart:i,getMoveDistance:a}},function(e,t,n){"use strict";function i(e){}function o(e,t,n){l()?n.moveY>0?(s(t.section,"Transform","rotate3d(1,0,0,"+(90-n.moveY/t.height*90)+"deg) translate3d(0px, "+(n.moveY-e.height)/2+"px, "+(e.height-n.moveY)/2+"px)"),s(e.section,"Transform","rotate3d(1,0,0,"+-n.moveY/e.height*90+"deg) translate3d(0px, "+n.moveY/2+"px, "+n.moveY/2+"px)")):(s(t.section,"Transform","rotate3d(1,0,0,"+(-90-n.moveY/e.height*90)+"deg) translate3d(0px, "+(t.height+n.moveY)/2+"px, "+(t.height+n.moveY)/2+"px)"),s(e.section,"Transform","rotate3d(1,0,0,"+-n.moveY/e.height*90+"deg) translate3d(0px, "+n.moveY/2+"px, "+-n.moveY/2+"px)")):n.moveX>0?(s(t.section,"Transform","rotate3d(0,1,0,"+(-90-n.moveX/t.width*90)+"deg) translate3d("+(n.moveX-e.width)/2+"px, 0px, "+(e.width-n.moveX)/2+"px)"),s(e.section,"Transform","rotate3d(0,1,0,"+-n.moveX/e.width*90+"deg) translate3d("+n.moveX/2+"px, 0px, "+n.moveX/2+"px)")):(s(t.section,"Transform","rotate3d(0,1,0,"+(-90-n.moveX/e.width*90)+"deg) translate3d("+(t.width+n.moveX)/2+"px, 0px, "+(t.width+n.moveX)/2+"px)"),s(e.section,"Transform","rotate3d(0,1,0,"+-n.moveX/e.width*90+"deg) translate3d("+n.moveX/2+"px, 0px, "+-n.moveX/2+"px)"))}function r(e,t,n){var i=!0,o=!1;return new Promise(function(r,a){s(e.section,"Transition",c.css+"transform 0.4s linear"),s(t.section,"Transition",c.css+"transform 0.4s linear"),n.moveX>0&&n.moveX<20?(s(t.section,"Transform","rotate3d(1,0,0,0deg) translate3d(-"+e.height+"px,0px,"+e.height+"px)"),s(e.section,"Transform","rotate3d(1,0,0,0deg) translate3d(0px, 0px, 0px)"),i=!0):n.moveX<0&&n.moveX>-20?(s(t.section,"Transform","rotate3d(1,0,0,0deg) translate3d("+e.height+"px,0px, "+e.height+"px)"),s(e.section,"Transform","rotate3d(1,0,0,0deg) translate3d(0px, 0px, 0px)"),i=!0):(s(t.section,"Transform","rotate3d(1,0,0, 0deg) translate3d(0px,0px,0px)"),n.moveY>0?s(e.section,"Transform","rotate3d(1,0,0,-90deg) translate3d("+e.height/2+"px,0px, "+e.height/2+"px)"):s(e.section,"Transform","rotate3d(1,0,0,90deg) translate3d("+-e.height/2+"px,0px, "+e.height/2+"px)"),i=!1),$(t.section).one("transitionend webkitTransitionEnd",function(){o=!0,s(e.section,"Transition",""),s(t.section,"Transition",""),r(i)}),o||setTimeout(function(){o=!0,s(e.section,"Transition",""),s(t.section,"Transition",""),r(i)},450)})}function a(e){return l()?-e.moveX:e.moveY}var s=n(166).preFixCss,c=n(166).prefix,l=n(27).mobilecheck;e.exports={pageMove:o,pageEnd:r,pageStart:i,getMoveDistance:a}},function(e,t){"use strict";function n(e){}function i(e,t,n){n.moveY>0?t.section.style.opacity=(n.moveY/e.height).toFixed(2):t.section.style.opacity=(-n.moveY/e.height).toFixed(2)}function o(e,t,n){var i=!0;return new Promise(function(o,r){function a(){var n=arguments[0];n>20?n+=60:n-=60,n>=20&&n<=t.height||n<20&&n>=0?(t.section.style.opacity=(n/e.height).toFixed(2),requestAnimationFrame(a.bind(this,n))):(t.section.style.opacity="",o(i))}i=Math.abs(n.moveY)>0&&Math.abs(n.moveY)<20,a(Math.abs(n.moveY))})}function r(e){return e.moveY}e.exports={pageMove:i,pageEnd:o,pageStart:n,getMoveDistance:r}},function(e,t){"use strict";function n(e){}function i(e,t,n){n.moveY>0?t.section.style.opacity=(n.moveY/e.height).toFixed(2):t.section.style.opacity=(-n.moveY/e.height).toFixed(2)}function o(e,t,n){var i=!0;return new Promise(function(o,r){function a(){var n=arguments[0];n>20?n+=60:n-=60,n>=20&&n<=t.height||n<20&&n>=0?(t.section.style.opacity=(n/e.height).toFixed(2),requestAnimationFrame(a.bind(this,n))):(t.section.style.opacity="",o(i))}i=Math.abs(n.moveY)>0&&Math.abs(n.moveY)<20,a(Math.abs(n.moveY))})}function r(e){return e.moveY}e.exports={pageMove:i,pageEnd:o,pageStart:n,getMoveDistance:r}},function(e,t,n){"use strict";function i(e){}function o(e,t,n){t.section.style.zIndex=0,s(e.section,"TransformOrigin","0% 0% 0px"),n.moveY>0?(s(e.section,"Transform","rotate("+n.moveY/e.height*90+"deg)"),e.section.style.opacity=((e.height-n.moveY)/e.height).toFixed(1)):(s(e.section,"Transform","rotate("+-n.moveY/e.height*90+"deg)"),e.section.style.opacity=((e.height+n.moveY)/e.height).toFixed(1))}function r(e,t,n){var i=!0;return new Promise(function(o,r){s(e.section,"Transition",c.css+"transform 0.4s linear"),n.moveY>0&&n.moveY<20?(s(e.section,"Transform","rotate(0deg)"),i=!0):n.moveY<0&&n.moveY>-20?(s(e.section,"Transform","rotate(0deg)"),i=!0):(s(e.section,"Transform","translate3d(0,"+e.height+"px,0) rotate("+Math.abs(n.moveY)/e.height*90+"deg)"),e.section.style.opacity=.5,i=!1),$(e.section).one("transitionend webkitTransitionEnd",function(){s(e.section,"Transition",""),t.section.style.zIndex="",e.section.style.opacity="",o(i)})})}function a(e){return e.moveY}var s=n(166).preFixCss,c=n(166).prefix;e.exports={pageMove:o,pageEnd:r,pageStart:i,getMoveDistance:a}},function(e,t,n){"use strict";function i(e){}function o(e,t,n){t.section.style.zIndex=0,s(e.section,"TransformOrigin","0% 0% 0px"),n.moveY>0?(s(e.section,"Transform","rotate("+n.moveY/e.height*90+"deg)"),e.section.style.opacity=((e.height-n.moveY)/e.height).toFixed(1)):(s(e.section,"Transform","rotate("+-n.moveY/e.height*90+"deg)"),e.section.style.opacity=((e.height+n.moveY)/e.height).toFixed(1))}function r(e,t,n){var i=!0;return new Promise(function(o,r){s(e.section,"Transition",c.css+"transform 0.4s linear"),n.moveY>0&&n.moveY<20?(s(e.section,"Transform","rotate(0deg)"),i=!0):n.moveY<0&&n.moveY>-20?(s(e.section,"Transform","rotate(0deg)"),i=!0):(s(e.section,"Transform","translate3d(0,"+e.height+"px,0) rotate("+Math.abs(n.moveY)/e.height*90+"deg)"),e.section.style.opacity=.5,i=!1),$(e.section).one("transitionend webkitTransitionEnd",function(){s(e.section,"Transition",""),t.section.style.zIndex="",e.section.style.opacity="",o(i)})})}function a(e){return e.moveY}var s=n(166).preFixCss,c=n(166).prefix;e.exports={pageMove:o,pageEnd:r,pageStart:i,getMoveDistance:a}},function(e,t,n){"use strict";function i(e){}function o(e,t,n){s(t.section,"TransformOrigin","center"),s(e.section,"TransformOrigin","center"),s(t.section,"Transform","rotate3d(1,0,0,90deg)"),s(e.section,"Transform","rotate3d(1,0,0,"+n.moveY/e.height*90+"deg)")}function r(e,t,n){var i=!0;return new Promise(function(o,r){s(t.section,"Transition",c.css+"transform 0.4s linear"),s(e.section,"Transition",c.css+"transform 0.4s linear"),Math.abs(n.moveY)>0&&Math.abs(n.moveY)<20?(s(e.section,"Transform","rotate3d(1,0,0,0deg)"),s(t.section,"Transform","rotate3d(1,0,0,0deg)"),i=!0):(n.moveY>0?s(e.section,"Transform","rotate3d(1,0,0, 90deg)"):s(e.section,"Transform","rotate3d(1,0,0, -90deg)"),$(e.section).one("transitionend webkitTransitionEnd",function(){s(t.section,"Transform","rotate3d(1,0,0, 0deg)")}),i=!1),$(t.section).one("transitionend webkitTransitionEnd",function(){s(t.section,"Transition",""),s(t.section,"TransformOrigin",""),s(t.section,"Transform",""),s(e.section,"Transition",""),s(e.section,"TransformOrigin",""),s(e.section,"Transform",""),o(i)})})}function a(e){return e.moveY}var s=n(166).preFixCss,c=n(166).prefix;e.exports={pageMove:o,pageEnd:r,pageStart:i,getMoveDistance:a}},function(e,t,n){"use strict";function i(e){}function o(e,t,n){s(t.section,"TransformOrigin","center"),s(e.section,"TransformOrigin","center"),s(t.section,"Transform","rotate3d(1,0,0,90deg)"),s(e.section,"Transform","rotate3d(1,0,0,"+n.moveY/e.height*90+"deg)")}function r(e,t,n){var i=!0;return new Promise(function(o,r){s(t.section,"Transition",c.css+"transform 0.4s linear"),s(e.section,"Transition",c.css+"transform 0.4s linear"),Math.abs(n.moveY)>0&&Math.abs(n.moveY)<20?(s(e.section,"Transform","rotate3d(1,0,0,0deg)"),s(t.section,"Transform","rotate3d(1,0,0,0deg)"),i=!0):(n.moveY>0?s(e.section,"Transform","rotate3d(1,0,0, 90deg)"):s(e.section,"Transform","rotate3d(1,0,0, -90deg)"),$(e.section).one("transitionend webkitTransitionEnd",function(){s(t.section,"Transform","rotate3d(1,0,0, 0deg)")}),i=!1),$(t.section).one("transitionend webkitTransitionEnd",function(){s(t.section,"Transition",""),s(t.section,"TransformOrigin",""),s(t.section,"Transform",""),s(e.section,"Transition",""),s(e.section,"TransformOrigin",""),s(e.section,"Transform",""),o(i)})})}function a(e){return e.moveY}var s=n(166).preFixCss,c=n(166).prefix;e.exports={pageMove:o,pageEnd:r,pageStart:i,getMoveDistance:a}},function(e,t,n){"use strict";function i(e){}function o(e,t,n){e.section.style.zIndex=3}function r(e,t,n){var i=!0,o=!1;return new Promise(function(r,a){function s(){o=!0,t.section.classList.remove("fly-in"),r(i)}Math.abs(n.moveY)<20?(e.section.style.zIndex="",i=!0,o=!0,r(i)):(e.section.style.zIndex="",t.section.classList.add("fly-in"),i=!1,$(t.section).one("animationend webkitAnimationEnd",function(){s()}),setTimeout(function(){o||s()},1050))})}function a(e){return e.moveY}n(764),e.exports={pageMove:o,pageEnd:r,pageStart:i,getMoveDistance:a}},function(e,t){},function(e,t,n){"use strict";function i(e){}function o(e){e.$cloneSection&&e.$cloneSection.remove(),delete e.$cloneSection;for(var t=0;t<p;t++)delete e["pageSectionCt"+t]}function r(e,t){var n=Math.abs(t)/e.height;if(n.toFixed(3)<=1)for(var i=0;i<p;i++){var o=1,r=i/p*.4;n>r&&(o=1-(n-r)/(1/p),o=o<0?0:o),l(e["pageSectionCt"+i],"Transform","scale("+o+", 1)")}}function a(e,t,n){if(h){h=!1,e.$cloneSection&&e.$cloneSection.remove(),e.$cloneSection=$('<div class="clone-page-ct"></div>'),e.$cloneSection.css({position:"absolute",width:"100%",height:"100%",overflow:"hidden",zIndex:0});for(var i=320/p,o=0;o<p;o++){var a=$('<div class="clone-page-section'+o+'-ct"></div>'),s=$(e.section).clone();a.css({position:"absolute",top:0,left:i*o+"px",width:i+"px",height:"100%",overflow:"hidden",zIndex:1}),s.css({position:"absolute",top:0,left:"-"+i*o+"px",width:p+"00%",height:"100%",overflow:"hidden",zIndex:1}),s.find("div.element-box, li.item-comp").css("animation","none"),a.append(s),e.$cloneSection.append(a),e["pageSectionCt"+o]=a[0]}$(e.section).before(e.$cloneSection)}Math.abs(n.moveY)<5?t.section.style.opacity=0:(e.$cloneSection.css("z-index",3),t.section.style.opacity="",r(e,n.moveY))}function s(e,t,n){var i=!0,r=!1;return new Promise(function(a,s){function c(){r=!0,h=!0,t.section.style.opacity="",o(e),a(i)}for(var f=Math.abs(n.moveY)/e.height,g=0;g<p;g++){var m=void 0,v=void 0,y=g/p*.4;
if(f>=y){m=0;var b=(f-y)/(1/p);v=b>=1?d:(1-b)*d}else v=d,m=(y-f)/(1/p)*d;l(e["pageSectionCt"+g],"Transition",u.css+"transform "+v+"ms linear "+m+"ms")}if(Math.abs(n.moveY)<20){for(var x=0;x<p;x++)l(e["pageSectionCt"+x],"Transform","scale(1, 1)");i=!0}else{for(var w=0;w<p;w++)l(e["pageSectionCt"+w],"Transform","scale(0, 1)");i=!1}$(e["pageSectionCt"+(p-1)]).one("transitionend webkitTransitionEnd",function(){c()});var k=d+d*(p-1)*.4+50;r||setTimeout(function(){c()},k)})}function c(e){return e.moveY}var l=n(166).preFixCss,u=n(166).prefix,p=6,d=150,h=!0;e.exports={pageMove:a,pageEnd:s,pageStart:i,getMoveDistance:c}},function(e,t,n){"use strict";function i(e){}function o(e,t,n){n.moveX>0?s(t.section,"Transform","translateX(-"+(e.width-n.moveX)+"px)"):s(t.section,"Transform","translateX("+(e.width+n.moveX)+"px)")}function r(e,t,n){var i=!0;return new Promise(function(o,r){s(t.section,"Transition",c.css+"transform 0.4s linear"),n.moveX>0&&n.moveX<20?(s(t.section,"Transform","translateX(-"+e.height+"px)"),i=!0):n.moveX<0&&n.moveX>-20?(s(t.section,"Transform","translateX("+e.height+"px)"),i=!0):(s(t.section,"Transform","translateX(0px)"),i=!1),$(t.section).one("transitionend webkitTransitionEnd",function(){s(t.section,"Transition",""),o(i)})})}function a(e){return e.moveX}var s=n(166).preFixCss,c=n(166).prefix;e.exports={pageMove:o,pageEnd:r,pageStart:i,getMoveDistance:a}},function(e,t,n){"use strict";function i(e){}function o(e,t,n,i){l()?n.moveX>0?i?s(t.section,"Transform","translateX("+(e.width-n.moveX)+"px)"):s(t.section,"Transform","translateX(-"+(e.width-n.moveX)+"px)"):i?s(t.section,"Transform","translateX(-"+(e.width-n.moveX)+"px)"):s(t.section,"Transform","translateX("+(e.width+n.moveX)+"px)"):n.moveX<0?s(t.section,"Transform","translateX(-"+(e.width+n.moveX)+"px)"):s(t.section,"Transform","translateX("+(e.width-n.moveX)+"px)")}function r(e,t,n){var i=!0;return new Promise(function(o,r){s(t.section,"Transition",c.css+"transform 0.4s linear"),n.moveX<0&&n.moveX>-20?(s(t.section,"Transform","translateX(-"+e.height+"px)"),i=!0):n.moveX>0&&n.moveX<20?(s(t.section,"Transform","translateX("+e.height+"px)"),i=!0):(s(t.section,"Transform","translateX(0px)"),i=!1),$(t.section).one("transitionend webkitTransitionEnd",function(){s(t.section,"Transition",""),o(i)})})}function a(e){return l()?-e.moveX:e.moveY}var s=n(166).preFixCss,c=n(166).prefix,l=n(27).mobilecheck;e.exports={pageMove:o,pageEnd:r,pageStart:i,getMoveDistance:a}},function(e,t,n){"use strict";function i(e){}function o(e,t,n){n.moveX>0?(s(t.section,"TransformOrigin","left"),s(e.section,"TransformOrigin","right"),s(t.section,"Transform","perspective(700px) rotate3d(0,1,0,90deg)")):(s(t.section,"TransformOrigin","right"),s(e.section,"TransformOrigin","left"),s(t.section,"Transform","perspective(700px) rotate3d(0,1,0,-90deg)")),s(e.section,"Transform","perspective(700px) rotate3d(0,1,0,"+-n.moveX/e.width*90+"deg)")}function r(e,t,n){var i=!0;return new Promise(function(o,r){s(t.section,"Transition",c.css+"transform 0.4s linear"),s(e.section,"Transition",c.css+"transform 0.4s linear"),Math.abs(n.moveX)>0&&Math.abs(n.moveX)<20?(s(e.section,"Transform","rotate3d(0,1,0,0deg)"),s(t.section,"Transform","rotate3d(0,1,0,0deg)"),i=!0):(n.moveX>0?s(e.section,"Transform","perspective(700px) rotate3d(0,1,0, -90deg)"):s(e.section,"Transform","perspective(700px) rotate3d(0,1,0, 90deg)"),$(e.section).one("transitionend webkitTransitionEnd",function(){s(t.section,"Transform","perspective(700px) rotate3d(0,1,0, 0deg)")}),i=!1),$(t.section).one("transitionend webkitTransitionEnd",function(){s(t.section,"Transition",""),s(t.section,"TransformOrigin",""),s(t.section,"Transform",""),s(e.section,"Transition",""),s(e.section,"TransformOrigin",""),s(e.section,"Transform",""),o(i)})})}function a(e){return e.moveX}var s=n(166).preFixCss,c=n(166).prefix;e.exports={pageMove:o,pageEnd:r,pageStart:i,getMoveDistance:a}},function(e,t,n){"use strict";function i(e){}function o(e,t,n,i){n.moveX<0?i?(c(t.section,"TransformOrigin","left"),c(e.section,"TransformOrigin","right"),c(t.section,"Transform","perspective(700px) rotate3d(0,1,0,90deg)"),c(e.section,"Transform","perspective(700px) rotate3d(0,1,0,"+n.moveX/e.width*90+"deg)")):(c(t.section,"TransformOrigin","right"),c(t.section,"Transform","perspective(700px) rotate3d(0,1,0,90deg)"),c(e.section,"TransformOrigin","left"),c(e.section,"Transform","perspective(700px) rotate3d(0,1,0,"+Math.abs(n.moveX)/e.width*90+"deg)")):i?(c(t.section,"TransformOrigin","right"),c(e.section,"TransformOrigin","left"),c(t.section,"Transform","perspective(700px) rotate3d(0,1,0,-90deg)"),c(e.section,"Transform","perspective(700px) rotate3d(0,1,0,"+n.moveX/e.width*90+"deg)")):(c(t.section,"TransformOrigin","left"),c(e.section,"TransformOrigin","right"),c(t.section,"Transform","perspective(700px) rotate3d(0,1,0,-90deg)"),c(e.section,"Transform","perspective(700px) rotate3d(0,1,0,"+-Math.abs(n.moveX)/e.width*90+"deg)"))}function r(e,t,n,i){return u()?void o(e,t,n,i):(n.moveX<0?(c(t.section,"TransformOrigin","left"),c(e.section,"TransformOrigin","right"),c(t.section,"Transform","perspective(700px) rotate3d(0,1,0,90deg)")):(c(t.section,"TransformOrigin","right"),c(e.section,"TransformOrigin","left"),c(t.section,"Transform","perspective(700px) rotate3d(0,1,0,-90deg)")),void c(e.section,"Transform","perspective(700px) rotate3d(0,1,0,"+n.moveX/e.width*90+"deg)"))}function a(e,t,n,i){var o=!0;return new Promise(function(r,a){if(c(t.section,"Transition",l.css+"transform 0.4s linear"),c(e.section,"Transition",l.css+"transform 0.4s linear"),Math.abs(n.moveX)<0&&Math.abs(n.moveX)<-20)c(e.section,"Transform","rotate3d(0,1,0,0deg)"),c(t.section,"Transform","rotate3d(0,1,0,0deg)"),o=!0;else{if(u())if(n.moveX<0){var s=i?-90:90;c(e.section,"Transform","perspective(700px) rotate3d(0,1,0, "+s+"deg)")}else{var p=i?90:-90;c(e.section,"Transform","perspective(700px) rotate3d(0,1,0, "+p+"deg)")}else n.moveX<0?c(e.section,"Transform","perspective(700px) rotate3d(0,1,0, -90deg)"):c(e.section,"Transform","perspective(700px) rotate3d(0,1,0, 90deg)");$(e.section).one("transitionend webkitTransitionEnd",function(){c(t.section,"Transform","perspective(700px) rotate3d(0,1,0, 0deg)")}),o=!1}$(t.section).one("transitionend webkitTransitionEnd",function(){c(t.section,"Transition",""),c(t.section,"TransformOrigin",""),c(t.section,"Transform",""),c(e.section,"Transition",""),c(e.section,"TransformOrigin",""),c(e.section,"Transform",""),r(o)})})}function s(e){return u()?-e.moveX:e.moveY}var c=n(166).preFixCss,l=n(166).prefix,u=n(27).mobilecheck;e.exports={pageMove:r,pageEnd:a,pageStart:i,getMoveDistance:s}},function(e,t,n){"use strict";function i(e){}function o(e,t,n){n.moveX>0?(s(t.section,"Transform","translateX(-"+(e.width-n.moveX)+"px)"),s(e.section,"Transform","translateX("+n.moveX+"px)")):(s(t.section,"Transform","translateX("+(e.width+n.moveX)+"px)"),s(e.section,"Transform","translateX("+n.moveX+"px)"))}function r(e,t,n){var i=!0;return new Promise(function(o,r){s(e.section,"Transition",c.css+"transform 0.4s linear"),s(t.section,"Transition",c.css+"transform 0.4s linear"),n.moveX>0&&n.moveX<20?(s(t.section,"Transform","translateX(-"+e.width+"px)"),s(e.section,"Transform","translateX(0)"),i=!0):n.moveX<0&&n.moveX>-20?(s(t.section,"Transform","translateX("+e.width+"px)"),s(e.section,"Transform","translateX(0)"),i=!0):(s(t.section,"Transform","translateX(0px)"),n.moveX>0?s(e.section,"Transform","translateX("+e.width+"px)"):s(e.section,"Transform","translateX("+-e.width+"px)"),i=!1),$(t.section).one("transitionend webkitTransitionEnd",function(){s(e.section,"Transition",""),s(t.section,"Transition",""),o(i)})})}function a(e){return e.moveX}var s=n(166).preFixCss,c=n(166).prefix;e.exports={pageMove:o,pageEnd:r,pageStart:i,getMoveDistance:a}},function(e,t,n){"use strict";function i(e){}function o(e,t,n,i){n.moveX<0?i?(c(t.section,"Transform","translateX(-"+(e.width+n.moveX)+"px)"),c(e.section,"Transform","translateX("+-n.moveX+"px)")):(c(t.section,"Transform","translateX("+(e.width+n.moveX)+"px)"),c(e.section,"Transform","translateX("+n.moveX+"px)")):i?(c(t.section,"Transform","translateX("+(e.width-n.moveX)+"px)"),c(e.section,"Transform","translateX(-"+n.moveX+"px)")):(c(t.section,"Transform","translateX(-"+(e.width-n.moveX)+"px)"),c(e.section,"Transform","translateX("+n.moveX+"px)"))}function r(e,t,n,i){return u()?void o(e,t,n,i):void(n.moveX<0?(c(t.section,"Transform","translateX(-"+(e.width+n.moveX)+"px)"),c(e.section,"Transform","translateX("+-n.moveX+"px)")):(c(t.section,"Transform","translateX("+(e.width-n.moveX)+"px)"),c(e.section,"Transform","translateX(-"+n.moveX+"px)")))}function a(e,t,n,i){var o=!0;return new Promise(function(r,a){if(c(e.section,"Transition",l.css+"transform 0.4s linear"),c(t.section,"Transition",l.css+"transform 0.4s linear"),n.moveX<0&&n.moveX>-20)c(t.section,"Transform","translateX("+e.width+"px)"),c(e.section,"Transform","translateX(0)"),o=!0;else if(n.moveX>0&&n.moveX<20)c(t.section,"Transform","translateX(-"+e.width+"px)"),c(e.section,"Transform","translateX(0)"),o=!0;else{c(t.section,"Transform","translateX(0px)");var s=0;n.moveX>0?(s=e.width,!i&&u()||(s=-e.width)):(s=-e.width,!i&&u()||(s=e.width)),c(e.section,"Transform","translateX("+s+"px)"),o=!1}$(t.section).one("transitionend webkitTransitionEnd",function(){c(e.section,"Transition",""),c(t.section,"Transition",""),r(o)})})}function s(e){return u()?-e.moveX:e.moveY}var c=n(166).preFixCss,l=n(166).prefix,u=n(27).mobilecheck;e.exports={pageMove:r,pageEnd:a,pageStart:i,getMoveDistance:s}},function(e,t,n){"use strict";function i(e){}function o(e,t,n){n.moveX>0?(s(t.section,"Transform","translateX(-"+(e.width-n.moveX)+"px)"),s(e.section,"Transform","scale("+((e.height-n.moveY)/e.height).toFixed(3)+")")):(s(t.section,"Transform","translateX("+(e.width+n.moveX)+"px)"),s(e.section,"Transform","scale("+((e.height+n.moveY)/e.height).toFixed(3)+")"))}function r(e,t,n){var i=!0;return new Promise(function(o,r){s(e.section,"Transition",c.css+"transform 0.4s linear"),s(t.section,"Transition",c.css+"transform 0.4s linear"),n.moveX>0&&n.moveX<20?(s(t.section,"Transform","translateX(-"+e.height+"px)"),s(e.section,"Transform","scale(1)"),i=!0):n.moveX<0&&n.moveX>-20?(s(t.section,"Transform","translateX("+e.height+"px)"),s(e.section,"Transform","scale(1)"),i=!0):(s(t.section,"Transform","translateX(0px)"),s(e.section,"Transform","scale(0.2)"),i=!1),$(t.section).one("transitionend webkitTransitionEnd",function(){s(e.section,"Transition",""),s(t.section,"Transition",""),o(i)})})}function a(e){return e.moveX}var s=n(166).preFixCss,c=n(166).prefix;e.exports={pageMove:o,pageEnd:r,pageStart:i,getMoveDistance:a}},function(e,t,n){"use strict";function i(e){}function o(e,t,n,i){return l()?void(n.moveX>0?i?(s(t.section,"Transform","translateX("+(e.width-n.moveX)+"px)"),s(e.section,"Transform","scale("+((e.height-n.moveX)/e.height).toFixed(3)+")")):(s(t.section,"Transform","translateX(-"+(e.width-n.moveX)+"px)"),s(e.section,"Transform","scale("+((e.height-n.moveX)/e.height).toFixed(3)+")")):i?(s(t.section,"Transform","translateX(-"+(e.width-n.moveX)+"px)"),s(e.section,"Transform","scale("+((e.height-n.moveX)/e.height).toFixed(3)+")")):(s(t.section,"Transform","translateX("+(e.width+n.moveX)+"px)"),s(e.section,"Transform","scale("+((e.height+n.moveX)/e.height).toFixed(3)+")"))):void(n.moveX<0?(s(t.section,"Transform","translateX(-"+(e.width+n.moveX)+"px)"),s(e.section,"Transform","scale("+((e.height+n.moveY)/e.height).toFixed(3)+")")):(s(t.section,"Transform","translateX("+(e.width-n.moveX)+"px)"),s(e.section,"Transform","scale("+((e.height-n.moveY)/e.height).toFixed(3)+")")))}function r(e,t,n){var i=!0;return new Promise(function(o,r){if(s(e.section,"Transition",c.css+"transform 0.4s linear"),s(t.section,"Transition",c.css+"transform 0.4s linear"),n.moveX<0&&n.moveX>-20){var a=e.height;l()||(a=-e.height),s(t.section,"Transform","translateX("+a+"px)"),s(e.section,"Transform","scale(1)"),i=!0}else if(n.moveX>0&&n.moveX<20){var u=e.height;l()&&(u=-e.height),s(t.section,"Transform","translateX("+u+"px)"),s(e.section,"Transform","scale(1)"),i=!0}else s(t.section,"Transform","translateX(0px)"),s(e.section,"Transform","scale(0.2)"),i=!1;$(t.section).one("transitionend webkitTransitionEnd",function(){s(e.section,"Transition",""),s(t.section,"Transition",""),o(i)})})}function a(e){return l()?-e.moveX:e.moveY}var s=n(166).preFixCss,c=n(166).prefix,l=n(27).mobilecheck;e.exports={pageMove:o,pageEnd:r,pageStart:i,getMoveDistance:a}},function(e,t,n){"use strict";function i(e){}function o(e,t,n){s(t.section,"TransformOrigin","center"),s(e.section,"TransformOrigin","center"),s(t.section,"Transform","rotate3d(0,1,0,90deg)"),s(e.section,"Transform","rotate3d(0,1,0,"+n.moveY/e.height*90+"deg)")}function r(e,t,n){var i=!0,o=!1;return new Promise(function(r,a){function l(){o=!0,s(t.section,"Transition",""),s(t.section,"TransformOrigin",""),s(t.section,"Transform",""),s(e.section,"Transition",""),s(e.section,"TransformOrigin",""),s(e.section,"Transform",""),r(i)}s(t.section,"Transition",c.css+"transform 0.4s linear"),s(e.section,"Transition",c.css+"transform 0.4s linear"),Math.abs(n.moveY)<20?(s(e.section,"Transform","rotate3d(0,1,0,0deg)"),i=!0,$(e.section).one("transitionend webkitTransitionEnd",function(){l()})):(n.moveY>0?s(e.section,"Transform","rotate3d(0,1,0,90deg)"):s(e.section,"Transform","rotate3d(0,1,0,-90deg)"),i=!1,$(e.section).one("transitionend webkitTransitionEnd",function(){$(t.section).one("transitionend webkitTransitionEnd",function(){l()}),s(t.section,"Transform","rotate3d(0,1,0,0deg)")})),setTimeout(function(){o||l()},1e3)})}function a(e){return e.moveY}var s=n(166).preFixCss,c=n(166).prefix;e.exports={pageMove:o,pageEnd:r,pageStart:i,getMoveDistance:a}},function(e,t,n){"use strict";function i(e){}function o(e,t,n){var i=Math.abs(n.moveY)/e.height*1.3;t.section.style.opacity=i.toFixed(1),i.toFixed(3)<=1&&s(t.section,"Transform","scale("+i.toFixed(3)+")")}function r(e,t,n){var i=!0,o=!1;return new Promise(function(e,r){s(t.section,"Transition",c.css+"transform 0.4s linear"),n.moveY>0&&n.moveY<20?(s(t.section,"Transform","scale(0)"),t.section.style.opacity=0,i=!0):n.moveY<0&&n.moveY>-20?(s(t.section,"Transform","scale(0)"),t.section.style.opacity=0,i=!0):(s(t.section,"Transform","scale(1)"),t.section.style.opacity=1,i=!1),$(t.section).one("transitionend webkitTransitionEnd",function(){o=!0,s(t.section,"Transition",""),t.section.style.opacity="",e(i)}),o||setTimeout(function(){o=!0,s(t.section,"Transition",""),t.section.style.opacity="",e(i)},450)})}function a(e){return e.moveY}var s=n(166).preFixCss,c=n(166).prefix;e.exports={pageMove:o,pageEnd:r,pageStart:i,getMoveDistance:a}},function(e,t,n){"use strict";function i(e){}function o(e,t,n){var i=Math.abs(n.moveY)/e.height*1.3;t.section.style.opacity=i.toFixed(1),i.toFixed(3)<=1&&s(t.section,"Transform","scale("+i.toFixed(3)+")")}function r(e,t,n){var i=!0,o=!1;return new Promise(function(e,r){s(t.section,"Transition",c.css+"transform 0.4s linear"),n.moveY>0&&n.moveY<20?(s(t.section,"Transform","scale(0)"),t.section.style.opacity=0,i=!0):n.moveY<0&&n.moveY>-20?(s(t.section,"Transform","scale(0)"),t.section.style.opacity=0,i=!0):(s(t.section,"Transform","scale(1)"),t.section.style.opacity=1,i=!1),$(t.section).one("transitionend webkitTransitionEnd",function(){o=!0,s(t.section,"Transition",""),t.section.style.opacity="",e(i)}),o||setTimeout(function(){o=!0,s(t.section,"Transition",""),t.section.style.opacity="",e(i)},450)})}function a(e){return e.moveY}var s=n(166).preFixCss,c=n(166).prefix;e.exports={pageMove:o,pageEnd:r,pageStart:i,getMoveDistance:a}},function(e,t,n){"use strict";function i(e){}function o(e,t,n){e.section.style.zIndex=3}function r(e,t,n){var i=!0,o=!1;return new Promise(function(r,a){function s(){o=!0,t.section.classList.remove("spiral-rotate-enter"),e.section.classList.remove("spiral-rotate-leave"),r(i)}Math.abs(n.moveY)<20?(e.section.style.zIndex="",i=!0,o=!0,r(i)):(e.section.style.zIndex="",t.section.classList.add("spiral-rotate-enter"),e.section.classList.add("spiral-rotate-leave"),i=!1,$(t.section).one("animationend webkitAnimationEnd",function(){s()}),setTimeout(function(){o||s()},1050))})}function a(e){return e.moveY}n(778),e.exports={pageMove:o,pageEnd:r,pageStart:i,getMoveDistance:a}},function(e,t){},function(e,t,n){"use strict";function i(e){}function o(e){e.$cloneSection&&e.$cloneSection.remove(),delete e.$cloneSection,delete e.pageSectionCt0,delete e.pageSectionCt1,delete e.pageSectionCt2,delete e.pageSectionCt3}function r(e,t,n){if(u){u=!1,e.$cloneSection&&e.$cloneSection.remove(),e.$cloneSection=$('<div class="clone-page-ct"></div>'),e.$cloneSection.css({position:"absolute",width:"100%",height:"100%",overflow:"hidden",zIndex:0});for(var i=0;i<4;i++){var o=$('<div class="clone-page-section'+i+'-ct"></div>'),r=$(e.section).clone(),a=i>1?"50%":0,s=i%2?"50%":0;o.css({position:"absolute",top:s,left:a,width:"50%",height:"50%",overflow:"hidden",zIndex:1}),r.css({position:"absolute",top:0,left:0,width:"200%",height:"200%",transform:"translate(-"+a+", -"+s+")",overflow:"hidden",zIndex:1}),r.find("div.element-box, li.item-comp").css("animation","none"),o.append(r),e.$cloneSection.append(o),e["pageSectionCt"+i]=o[0]}$(e.section).before(e.$cloneSection)}if(Math.abs(n.moveY)<5)t.section.style.opacity=0;else{e.$cloneSection.css("z-index",3);var l=Math.abs(n.moveY)/e.height*1.3;if(e.section.style.opacity=0,t.section.style.opacity=l<.1?0:1,l.toFixed(3)<=1){c(t.section,"Transform","scale("+l.toFixed(3)+")");var p=100*(.5*l).toFixed(3)+"%";c(e.pageSectionCt0,"Transform","translate3d(-"+p+", -"+p+", 0)"),c(e.pageSectionCt1,"Transform","translate3d(-"+p+", "+p+", 0)"),c(e.pageSectionCt2,"Transform","translate3d("+p+", -"+p+", 0)"),c(e.pageSectionCt3,"Transform","translate3d("+p+", "+p+", 0)")}}}function a(e,t,n){var i=!0,r=!1;return new Promise(function(a,s){function p(){r=!0,u=!0,c(t.section,"Transition",""),t.section.style.opacity="",e.section.style.opacity="",o(e),a(i)}c(t.section,"Transition",l.css+"transform 0.4s linear"),c(e.pageSectionCt0,"Transition",l.css+"transform 450ms linear"),c(e.pageSectionCt1,"Transition",l.css+"transform 450ms linear"),c(e.pageSectionCt2,"Transition",l.css+"transform 450ms linear"),c(e.pageSectionCt3,"Transition",l.css+"transform 450ms linear"),Math.abs(n.moveY)<20?(c(t.section,"Transform","scale(0)"),t.section.style.opacity=0,c(e.pageSectionCt0,"Transform","translate3d(0, 0, 0)"),c(e.pageSectionCt1,"Transform","translate3d(0, 0, 0)"),c(e.pageSectionCt2,"Transform","translate3d(0, 0, 0)"),c(e.pageSectionCt3,"Transform","translate3d(0, 0, 0)"),i=!0):(c(t.section,"Transform","scale(1)"),t.section.style.opacity=1,c(e.pageSectionCt0,"Transform","translate3d(-100%, -100%, 0)"),c(e.pageSectionCt1,"Transform","translate3d(-100%, 100%, 0)"),c(e.pageSectionCt2,"Transform","translate3d(100%, -100%, 0)"),c(e.pageSectionCt3,"Transform","translate3d(100%, 100%, 0)"),i=!1),$(e.pageSectionCt0).one("transitionend webkitTransitionEnd",function(){p()}),r||setTimeout(function(){p()},500)})}function s(e){return e.moveY}var c=n(166).preFixCss,l=n(166).prefix,u=!0;e.exports={pageMove:r,pageEnd:a,pageStart:i,getMoveDistance:s}},function(e,t,n){"use strict";function i(e){}function o(e,t,n){t.section.style.zIndex=0,n.moveX>0?(n.moveX<=e.width/4?s(e.section,"Transform","translate3d("+n.moveX+"px, 0, 0)"):s(e.section,"Transform","translate3d("+1.5*n.moveX+"px, 0, -"+(n.moveX-e.width/4)+"px) scale("+((5*e.width/4-n.moveX)/e.width).toFixed(3)+") rotateY("+n.moveX/e.width*45+"deg)"),s(t.section,"Transform","scale("+(.3-(-n.moveX+e.width/4)/e.width).toFixed(3)+") translate3d(-"+(n.moveX-e.width/4+200)+"px, 0, "+(-n.moveX+3*e.width/4)+"px) rotateY("+(45+(-n.moveX+e.width/4)/e.width*45)+"deg)")):(n.moveX>=-e.width/4?s(e.section,"Transform","translate3d("+n.moveX+"px, 0, 0)"):s(e.section,"Transform","translate3d("+1.5*n.moveX+"px, 0, "+(n.moveX+e.width/4)+"px) scale("+((5*e.width/4+n.moveX)/e.width).toFixed(3)+") rotateY("+n.moveX/e.width*45+"deg)"),s(t.section,"Transform","scale("+(.3-(n.moveX+e.width/4)/e.width).toFixed(3)+") translate3d("+(-n.moveX-e.width/4+200)+"px,0,"+(-n.moveX-3*e.width/4)+"px) rotateY("+(45+(n.moveX+e.width/4)/e.width*45)+"deg)"))}function r(e,t,n){var i=!0;return new Promise(function(o,r){s(e.section,"Transition",c.css+"transform 0.4s linear"),s(t.section,"Transition",c.css+"transform 0.4s linear"),n.moveX>0&&n.moveX<20?(s(e.section,"Transform","translate3d(0,0,0) rotateY(0) scale(1)"),i=!0):n.moveX<0&&n.moveX>-20?(s(e.section,"Transform","translate3d(0,0,0) rotateY(0) scale(1)"),i=!0):(t.section.style.zIndex=2,n.moveX>0?s(e.section,"Transform","translate3d(0, 0, -"+e.width+"px) rotateY(0) scale(0.2)"):s(e.section,"Transform","translate3d("+e.width+"px, 0, -"+e.width+"px) rotateY(0) scale(0.2)"),s(t.section,"Transform","translate3d(0,0,0) rotateY(0) scale(1)"),i=!1),$(e.section).one("transitionend webkitTransitionEnd",function(){t.section.style.zIndex="",s(e.section,"Transition",""),s(t.section,"Transition",""),o(i)})})}function a(e){return e.moveX}var s=n(166).preFixCss,c=n(166).prefix;e.exports={pageMove:o,pageEnd:r,pageStart:i,getMoveDistance:a}},function(e,t,n){"use strict";function i(e){}function o(e,t,n){t.section.style.zIndex=0,n.moveX>0?(n.moveX<=e.width/4?s(e.section,"Transform","translate3d("+n.moveX+"px, 0, 0)"):s(e.section,"Transform","translate3d("+1.5*n.moveX+"px, 0, -"+(n.moveX-e.width/4)+"px) scale("+((5*e.width/4-n.moveX)/e.width).toFixed(3)+") rotateY("+n.moveX/e.width*45+"deg)"),s(t.section,"Transform","scale("+(.3-(-n.moveX+e.width/4)/e.width).toFixed(3)+") translate3d(-"+(n.moveX-e.width/4+200)+"px, 0, "+(-n.moveX+3*e.width/4)+"px) rotateY("+(45+(-n.moveX+e.width/4)/e.width*45)+"deg)")):(n.moveX>=-e.width/4?s(e.section,"Transform","translate3d("+n.moveX+"px, 0, 0)"):s(e.section,"Transform","translate3d("+1.5*n.moveX+"px, 0, "+(n.moveX+e.width/4)+"px) scale("+((5*e.width/4+n.moveX)/e.width).toFixed(3)+") rotateY("+n.moveX/e.width*45+"deg)"),s(t.section,"Transform","scale("+(.3-(n.moveX+e.width/4)/e.width).toFixed(3)+") translate3d("+(-n.moveX-e.width/4+200)+"px,0,"+(-n.moveX-3*e.width/4)+"px) rotateY("+(45+(n.moveX+e.width/4)/e.width*45)+"deg)"))}function r(e,t,n){var i=!0;return new Promise(function(o,r){s(e.section,"Transition",c.css+"transform 0.4s linear"),s(t.section,"Transition",c.css+"transform 0.4s linear"),n.moveX>0&&n.moveX<20?(s(e.section,"Transform","translate3d(0,0,0) rotateY(0) scale(1)"),i=!0):n.moveX<0&&n.moveX>-20?(s(e.section,"Transform","translate3d(0,0,0) rotateY(0) scale(1)"),i=!0):(t.section.style.zIndex=2,n.moveX>0?s(e.section,"Transform","translate3d(0, 0, -"+e.width+"px) rotateY(0) scale(0.2)"):s(e.section,"Transform","translate3d("+e.width+"px, 0, -"+e.width+"px) rotateY(0) scale(0.2)"),s(t.section,"Transform","translate3d(0,0,0) rotateY(0) scale(1)"),i=!1),$(e.section).one("transitionend webkitTransitionEnd",function(){t.section.style.zIndex="",s(e.section,"Transition",""),s(t.section,"Transition",""),o(i)})})}function a(e){return e.moveX}var s=n(166).preFixCss,c=n(166).prefix;e.exports={pageMove:o,pageEnd:r,pageStart:i,getMoveDistance:a}},function(e,t,n){"use strict";function i(e){}function o(e,t,n){n.moveY>0?(s(t.section,"Transform","translateY(-"+(e.height-n.moveY)+"px)"),s(e.section,"Transform","scale("+((e.height-n.moveY)/e.height).toFixed(3)+")")):(s(t.section,"Transform","translateY("+(e.height+n.moveY)+"px)"),s(e.section,"Transform","scale("+((e.height+n.moveY)/e.height).toFixed(3)+")"))}function r(e,t,n){var i=!0,o=!1;return new Promise(function(r,a){s(e.section,"Transition",c.css+"transform 0.4s linear"),s(t.section,"Transition",c.css+"transform 0.4s linear"),n.moveY>0&&n.moveY<20?(s(t.section,"Transform","translateY(-"+e.height+"px)"),s(e.section,"Transform","scale(1)"),i=!0):n.moveY<0&&n.moveY>-20?(s(t.section,"Transform","translateY("+e.height+"px)"),s(e.section,"Transform","scale(1)"),i=!0):(s(t.section,"Transform","translateY(0px)"),s(e.section,"Transform","scale(0.2)"),i=!1),$(t.section).one("transitionend webkitTransitionEnd",function(){o=!0,s(e.section,"Transition",""),s(t.section,"Transition",""),r(i)}),o||setTimeout(function(){o=!0,s(e.section,"Transition",""),s(t.section,"Transition",""),r(i)},450)})}function a(e){return e.moveY}var s=n(166).preFixCss,c=n(166).prefix;e.exports={pageMove:o,pageEnd:r,pageStart:i,getMoveDistance:a}},function(e,t,n){"use strict";function i(e){}function o(e,t,n){n.moveY>0?(s(t.section,"Transform","translateY(-"+(e.height-n.moveY)+"px)"),s(e.section,"Transform","scale("+((e.height-n.moveY)/e.height).toFixed(3)+")")):(s(t.section,"Transform","translateY("+(e.height+n.moveY)+"px)"),s(e.section,"Transform","scale("+((e.height+n.moveY)/e.height).toFixed(3)+")"))}function r(e,t,n){var i=!0,o=!1;return new Promise(function(r,a){s(e.section,"Transition",c.css+"transform 0.4s linear"),s(t.section,"Transition",c.css+"transform 0.4s linear"),n.moveY>0&&n.moveY<20?(s(t.section,"Transform","translateY(-"+e.height+"px)"),s(e.section,"Transform","scale(1)"),i=!0):n.moveY<0&&n.moveY>-20?(s(t.section,"Transform","translateY("+e.height+"px)"),s(e.section,"Transform","scale(1)"),i=!0):(s(t.section,"Transform","translateY(0px)"),s(e.section,"Transform","scale(0.2)"),i=!1),$(t.section).one("transitionend webkitTransitionEnd",function(){o=!0,s(e.section,"Transition",""),s(t.section,"Transition",""),r(i)}),o||setTimeout(function(){o=!0,s(e.section,"Transition",""),s(t.section,"Transition",""),r(i)},450)})}function a(e){return l()?e.moveY:e.moveX}var s=n(166).preFixCss,c=n(166).prefix,l=n(27).mobilecheck;e.exports={pageMove:o,pageEnd:r,pageStart:i,getMoveDistance:a}},function(e,t,n){"use strict";function i(e){}function o(e,t,n){n.moveY>0?s(t.section,"Transform","translateY(-"+(e.height-n.moveY)+"px)"):s(t.section,"Transform","translateY("+(e.height+n.moveY)+"px)")}function r(e,t,n){var i=!0,o=!1;return new Promise(function(r,a){s(t.section,"Transition",c.css+"transform 0.4s linear"),n.moveY>0&&n.moveY<20?(s(t.section,"Transform","translateY(-"+e.height+"px)"),i=!0):n.moveY<0&&n.moveY>-20?(s(t.section,"Transform","translateY("+e.height+"px)"),i=!0):(s(t.section,"Transform","translateY(0px)"),i=!1),$(t.section).one("transitionend webkitTransitionEnd",function(){o=!0,s(t.section,"Transition",""),r(i)}),o||setTimeout(function(){o=!0,s(t.section,"Transition",""),r(i)},450)})}function a(e){return e.moveY}var s=n(166).preFixCss,c=n(166).prefix;e.exports={pageMove:o,pageEnd:r,pageStart:i,getMoveDistance:a}},function(e,t,n){"use strict";function i(e){}function o(e,t,n){n.moveY>0?s(t.section,"Transform","translateY(-"+(e.height-n.moveY)+"px)"):s(t.section,"Transform","translateY("+(e.height+n.moveY)+"px)")}function r(e,t,n){var i=!0,o=!1;return new Promise(function(r,a){s(t.section,"Transition",c.css+"transform 0.4s linear"),n.moveY>0&&n.moveY<20?(s(t.section,"Transform","translateY(-"+e.height+"px)"),i=!0):n.moveY<0&&n.moveY>-20?(s(t.section,"Transform","translateY("+e.height+"px)"),i=!0):(s(t.section,"Transform","translateY(0px)"),i=!1),$(t.section).one("transitionend webkitTransitionEnd",function(){o=!0,s(t.section,"Transition",""),r(i)}),o||setTimeout(function(){o=!0,s(t.section,"Transition",""),r(i)},450)})}function a(e){return l()?e.moveY:e.moveX}var s=n(166).preFixCss,c=n(166).prefix,l=n(27).mobilecheck;e.exports={pageMove:o,pageEnd:r,pageStart:i,getMoveDistance:a}},function(e,t,n){"use strict";function i(e){}function o(e){e.$cloneSection&&e.$cloneSection.remove(),delete e.$cloneSection;for(var t=0;t<u;t++)delete e["pageSectionCt"+t]}function r(e,t,n){if(p){p=!1,e.$cloneSection&&e.$cloneSection.remove(),e.$cloneSection=$('<div class="clone-page-ct"></div>'),e.$cloneSection.css({position:"absolute",width:"100%",height:"100%",overflow:"hidden",zIndex:0});for(var i=320/u,o=0;o<u;o++){var r=$('<div class="clone-page-section'+o+'-ct"></div>'),a=$(e.section).clone();r.css({position:"absolute",top:0,left:i*o+"px",width:i+"px",height:"100%",overflow:"hidden",zIndex:1}),a.css({position:"absolute",top:0,left:"-"+i*o+"px",width:u+"00%",height:"100%",overflow:"hidden",zIndex:1}),a.find("div.element-box, li.item-comp").css("animation","none"),r.append(a),e.$cloneSection.append(r),e["pageSectionCt"+o]=r[0]}$(e.section).before(e.$cloneSection)}if(Math.abs(n.moveY)<5)t.section.style.opacity=0;else{e.$cloneSection.css("z-index",3),t.section.style.opacity="";var s=Math.abs(n.moveY)/e.height*1.3;if(s.toFixed(3)<=1&&Math.abs(n.moveY)>5)for(var l=1-s.toFixed(3),d=0;d<u;d++)c(e["pageSectionCt"+d],"Transform","scale("+l+", 1)")}}function a(e,t,n){var i=!0,r=!1;return new Promise(function(a,s){function d(){r=!0,p=!0,t.section.style.opacity="",o(e),a(i)}for(var h=0;h<u;h++)c(e["pageSectionCt"+h],"Transition",l.css+"transform 0.4s linear");if(Math.abs(n.moveY)<20){for(var f=0;f<u;f++)c(e["pageSectionCt"+f],"Transform","scale(1, 1)");i=!0}else{for(var g=0;g<u;g++)c(e["pageSectionCt"+g],"Transform","scale(0, 1)");i=!1}$(e.pageSectionCt0).one("transitionend webkitTransitionEnd",function(){d()}),r||setTimeout(function(){d()},450)})}function s(e){return e.moveY}var c=n(166).preFixCss,l=n(166).prefix,u=6,p=!0;e.exports={pageMove:r,pageEnd:a,pageStart:i,getMoveDistance:s}},function(e,t,n){"use strict";function i(e){}function o(e,t,n){n.moveY>0?(s(e.section,"TransformOrigin","bottom"),s(t.section,"TransformOrigin","top"),s(t.section,"Transform","perspective(700px) rotate3d(1,0,0,-90deg)")):(s(t.section,"TransformOrigin","bottom"),s(e.section,"TransformOrigin","top"),s(t.section,"Transform","perspective(700px) rotate3d(1,0,0,90deg)")),s(e.section,"Transform","perspective(700px) rotate3d(1,0,0,"+n.moveY/e.height*90+"deg)")}function r(e,t,n){var i=!0;return new Promise(function(o,r){s(t.section,"Transition",c.css+"transform 0.4s linear"),s(e.section,"Transition",c.css+"transform 0.4s linear"),Math.abs(n.moveY)>0&&Math.abs(n.moveY)<20?(s(e.section,"Transform","rotate3d(1,0,0,0deg)"),s(t.section,"Transform","rotate3d(1,0,0,0deg)"),i=!0):(n.moveY>0?s(e.section,"Transform","perspective(700px) rotate3d(1,0,0, 90deg)"):s(e.section,"Transform","perspective(700px) rotate3d(1,0,0, -90deg)"),$(e.section).one("transitionend webkitTransitionEnd",function(){s(t.section,"Transform","perspective(700px) rotate3d(1,0,0, 0deg)")}),i=!1),$(t.section).one("transitionend webkitTransitionEnd",function(){s(t.section,"Transition",""),s(t.section,"TransformOrigin",""),s(t.section,"Transform",""),s(e.section,"Transition",""),s(e.section,"TransformOrigin",""),s(e.section,"Transform",""),o(i)})})}function a(e){return e.moveY}var s=n(166).preFixCss,c=n(166).prefix;e.exports={pageMove:o,pageEnd:r,pageStart:i,getMoveDistance:a}},function(e,t,n){"use strict";function i(e){}function o(e,t,n){n.moveY>0?(s(e.section,"TransformOrigin","bottom"),s(t.section,"TransformOrigin","top"),s(t.section,"Transform","perspective(700px) rotate3d(1,0,0,-90deg)")):(s(t.section,"TransformOrigin","bottom"),s(e.section,"TransformOrigin","top"),s(t.section,"Transform","perspective(700px) rotate3d(1,0,0,90deg)")),s(e.section,"Transform","perspective(700px) rotate3d(1,0,0,"+n.moveY/e.height*90+"deg)")}function r(e,t,n){var i=!0;return new Promise(function(o,r){s(t.section,"Transition",c.css+"transform 0.4s linear"),s(e.section,"Transition",c.css+"transform 0.4s linear"),Math.abs(n.moveY)>0&&Math.abs(n.moveY)<20?(s(e.section,"Transform","rotate3d(1,0,0,0deg)"),s(t.section,"Transform","rotate3d(1,0,0,0deg)"),i=!0):(n.moveY>0?s(e.section,"Transform","perspective(700px) rotate3d(1,0,0, 90deg)"):s(e.section,"Transform","perspective(700px) rotate3d(1,0,0, -90deg)"),$(e.section).one("transitionend webkitTransitionEnd",function(){s(t.section,"Transform","perspective(700px) rotate3d(1,0,0, 0deg)")}),i=!1),$(t.section).one("transitionend webkitTransitionEnd",function(){s(t.section,"Transition",""),s(t.section,"TransformOrigin",""),s(t.section,"Transform",""),s(e.section,"Transition",""),s(e.section,"TransformOrigin",""),s(e.section,"Transform",""),o(i)})})}function a(e){
return l()?e.moveY:e.moveX}var s=n(166).preFixCss,c=n(166).prefix,l=n(27).mobilecheck;e.exports={pageMove:o,pageEnd:r,pageStart:i,getMoveDistance:a}},function(e,t,n){"use strict";function i(e){}function o(e,t,n){n.moveY>0?(s(t.section,"Transform","translateY(-"+(e.height-n.moveY)+"px)"),s(e.section,"Transform","translateY("+n.moveY+"px)")):(s(t.section,"Transform","translateY("+(e.height+n.moveY)+"px)"),s(e.section,"Transform","translateY("+n.moveY+"px)"))}function r(e,t,n){var i=!0;return new Promise(function(o,r){s(e.section,"Transition",c.css+"transform 0.4s linear"),s(t.section,"Transition",c.css+"transform 0.4s linear"),n.moveY>0&&n.moveY<20?(s(t.section,"Transform","translateY(-"+e.height+"px)"),s(e.section,"Transform","translateY(0)"),i=!0):n.moveY<0&&n.moveY>-20?(s(t.section,"Transform","translateY("+e.height+"px)"),s(e.section,"Transform","translateY(0)"),i=!0):(s(t.section,"Transform","translateY(0px)"),n.moveY>0?s(e.section,"Transform","translateY("+e.height+"px)"):s(e.section,"Transform","translateY("+-e.height+"px)"),i=!1),$(t.section).one("transitionend webkitTransitionEnd",function(){s(e.section,"Transition",""),s(t.section,"Transition",""),o(i)})})}function a(e){return e.moveY}var s=n(166).preFixCss,c=n(166).prefix;e.exports={pageMove:o,pageEnd:r,pageStart:i,getMoveDistance:a}},function(e,t,n){"use strict";function i(e){}function o(e,t,n){n.moveY>0?(s(t.section,"Transform","translateY(-"+(e.height-n.moveY)+"px)"),s(e.section,"Transform","translateY("+n.moveY+"px)")):(s(t.section,"Transform","translateY("+(e.height+n.moveY)+"px)"),s(e.section,"Transform","translateY("+n.moveY+"px)"))}function r(e,t,n){var i=!0;return new Promise(function(o,r){s(e.section,"Transition",c.css+"transform 0.4s linear"),s(t.section,"Transition",c.css+"transform 0.4s linear"),n.moveY>0&&n.moveY<20?(s(t.section,"Transform","translateY(-"+e.height+"px)"),s(e.section,"Transform","translateY(0)"),i=!0):n.moveY<0&&n.moveY>-20?(s(t.section,"Transform","translateY("+e.height+"px)"),s(e.section,"Transform","translateY(0)"),i=!0):(s(t.section,"Transform","translateY(0px)"),n.moveY>0?s(e.section,"Transform","translateY("+e.height+"px)"):s(e.section,"Transform","translateY("+-e.height+"px)"),i=!1),$(t.section).one("transitionend webkitTransitionEnd",function(){s(e.section,"Transition",""),s(t.section,"Transition",""),o(i)})})}function a(e){return l()?e.moveY:e.moveX}var s=n(166).preFixCss,c=n(166).prefix,l=n(27).mobilecheck;e.exports={pageMove:o,pageEnd:r,pageStart:i,getMoveDistance:a}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(792);var r=n(793),a=n(794),s=n(104),c=n(796),l=c.AnimationStart,u=c.AnimationEnd,p=n(797),d=n(800),h=d.getLrc,f=n(24),g=function(){function e(t,n){var o=this;i(this,e),this.bgAudioJson=t,this.eqxScene=n,this.$bgmBtn=$(r),this.eqxScene.getOrientation().isLandScape()&&this.$bgmBtn.css({bottom:"20px",top:"unset"}),n.sceneJson.meta.property.bgAudioIcon&&this.updateIcon(),this.bgAudioJson&&(t.lrc&&t.lrc.apply&&!t.lrc.nolrc&&(this.lrcCtr=new p({lineCount:1,eqxScene:this.eqxScene}),this.getLrc().then(function(e){e?o.lrcCtr.add(JSON.parse(e).lrcText):o.lrcCtr.add("")},function(){o.lrcCtr.add("")})),this.soundAgent=new a(this,this.eqxScene.soundManager))}return o(e,[{key:"destroy",value:function(){this.$bgmBtn&&(this.soundAgent.destroy(),this.soundAgent=null,this.$bgmBtn.remove(),this.$bgmBtn=null)}},{key:"updateJson",value:function(e){this.soundAgent.update(new s("src",e))}},{key:"show",value:function(){this.$bgmBtn&&this.$bgmBtn.show()}},{key:"resumePlay",value:function(){this.soundAgent&&this.soundAgent.update(new s("end"))}},{key:"stopPlay",value:function(){this.soundAgent&&this.soundAgent.update(new s("stop"))}},{key:"hide",value:function(){this.$bgmBtn&&this.$bgmBtn.hide()}},{key:"startRotate",value:function(){this.$bgmBtn&&l(this.$bgmBtn.find(".bgm-btn"),"rotate")}},{key:"stopRotate",value:function(){this.$bgmBtn&&u(this.$bgmBtn.find(".bgm-btn").get(0),this.$bgmBtn.get(0),"rotate")}},{key:"getLrc",value:function(){var e=this.bgAudioJson.lrc.songId;return h(e)}},{key:"playLrc",value:function(){this.lrcCtr&&this.lrcCtr.play()}},{key:"pauseLrc",value:function(){this.lrcCtr&&this.lrcCtr.pause()}},{key:"timeUpdate",value:function(e){this.lrcCtr.timeUpdate(e)}},{key:"updateIcon",value:function(){var e=f.FILE+this.eqxScene.sceneJson.meta.property.bgAudioIcon;this.$bgmBtn.find(".bgm-btn").css("backgroundImage","url("+e+")")}},{key:"display",get:function(){return this.$bgmBtn.css("display")}}]),e}();e.exports=g},function(e,t){},function(e,t){e.exports='<div class="bgm-btn-wraper"><div class="bgm-btn" data-event="11205"><audio loop="" src="" autoplay="" preload></audio></div></div>'},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(106),c=n(24),l=n(26).resolveUrl,u=n(27),p=u.mobilecheck,d=u.isFeiShuView,h=n(69).getWxJSSDK,f=n(27).isWeixin,g=n(27).isIOS,m=p()&&!d()?"touchend":"click",v=n(28).isXiuTui,y=n(28).isEqxWxMini,b=n(690),x=b.getMusic,w=b.reportTMusic,k=n(795),S=n(29),I=S.getSecondsOfDateStr,T=n(35),E=T.dateFormat,P=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.manager=n,r.isManualPause=!1,r.$audio=r.master.$bgmBtn.find("audio"),r.audio=r.$audio[0],r.type=3,f()&&(r.wxJssdk=h()),window.EQX={startBgm:r.startPlay.bind(r),pauseBgm:r.stopPlay.bind(r)},r.init(),r}return r(t,e),a(t,[{key:"destroy",value:function(){this.$audio.attr("src","").off("canplay play pause"),this.$audio.remove(),this.$audio=null,this.audio=null,this.master.$bgmBtn.off("click"),window.EQX.startBgm=function(){},window.EQX.pauseBgm=function(){},this.deregister()}},{key:"init",value:function(){var e=this,t=this.master.bgAudioJson;this.$audio.attr("src",l(c.FILE,t.url||t.src));try{(t.isTencentMusic||t.url.indexOf("tingmall.com")!==-1)&&w({user_id:""+k(),song_id:t.id,song_duration:I(t.song_duration),song_list_id:t.song_list_id,duration_of_play:I(t.song_duration),timestamp:E(new Date,"yyyy-MM-dd hh:mm:ss")})["catch"](function(e){console.log(e)})}catch(n){}this.$audio.on("error",function(n){t.url&&t.url.indexOf("tingmall.com")!==-1&&e.reGetMusic(t.id)}),this.audio.load(),this.addEventListeners(),this.register(),this.master.show()}},{key:"reGetMusic",value:function(e){var t=this;x(e).then(function(e){var n={type:"src",data:e};t.update(n)})}},{key:"update",value:function(e){var t=this;switch(e.type){case"src":var n=e.data;this.$audio.attr("src",l(c.FILE,n.url||n.src)),this.audio.load(),this.$audio.on("canplay",function(){t.audio.play()});break;case"hide":this.hide();break;case"show":this.show();break;case"stop":this.stopPlay();break;case"end":this.isManualPause||this.startPlay();break;case"down":g()?this.stopPlay():this.audio.volume=.1;break;case"restore":g()?this.startPlay():this.audio.volume=1;break;case"play":this.startPlay()}}},{key:"addEventListeners",value:function(){function e(){n.audio&&n.audio.paused?n.startPlay(!0):$(document.body).bind(m,e)}var t=this,n=this,i=this.$audio;i.on("play",function(){console.log("play"),$(document.body).unbind(m,e),t.master.startRotate(),t.master.playLrc()}),i.on("pause",function(){console.log("pause"),t.master.stopRotate(),t.master.pauseLrc()}),this.master.lrcCtr&&i.on("timeupdate",function(){t.master.timeUpdate(i[0].currentTime)}),this.master.$bgmBtn.on(m,function(e){e.cancelBubble=!0,e.stopPropagation(),t.isManualPause=!t.audio.paused,t.audio.paused?t.startPlay(!0):t.stopPlay(!0)}),$(document.body).bind(m,e),this.startPlay()}},{key:"startPlay",value:function(e){function t(e){e.paused&&(4===e.readyState?e.paused&&(e.play(),n.manager.onPlay(n)):(e.load(),$(e).on("canplay",function(){n.$audio.off("canplay");var t=e.play();void 0!==t&&(t.then(function(){console.log("audio start play()")})["catch"](function(e){console.log(e)}),n.manager.onPlay(n))})))}var n=this,i=n.audio;i.paused&&(this.show(),!f()||e||v()||y()?t(i):n.haveRequestWx?t(i):this.wxJssdk.then(function(){wx.checkJsApi({jsApiList:["checkJsApi"],success:function(){n.haveRequestWx=!0,t(i)}})}))}},{key:"hide",value:function(){this.master.$bgmBtn&&this.master.$bgmBtn.hide(),this.stopPlay()}},{key:"show",value:function(){this.master.$bgmBtn&&this.master.$bgmBtn.show()}},{key:"stopPlay",value:function(e){function t(e){4===e.readyState?e.pause():(e.load(),$(e).on("canplay",function(){n.$audio.off("canplay"),e.pause()}))}var n=this;if(!f()||e||v()||y()){var i=n.audio;t(i)}else this.wxJssdk.then(function(){var e=n.audio;wx.checkJsApi({jsApiList:["checkJsApi"],success:function(){t(e)}})})}}]),t}(s);e.exports=P},function(e,t){"use strict";function n(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)})}e.exports=n},function(e,t,n){"use strict";function i(e,t){e instanceof jQuery||(e=$(e)),e.addClass(t).css("-webkit-animation-play-state","running")}function o(e,t,n){if(a("animation-play-state")&&!r())e instanceof jQuery||(e=$(e)),e.css("-webkit-animation-play-state","paused");else{var i=e instanceof jQuery?e.get(0):e,o=t instanceof jQuery?t.get(0):t,s=getComputedStyle(i).transform,c=getComputedStyle(o).transform;o.style.transform="none"===c?s:s.concat(" ",c),$(i).removeClass(n)}}var r=n(27).iphoneCheck,a=function(){var e=document.createElement("div"),t="Ms O Moz Webkit".split(" "),n=t.length;return function(i){if(i in e.style)return!0;for(i=i.replace(/^[a-z]/,function(e){return e.toUpperCase()});n--;)if(t[n]+i in e.style)return!0;return!1}}();e.exports={AnimationStart:i,AnimationEnd:o,supportCss3:a}},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(c){o=!0,r=c}finally{try{!i&&s["return"]&&s["return"]()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(798);var s=document.createElement("p"),c=n(799),l=function(){function e(t){var n=t.parentDom,i=t.lrc,r=t.lineCount,a=t.eqxScene;o(this,e),this.eqxScene=a,this.currentTime=0,this._state="init",this.lrc=this.parse(i),this.playLrc=[],this._nextTime=null,this.times=[],this.lineCount=r||6,this.initDom(n)}return a(e,[{key:"initDom",value:function(e){var t=this.dom=document.createElement("div");t.innerHTML=c,this.dom=t.querySelector(".lrc-controller"),this.eqxScene&&this.eqxScene.getOrientation().isLandScape()&&(this.dom.style.transform="rotate(90deg)",this.dom.style.top="225px",this.dom.style.left="-145px"),this.lrcTextDom=this.dom.querySelector(".lrc-text"),e&&e.append(this.dom)}},{key:"show",value:function(){var e=this.dom.className;e.indexOf("hide")!==-1&&(this.dom.className=e.replace(" hide",""))}},{key:"hide",value:function(){this.dom.className.indexOf("hide")===-1&&(this.dom.className+=" hide")}},{key:"parse",value:function(e){if(e){var t=e.split("\n"),n=/\[(\d+):(\d+)\.(\d+)\](.+)/,i=t.map(function(e){var t=e.match(n);if(t){var i=r(t,5),o=i[1],a=void 0===o?0:o,s=i[2],c=void 0===s?0:s,l=i[3],u=void 0===l?0:l,p=i[4],d=void 0===p?"":p,h=60*parseInt(a)*1e3+1e3*parseInt(c)+parseInt(u);return{lineTime:h,lineText:d}}});return i.filter(function(e){return e})}}},{key:"add",value:function(e){"string"==typeof e&&(this.lrc=this.parse(e))}},{key:"play",value:function(){switch(this.state){case"init":case"end":this._state="play",this.playLrc=this.lrc?[].concat(i(this.lrc)):[],this.pre();break;case"pause":this._state="play"}}},{key:"pause",value:function(){"play"===this.state&&(this._state="pause")}},{key:"end",value:function(){this._state="end",this.playLrc=[],this.times=[],this.lrcTextDom.innerHTML=""}},{key:"pre",value:function(){var e=this.playLrc;this.times=[];for(var t=Math.ceil(this.lineCount/2);t--;)this.lrcTextDom.appendChild(this.createLine("易企秀 音乐字幕"));for(var n=Math.ceil(this.lineCount/2),i=0;i<n;i++){var o=e.shift(),r=this.createLine(o.lineText);this.lrcTextDom.append(r),this.times.push(o.lineTime)}this._preTime=0,this._nextTime=this.times.shift()}},{key:"timeUpdate",value:function(e){"play"===this.state&&(e?this.timer(1e3*e):(this.end(),this._state="init",this.play()))}},{key:"timer",value:function(e){for(;e>=this._nextTime&&this.playLrc.length;){var t=this.playLrc.shift(),n=t.lineText,i=t.lineTime;this.times.push(i),this._preTime=this._nextTime,this._nextTime=this.times.shift();var o=this._nextTime-this._preTime,r=o<500;this.moveLine(n,r)}}},{key:"moveLine",value:function(e,t){var n=this.lrcTextDom,i=this.createLine(e);n.append(i);var o=n.firstElementChild,r=void 0,a=void 0;t?(r=" destroy-quick",a=100):(r=" destroy",a=550),o.className+=r,setTimeout(function(){n.removeChild(n.firstElementChild)},a)}},{key:"createLine",value:function(e){var t=s.cloneNode();return t.innerText=e,t}},{key:"state",get:function(){return this._state}}]),e}();e.exports=l},function(e,t){},function(e,t){e.exports='<div class="lrc-controller"><section class="lrc-text"></section></div>'},function(e,t,n){"use strict";function i(e){return r({url:o.SERVER_1+"eqs/s/lcy/getLcy/"+e}).then(function(e){return e.obj})}var o=n(24),r=n(23).$ajax;e.exports={getLrc:i}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(104),a=function(){function e(){i(this,e),this.subscriberMap={}}return o(e,[{key:"subscribe",value:function(e,t){var n=this.subscriberMap[e];n||(n=this.subscriberMap[e]=[]),n.includes(t)||n.push(t)}},{key:"removeAll",value:function(e){for(var t in this.subscriberMap)this.subscriberMap.hasOwnProperty(t)&&this.remove(t,e)}},{key:"remove",value:function(e,t){var n=this.subscriberMap[e];if(!n)return void(_DEBUG_&&console.error("remove subscriber form none existed event list"));var i=n.indexOf(t);i>-1&&n.splice(i,1)}},{key:"publish",value:function(e,t){var n=this.subscriberMap[e];return n?void n.forEach(function(n){return n.update(new r(e,t))}):void(_DEBUG_&&console.error("event "+e+" no subscriber!"))}}]),e}();e.exports=a},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return JSON.stringify(e)===JSON.stringify(t)}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(803).$postComment,s=n(803).$getCommentList,c=n(803).$getCommentSumNum,l=function(){function e(t){i(this,e),this.sceneId=t,this.comments=[],this.canLoadMore=!0,this.lastTime=0,this.registers=[],this.promise=null,this.sum_num=0}return r(e,[{key:"addComment",value:function(e){return!this.comments.find(function(t){return o(t,e)})&&(this.comments.push(e),!0)}},{key:"getComments",value:function(){return this.comments.sort(function(e,t){return t.createTime-e.createTime}),this.comments}},{key:"getCommentSumNum",value:function(){return c(this.sceneId)}},{key:"postComment",value:function(e){var t=this;return a(e).then(function(e){var n=e.obj;return t.addComment(n),t.publish(),n})}},{key:"publish",value:function(){this.registers.forEach(function(e){return e.updateComments()})}},{key:"loadInitComments",value:function(e){return this.promise?this.promise:(this.promise=this.loadMoreComments(e)["catch"](function(){}),this.promise)}},{key:"loadMoreComments",value:function(e){var t=this;return s({sceneId:this.sceneId,time:this.lastTime,size:e}).then(function(e){var n=e.list;return n.length?(t.lastTime=n[n.length-1].createTime,n=n.filter(function(e){return t.addComment(e)}),t.publish(),n):Promise.reject("")})}},{key:"register",value:function(e){this.registers.includes(e)||this.registers.push(e)}}]),e}();e.exports=l},function(e,t,n){"use strict";function i(e){var t=e.sceneId,n=e.size,i=e.time,o=a.SERVER_1+"eqs/s/scene/msg/list?sceneId="+t;return n&&(o+="&size="+n),i&&(o+="&lastTime="+i),o+="&date="+(new Date).getTime(),s({type:"GET",url:o})}function o(e){var t=a.SERVER_1+"eqs/s/scene/msg/count?sceneId="+e;return s({type:"GET",url:t})}function r(e){return s({type:"POST",url:a.SERVER_1+"eqs/s/scene/send/msg",data:e})}var a=n(24),s=n(23).ajax;e.exports={$getCommentList:i,$postComment:r,$getCommentSumNum:o}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return JSON.stringify(e)===JSON.stringify(t)}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(298),s=a.$getRawaryRecord,c=function(){function e(t){i(this,e),this.sceneId=t.id,this.user=t.userId||t.createUser,this.rewards=[],this.registers=[],this.promise=null}return r(e,[{key:"addReward",value:function(e){return!this.rewards.find(function(t){return o(t,e)})&&(this.rewards.push(e),!0)}},{key:"getRewards",value:function(){return this.rewards.sort(function(e,t){return t.createTime-e.createTime}),this.rewards}},{key:"publish",value:function(){this.registers.forEach(function(e){return e.updateRewards()})}},{key:"loadInitRewards",value:function(e){var t=this;return this.promise?this.promise:(this.promise=s({sceneId:this.sceneId,sceneCreateUser:this.user,pageNo:1,pageSize:e}).then(function(e){var n=e.list;n.forEach(function(e){return t.addReward(e)})})["catch"](function(){console.log("打赏记录数据获取失败")}),this.promise)}},{key:"register",value:function(e){this.registers.includes(e)||this.registers.push(e)}}]),e}();e.exports=c},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return a.includes(""+e.type)}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(117).FORM_COMPS,s=n(806),c=function(){function e(){i(this,e),this.submited=!1,this.fromCompList=[],this.checkSceneSensitiveWordObj={isChecked:!1,isSceneSensitive:!1}}return r(e,[{key:"add",value:function(e){if(o(e))if(this.fromCompList.includes(e)){if(_DEBUG_)throw new Error("Duplicate EQX form element "+e)}else this.fromCompList.push(e);else if(_DEBUG_)throw new Error("Invalid EQX Form Element "+e+", type: "+e.type)}},{key:"check",value:function(){for(var e={sms:[],jsonValue:""},t=[],n=!1,i=this.fromCompList.map(function(e){return e.check()}),o=0;o<i.length;o++){var r=i[o],a=r.success,s=r.key,c=r.value,l=r.type;if(!a)return r;r.type&&12==r.type?(e[s]=c.phoneValue,t.push({key:s,type:502,value:c.phoneValue})):(e[s]=c,t.push({key:s,type:l,value:c})),!n&&(n=/\d{12,}/.test(e[s])),r.type&&12==r.type&&!r.skip&&(e.sms.push(c),!n&&(n=/\d{12,}/.test(c)))}return t.length>0&&(e.jsonValue=JSON.stringify(t)),Object.values(e).every(function(e){return!e})?{success:!1,message:"请填写表单"}:{success:!0,form:e,isDataSensitive:n}}},{key:"checkSceneSensitiveWord",value:function(e){return this.checkSceneSensitiveWordObj.isChecked||(this.checkSceneSensitiveWordObj.isSceneSensitive=s.some(function(t){return e.sceneJson.list.some(function(e){var n=JSON.stringify(e).search(t);return n!==-1})}),this.checkSceneSensitiveWordObj.isChecked=!0),this.checkSceneSensitiveWordObj.isSceneSensitive}}]),e}();e.exports=c},function(e,t){"use strict";var n=["身份证","银行卡","shenfenzheng","yinhangka","identification ID","identification Card","ID Card","Personal ID","bank account","routing number","wire transfer number","bank card","bank id"];e.exports=n},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function d(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:d(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)},c=n(707),l=n(240).$getCountValues,u=n(117).COMP_TYPE,p=function(e){function t(e){i(this,t);var n=e.list.reduce(function(e,t){return e.concat(t.elements)},[]),r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return r.sceneJson=e,r.countIdArr=[],r.countValuesPromise=null,r}return r(t,e),a(t,[{key:"iterate",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"iterate",this).call(this),this.compJsonList.forEach(function(t){var n=u[t.type];"EqxCount"!==n||e.countIdArr.includes(t.id)||e.countIdArr.push(t.id)})}},{key:"getCountIds",value:function(){return this.countIdArr.join(",")}},{key:"getCounterValues",value:function(){if(this.countValuesPromise)return this.countValuesPromise;var e=this.getCountIds();if(e){var t=this.sceneJson.meta.id;this.countValuesPromise=l({sceneId:t,fieldIds:e}).then(function(e){return e.map})["catch"](function(){return{}})}else this.countValuesPromise=Promise.resolve({});return this.countValuesPromise}}]),t}(c);e.exports=p},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(809),c=n(104),l=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return r(t,e),a(t,[{key:"onPlay",value:function(e){if(this.agents.includes(e))switch(e.type){case 6:this.agents.forEach(function(t){t!==e&&6===t.type&&t.update(new c("hide")),5!==t.type||t.master.$context[0].paused||e.update(new c("pause"))}),this.agents.forEach(function(t){3===t.type&&(e.isSoundValid()||t.isManualPause?!e.isSoundValid()&&t.isManualPause?t.update(new c("show")):e.isSoundValid()&&t.update(new c("hide")):t.update(new c("play")))});break;case 3:this.agents.forEach(function(t){5!==t.type||t.master.$context[0].paused||e.update(new c("stop")),6===t.type&&t.audio&&!t.audio.paused&&e.update(new c("hide"))});break;case 5:this.agents.forEach(function(e){3===e.type?e.update(new c("stop")):6===e.type&&e.update(new c("pause"))});break;case 1:this.agents.forEach(function(t){t!==e&&(2===t.type||3===t.type||6===t.type?t.update(new c("down")):1===t.type&&(t.update(new c("stop")),t.update(new c("reset"))))});break;case 2:this.agents.forEach(function(t){3!==t.type&&6!==t.type||t.update(new c("down")),1!==t.type||t.audio.paused||e.update(new c("down"))});break;case 4:this.agents.forEach(function(e){2===e.type||3===e.type||6===e.type?e.update(new c("down")):1===e.type&&(e.update(new c("stop")),e.update(new c("reset")))});break;case 7:this.agents.forEach(function(t){3!==t.type&&6!==t.type&&6!==t.type||t.update(new c("down")),1!==t.type||t.audio.paused||e.update(new c("down"))})}}},{key:"onEnd",value:function(e){if(e||this.agents.includes(e))switch(e.type){case 5:this.agents.forEach(function(e){6===e.type?e.update(new c("play")):3!==e.type||e.isManualPause||e.update(new c("play"))});break;case 1:var t=null;t=this.agents.findIndex(function(e){return 1===e.type&&!e.audio.paused})!==-1,this.agents.forEach(function(e){2!==e.type||t||e.update(new c("restore"))}),t=this.agents.findIndex(function(e){return(1===e.type||2===e.type)&&!e.audio.paused})!==-1,!t&&this.agents.forEach(function(e){3!==e.type&&6!==e.type||e.update(new c("restore"))});break;case 2:var n=!1;this.agents.forEach(function(t){t===e||1!==t.type&&2!==t.type||t.audio.paused||(n=!0)}),!n&&this.agents.forEach(function(e){3!==e.type&&6!==e.type||e.update(new c("restore"))});break;case 4:var i=null;i=this.agents.findIndex(function(e){return 1===e.type&&!e.audio.paused})!==-1,this.agents.forEach(function(e){2!==e.type||i||e.update(new c("restore"))}),i=this.agents.findIndex(function(e){return(1===e.type||2===e.type)&&!e.audio.paused})!==-1,!i&&this.agents.forEach(function(e){3!==e.type&&6!==e.type||e.update(new c("restore"))});break;case 7:var o=null;o=this.agents.findIndex(function(e){return 1===e.type&&!e.audio.paused})!==-1,this.agents.forEach(function(e){2!==e.type||o||e.update(new c("restore"))}),o=this.agents.findIndex(function(e){return(1===e.type||2===e.type)&&!e.audio.paused})!==-1,!o&&this.agents.forEach(function(e){3!==e.type&&6!==e.type||e.update(new c("restore"))});break;case 6:this.agents.forEach(function(e){3!==e.type||e.isManualPause||e.update(new c("play"))})}}},{key:"stopAll",value:function(){this.agents.forEach(function(e){e.audio&&!e.audio.paused&&e.update(new c("stop"))})}},{key:"restoreAll",value:function(){this.agents.forEach(function(e){3===e.type&&e.audio.paused&&!e.isManualPause&&e.update(new c("play"))})}}]),t}(s);e.exports=l},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t){n(this,e),this.agents=[],this.predict=t}return i(e,[{key:"add",value:function(e){this.predict&&!this.predict.call(this,e)||this.agents.includes(e)||this.agents.push(e)}},{key:"remove",value:function(e){var t=this.agents.indexOf(e);t>-1&&this.agents.splice(t,1)}}]),e}();e.exports=o},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(809),c=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.eqxScene=e,n}return r(t,e),a(t,[{key:"perfectPageEffect",value:function(e){var t=e.pageJson.properties.effect;if(t){var n=e.height||486;if("scratch"===t.name){var i=e.$pageDiv.find(".tip__landscape"),o=i.height()||0,r=i.width()||180;i&&i.css({top:(n-r)/2-o})}}}}]),t}(s);e.exports=c},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(809),c=(n(65).AD_TYPE,function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.eqxScene=e,n}return r(t,e),a(t,[{key:"tryCatchFn",value:function(e){var t=this;return function(n){try{e.call(t,n)}catch(i){console.log(i)}}}},{key:"trackReport",value:function(e){window._tracker_api_&&window._tracker_api_.report(e)}},{key:"report",value:function(e){this.tryCatchFn(this.trackReport)(e)}},{key:"lastPageClickTrack",value:function(e){this.isLastPage()&&this.tryCatchFn(this.handleLastPageClickTrack)(e)}},{key:"lastPageTrack",value:function(e){this.isLastPage(e)&&"view"==this.eqxScene.config.mode&&this.tryCatchFn(this.handleLastPageTrack)()}},{key:"isLastPage",value:function(e){e||(e=this.eqxScene.currentPage);var t=this.eqxScene.eqxPageList.indexOf(e);return this.eqxScene.eqxPageList.length-1===t}},{key:"handleLastPageTrack",value:function(){var e={scene_id:window.scene.id,product:"h5",e_t:"element_view",b_t:"h5_last_page",cat:"",act:"h5尾页曝光"};e.cat="尾页组件",e.cat&&this.trackReport(e)}},{key:"handleLastPageClickTrack",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.cat="尾页组件",e.cat&&this.trackReport(e)}}]),t}(s));e.exports=c},function(e,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,
configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){i(this,e),this.eventListener={onmessage:[]},this[t]&&this[t]()}return o(e,[{key:"onmessage",value:function(){var e=this;window.onmessage=function(t){try{var n=t.data;"string"==typeof n&&(n=JSON.parse(t.data)),e.eventListener.onmessage.forEach(function(e){e.callback(n)})}catch(i){}}}},{key:"hasSubscribe",value:function(e,t){return e.find(function(e){return e[t]===t})}},{key:"subscribe",value:function(e,t,i){if(e&&i){var o=this.eventListener[i];if(o&&!this.hasSubscribe(o,e)){var r;o.push((r={},n(r,e,e),n(r,"callback",t),r))}}}}]),e}();e.exports=r},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function h(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:h(o,t,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)},c=n(169),l=n(117).COMP_TYPE,u=n(170),p=n(716),d=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.eqxScene.currentPage._formMaskPage=r,r._domRendered=!1,r}return r(t,e),a(t,[{key:"create$section",value:function(e){function t(){var t=i(e.compJson,0);t.css.top=10;var n=[t],s=10+t.css.height;return o(n),r(s),a.getEqxCompById(t.id)}function n(){var e=0,t=0,n=h.slice().filter(function(e){var t=e.type;return l[t].indexOf("EqxInput")>-1}).sort(function(e,t){var n=e.id,i=t.id,o=$("#inside_"+n)[0].getBoundingClientRect(),r=320-o.left-o.width,a=$("#inside_"+i)[0].getBoundingClientRect(),s=320-a.left-a.width,c=Math.sqrt(s*s+a.top*a.top),l=Math.sqrt(r*r+o.top*o.top);return l-c}).map(function(n,o){var r=10,a=i(n,o);return 0===o?(t=a.css.height+r,a.css.top=r):(a.css.top=t+r,t+=a.css.height+r),a.css.left=10,a.css.width=300,a.css.top>e&&(e=a.css.top+a.css.height),a});o(n),r(e),n.forEach(function(e){var t=e.id,n=a.$editDiv.find("#"+t),i=null;t&&(i=$("#"+t.replace("_mask",""))),i&&n.val(i.val())})}function i(e,t){var n=JSON.parse(JSON.stringify(e));return n.id=n.id+"_mask",n.num=t+1,n.css.zIndex=t+1,n.css.transform="rotateZ(0deg)",n.css.left=a.eqxScene.width/2-n.css.width/2,n}function o(e){var t={id:a._generateLayerId(),items:e,compIds:e.map(function(e){return e.id}),zIndex:1};a.eqxLayerList=[new p(t,a)],a.$editDiv.append(a.eqxLayerList.map(function(e){return e.render()}))}function r(e){var t=$('<div class="input-mask-page__btn">确定</div>');t.css({top:e+10}),t.on("click",function(e){e.stopPropagation(),a.hide()}),a.$section.find("#edit_area").css({marginTop:"unset",transform:"unset",top:0,left:0}),a.$editDiv.append(t)}var a=this,s=this.eqxScene.currentPage.toPageJson(),c=s.num,d=s.id,h=s.elements;switch(this.$section=$(u.inputMaskSection()),this.section=this.$section[0],this.$pageDiv=$(u.pageDiv("input-mask-"+c)),this.$editDiv=$(u.editDiv(d)),this.$pageDiv.append(this.$editDiv),this.$section.append(this.$pageDiv),this.$section.on("touchstart mousedown touchmove mousemove touchend mouseup",function(e){e.stopPropagation()}),""+e.type){case"12":var f=t(),g=f.id,m=a.$editDiv.find("#"+g),v=null;g&&(v=$("#"+g.replace("_mask",""))),v&&(m.find(".telephone").val(v.find(".telephone").val()),m.find(".smsInput").val(v.find(".smsInput").val()));break;case"b":var y=t();y.eleShow();break;default:n()}return this.$section}},{key:"show",value:function(e){this.eqxScene.currentPage.$section.append(this.create$section(e)),this.$section.css("display","inline-block"),e&&setTimeout(function(){$("#"+e.id+"_mask").focus(),setTimeout(function(){$("#"+e.id+"_mask")[0].scrollIntoViewIfNeeded()},100)},0)}},{key:"hide",value:function(){this.$section.css("display","none"),this.$section.remove()}},{key:"destroy",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}}]),t}(c);e.exports=d},function(e,t,n){var i,o,r;!function(a,s){o=[t,n(815),n(817),n(818),n(819),n(820)],i=s,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(this,function(e,t,n,i,o,r){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0}),e.detailedDiff=e.updatedDiff=e.deletedDiff=e.diff=e.addedDiff=void 0;var s=a(t),c=a(n),l=a(i),u=a(o),p=a(r);e.addedDiff=c["default"],e.diff=s["default"],e.deletedDiff=l["default"],e.updatedDiff=u["default"],e.detailedDiff=p["default"]})},function(e,t,n){var i,o,r;!function(a,s){o=[e,t,n(816)],i=s,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(this,function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function a(e,t){if(e===t)return{};if(!(0,n.isObject)(e)||!(0,n.isObject)(t))return t;var r=(0,n.properObject)(e),s=(0,n.properObject)(t),c=Object.keys(r).reduce(function(e,t){return s.hasOwnProperty(t)?e:o({},e,i({},t,void 0))},{});return(0,n.isDate)(r)||(0,n.isDate)(s)?r.valueOf()==s.valueOf()?{}:s:Object.keys(s).reduce(function(e,t){if(!r.hasOwnProperty(t))return o({},e,i({},t,s[t]));var c=a(r[t],s[t]);return(0,n.isObject)(c)&&(0,n.isEmpty)(c)&&!(0,n.isDate)(c)?e:o({},e,i({},t,c))},c)};t["default"]=r,e.exports=t["default"]})},function(e,t,n){var i,o,r;!function(n,a){o=[t],i=a,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(this,function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=(e.isDate=function(e){return e instanceof Date},e.isEmpty=function(e){return 0===Object.keys(e).length},e.isObject=function(e){return null!=e&&"object"===("undefined"==typeof e?"undefined":n(e))});e.properObject=function(e){return i(e)&&!e.hasOwnProperty?t({},e):e}})},function(e,t,n){var i,o,r;!function(a,s){o=[e,t,n(816)],i=s,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(this,function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function a(e,t){if(e===t||!(0,n.isObject)(e)||!(0,n.isObject)(t))return{};var r=(0,n.properObject)(e),s=(0,n.properObject)(t);return Object.keys(s).reduce(function(e,t){if(r.hasOwnProperty(t)){var c=a(r[t],s[t]);return(0,n.isObject)(c)&&(0,n.isEmpty)(c)?e:o({},e,i({},t,c))}return o({},e,i({},t,s[t]))},{})};t["default"]=r,e.exports=t["default"]})},function(e,t,n){var i,o,r;!function(a,s){o=[e,t,n(816)],i=s,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(this,function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function a(e,t){if(e===t||!(0,n.isObject)(e)||!(0,n.isObject)(t))return{};var r=(0,n.properObject)(e),s=(0,n.properObject)(t);return Object.keys(r).reduce(function(e,t){if(s.hasOwnProperty(t)){var c=a(r[t],s[t]);return(0,n.isObject)(c)&&(0,n.isEmpty)(c)?e:o({},e,i({},t,c))}return o({},e,i({},t,void 0))},{})};t["default"]=r,e.exports=t["default"]})},function(e,t,n){var i,o,r;!function(a,s){o=[e,t,n(816)],i=s,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(this,function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function a(e,t){if(e===t)return{};if(!(0,n.isObject)(e)||!(0,n.isObject)(t))return t;var r=(0,n.properObject)(e),s=(0,n.properObject)(t);return(0,n.isDate)(r)||(0,n.isDate)(s)?r.valueOf()==s.valueOf()?{}:s:Object.keys(s).reduce(function(e,t){if(r.hasOwnProperty(t)){var c=a(r[t],s[t]);return(0,n.isObject)(c)&&(0,n.isEmpty)(c)&&!(0,n.isDate)(c)?e:o({},e,i({},t,c))}return e},{})};t["default"]=r,e.exports=t["default"]})},function(e,t,n){var i,o,r;!function(a,s){o=[e,t,n(817),n(818),n(819)],i=s,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(this,function(e,t,n,i,o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n),s=r(i),c=r(o),l=function(e,t){return{added:(0,a["default"])(e,t),deleted:(0,s["default"])(e,t),updated:(0,c["default"])(e,t)}};t["default"]=l,e.exports=t["default"]})},function(e,t){},function(e,t,n){"use strict";function i(e,t){return r()||t||e.map.wxComponent?function(n){var i=n.type,o=n.id,r=n.properties.type;if(t){var s=t.headimgurl,c=t.nickname;"201"==i&&"own"==r&&(n.content=c),"401"==i&&"own"==r&&(s&&(n.properties.src=s),delete n.properties.imgStyle)}var l=e.map.wxComponent,u=void 0===l?{shareUserName:"",shareUserHeader:""}:l,p=u.shareUserName,d=u.shareUserHeader;(p||d)&&(console.log("------替换了微信头像组件的内容222------"),"201"==i&&"share"==r&&p&&(n.content=p),"401"==i&&"share"==r&&d&&(d&&(n.properties.src=d),delete n.properties.imgStyle)),"201"!=i&&"401"!=i||"share"!=r||a.generateUserKey(),u[o]&&(n.serverId=u[o])}:o}var o=n(32).noop,r=n(27).isWeixin,a=n(69);e.exports={wxAdaptor:i}},function(e,t,n){"use strict";function i(e){var t=n(69),i=t.getWeChatUser;try{var o=window===window.parent,a=s();o&&a&&r().then(function(){if(!window.marketComp){var t=document.getElementById("nr"),n={container:t,code:e.meta.code,type:"card",wxSetting:i(),instance:e};window.marketComp=new window.EqxMarketComp(n)}})}catch(c){console.log(c)}}var o=n(25),r=o.$loadMarketComp,a=n(40),s=a.hasMarketComp;e.exports={renderMarketComp:i}},function(e,t,n){"use strict";function i(){return o()}var o=n(67).AdBeforeOption;e.exports={beforeStartHook:i}},function(e,t,n){"use strict";function i(e){var t=$(".loading"),n=$(".loading-prev");if(e.property.logoProp&&e.property.logoProp.properties){n.css({display:"block"});var i=e.property.logoProp,r=$(".load-prev-bg"),u="url("+l+")";i.properties.logoImgCut&&(u="url("+a.FILE+i.properties.logoImgCut+")"),r.css({background:u});var p=$(".logo-bg-img");if((i.properties.opacity||0===i.properties.opacity)&&p.css({opacity:i.properties.opacity}),i.properties.bgImgCut&&p.css({background:"url("+a.FILE+i.properties.bgImgCut+")"}),i.properties.bgColor){var d=$(".logo-bg-color");d.css({background:i.properties.bgColor})}if(i.properties.progressBarOn){var h=$(".progressBar");h.css({display:"block"});var f=$(".bar");f.css({background:i.properties.progressBarColor})}i.animType!==-1&&o(i.animType)}else if(e.loadingLogo){var g=a.FILE+scene.loadingLogo;t[0].innerHTML='<div class="loading-logo"><img src="'+g+'" class="logo-image"></div>'}else{var m='    <div class="noCustomLogo">\n                            <div class="loadbox">\n                                <div class="loadlogo"></div>\n                                <div class="loadbg2">\n                                    <img src='+(a.FILE+"Fif96fvi2Y5O5sm_kvH_rj8p9H0R")+'>\n                                </div>\n                            </div>\n                            <div class="loading-tip">欢迎制作易企秀</div>\n                        </div>';t[0].innerHTML=m,c()&&s(e)}}function o(e){if(e!=-1){var t=$("#logoImg"),n=r[e];t.css({"animation-name":"","animation-duration":"","animation-timing-function":"","animation-delay":"","animation-iteration-count":""}),t.css({"animation-name":n[0],"animation-duration":"1s","animation-timing-function":"liner","animation-iteration-count":1,"animation-direction":"both","animation-fill-mode":"both","animation-play-state":"initial"})}}var r=n(120).ANIMATION_TYPE,a=n(24),s=n(55).customLoadingPage,c=n(55).getLogoLoadingConfig,l=n(826);e.exports={addLoadingLogo:i}},function(e,t,n){e.exports=n.p+"images/logo-746df5.gif"},function(e,t,n){"use strict";var i=n(67),o=(i.getForbiddenTexts,i.getForbiddenImages),r=n(69).getWxJSSDK,a=n(121),s=n(828),c=[{name:"EqxImage",type:4,fn:{getForbiddenImages:o,getWxJSSDK:r}},{name:"EqxInteractiveVideo",type:"o",fn:{getWxJSSDK:r,triggerEvent:a}},{name:"EqxVideo",type:"v",fn:{videoConst:s}}];e.exports=c},function(e,t){"use strict";var n={CUSTOM:1,DEFAULT:2,FILMSTYLE:3,TVSTYLE:4},i={POP:0,INLINE:1},o=[{value:n.DEFAULT,name:"默认",icon:"eqf-play-f"},{value:n.FILMSTYLE,name:"胶片风",icon:"eqf-livetow-f"},{value:n.TVSTYLE,name:"TV风",icon:"eqf-live-f"},{value:n.CUSTOM,name:"自定义",icon:"eqf-plus"}];e.exports={POP_PLAY_BTN_STYLE:o,POP_PLAY_BTN_STYLE_MAP:n,STYLE:i}}]);